{"version":3,"file":"solclient-full.js","mappings":";AAAA,UAA2CA,MAAMC;IAChD,IAAsB,aAAnB,OAAOC,WAA0C,aAAlB,OAAOC,QACxCA,OAAOD,UAAUD,QAAQ,QACrB,IAAqB,eAAlB,OAAOG,UAAyBA,OAAOC,KAC9CD,OAAO,UAAU,IAAIH,OAAO,QACxB,IAAsB,aAAnB,OAAOC,SACdA,QAAQ,YAAYD,QAAQ,QAE5BD,KAAK,YAAYC,QAAQ;AAC1B,EAAEK,MAAM;IACT;;;gBCRAH,OAAOD,UAAU,oBAAjB;;;gBCFA,MAAQK,SAAW,oBAAQ,2CAAc,EAAjCA;gBACR,MAAQC,OAAS,oBAAQ,yCAAY,EAA7BA;gBACR,MAAQC,UAAY,oBAAQ,4CAAe,EAAnCA;gBACR,MAAQC,MAAQ,oBAAQ,wCAAW,EAA3BA;gBACR,MAAQC,OAAS,oBAAQ,yCAAY,EAA7BA;gBAERR,OAAOD,QAAQK,SAASA;gBACxBJ,OAAOD,QAAQM,OAAOA;gBACtBL,OAAOD,QAAQO,UAAUA;gBACzBN,OAAOD,QAAQQ,MAAMA;gBACrBP,OAAOD,QAAQS,OAAOA;;;;gBCAtB,MAAMC,UAAU;gBAChB,MAAMC,UAAU,EACd,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAC7B,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAC7B,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAC7B,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAC7B,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAC7B,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,IAC5B,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAC5B,IAAI,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAG7B,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GACtB,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IACzB,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAC5B,IAAI,IAAI,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAC7B,CAAC,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAC5B,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAC5B,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAC5B,IAAI,IAAI,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAG7B,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAC7B,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAC7B,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAC7B,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAC7B,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAC7B,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAC7B,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAC7B,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAG7B,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAC7B,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAC7B,CAAC,GAAG,C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AAK,GAAG,GAAG,GAAG,KAAK,KAAK,KAAK,IAAI,KAAK,GAAG,GAAG,GAAG,KAAK,KAAK,KAAK,IAAI,KAAK,GAAG,GAAG,GAAG,KAAK,KAAK,KAAK,IAAI,KAAK,GAAG,GAAG,GAAG,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI,IAAI,GAAG,GAAG,KAAK,IAAI,GAAG,KAAK,IAAI,GAAG,KAAK,IAAI,IAAI,KAAK,KAAK,IAAI,GAAG,KAAK,IAAI,GAAG,KAAK,IAAI,IAAI,KAAK,KAAK,KAAK,IAAI,GAAG,IAAI,IAAI,KAAK,KAAK,IAAI,GAAG,IAAI,GAAG,KAAK,IAAI,IAAI,GAAG,GAAG,KAAK,IAAI,GAAG,KAAK,IAAI,GAAG,KAAK,IAAI,IAAI,KAAK,KAAK,IAAI,GAAG,KAAK,IAAI,GAAG,KAAK,IAAI,IAAI,KAAK,KAAK,KAAK,IAAI,GAAG,IAAI,IAAI,KAAK,KAAK,IAAI,GAAG,IAAI,GAAG,KAAK,IAAI,IAAI,GAAG,GAAG,KAAK,IAAI,GAAG,KAAK,IAAI,GAAG,KAAK,IAAI,IAAI,KAAK,KAAK,IAAI,GAAG,KAAK,IAAI,GAAG,KAAK,IAAI,IAAI,KAAK,KAAK,KAAK,IAAI,GAAG,IAAI,IAAI,KAAK,KAAK,IAAI,GAAG,IAAI,GAAG,KAAK,IAAI,IAAI,GAAG,GAAG,KAAK,IAAI,GAAG,KAAK,IAAI,GAAG,KAAK,IAAI,IAAI,KAAK,KAAK,IAAI,GAAG,KAAK,IAAI,GAAG,KAAK,IAAI,IAAI,KAAK,KAAK,KAAK,IAAI,GAAG,IAAI,IAAI,KAAK,KAAK,IAAI,GAAG,IAAI,GAAG,KAAK,IAAI,IAAI,GAAG,GAAG,KAAK,IAAI,GAAG,KAAK,IAAI,GAAG,KAAK,IAAI,IAAI,KAAK,KAAK,IAAI,GAAG,KAAK,IAAI,GAAG,KAAK,IAAI,IAAI,KAAK,KAAK,KAAK,IAAI,GAAG,IAAI,IAAI,KAAK,KAAK,IAAI,GAAG,IAAI,GAAG,KAAK,IAAG,CAAC,GAAG,EAAE,EAAEzE;AAE9sC,sBADE,OAAO20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","sources":["webpack://solace/webpack/universalModuleDefinition","webpack://solace/./index.js","webpack://solace/./modules/solclient-convert/api.js","webpack://solace/./modules/solclient-convert/lib/base64.js","webpack://solace/./modules/solclient-convert/lib/bits.js","webpack://solace/./modules/solclient-convert/lib/convert.js","webpack://solace/./modules/solclient-convert/lib/hex.js","webpack://solace/./modules/solclient-convert/lib/long.js","webpack://solace/./modules/solclient-core/api-internal.js","webpack://solace/./modules/solclient-core/api.js","webpack://solace/./modules/solclient-debug/api.js","webpack://solace/./modules/solclient-debug/lib/debug.js","webpack://solace/./modules/solclient-destination/api.js","webpack://solace/./modules/solclient-destination/lib/destination-from-network.js","webpack://solace/./modules/solclient-destination/lib/destination-type.js","webpack://solace/./modules/solclient-destination/lib/destination-util.js","webpack://solace/./modules/solclient-destination/lib/destination.js","webpack://solace/./modules/solclient-destination/lib/queue.js","webpack://solace/./modules/solclient-destination/lib/subscription-info.js","webpack://solace/./modules/solclient-destination/lib/topic.js","webpack://solace/./modules/solclient-env/api.js","webpack://solace/./modules/solclient-error/api.js","webpack://solace/./modules/solclient-error/lib/error-response-subcode-mapper.js","webpack://solace/./modules/solclient-error/lib/error-subcodes.js","webpack://solace/./modules/solclient-error/lib/not-implemented-error.js","webpack://solace/./modules/solclient-error/lib/operation-error.js","webpack://solace/./modules/solclient-error/lib/request-error.js","webpack://solace/./modules/solclient-error/lib/request-event-codes.js","webpack://solace/./modules/solclient-error/lib/solace-error.js","webpack://solace/./modules/solclient-eskit/api.js","webpack://solace/./modules/solclient-eskit/lib/array-operations.js","webpack://solace/./modules/solclient-eskit/lib/assert.js","webpack://solace/./modules/solclient-eskit/lib/bidi-map.js","webpack://solace/./modules/solclient-eskit/lib/enum.js","webpack://solace/./modules/solclient-eskit/lib/iterator.js","webpack://solace/./modules/solclient-eskit/lib/lazy.js","webpack://solace/./modules/solclient-eskit/lib/make-map.js","webpack://solace/./modules/solclient-eskit/lib/mixin.js","webpack://solace/./modules/solclient-eskit/lib/resolver.js","webpack://solace/./modules/solclient-eskit/lib/set-operations.js","webpack://solace/./modules/solclient-events/api.js","webpack://solace/./modules/solclient-events/lib/event-emitter.js","webpack://solace/./modules/solclient-events/lib/timer.js","webpack://solace/./modules/solclient-factory/api.js","webpack://solace/./modules/solclient-factory/lib/profile-binding.js","webpack://solace/./modules/solclient-factory/lib/solclient-factory-profiles.js","webpack://solace/./modules/solclient-factory/lib/solclient-factory-properties.js","webpack://solace/./modules/solclient-factory/lib/solclient-factory.js","webpack://solace/./modules/solclient-flow/api.js","webpack://solace/./modules/solclient-flow/lib/flow-operation.js","webpack://solace/./modules/solclient-flow/lib/flow.js","webpack://solace/./modules/solclient-flow/lib/private-flow-event-names.js","webpack://solace/./modules/solclient-fsm/api.js","webpack://solace/./modules/solclient-fsm/lib/entry-point.js","webpack://solace/./modules/solclient-fsm/lib/event.js","webpack://solace/./modules/solclient-fsm/lib/exit-point.js","webpack://solace/./modules/solclient-fsm/lib/object.js","webpack://solace/./modules/solclient-fsm/lib/state-context.js","webpack://solace/./modules/solclient-fsm/lib/state-machine.js","webpack://solace/./modules/solclient-fsm/lib/state.js","webpack://solace/./modules/solclient-log/api.js","webpack://solace/./modules/solclient-log/lib/console-log-impl.js","webpack://solace/./modules/solclient-log/lib/global-binding.js","webpack://solace/./modules/solclient-log/lib/log-impl.js","webpack://solace/./modules/solclient-log/lib/log-levels.js","webpack://solace/./modules/solclient-message-consumer/api.js","webpack://solace/./modules/solclient-message-consumer/lib/application-acks.js","webpack://solace/./modules/solclient-message-consumer/lib/consumer-flows.js","webpack://solace/./modules/solclient-message-consumer/lib/consumer-fsm-event-names.js","webpack://solace/./modules/solclient-message-consumer/lib/consumer-fsm-event.js","webpack://solace/./modules/solclient-message-consumer/lib/consumer-fsm.js","webpack://solace/./modules/solclient-message-consumer/lib/consumer-state-names.js","webpack://solace/./modules/solclient-message-consumer/lib/message-consumer-acknowledge-modes.js","webpack://solace/./modules/solclient-message-consumer/lib/message-consumer-event-names.js","webpack://solace/./modules/solclient-message-consumer/lib/message-consumer-event.js","webpack://solace/./modules/solclient-message-consumer/lib/message-consumer-properties-validator.js","webpack://solace/./modules/solclient-message-consumer/lib/message-consumer-properties.js","webpack://solace/./modules/solclient-message-consumer/lib/message-consumer.js","webpack://solace/./modules/solclient-message-consumer/lib/message-dispatcher.js","webpack://solace/./modules/solclient-message-consumer/lib/queue-browser-event-names.js","webpack://solace/./modules/solclient-message-consumer/lib/queue-browser-properties.js","webpack://solace/./modules/solclient-message-consumer/lib/queue-browser.js","webpack://solace/./modules/solclient-message-consumer/lib/transport-acks.js","webpack://solace/./modules/solclient-message-publisher/api.js","webpack://solace/./modules/solclient-message-publisher/lib/message-ids.js","webpack://solace/./modules/solclient-message-publisher/lib/message-publisher-acknowledge-modes.js","webpack://solace/./modules/solclient-message-publisher/lib/message-publisher-event-names.js","webpack://solace/./modules/solclient-message-publisher/lib/message-publisher-properties-validator.js","webpack://solace/./modules/solclient-message-publisher/lib/message-publisher-properties.js","webpack://solace/./modules/solclient-message-publisher/lib/message-publisher.js","webpack://solace/./modules/solclient-message-publisher/lib/publisher-fsm-event-names.js","webpack://solace/./modules/solclient-message-publisher/lib/publisher-fsm-event.js","webpack://solace/./modules/solclient-message-publisher/lib/publisher-fsm.js","webpack://solace/./modules/solclient-message-publisher/lib/publisher-state-names.js","webpack://solace/./modules/solclient-message-tracing/api.js","webpack://solace/./modules/solclient-message-tracing/lib/baggage.js","webpack://solace/./modules/solclient-message-tracing/lib/message-trace-context-setter.js","webpack://solace/./modules/solclient-message-tracing/lib/message-trace-context.js","webpack://solace/./modules/solclient-message-tracing/lib/message-tracing-support.js","webpack://solace/./modules/solclient-message/api.js","webpack://solace/./modules/solclient-message/lib/message-cache-status.js","webpack://solace/./modules/solclient-message/lib/message-delivery-mode-types.js","webpack://solace/./modules/solclient-message/lib/message-dump-flags.js","webpack://solace/./modules/solclient-message/lib/message-dump-standard-provider.js","webpack://solace/./modules/solclient-message/lib/message-dump-util.js","webpack://solace/./modules/solclient-message/lib/message-outcomes.js","webpack://solace/./modules/solclient-message/lib/message-types.js","webpack://solace/./modules/solclient-message/lib/message-user-cos-types.js","webpack://solace/./modules/solclient-message/lib/message.js","webpack://solace/./modules/solclient-message/lib/replication-group-message-id.js","webpack://solace/./modules/solclient-queue/api.js","webpack://solace/./modules/solclient-queue/lib/abstract-queue-descriptor.js","webpack://solace/./modules/solclient-queue/lib/queue-access-types.js","webpack://solace/./modules/solclient-queue/lib/queue-descriptor-validator.js","webpack://solace/./modules/solclient-queue/lib/queue-descriptor.js","webpack://solace/./modules/solclient-queue/lib/queue-discard-behaviors.js","webpack://solace/./modules/solclient-queue/lib/queue-permissions.js","webpack://solace/./modules/solclient-queue/lib/queue-properties-validator.js","webpack://solace/./modules/solclient-queue/lib/queue-properties.js","webpack://solace/./modules/solclient-queue/lib/queue-types.js","webpack://solace/./modules/solclient-replaystart/api.js","webpack://solace/./modules/solclient-replaystart/lib/replayStartLocation.js","webpack://solace/./modules/solclient-replaystart/lib/replayStartLocationBeginning.js","webpack://solace/./modules/solclient-replaystart/lib/replayStartLocationDate.js","webpack://solace/./modules/solclient-sdt/api.js","webpack://solace/./modules/solclient-sdt/lib/codec/api.js","webpack://solace/./modules/solclient-sdt/lib/codec/encode-header.js","webpack://solace/./modules/solclient-sdt/lib/codec/encode-integer.js","webpack://solace/./modules/solclient-sdt/lib/codec/encode-map.js","webpack://solace/./modules/solclient-sdt/lib/codec/encode-single-element.js","webpack://solace/./modules/solclient-sdt/lib/codec/encode-stream.js","webpack://solace/./modules/solclient-sdt/lib/codec/ieee754lib.js","webpack://solace/./modules/solclient-sdt/lib/codec/parse-destination.js","webpack://solace/./modules/solclient-sdt/lib/codec/parse-field-header.js","webpack://solace/./modules/solclient-sdt/lib/codec/parse-float.js","webpack://solace/./modules/solclient-sdt/lib/codec/parse-integer.js","webpack://solace/./modules/solclient-sdt/lib/codec/parse-map.js","webpack://solace/./modules/solclient-sdt/lib/codec/parse-single-element.js","webpack://solace/./modules/solclient-sdt/lib/codec/parse-stream.js","webpack://solace/./modules/solclient-sdt/lib/sdt-data-types.js","webpack://solace/./modules/solclient-sdt/lib/sdt-destination-types.js","webpack://solace/./modules/solclient-sdt/lib/sdt-field-types.js","webpack://solace/./modules/solclient-sdt/lib/sdt-field.js","webpack://solace/./modules/solclient-sdt/lib/sdt-map-container.js","webpack://solace/./modules/solclient-sdt/lib/sdt-stream-container.js","webpack://solace/./modules/solclient-sdt/lib/sdt-unsupported-value-error.js","webpack://solace/./modules/solclient-sdt/lib/sdt-value-error-subcodes.js","webpack://solace/./modules/solclient-sdt/lib/validate-sdt-field.js","webpack://solace/./modules/solclient-session/api.js","webpack://solace/./modules/solclient-session/lib/authentication-schemes.js","webpack://solace/./modules/solclient-session/lib/capability-types.js","webpack://solace/./modules/solclient-session/lib/correlated-request.js","webpack://solace/./modules/solclient-session/lib/default-capabilities.js","webpack://solace/./modules/solclient-session/lib/global-context.js","webpack://solace/./modules/solclient-session/lib/host-list-dns-filter.js","webpack://solace/./modules/solclient-session/lib/host-list.js","webpack://solace/./modules/solclient-session/lib/message-rx-cb-info.js","webpack://solace/./modules/solclient-session/lib/mutable-session-properties.js","webpack://solace/./modules/solclient-session/lib/outstanding-data-request.js","webpack://solace/./modules/solclient-session/lib/p2p-util.js","webpack://solace/./modules/solclient-session/lib/session-event-cb-info.js","webpack://solace/./modules/solclient-session/lib/session-event-codes.js","webpack://solace/./modules/solclient-session/lib/session-event-names.js","webpack://solace/./modules/solclient-session/lib/session-event.js","webpack://solace/./modules/solclient-session/lib/session-fsm-event.js","webpack://solace/./modules/solclient-session/lib/session-fsm.js","webpack://solace/./modules/solclient-session/lib/session-operations.js","webpack://solace/./modules/solclient-session/lib/session-properties-validator.js","webpack://solace/./modules/solclient-session/lib/session-properties.js","webpack://solace/./modules/solclient-session/lib/session-request-types.js","webpack://solace/./modules/solclient-session/lib/session-state-names.js","webpack://solace/./modules/solclient-session/lib/session-states.js","webpack://solace/./modules/solclient-session/lib/session.js","webpack://solace/./modules/solclient-session/lib/ssl-downgrades.js","webpack://solace/./modules/solclient-session/lib/subscription-update-timeout-messages.js","webpack://solace/./modules/solclient-smf/api.js","webpack://solace/./modules/solclient-smf/lib/codec/adprotocol.js","webpack://solace/./modules/solclient-smf/lib/codec/api.js","webpack://solace/./modules/solclient-smf/lib/codec/client-ctrl.js","webpack://solace/./modules/solclient-smf/lib/codec/content-summary-element.js","webpack://solace/./modules/solclient-smf/lib/codec/content-summary-types.js","webpack://solace/./modules/solclient-smf/lib/codec/decode.js","webpack://solace/./modules/solclient-smf/lib/codec/encode.js","webpack://solace/./modules/solclient-smf/lib/codec/param-parse.js","webpack://solace/./modules/solclient-smf/lib/codec/parse-smf.js","webpack://solace/./modules/solclient-smf/lib/codec/priority-user-cos-map.js","webpack://solace/./modules/solclient-smf/lib/codec/smp.js","webpack://solace/./modules/solclient-smf/lib/codec/transport.js","webpack://solace/./modules/solclient-smf/lib/message-objects/adprotocol-message.js","webpack://solace/./modules/solclient-smf/lib/message-objects/api.js","webpack://solace/./modules/solclient-smf/lib/message-objects/base-message.js","webpack://solace/./modules/solclient-smf/lib/message-objects/binary-meta-block.js","webpack://solace/./modules/solclient-smf/lib/message-objects/client-ctrl-message.js","webpack://solace/./modules/solclient-smf/lib/message-objects/keep-alive-message.js","webpack://solace/./modules/solclient-smf/lib/message-objects/smf-header.js","webpack://solace/./modules/solclient-smf/lib/message-objects/smf-parameter.js","webpack://solace/./modules/solclient-smf/lib/message-objects/smf-uh.js","webpack://solace/./modules/solclient-smf/lib/message-objects/smp-message.js","webpack://solace/./modules/solclient-smf/lib/message-objects/transport-smf-message.js","webpack://solace/./modules/solclient-smf/lib/smf-adprotocol-message-types.js","webpack://solace/./modules/solclient-smf/lib/smf-adprotocol-params.js","webpack://solace/./modules/solclient-smf/lib/smf-client-ctrl-message-types.js","webpack://solace/./modules/solclient-smf/lib/smf-client-ctrl-params.js","webpack://solace/./modules/solclient-smf/lib/smf-parameter-types.js","webpack://solace/./modules/solclient-smf/lib/smf-protocols.js","webpack://solace/./modules/solclient-smf/lib/smf-smp-message-type-flags.js","webpack://solace/./modules/solclient-smf/lib/smf-smp-message-types.js","webpack://solace/./modules/solclient-smf/lib/smf-transport-session-message-types.js","webpack://solace/./modules/solclient-solcache-session/api.js","webpack://solace/./modules/solclient-solcache-session/lib/cache-cb-info.js","webpack://solace/./modules/solclient-solcache-session/lib/cache-context.js","webpack://solace/./modules/solclient-solcache-session/lib/cache-get-result-codes.js","webpack://solace/./modules/solclient-solcache-session/lib/cache-get-result.js","webpack://solace/./modules/solclient-solcache-session/lib/cache-live-data-actions.js","webpack://solace/./modules/solclient-solcache-session/lib/cache-request-result.js","webpack://solace/./modules/solclient-solcache-session/lib/cache-request-types.js","webpack://solace/./modules/solclient-solcache-session/lib/cache-request.js","webpack://solace/./modules/solclient-solcache-session/lib/cache-return-codes.js","webpack://solace/./modules/solclient-solcache-session/lib/cache-return-subcodes.js","webpack://solace/./modules/solclient-solcache-session/lib/cache-session-properties.js","webpack://solace/./modules/solclient-solcache-session/lib/cache-session-subscribe-info.js","webpack://solace/./modules/solclient-solcache-session/lib/cache-session.js","webpack://solace/./modules/solclient-stats/api.js","webpack://solace/./modules/solclient-stats/lib/stat-bymode.js","webpack://solace/./modules/solclient-stats/lib/stat-types.js","webpack://solace/./modules/solclient-stats/lib/stats.js","webpack://solace/./modules/solclient-transport/api.js","webpack://solace/./modules/solclient-transport/lib/base-smf-client.js","webpack://solace/./modules/solclient-transport/lib/buffer-queue.js","webpack://solace/./modules/solclient-transport/lib/buffer-smf-client.js","webpack://solace/./modules/solclient-transport/lib/smf-client.js","webpack://solace/./modules/solclient-transport/lib/transport-base.js","webpack://solace/./modules/solclient-transport/lib/transport-capabilities.js","webpack://solace/./modules/solclient-transport/lib/transport-client-stats.js","webpack://solace/./modules/solclient-transport/lib/transport-error.js","webpack://solace/./modules/solclient-transport/lib/transport-factory.js","webpack://solace/./modules/solclient-transport/lib/transport-protocol-handler.js","webpack://solace/./modules/solclient-transport/lib/transport-protocols.js","webpack://solace/./modules/solclient-transport/lib/transport-return-codes.js","webpack://solace/./modules/solclient-transport/lib/transport-session-event-codes.js","webpack://solace/./modules/solclient-transport/lib/transport-session-event.js","webpack://solace/./modules/solclient-transport/lib/transport-session-states.js","webpack://solace/./modules/solclient-transport/lib/tsh-state.js","webpack://solace/./modules/solclient-transport/lib/web/api.js","webpack://solace/./modules/solclient-transport/lib/web/http/api.js","webpack://solace/./modules/solclient-transport/lib/web/http/http-connection.js","webpack://solace/./modules/solclient-transport/lib/web/http/http-transport-session.js","webpack://solace/./modules/solclient-transport/lib/web/http/send-xhr.js","webpack://solace/./modules/solclient-transport/lib/web/http/xhr-factory.js","webpack://solace/./modules/solclient-transport/lib/web/state-base64.js","webpack://solace/./modules/solclient-transport/lib/web/state-binary.js","webpack://solace/./modules/solclient-transport/lib/web/state-streaming-and-binary.js","webpack://solace/./modules/solclient-transport/lib/web/state-websocket-binary.js","webpack://solace/./modules/solclient-transport/lib/web/web-transport-capabilities.js","webpack://solace/./modules/solclient-transport/lib/web/web-transport-events.js","webpack://solace/./modules/solclient-transport/lib/web/web-transport-fsm.js","webpack://solace/./modules/solclient-transport/lib/web/web-transport-session-base.js","webpack://solace/./modules/solclient-transport/lib/web/web-transport-states.js","webpack://solace/./modules/solclient-transport/lib/web/web-transport.js","webpack://solace/./modules/solclient-transport/lib/web/websocket-close-codes.js","webpack://solace/./modules/solclient-transport/lib/web/websocket-transport-session.js","webpack://solace/./modules/solclient-util/api.js","webpack://solace/./modules/solclient-util/lib/api-properties-validators.js","webpack://solace/./modules/solclient-util/lib/api-properties.js","webpack://solace/./modules/solclient-util/lib/array-utils.js","webpack://solace/./modules/solclient-util/lib/browser-url-polyfill.js","webpack://solace/./modules/solclient-util/lib/clone.js","webpack://solace/./modules/solclient-util/lib/process.js","webpack://solace/./modules/solclient-util/lib/string-buffer.js","webpack://solace/./modules/solclient-util/lib/string-utils.js","webpack://solace/./modules/solclient-util/lib/timing-bucket.js","webpack://solace/./modules/solclient-util/lib/url.js","webpack://solace/./modules/solclient-util/lib/uuid.js","webpack://solace/./modules/solclient-util/lib/version.js","webpack://solace/./modules/solclient-validate/api.js","webpack://solace/./modules/solclient-validate/lib/base-checks.js","webpack://solace/./modules/solclient-validate/lib/check.js","webpack://solace/./modules/solclient-validate/lib/parameter.js","webpack://solace/./node_modules/base64-js/index.js","webpack://solace/./node_modules/browser-util-inspect/index.js","webpack://solace/./node_modules/buffer/index.js","webpack://solace/./node_modules/events/events.js","webpack://solace/./node_modules/ieee754/index.js","webpack://solace/./node_modules/long/umd/index.js","webpack://solace/webpack/bootstrap","webpack://solace/webpack/runtime/global","webpack://solace/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"solace\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"solace\"] = factory();\n\telse\n\t\troot[\"solace\"] = factory();\n})(this, () => {\nreturn ","// Node entry point\n//global.BUILD_ENV = require('./define.config.js');\nmodule.exports = require('solclient-core');\n\n","const { Base64 } = require('./lib/base64');\nconst { Bits } = require('./lib/bits');\nconst { Convert } = require('./lib/convert');\nconst { Hex } = require('./lib/hex');\nconst { Long } = require('./lib/long');\n\nmodule.exports.Base64 = Base64;\nmodule.exports.Bits = Bits;\nmodule.exports.Convert = Convert;\nmodule.exports.Hex = Hex;\nmodule.exports.Long = Long;\n","// This code was written by Tyler Akins and has been placed in the\n// public domain.  It would be nice if you left this header intact.\n// Base64 code from Tyler Akins -- http://rumkin.com\n\n// It has been modified by me (Edward Funnekotter) to improve its\n// efficiency\n\n// It has been modified by me (Justin Bowes) to avoid using it whenever\n// possible in favour of browser or buffer implementations.\n\nconst KEY_STR = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nconst ENC_LUT = [\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, 99, -1, -1, 99, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  99, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, 62, -1, -1, -1, 63,\n  52, 53, 54, 55, 56, 57, 58, 59,\n  60, 61, -1, -1, -1, 64, -1, -1,\n\n    // 64\n  -1, 0, 1, 2, 3, 4, 5, 6,\n  7, 8, 9, 10, 11, 12, 13, 14,\n  15, 16, 17, 18, 19, 20, 21, 22,\n  23, 24, 25, -1, -1, -1, -1, -1,\n  -1, 26, 27, 28, 29, 30, 31, 32,\n  33, 34, 35, 36, 37, 38, 39, 40,\n  41, 42, 43, 44, 45, 46, 47, 48,\n  49, 50, 51, -1, -1, -1, -1, -1,\n\n    // 128\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n\n    // 192\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1];\n\nclass DecodeError extends Error {\n\n}\n\nconst LegacyEncoder = {\n  /**\n   * Encodes a string in base64\n   * @param {String} input The string to encode in base64.\n   * @returns {String} base64 encoded input\n   * @private\n   */\n  base64_encode(input) {\n    let output = '';\n    let i = 0;\n    do {\n      const chr1 = input.charCodeAt(i++);\n      const chr2 = input.charCodeAt(i++);\n      const chr3 = input.charCodeAt(i++);\n\n      const enc1 = chr1 >> 2;\n      const enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n      let enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n      let enc4 = chr3 & 63;\n\n      if (isNaN(chr2)) {\n        enc3 = enc4 = 64;\n      } else if (isNaN(chr3)) {\n        enc4 = 64;\n      }\n\n      output += KEY_STR.charAt(enc1);\n      output += KEY_STR.charAt(enc2);\n      output += KEY_STR.charAt(enc3);\n      output += KEY_STR.charAt(enc4);\n    } while (i < input.length);\n\n    return output;\n  },\n\n  /**\n   * Decodes a base64 string.\n   * @param {String} input The base64 string to decode.\n   * @returns {String} binary output\n   * @private\n   */\n  base64_decode(input) {\n    let output = '';\n    let i = 0;\n\n    do {\n      while (ENC_LUT[input.charCodeAt(i)] > 64) {\n        i++;\n      }\n      const enc1 = ENC_LUT[input.charCodeAt(i++)];\n      const enc2 = ENC_LUT[input.charCodeAt(i++)];\n      const enc3 = ENC_LUT[input.charCodeAt(i++)];\n      const enc4 = ENC_LUT[input.charCodeAt(i++)];\n\n      if (enc1 < 0 || enc2 < 0 || enc3 < 0 || enc4 < 0) {\n        // Invalid character in base64 text\n        // alert(\"enc at \" + i + \": \" + enc1 + \", \" + enc2 + \", \" + enc3 + \", \" + enc4);\n        throw new DecodeError('Invalid base64 character');\n      }\n\n      const chr1 = (enc1 << 2) | (enc2 >> 4);\n      const chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n      const chr3 = ((enc3 & 3) << 6) | enc4;\n\n      output += String.fromCharCode(chr1);\n\n      if (enc3 !== 64) {\n        output += String.fromCharCode(chr2);\n      }\n      if (enc4 !== 64) {\n        output += String.fromCharCode(chr3);\n      }\n    } while (i < input.length - 3);\n\n    return output;\n  },\n};\n\nconst isNode = typeof window === 'undefined'; // !node\nconst hasBuffer = typeof Buffer !== 'undefined';\nconst hasBlob = typeof Blob !== 'undefined'; // !node, !ie9\nconst BufferEncoder = (hasBuffer && (hasBlob || isNode))\n  ? {\n    base64_encode: str => Buffer.from(str, 'binary').toString('base64'),\n    base64_decode: str => Buffer.from(str, 'base64').toString('binary'),\n  }\n  : {};\n/* eslint-env browser */\n/* eslint-disable dot-notation */\nconst WindowEncoder = (typeof window !== 'undefined')\n  ? {\n    base64_encode: window['btoa'] ? b => window['btoa'](b) : null,\n    base64_decode: window['atob'] ? a => window['atob'](a) : null,\n  }\n  : {};\n/* eslint-enable dot-notation */\n\nconst Base64 = {\n  encode: (WindowEncoder.base64_encode ||\n           BufferEncoder.base64_encode ||\n           LegacyEncoder.base64_encode),\n  decode: (WindowEncoder.base64_decode ||\n           BufferEncoder.base64_decode ||\n           LegacyEncoder.base64_decode),\n};\n\nmodule.exports.Base64 = Base64;\n","const Bits = {\n  get(val, shift, numBits) {\n    return (val >>> shift) & ((0x01 << numBits) - 1);\n  },\n\n  set(dataIn, val, shift, numBits) {\n    const curMask = (1 << numBits) - 1;\n    const shiftedVal = (val & curMask) << shift;\n    const data = dataIn & ~(curMask << shift);\n    return (data | shiftedVal);\n  },\n};\n\nmodule.exports.Bits = Bits;\n","const Long = require('long');\n\nconst { ErrorSubcode, OperationError } = require('solclient-error');\n\n// eslint-disable-next-line global-require\nconst BufferImpl = require('buffer').Buffer;\n\n/**\n * @module\n * ===========================================================================\n * Convert\n *\n * This collection of functions performs all required string to number and number to string\n * conversions\n * ============================================================================\n * @private\n */\n\nconst TWO_ZEROES_STR = String.fromCharCode(0, 0);\nconst THREE_ZEROES_STR = String.fromCharCode(0, 0, 0);\nconst FOUR_ZEROES_STR = String.fromCharCode(0, 0, 0, 0);\n\nconst BYTEARRAY_CONVERT_CHUNK = 8192;\nconst UNSIGNED_LSHIFT_24 = (256 * 256 * 256);\n\nconst ARRAY_BUFFER_CONVERT_CHUNK = 32768;\n\n\nfunction uint8ArrayToString(data, format = undefined) {\n  const dataLength = data.byteLength;\n  const uint8DataArray = new Uint8Array(BufferImpl.from(data));\n  let result = '';\n  for (let i = 0; i < dataLength; i++) {\n    if(format && format.toLowerCase() === 'hex') {\n      result += (uint8DataArray[i]).toString(16).padStart(2, '0');\n    } else {\n      result += String.fromCharCode(uint8DataArray[i] & 0xff);\n    }\n  }\n  return result;\n}\n\nfunction stringToUint8Array(data) {\n  const dataLength = data.length;\n  const arrayBuf = new ArrayBuffer(dataLength);\n  const uint8Array = new Uint8Array(arrayBuf, 0, dataLength);\n  for (let i = 0; i < dataLength; i++) {\n    uint8Array[i] = data.charCodeAt(i);\n  }\n  return uint8Array;\n}\n\nfunction hexStringToUint8Array(data) {\n  // if null data, return empty Uint8Array\n  if(data == null) {\n    return new Uint8Array();\n  }\n  return Uint8Array.from(BufferImpl.from(data, 'hex'));\n}\n\nfunction arrayBufferToString(ab) {\n  if (!ab) return '';\n  const len = ab.byteLength;\n  const u8 = new Uint8Array(ab);\n  if (len < ARRAY_BUFFER_CONVERT_CHUNK) {\n    return String.fromCharCode.apply(null, u8);\n  }\n\n  let k = 0;\n  let r = '';\n  while (k < len) {\n    // slice is clamped, inclusive of startIndex, exclusive of lastIndex\n    r += String.fromCharCode.apply(null, u8.subarray(k, k + ARRAY_BUFFER_CONVERT_CHUNK));\n    k += ARRAY_BUFFER_CONVERT_CHUNK;\n  }\n  return r;\n}\n\nfunction stringToArrayBuffer(str) {\n  return stringToUint8Array(str).buffer;\n}\n\nfunction int8ToStr(int8) {\n  return String.fromCharCode(int8 & 0xff);\n}\n\nfunction int16ToStr(int16) {\n  return (\n      String.fromCharCode((int16 >> 8) & 0xff) +\n      String.fromCharCode(int16 & 0xff)\n  );\n}\n\nfunction int24ToStr(int24) {\n  return (\n      String.fromCharCode((int24 >> 16) & 0xff) +\n      String.fromCharCode((int24 >> 8) & 0xff) +\n      String.fromCharCode(int24 & 0xff)\n  );\n}\n\nfunction int32ToStr(int32) {\n  // It is expected that there are a lot of small numbers\n  // being converted, so it is worth doing a few checks for\n  // efficiency (on firefox it is about 3 times quicker for small numbers\n  // to do the check - it is 2 times quicker for chrome)\n\n  if (int32 === 0) return FOUR_ZEROES_STR;\n  if (int32 > 0) {\n    if (int32 < 256) {\n      return THREE_ZEROES_STR + String.fromCharCode(int32);\n    }\n    if (int32 < 65536) {\n      return TWO_ZEROES_STR + String.fromCharCode(int32 >> 8) + String.fromCharCode(int32 & 0xff);\n    }\n  }\n\n  return (\n      String.fromCharCode((int32 >> 24) & 0xff) +\n      String.fromCharCode((int32 >> 16) & 0xff) +\n      String.fromCharCode((int32 >> 8) & 0xff) +\n      String.fromCharCode(int32 & 0xff)\n  );\n}\n\nfunction int64ToStr(int64) {\n  if (typeof int64 !== 'number') {\n    return int32ToStr(int64.high) + int32ToStr(int64.low);\n  }\n\n  // It is expected that there are a lot of small numbers\n  // being converted, so it is worth doing a few checks for\n  // efficiency (on firefox it is about 3 times quicker for small numbers\n  // to do the check - it is 2 times quicker for chrome)\n  if (int64 >= 0) {\n    if (int64 < 256) {\n      return FOUR_ZEROES_STR + THREE_ZEROES_STR + String.fromCharCode(int64);\n    }\n    if (int64 < 65536) {\n      return FOUR_ZEROES_STR + TWO_ZEROES_STR +\n        String.fromCharCode(int64 >> 8) + String.fromCharCode(int64 & 0xff);\n    }\n    if (int64 < 4294967296) {\n      return FOUR_ZEROES_STR + (String.fromCharCode((int64 >> 24) & 0xff) +\n        String.fromCharCode((int64 >> 16) & 0xff) +\n        String.fromCharCode((int64 >> 8) & 0xff) +\n        String.fromCharCode(int64 & 0xff));\n    }\n  }\n  return String.fromCharCode((int64 >> 56) & 0xFF) +\n        String.fromCharCode((int64 >> 48) & 0xFF) +\n        String.fromCharCode((int64 >> 40) & 0xFF) +\n        String.fromCharCode((int64 >> 32) & 0xFF) +\n        String.fromCharCode((int64 >> 24) & 0xff) +\n        String.fromCharCode((int64 >> 16) & 0xff) +\n        String.fromCharCode((int64 >> 8) & 0xff) +\n        String.fromCharCode(int64 & 0xff);\n}\n\nfunction byteArrayToStr(byteArray) {\n  const len = byteArray.length;\n  if (len < BYTEARRAY_CONVERT_CHUNK) {\n    return String.fromCharCode.apply(null, byteArray);\n  }\n\n  let k = 0;\n  let r = '';\n\n  while (k < len) {\n    // slice is clamped, inclusive of startIndex, exclusive of lastIndex\n    r += String.fromCharCode.apply(null, byteArray.slice(k, k + BYTEARRAY_CONVERT_CHUNK));\n    k += BYTEARRAY_CONVERT_CHUNK;\n  }\n\n  return r;\n}\n\nfunction strToByteArray(str) {\n  const result = [];\n  let i;\n  for (i = 0; i < str.length; i++) {\n    result[i] = str.charCodeAt(i);\n  }\n  return result;\n}\n\nfunction strToHexArray(str) {\n  function toHex(c) {\n    return c.charCodeAt(0).toString(16);\n  }\n  return Array.prototype.map.call(str.split(''), toHex);\n}\n\nfunction strToInt8(data) {\n  return data.charCodeAt(0) & 0xff;\n}\n\nfunction strToInt16(data) {\n  return (\n      (data.charCodeAt(0) << 8) +\n      (data.charCodeAt(1))\n  );\n}\n\nfunction strToInt24(data) {\n  return (\n      (data.charCodeAt(0) << 16) +\n      (data.charCodeAt(1) << 8) +\n      (data.charCodeAt(2))\n  );\n}\n\nfunction strToInt32(data) {\n    // SIGNED integer\n  return (\n      (data.charCodeAt(0) << 24) +\n      (data.charCodeAt(1) << 16) +\n      (data.charCodeAt(2) << 8) +\n      (data.charCodeAt(3))\n  );\n}\n\nfunction strToUInt32(data) {\n  // WARNING: you cannot use a << 24 to shift a byte into\n  // a 32-bit string, because all shifts in JS are signed\n  return (\n      (data.charCodeAt(0) * UNSIGNED_LSHIFT_24) +\n      (data.charCodeAt(1) << 16) +\n      (data.charCodeAt(2) << 8) +\n      (data.charCodeAt(3))\n  );\n}\n\nfunction strToUInt64(data) {\n  return Long.fromBits(strToUInt32(data.substr(4, 4)),\n                       strToUInt32(data.substr(0, 4)),\n                       true);\n}\n\nfunction ucs2ToUtf8(ucs2) {\n  return unescape(encodeURIComponent(ucs2));\n}\n\nfunction utf8ToUcs2(utf8) {\n  return decodeURIComponent(escape(utf8));\n}\n\nfunction anythingToBuffer(value) {\n  if (BufferImpl.isBuffer(value)) {\n    return value;\n  }\n  if (typeof value === 'string') {\n    return BufferImpl.from(value, 'latin1');\n  }\n  if (value instanceof ArrayBuffer) {\n    return BufferImpl.from(value);\n  }\n  //TypedArrays and DataView:\n  if (value.buffer instanceof ArrayBuffer &&\n    typeof value.byteLength === 'number' &&\n    typeof value.byteOffset === 'number') {\n    if (value.byteOffset === 0 && value.byteLength === value.buffer.byteLength) {\n      // \"full sice\", no actual offset: just use the raw buffer.\n      return BufferImpl.from(value.buffer);\n    }\n    return BufferImpl.from(value.buffer, value.byteOffset, value.byteLength);\n  }\n  throw new OperationError('Parameter value failed validation',\n    ErrorSubcode.PARAMETER_OUT_OF_RANGE,\n    'Expecting Buffer/Uint8Array, also accepting string, ArrayBuffer, any TypedArray, or DataView.');\n}\n\nconst Convert = {\n  arrayBufferToString,\n  stringToArrayBuffer,\n  \n  uint8ArrayToString,\n  stringToUint8Array,\n\n  hexStringToUint8Array,\n\n  int8ToStr,\n  strToInt8,\n\n  int16ToStr,\n  strToInt16,\n\n  int24ToStr,\n  strToInt24,\n\n  int32ToStr,\n  strToInt32,\n  strToUInt32,\n\n  int64ToStr,\n  strToUInt64,\n\n  byteArrayToStr,\n  strToByteArray,\n\n  strToHexArray,\n\n  ucs2ToUtf8,\n  utf8ToUcs2,\n  anythingToBuffer,\n};\n\nmodule.exports.Convert = Convert;\n","function numToHex(n) {\n  if (typeof n !== 'number') {\n    return '';\n  }\n  const s = n.toString(16);\n  return (s.length < 2) ? `0${s}` : s;\n}\n\n\nfunction formatHexString(obj) {\n  if (typeof obj === 'number') {\n    return `0x${numToHex(obj)}`;\n  }\n\n  if (typeof obj === 'object' && Array.isArray(obj)) {\n    return obj.map(numToHex).join();\n  }\n\n  if (typeof obj === 'string') {\n    return Array.prototype.map.call(obj, (_, i) => numToHex(obj.charCodeAt(i))).join('');\n  }\n\n  return null;\n}\n\nconst Hex = {\n  formatHexString,\n};\n\nmodule.exports.Hex = Hex;\n","module.exports.Long = require('long');\n","/**\n * SolclientJS internal API for white-box integration testing\n * @private\n */\n\n/* _eslint-disable sort-requires/sort-requires */\n\nconst Convert = require('solclient-convert');\nconst Debug = require('solclient-debug');\nconst Destination = require('solclient-destination');\nconst Error = require('solclient-error');\nconst ESKit = require('solclient-eskit');\nconst Factory = require('solclient-factory');\nconst FSM = require('solclient-fsm');\nconst Log = require('solclient-log');\nconst Message = require('solclient-message');\nconst MessageTracing = require('solclient-message-tracing');\nconst Publisher = require('solclient-message-publisher');\nconst SDT = require('solclient-sdt');\nconst Session = require('solclient-session');\nconst SMF = require('solclient-smf');\nconst SolcacheSession = require('solclient-solcache-session');\nconst TestEnv = require('solclient-env');\nconst Transport = require('solclient-transport');\nconst Util = require('solclient-util');\nconst Validate = require('solclient-validate');\n\nmodule.exports = {\n  Convert,\n  Debug,\n  Destination,\n  Error,\n  ESKit,\n  Factory,\n  FSM,\n  Log,\n  Message,\n  MessageTracing,\n  Publisher,\n  SDT,\n  Session,\n  SMF,\n  SolcacheSession,\n  TestEnv,\n  Transport,\n  Util,\n  Validate,\n};\n","/**\n * <h1> Overview </h1>\n *\n * This is the Solace Corporation Messaging API for JavaScript. Concepts defined in this API are\n * similar to those defined in other Solace Messaging APIs for Java, C, and .NET.\n *\n * <h1> Concepts </h1>\n *\n * Some general concepts:\n *\n * <li> All function calls are non-blocking; confirmation, if requested, is returned to the calling\n * client application in the form of callbacks. </li>\n *\n */\n\n/* _eslint-disable sort-requires/sort-requires */\n\n// -------------------------- Solclient Factory ------------------------------\n// Load me before the rest of the API as a plug-in point for modules\nconst FactoryLib = require('solclient-factory');\n// ---------------------------------------------------------------------------\n\nconst {\n  SolclientFactory,\n  SolclientFactoryProfiles,\n  SolclientFactoryProperties,\n} = FactoryLib;\n\nconst {\n  Long,\n} = require('solclient-convert');\nconst {\n  Destination,\n  DestinationType,\n  Topic,\n} = require('solclient-destination');\nconst {\n  ErrorSubcode,\n  NotImplementedError,\n  OperationError,\n  RequestError,\n  RequestEventCode,\n} = require('solclient-error');\nconst {\n  makeIterator,\n} = require('solclient-eskit');\nconst {\n  ConsoleLogImpl,\n  LogImpl,\n  LogLevel,\n} = require('solclient-log');\nconst {\n  Message,\n  MessageCacheStatus,\n  MessageDeliveryModeType,\n  MessageDumpFlag,\n  MessageOutcome,\n  MessageType,\n  MessageUserCosType,\n  ReplicationGroupMessageId,\n} = require('solclient-message');\nconst {\n  MessageConsumer,\n  MessageConsumerAcknowledgeMode,\n  MessageConsumerEventName,\n  MessageConsumerProperties,\n  QueueBrowser,\n  QueueBrowserEventName,\n  QueueBrowserProperties,\n} = require('solclient-message-consumer');\nconst {\n  ReplayStartLocation,\n  ReplayStartLocationBeginning,\n} = require('solclient-replaystart');\nconst {\n  MessagePublisherAcknowledgeMode,\n  MessagePublisherProperties,\n} = require('solclient-message-publisher');\nconst {\n  Baggage,\n  TraceContext,\n  TraceContextSetter,\n} = require('solclient-message-tracing');\nconst {\n  AbstractQueueDescriptor,\n  QueueAccessType,\n  QueueDescriptor,\n  QueueDiscardBehavior,\n  QueuePermissions,\n  QueueProperties,\n  QueueType,\n} = require('solclient-queue');\nconst {\n  SDTField,\n  SDTFieldType,\n  SDTMapContainer,\n  SDTStreamContainer,\n  SDTUnsupportedValueError,\n  SDTValueErrorSubcode,\n} = require('solclient-sdt');\nconst {\n  AuthenticationScheme,\n  CapabilityType,\n  MessageRxCBInfo,\n  MutableSessionProperty,\n  Session,\n  SessionEvent,\n  SessionEventCBInfo,\n  SessionEventCode,\n  SessionProperties,\n  SessionState,\n  SslDowngrade,\n} = require('solclient-session');\nconst {\n  CacheCBInfo,\n  CacheLiveDataAction,\n  CacheRequestResult,\n  CacheReturnCode,\n  CacheReturnSubcode,\n  CacheSession,\n  CacheSessionProperties,\n} = require('solclient-solcache-session');\nconst {\n  StatType,\n} = require('solclient-stats');\nconst {\n  TransportError,\n  TransportProtocol,\n} = require('solclient-transport');\nconst {\n  Version,\n} = require('solclient-util');\n\n// --------------------------- Internal API -- do not use --------------------\n// Load me last. I disappear in production mode\nconst _internal = require('./api-internal.js');\n// ---------------------------------------------------------------------------\n\n\n/**\n * @namespace\n * @public\n */\nconst solace = {\n  AbstractQueueDescriptor,\n  AuthenticationScheme,\n  Baggage,\n  CacheCBInfo,\n  CacheLiveDataAction,\n  CacheRequestResult,\n  CacheReturnCode,\n  CacheReturnSubcode,\n  CacheSession,\n  CacheSessionProperties,\n  CapabilityType,\n  ConsoleLogImpl,\n  Destination,\n  DestinationType,\n  ErrorSubcode,\n  LogImpl,\n  LogLevel,\n  Long,\n  Message,\n  MessageCacheStatus,\n  MessageConsumer,\n  MessageConsumerAcknowledgeMode,\n  MessageConsumerEventName,\n  MessageConsumerProperties,\n  MessageDeliveryModeType,\n  MessageDumpFlag,\n  MessageOutcome,\n  MessagePublisherAcknowledgeMode,\n  MessagePublisherProperties,\n  MessageRxCBInfo,\n  MessageType,\n  MessageUserCosType,\n  MutableSessionProperty,\n  NotImplementedError,\n  OperationError,\n  QueueAccessType,\n  QueueBrowser,\n  QueueBrowserEventName,\n  QueueBrowserProperties,\n  QueueDescriptor,\n  QueueDiscardBehavior,\n  QueuePermissions,\n  QueueProperties,\n  QueueType,\n  ReplayStartLocation,\n  /*\n   * This should not be here ReplayStartLocationBeginning should not be a publicly exposed type.\n   * This type must remain for backwards compatibility however it was never indented for use\n   * by applications.\n   * */\n  ReplayStartLocationBeginning,\n  ReplicationGroupMessageId,\n  RequestError,\n  RequestEventCode,\n  SDTField,\n  SDTFieldType,\n  SDTMapContainer,\n  SDTStreamContainer,\n  SDTUnsupportedValueError,\n  SDTValueErrorSubcode,\n  Session,\n  SessionEvent,\n  SessionEventCBInfo,\n  SessionEventCode,\n  SessionProperties,\n  SessionState,\n  SolclientFactory,\n  SolclientFactoryProfiles,\n  SolclientFactoryProperties,\n  SslDowngrade,\n  StatType,\n  Topic,\n  TraceContext,\n  TraceContextSetter,\n  TransportError,\n  TransportProtocol,\n  Version,\n\n  makeIterator,\n\n  _internal, //\n};\n\nObject.assign(module.exports, solace);\n","const { Debug } = require('./lib/debug');\n\nmodule.exports.Debug = Debug;\n","/* eslint-disable global-require */\n// Do late binding for these debug utilities to break cyclic dependencies.\n\nconst PRINTABLE_LUT = (() => {\n  const tmp = [];\n  for (let c = 0; c < 256; ++c) {\n    tmp[c] = (c < 33 || c > 126) ? '.' : String.fromCharCode(c);\n  }\n  return tmp;\n})();\n\nconst SPACER = '   ';\nconst UNPRINTABLE = '.';\n\n\nfunction formatDumpBytes(data, showDecode, leftPadding) {\n  const { StringBuffer, StringUtils } = require('solclient-util');\n  const { isEmpty, padLeft, padRight } = StringUtils;\n\n  if (isEmpty(data)) {\n    return null;\n  }\n\n  const output = new StringBuffer();\n  const ascii = new StringBuffer();\n  const line = new StringBuffer();\n  let lineBytes = 0;\n  const asciiOffset = 54;\n\n  for (let i = 0, dataLen = data.length; i < dataLen; ++i) {\n    const ccode = data.charCodeAt(i);\n    //const ccode = dataBuf.readInt8(i);\n    line.append(padLeft(ccode.toString(16), 2, '0'), ' ');\n    ascii.append(PRINTABLE_LUT[ccode] || UNPRINTABLE);\n    lineBytes++;\n\n    if (lineBytes === 8) {\n      line.append(SPACER);\n    }\n\n    if (lineBytes === 16 || i === data.length - 1) {\n      if (leftPadding > 0) {\n        output.append(padRight('', leftPadding, ' '));\n      }\n\n      output.append(padRight(line.toString(), asciiOffset, ' '));\n\n      if (showDecode) {\n        output.append(ascii);\n      }\n\n      output.append('\\n');\n      line.clear();\n      ascii.clear();\n      lineBytes = 0;\n    }\n  }\n\n  return output.toString();\n}\n\nfunction parseSMFStream(data) {\n  const { Codec: { Decode: { decodeCompoundMessage } } } = require('solclient-smf');\n  const { LOG_WARN, LOG_ERROR } = require('solclient-log');\n\n  if (data === null) {\n    LOG_ERROR('data null in debugParseSmfStream');\n    return;\n  }\n  let pos = 0;\n  LOG_WARN(`parseSMFStream(): Starting parse, length ${data.length}`);\n  while (pos < data.length) {\n    const incomingMsg = decodeCompoundMessage(data, pos);\n    const smf = incomingMsg ? incomingMsg.smfHeader : null;\n    if (!(incomingMsg && smf)) {\n      // couldn't decode! Lost SMF framing.\n      LOG_WARN(\"parseSMFStream(): couldn't decode message.\");\n      LOG_WARN(`Position: ${pos} length: ${data.length}`);\n      return;\n    }\n\n    LOG_WARN(`>> Pos(${pos}) Protocol ${smf.smf_protocol}, Length: ${smf.messageLength}`);\n    pos += smf.messageLength;\n  }\n}\n\nconst Debug = {\n  formatDumpBytes,\n  parseSMFStream,\n};\n\nmodule.exports.Debug = Debug;\n","const { Destination } = require('./lib/destination');\nconst { DestinationFromNetwork } = require('./lib/destination-from-network');\nconst { DestinationType } = require('./lib/destination-type');\nconst { DestinationUtil } = require('./lib/destination-util');\nconst { Parameter } = require('solclient-validate');\nconst { Queue } = require('./lib/queue');\nconst { SolclientFactory } = require('solclient-factory');\nconst { Topic } = require('./lib/topic');\n\n\n/**\n * Creates a topic {@link solace.Destination} instance. When the returned Destination is set as\n * the destination of a message via {@link solace.Message#setDestination}, the message will be\n * delivered to direct subscribers or topic endpoints subscribed to the given topic.\n *\n * @param {String} topicName The topic string for the new topic.\n * @returns {solace.Destination} The newly created topic destination.\n * @method\n * @name solace.SolclientFactory.createTopicDestination\n */\nSolclientFactory.createTopicDestination = SolclientFactory.createFactory((topicName) => {\n  Parameter.isString('topicName', topicName);\n  return Topic.createFromName(topicName);\n});\n/* @deprecated @*/\nSolclientFactory.createTopic = SolclientFactory.createFactory(topicName => new Topic(topicName));\n\n/**\n * Creates a durable queue {@link solace.Destination} instance. When the returned Destination is\n * set as the destination of a message via {@link solace.Message#setDestination}, the message will\n * be delivered to the Guaranteed Message queue on the Solace Message Router of the same name.\n *\n * @since 10.0.0\n * @param {String} queueName The queueName of the queue\n * @returns {solace.Destination} The newly created queue destination.\n * @method\n * @name solace.SolclientFactory.createDurableQueueDestination\n */\nSolclientFactory.createDurableQueueDestination = SolclientFactory.createFactory((queueName) => {\n  Parameter.isString('queueName', queueName);\n  return Queue.createFromLocalName(queueName);\n});\n\nmodule.exports.Destination = Destination;\nmodule.exports.DestinationFromNetwork = DestinationFromNetwork;\nmodule.exports.DestinationType = DestinationType;\nmodule.exports.DestinationUtil = DestinationUtil;\nmodule.exports.Queue = Queue;\nmodule.exports.Topic = Topic;\n","const { DestinationType } = require('./destination-type');\nconst { DestinationUtil } = require('./destination-util');\nconst { Queue } = require('./queue');\nconst { Topic } = require('./topic');\n\nconst QUEUE_PREFIX = '#P2P/QUE/';\nconst QUEUE_PREFIX_LEN = QUEUE_PREFIX.length;\nconst TEMPORARY_QUEUE_PREFIX = '#P2P/QTMP/';\n\nfunction createDestinationFromName(networkTopicName, networkTopicBytes = undefined) {\n  if (networkTopicName === null || networkTopicName.length === 0) {\n    return null;\n  }\n\n  const spec = {\n    name:  networkTopicName,\n    bytes: networkTopicBytes || DestinationUtil.encodeBytes(networkTopicName),\n  };\n  if (networkTopicName[0] === '#') {\n    if (networkTopicName.startsWith(QUEUE_PREFIX)) {\n      const offset = QUEUE_PREFIX_LEN;\n      spec.name = networkTopicName.substr(offset);\n      spec.type = DestinationType.QUEUE;\n      spec.offset = offset;\n      return new Queue(spec);\n    } else if (networkTopicName.startsWith(TEMPORARY_QUEUE_PREFIX)) {\n      spec.name = networkTopicName;\n      spec.type = DestinationType.TEMPORARY_QUEUE;\n      spec.offset = 0;\n      return new Queue(spec);\n    }\n  }\n  return new Topic(spec);\n}\n\nfunction createDestinationFromBytes(networkTopicBytes) {\n  if (networkTopicBytes === null || networkTopicBytes.length === 0) {\n    return null;\n  }\n\n  const networkTopicName = DestinationUtil.decodeBytes(networkTopicBytes);\n  return createDestinationFromName(networkTopicName, networkTopicBytes);\n}\n\nconst DestinationFromNetwork = {\n  createDestinationFromBytes,\n  createDestinationFromName,\n};\n\nmodule.exports.DestinationFromNetwork = DestinationFromNetwork;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Enumerates destination types for destination objects.\n *\n * @enum {string}\n * @namespace\n * @memberof solace\n */\nconst DestinationType = {\n  /**\n   * A Topic destination.\n   */\n  TOPIC:           'topic',\n  /**\n   * A queue destination.\n   */\n  QUEUE:           'queue',\n  /**\n   * A temporary queue destination.\n   */\n  TEMPORARY_QUEUE: 'temporary_queue',\n};\n\nmodule.exports.DestinationType = Enum.new(DestinationType);\n\n/* eslint-disable */\n// Manually demangle these names; bug 70131\nmodule.exports.DestinationType._setCanonical({\n  'TOPIC':           DestinationType.TOPIC,\n  'QUEUE':           DestinationType.QUEUE,\n  'TEMPORARY_QUEUE': DestinationType.TEMPORARY_QUEUE\n});\n/* eslint-enable */\n","const SolclientFactoryLib = require('solclient-factory');\nconst { Convert } = require('solclient-convert');\nconst { DestinationType } = require('./destination-type');\nconst { LOG_ERROR } = require('solclient-log');\nconst { SubscriptionInfo } = require('./subscription-info');\nconst { UUID, StringUtils } = require('solclient-util');\n\nconst { ucs2ToUtf8, utf8ToUcs2 } = Convert;\nconst { ProfileBinding } = SolclientFactoryLib;\n\nconst { toSafeChars, stripNullTerminate } = StringUtils;\nconst { ErrorSubcode, OperationError } = require('solclient-error');\n\nconst DESTINATION_PREFIX_FROM_TYPE = {\n  [DestinationType.QUEUE]:           '#P2P/QUE/',\n  [DestinationType.TEMPORARY_QUEUE]: '#P2P/QTMP/',\n};\n\nfunction createTemporaryName(type, vrid, name) {\n  const id = name || UUID.generateUUID();\n  switch (type) {\n    case DestinationType.TOPIC:\n      return `#P2P/TTMP/${vrid}/${id}`;\n    case DestinationType.TEMPORARY_QUEUE:\n      return `#P2P/QTMP/${vrid}/${id}`;\n    default:\n      LOG_ERROR('Unknown/invalid destination type', DestinationType.describe(type));\n  }\n  return undefined;\n}\n\nfunction createPrefix(type) {\n  return DESTINATION_PREFIX_FROM_TYPE[type] || '';\n}\n\nfunction createOperationError(type, errorStr) {\n  return new OperationError(`Invalid ${type}: ${errorStr}`, ErrorSubcode.INVALID_TOPIC_SYNTAX);\n}\n\n// This function validates topics in all code paths -- legacy code paths that relied on validating\n// topics as they were used, and newer code paths that validate Destinations on construction.  We\n// must not add validation here that could break legacy apps that used the deprecated 'new Topic'\n// interface that doesn't perform validation, and subsequently rely on validate-on-use.\n//\n// More strict checks done during Destination construction should be placed in validateAndEncode.\n// @return { error, isWildcarded }.  isWildcarded will not be defined if erorr is defined.\nfunction legacyValidate(type, bytes, name,\n                        exceptionCreator = createOperationError.bind(null, type)) {\n  let error;\n\n  /*\n    * TRB topics can contain any utf-8 character and must be <= 250 bytes\n    * in length.\n    * '*', if present in a level, must be the last character in that level.\n    * May not have empty levels.\n    */\n\n  // Check minimum length using name, since the bytes may include a destination type prefix.\n  // e.g. #P2P/QUE/ should fail on length, not empty level.\n  const nameLength = name.length;\n  if (nameLength < 1) {\n    error = exceptionCreator('Too short (must be >= 1 character).');\n    return { error };\n  }\n\n  // Check maximum length using encoded bytes, since UTF-8 is a variable length encoding.\n  const bytesLength = bytes.length;\n  if (bytesLength > 251) { // null terminator doesn't count\n    error = exceptionCreator(`Too long (encoding must be <= 250 bytes); name is ${\n                             bytesLength - 1} bytes: '${name}'`);\n    return { error };\n  }\n\n  let isWildcarded = false;\n  if (name.charAt(nameLength - 1) === '>') {\n    isWildcarded = true;\n  }\n\n  for (let i = 0; i < nameLength; ++i) {\n    switch (name.charAt(i)) {\n      case '/':\n        if (i === 0 || i === (nameLength - 1) || name.charAt(i - 1) === '/') {\n          error = exceptionCreator(`Empty level(s) in '${name}'@${i}.`);\n          return { error };\n        }\n        break;\n\n      case '*':\n        if ((i < (nameLength - 1)) && (name.charAt(i + 1) !== '/')) {\n          // must not have something other than '/' to the right\n          error = exceptionCreator(`Illegal wildcard(s) in '${name}'@${i}.`);\n          return { error };\n        }\n\n        isWildcarded = true;\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  return { isWildcarded };\n}\n\nfunction encodeBytes(bytes) {\n  return ProfileBinding.value.topicUtf8Encode\n    ? `${ucs2ToUtf8(bytes)}\\u0000`\n    : `${bytes}\\u0000`;\n}\n\nfunction decodeBytes(bytes) {\n  return stripNullTerminate(ProfileBinding.value.topicUtf8Encode\n    ? utf8ToUcs2(bytes)\n    : bytes);\n}\n\n/**\n * @param {DestinationType} type The type of destination\n * @param {String} name The name of the destination\n * @returns {Object} {bytes, offset, networkName} The result of the encoding.\n *\n * @private\n */\nfunction encode(type, name) {\n  const prefix = createPrefix(type);\n  const offset = prefix.length;\n  const networkName = prefix + name;\n  const bytes = encodeBytes(networkName);\n  return { bytes, offset, networkName };\n}\n\n/**\n * @param {DestinationType} type The type of destination\n * @param {String} name The name of the destination\n * @param {Function} [exceptionCreator=createOperationError] A function to create an exception if an\n *   error is encountered.\n * @returns {Object} {bytes, error, offset, isWildcarded} The result of the encoding and any\n *      validation error\n *\n * @private\n */\nfunction validateAndEncode(type, name, exceptionCreator = createOperationError.bind(null, type)) {\n  const { bytes, offset } = encode(type, name);\n  const { error: constError, isWildcarded } = legacyValidate(type, bytes, name, exceptionCreator);\n  let error = constError;\n  let subscriptionInfo = {};\n  subscriptionInfo.isWildcarded = isWildcarded;\n\n  // If there was no 'legacy' error, perform an additional check to see if the provided name starts\n  // with a reserved prefix.  It shouldn't.  Prefixes should always be added by us by encode().\n  if (!error) {\n    Object.keys(DESTINATION_PREFIX_FROM_TYPE).some((prefixType) => {\n      const prefix = DESTINATION_PREFIX_FROM_TYPE[prefixType];\n      if (!name.startsWith(prefix)) {\n        return false; // keep processing more array elements.\n      }\n\n      error = exceptionCreator(`Reserved prefix '${prefix}' found at start of '${name}'`);\n      return true;\n    });\n  }\n\n  if (!error) {\n    // parse subscription information from destination name\n    const { error: errorConst, subInfo: subInfoConst } =\n      SubscriptionInfo.parseFromName(name, type);\n    error = errorConst;\n    subscriptionInfo = subInfoConst;\n  }\n\n  return { bytes, offset, error, isWildcarded, subscriptionInfo };\n}\n\nconst DestinationUtil = {\n  createPrefix,\n  createTemporaryName,\n  decodeBytes,\n  encode,\n  encodeBytes,\n  legacyValidate,\n  toSafeChars,\n  validateAndEncode,\n};\n\nmodule.exports.DestinationUtil = DestinationUtil;\n","const { DestinationType } = require('./destination-type');\nconst { DestinationUtil } = require('./destination-util');\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users. Users should obtain an instances from\n * one of the following:</b>\n * * {@link solace.SolclientFactory.createTopicDestination}\n * * {@link solace.SolclientFactory.createDurableQueueDestination}\n * * {@link solace.MessageConsumer#getDestination}\n * * {@link solace.SDTField#getValue} when {@link solace.SDTField#getType} returns\n *   {@link solace.SDTFieldType.DESTINATION}.\n *\n * Represents a message destination.\n *\n * Publishers can send messages to topics or queues, to which subscribers can subscribe or\n * bind. A Destination specifies the target of such an operation.\n * @hideconstructor\n * @memberof solace\n */\nclass Destination {\n\n  /*\n   * @constructor\n   * @param {String|solace.Destination|Object} spec The name of the destination, or, the\n   *  destination to copy. If this is a {@link solace.Destination} then all other parameters are\n   *  ignored.\n   * @param {solace.DestinationType} [type=solace.DestinationType.Topic] The type of destination\n   *  to create\n   * @deprecated since 10.0 Applications should not call this constructor.\n   *  Use the factory methods on {@link solace.SolclientFactory}.\n   **/\n  constructor(spec, type = DestinationType.TOPIC) {\n    if (typeof spec === 'object') {\n      this._name = spec.name;\n      this._type = spec.type;\n      this._bytes = spec.bytes;\n      this._offset = spec.offset;\n      if (spec.isValidated) {\n        this._isValidated = true;\n        this._isWildcarded = spec.isWildcarded;\n        this._subscriptionInfo = spec.subscriptionInfo || {};\n      } else {\n        this._isValidated = false;\n        this._subscriptionInfo = {};\n      }\n    } else {\n      this._name = spec;\n      this._type = type;\n\n      // Don't validate encoding for deprecated construction path.\n      // This path would have more restrictions now, and it allows\n      // sdkperf a path for arbitrary topic construction.\n      const result = DestinationUtil.encode(type, spec);\n      this._bytes = result.bytes;\n      this._offset = result.offset;\n      this._isValidated = false;\n      this._subscriptionInfo = {};\n    }\n  }\n\n  /**\n   * @returns {String} The destination name specified at creation time.\n   */\n  getName() {\n    return this._name;\n  }\n\n  /**\n   * @type {String}\n   * @readonly\n   */\n  get name() {\n    return this.getName();\n  }\n\n  /**\n   * @returns {solace.DestinationType} The destination type\n   */\n  getType() {\n    return this._type;\n  }\n\n  /**\n   * @type {solace.DestinationType}\n   * @readonly\n   */\n  get type() {\n    return this.getType();\n  }\n\n  /**\n   * @returns {String} Returns the null-terminated UTF-8 encoded destination bytes.\n   *\n   * @private\n   */\n  getBytes() {\n    return this._bytes;\n  }\n  get bytes() {\n    return this.getBytes();\n  }\n\n  getOffset() {\n    return this._offset;\n  }\n  get offset() {\n    return this.getOffset();\n  }\n\n  /**\n   * This provides the legacy validation that was done post-creation and is used in some code paths\n   * on use.  It is preferred to use non-deprecated ways of creating destinations, which do\n   * validation on create instead.\n   * @throws OperationError if the destination is not valid.\n   * @private\n   */\n  validate() {\n    if (this._isValidated) {\n      if (this._error) throw this._error;\n      return;\n    }\n\n    const { error, isWildcarded } =\n      DestinationUtil.legacyValidate(this.type, this.bytes, this.name);\n    this._isValidated = true;\n    if (error) {\n      this._error = error;\n      throw error;\n    }\n    this._isWildcarded = isWildcarded;\n  }\n\n  /**\n   * This is really only useful for topics.  If a queue name contains a wildcarded construct, it is\n   * up to the router what to do -- it would either reject it or treat the wildcard as literal.  But\n   * it is included here for all destination types since we have the info.\n   * @returns {Boolean} True if the underlying name represents a wildcarded topic; false otherwise.\n   * @throws {OperationError} If the destination is not valid.\n   * @private\n   */\n  isWildcarded() {\n    this.validate();\n    return this._isWildcarded;\n  }\n\n  /**\n   * @returns {Object} subscriptionInfo object or empty object\n   * @private\n   */\n  getSubscriptionInfo() {\n    return this._subscriptionInfo || {};\n  }\n\n  /**\n   * @returns {String} A generic description of the Destination.\n   */\n  toString() {\n    return util_inspect(this);\n  }\n\n  /**\n   * @param {*} other The other object for comparison\n   * @returns {Boolean} True if the passed destination is the same\n   * @private\n   */\n  equals(other) {\n    if (!(other instanceof Destination)) {\n      return false;\n    }\n    return (this.toString().valueOf() === other.toString().valueOf());\n  }\n}\n\nmodule.exports.Destination = Destination;\n","const DestinationUtilLib = require('./destination-util');\nconst { assert } = require('solclient-eskit');\nconst { Destination } = require('./destination');\nconst { DestinationType } = require('./destination-type');\n\n/**\n * @classdesc\n * Represents a Queue, which is a type of {@link solace.Destination}.\n *\n * Instances should be acquired through\n * {@link solace.SolclientFactory.createDurableQueueDestination} or by calling\n * {@link solace.MessageConsumer#getDestination} on a consumer bound to a temporary queue.\n *\n * @extends solace.Destination\n * @memberof solace\n * @private\n */\nclass Queue extends Destination {\n\n  /**\n   * @param {Object} spec The spec for this instance\n   * @private\n   */\n  constructor(spec) {\n    assert(spec.name, 'Queue name not supplied');\n    assert(spec.type === DestinationType.QUEUE\n           || spec.type === DestinationType.TEMPORARY_QUEUE, 'Queue spec.type is invalid');\n    assert(spec.bytes, 'Queue spec missing bytes');\n    assert(spec.offset !== undefined, 'Queue spec missing offset');\n    super(spec);\n  }\n\n  getOffset() {\n    return this._offset;\n  }\n  get offset() {\n    return this.getOffset();\n  }\n\n  [util_inspect_custom]() {\n    return `[Queue ${this.getName()}]`;\n  }\n\n  /**\n   * @static\n   * @param {String} queueName The name of the queue (no prefix)\n   * @returns {Queue} a Queue\n   * @private\n   */\n  static createFromLocalName(queueName) {\n    const encoding = DestinationUtilLib.DestinationUtil.validateAndEncode(\n      DestinationType.QUEUE, queueName);\n    if (encoding.error) {\n      throw encoding.error;\n    }\n    return new Queue({\n      name:             queueName,\n      type:             DestinationType.QUEUE,\n      isValidated:      true,\n      bytes:            encoding.bytes,\n      offset:           encoding.offset,\n      isWildcarded:     encoding.isWildcarded,\n      /* probably don't need this until queues get subscription attributes */\n      subscriptionInfo: encoding.subscriptionInfo,\n    });\n  }\n\n}\n\nmodule.exports.Queue = Queue;\n","const { DestinationType } = require('./destination-type');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\n\n/**\n * determines if subscription has the #noexport/ prefix\n *\n * @param {DestinationType} type The type of destination\n * @param {String} name The name of the destination\n * @param {ByteArray} bytes Encoded bytes of name\n * @param {Number} offset The index offset into the name to parse\n * @param {solace.SubscriptionInfo} result The attribute collector object for the parsed\n *   subscription\n * @param {Function} exceptionCreator The function to create an error for\n *   parsing\n * @returns {Object} {error, index, result} returns the parsing index and result\n *   where the result is a {solace.SubscriptionInfo} that contains information about the\n *   subscription like {Boolean} isNoExport\n * @private\n */\nfunction subscriptionParseNoExport(type, name, bytes, offset, result) {\n  const NOEXPORT_PREFIX = '#noexport/';\n  const NOEXPORT_PREFIX_LEN = NOEXPORT_PREFIX.length;\n  let index = offset;\n  let error;\n  if (name.length - index > NOEXPORT_PREFIX_LEN && !result.isNoExport) {\n    if (name.startsWith(NOEXPORT_PREFIX, index)) {\n      index += NOEXPORT_PREFIX_LEN;\n      result.isNoExport = true;\n    } else {\n      result.isNoExport = false;\n    }\n  } else {\n    result.isNoExport = false;\n  }\n  return { error, index, result };\n}\n\n/**\n * @param {DestinationType} type The type of destination\n * @param {String} name The name of the destination\n * @param {ByteArray} bytes Encoded bytes of name\n * @param {Number} offset The index offset into the name to parse\n * @param {solace.SubscriptionInfo} result The attribute collector object for the parsed\n *   subscription\n * @param {Function} exceptionCreator The function to create an error for\n *   parsing\n * @returns {Object} {error, index, result} returns the parsing index and result\n *   where the result is a {solace.SubscriptionInfo} that contains information about the\n *   subscription like {Boolean} isShared or {String} shareGroup or {Number}\n *   dispatchTopicIndex\n * @private\n */\nfunction subscriptionParseShare(type, name, bytes, offset,\n                                result, exceptionCreator) {\n  const SHARE_PREFIX = '#share/';\n  const SHARE_PREFIX_LEN = SHARE_PREFIX.length;\n  const LEVEL_DELIMETER = '/';\n  const LEVEL_DELIMETER_LEN = LEVEL_DELIMETER.length;\n  let index = offset;\n  let error;\n  let groupIndex = -1;\n  let shareGroup;\n  if (name.length - index > SHARE_PREFIX_LEN && !result.isShare) {\n    /* parse '#share/' prefix */\n    /*\n     * name starts with '#share/' prefix\n     * and has enough room for at least one character for share group\n     */\n    if (name.startsWith(SHARE_PREFIX, offset)\n        && (name.length - (index + SHARE_PREFIX_LEN)) > LEVEL_DELIMETER_LEN + 1) {\n      index += SHARE_PREFIX_LEN;\n      /* parse share group to next '/' */\n      groupIndex = index;\n      index = name.indexOf(LEVEL_DELIMETER, groupIndex);\n      if (index > 0) {\n        shareGroup = name.substring(groupIndex, index);\n        index += LEVEL_DELIMETER_LEN;\n        result.isShare = true;\n        result.shareGroup = shareGroup;\n        result.dispatchTopicIndex = index;\n      } else {\n        // error\n        error = exceptionCreator(`Illegal share Group in '${name}'@${groupIndex}.`);\n        result.isShare = true;\n      }\n    } else {\n      // not share subscription\n      result.isShare = false;\n    }\n  } else {\n    // not share subscription\n    result.isShare = false;\n  }\n  return { error, index, result };\n}\n\n/**\n * @param {Array.Function} layers The parsing functions executed from 0 to layers.length\n * @param {DestinationType} type The type of destination\n * @param {String} name The name of the destination\n * @param {ByteArray} bytes Encoded bytes of name\n * @param {solace.SubscriptionInfo} subInfo The attribute collector object for the parsed\n *   subscription\n * @param {Function} exceptionCreator The function to create an error for\n *   parsing\n * @returns {Object} {error, result} returns the parsed information in the SubscriptionInfo\n * object and error, when error is set result's values may be partially set\n * @private\n */\nfunction subscriptionStringParse(layers, type, name, bytes, subInfo, exceptionCreator) {\n  const parseLayers = layers.length || 0;\n  let offset = 0;\n  let error;\n  let result = subInfo || {};\n  for (let i = 0; i < parseLayers; ++i) {\n    const { error: constError, index: constOffset, result: constResult } =\n      layers[i](type, name, bytes, offset, result, exceptionCreator);\n    offset = constOffset;\n    result = constResult;\n    error = constError;\n    if (error) break;\n  }\n  return { error, result };\n}\n\n// Subscription parser map by DestinationType\n// Currently only Topics have subscription information to parse, but more can be added as needed\n// The _layers attribute for the parser defines the order of parsing destination names\n// The _layers are made up of functions that can execute with the signature:\n//   { error, index, result } function funcName(type, name, bytes, result[, exceptionCreator])\n// To add more subscription information parsing add more layers to _layers of the DestinationType\nconst SUBSCRIPTION_LAYER_PARSER_FROM_TYPE = {\n  [DestinationType.TOPIC]: {\n    _layers: [subscriptionParseNoExport, subscriptionParseShare],\n    parse:   function subParse(type, name, bytes, subInfo, exceptionCreator) {\n      const { error, result } =\n        subscriptionStringParse(this._layers, type, name, bytes, subInfo, exceptionCreator);\n      return { error, result };\n    },\n  },\n};\n\nfunction createOperationError(type, errorStr) {\n  return new OperationError(`Invalid ${type}: ${errorStr}`, ErrorSubcode.INVALID_TOPIC_SYNTAX);\n}\n\n/**\n * @classdesc\n * <b> This class is not exposed. This object contains useful subscription information about\n * a {solace.Destination#name}</b>\n * @hideconstructor\n * @memberof solace\n * @private\n */\nclass SubscriptionInfo {\n  /**\n   * @constructor\n   * @param {String} name The name of the destination to be used as a subscription\n   * @private\n   */\n  constructor(name) {\n    this._name = name;\n    // set default values\n    this._isShare = false;\n    this._isNoExport = false;\n    this._dispatchTopicIndex = -1;\n    this._shareGroup = null;\n  }\n\n  /**\n   * @returns {String} The destination name specified at creation time\n   */\n  getName() {\n    return this._name;\n  }\n\n  /**\n   * @returns {String} subscription name\n   * @readonly\n   */\n  get name() {\n    return this.getName();\n  }\n\n  /**\n   * @name solace.SubscriptionInfo#isShare\n   * @type {Boolean}\n   * @description Boolean Flag to indicate the {solace.SubscriptionInfo#name} is a shared\n   * subscription\n   * @default false\n   */\n  get isShare() {\n    return this._isShare;\n  }\n  set isShare(value) {\n    this._isShare = value;\n  }\n\n  /**\n   * @name solace.SubscriptionInfo#isNoExport\n   * @type {Boolean}\n   * @description Boolean Flag to indicate the {solace.SubscriptionInfo#name} is a no export\n   * subscription\n   * @default false\n   */\n  get isNoExport() {\n    return this._isNoExport;\n  }\n  set isNoExport(value) {\n    this._isNoExport = value;\n  }\n\n  /**\n   * @name solace.SubscriptionInfo#dispatchTopicIndex\n   * @type {Number}\n   * @description String index of the topic filter after subscription prefixes\n   * @default 0, the whole name as the topic filter\n   */\n  get dispatchTopicIndex() {\n    return this._dispatchTopicIndex < 0 ? 0 : this._dispatchTopicIndex;\n  }\n  set dispatchTopicIndex(value) {\n    this._dispatchTopicIndex = value < 0 ? -1 /* uninitialized*/ : value;\n  }\n\n  /**\n   * @name solace.SubscriptionInfo#shareGroup\n   * @type {?String}\n   * @description The Share group of a shared subscription, should be null if\n   * {solace.SubscriptionInfo#isShare} is false\n   */\n  get shareGroup() {\n    return this.isShare ? this._shareGroup : null;\n  }\n  set shareGroup(value) {\n    if (this.isShare) {\n      this._shareGroup = value;\n    }\n  }\n\n  /**\n   * @returns {String} A generic description of the SubscriptionInfo\n   */\n  toString() {\n    return util_inspect(this);\n  }\n  /**\n   * @static\n   * @type {Object}\n   * @param {String} name The name of the destination\n   * @param {DestinationType} type The Destination type\n   * @returns {Object} the subscription infomation from the destination name\n   * @private\n   */\n  static parseFromName(name, type = DestinationType.TOPIC) {\n    let subInfo = new SubscriptionInfo(name);\n    let error = null;\n    const parser = SUBSCRIPTION_LAYER_PARSER_FROM_TYPE[type];\n    if (parser) {\n      const { error: errorConst, result: subInfoConst } =\n      parser.parse(type, name, null, subInfo, createOperationError.bind(null, type));\n      subInfo = subInfoConst;\n      error = errorConst;\n    }\n    return { error, subInfo };\n  }\n}\nmodule.exports.SubscriptionInfo = SubscriptionInfo;\n","const DestinationUtilLib = require('./destination-util');\nconst { Destination } = require('./destination');\nconst { DestinationType } = require('./destination-type');\n\n/**\n * @classdesc\n * Represents a Topic, which is a type of {@link solace.Destination}.\n *\n * @extends solace.Destination\n * @memberof solace\n * @deprecated since 10.0 Applications should not directly refer to this type.\n *  {@link solace.Destination} provides the full interface available to topic, and it can be\n *  determined whether the destination represents a topic if {@link solace.Destination#getType}\n *  returns {@link solace.DestinationType.TOPIC}.\n */\nclass Topic extends Destination {\n  /**\n   * @param {Object} spec The topic spec\n   * @private\n   */\n  constructor(spec) {\n    if (typeof spec === 'object') {\n      super({\n        type:             DestinationType.TOPIC,\n        name:             spec.name,\n        bytes:            spec.bytes,\n        offset:           spec.offset,\n        isValidated:      spec.isValidated,\n        isWildcarded:     spec.isWildcarded,\n        subscriptionInfo: spec.subscriptionInfo,\n      });\n    } else {\n      // Deprecated path -- super will do topic encode\n      super(spec, DestinationType.TOPIC);\n    }\n  }\n\n  [util_inspect_custom]() {\n    return `[Topic ${this.getName()}]`;\n  }\n\n  /**\n   * @static\n   * @param {String} topicName The name for the topic\n   * @returns {Topic} the Topic\n   * @private\n   */\n  static createFromName(topicName) {\n    const encoding = DestinationUtilLib.DestinationUtil.validateAndEncode(\n      DestinationType.TOPIC, topicName);\n    if (encoding.error) {\n      throw encoding.error;\n    }\n    return new Topic({\n      name:             topicName,\n      isValidated:      true,\n      bytes:            encoding.bytes,\n      offset:           encoding.offset,\n      isWildcarded:     encoding.isWildcarded,\n      subscriptionInfo: encoding.subscriptionInfo,\n    });\n  }\n}\n\nmodule.exports.Topic = Topic;\n","function apiEnv(envObject) {\n  if (typeof BUILD_ENV !== 'undefined' && !BUILD_ENV.TEST) {\n    throw new Error('Test environment will not override build environment');\n  }\n  global.BUILD_ENV = Object.assign({}, envObject, { TEST: true });\n  return global.BUILD_ENV;\n}\n\nif (typeof BUILD_ENV !== 'undefined' && BUILD_ENV.TEST === false) {\n  apiEnv.target = () => apiEnv();\n} else {\n  const configs = {\n    node: {\n      TARGET_NAME: 'node',\n      TARGET_NODE: true,\n    },\n    browser: {\n      TARGET_NAME:    'browser',\n      TARGET_BROWSER: true,\n    },\n    debug: {\n      MODE_NAME:    'debug',\n      MODE_DEBUG:   true,\n      MODE_RELEASE: false,\n    },\n    release: {\n      MODE_NAME:    'release',\n      MODE_DEBUG:   false,\n      MODE_RELEASE: true,\n    },\n  };\n\n  apiEnv.target = function named(...args) {\n    const objects = args.map((arg) => {\n      if (typeof arg === 'string') {\n        const obj = configs[arg];\n        if (!obj) {\n          throw new Error(`Environment ${arg} is not defined; use ${Object.keys(configs).join(', ')}`);\n        }\n        return obj;\n      } else if (arg && typeof arg === 'object') {\n        return arg;\n      }\n\n      throw new Error(`Unrecognized argument ${arg}`);\n    });\n    return apiEnv(Object.assign(...objects));\n  };\n}\nmodule.exports = apiEnv;\n","const { ErrorResponseSubcodeMapper } = require('./lib/error-response-subcode-mapper');\nconst { ErrorSubcode } = require('./lib/error-subcodes');\nconst { NotImplementedError } = require('./lib/not-implemented-error');\nconst { OperationError } = require('./lib/operation-error');\nconst { RequestError } = require('./lib/request-error');\nconst { RequestEventCode } = require('./lib/request-event-codes');\nconst { SolaceError } = require('./lib/solace-error');\n\nmodule.exports.ErrorResponseSubcodeMapper = ErrorResponseSubcodeMapper;\nmodule.exports.ErrorSubcode = ErrorSubcode;\nmodule.exports.NotImplementedError = NotImplementedError;\nmodule.exports.OperationError = OperationError;\nmodule.exports.RequestError = RequestError;\nmodule.exports.RequestEventCode = RequestEventCode;\nmodule.exports.SolaceError = SolaceError;\n","const { ErrorSubcode } = require('./error-subcodes');\nconst { makeMap } = require('solclient-eskit');\n\n/* eslint-disable max-len */\n\nconst SC = ErrorSubcode;\n\nconst ROOT_MAPPING = makeMap(\n  400, makeMap(\n    'client name parse error', SC.CLIENT_NAME_INVALID,\n    'document is too large', SC.MESSAGE_TOO_LARGE,\n    'inactivity timeout', SC.INACTIVITY_TIMEOUT,\n    'max num subscriptions exceeded', SC.SUBSCRIPTION_TOO_MANY,\n    'message too long', SC.MESSAGE_TOO_LARGE,\n    'nolocal discard', SC.NOLOCAL_DISCARD,\n    'not enough space', SC.OUT_OF_RESOURCES,\n    'subscription already exists', SC.SUBSCRIPTION_ALREADY_PRESENT,\n    'subscription attributes conflict with existing subscription', SC.SUBSCRIPTION_ATTRIBUTES_CONFLICT,\n    'subscription not found', SC.SUBSCRIPTION_NOT_FOUND,\n    'subscription parse error', SC.SUBSCRIPTION_INVALID,\n    'topic parse error', SC.INVALID_TOPIC_SYNTAX,\n    'unknown transport session identifier', SC.UNKNOWN_TRANSPORT_SESSION_ID,\n    'xml parse error', SC.XML_PARSE_ERROR,\n    'unsupported ssl downgrade value', SC.LOGIN_FAILURE\n  ),\n  401, makeMap(\n    '', SC.LOGIN_FAILURE\n  ),\n  403, makeMap(\n    'basic authentication is shutdown', SC.BASIC_AUTHENTICATION_IS_SHUTDOWN,\n    'client certificate authentication is shutdown', SC.CLIENT_CERTIFICATE_AUTHENTICATION_IS_SHUTDOWN,\n    'client name already in use', SC.CLIENT_NAME_ALREADY_IN_USE,\n    'client username is shutdown', SC.CLIENT_USERNAME_IS_SHUTDOWN,\n    'dynamic clients not allowed', SC.DYNAMIC_CLIENTS_NOT_ALLOWED,\n    'invalid virtual router address', SC.INVALID_VIRTUAL_ADDRESS,\n    'forbidden', SC.CLIENT_ACL_DENIED,\n    'message vpn not allowed', SC.MESSAGE_VPN_NOT_ALLOWED,\n    'publish acl denied', SC.PUBLISH_ACL_DENIED,\n    'replication is standby', SC.REPLICATION_IS_STANDBY,\n    'selector does not match', SC.SELECTOR_DOES_NOT_MATCH,\n    'subscription acl denied', SC.SUBSCRIPTION_ACL_DENIED,\n    'subscription does not match', SC.SUBSCRIPTION_DOES_NOT_MATCH,\n    'compression is shutdown', SC.LOGIN_FAILURE,\n    'shared subscriptions not supported on topic endpoints', SC.SHARED_SUBSCRIPTIONS_ENDPOINT_NOT_ALLOWED,\n    'shared subscriptions not supported on queues', SC.SHARED_SUBSCRIPTIONS_ENDPOINT_NOT_ALLOWED,\n    'shared subscription permission denied', SC.SHARED_SUBSCRIPTIONS_NOT_ALLOWED\n  ),\n  404, makeMap(\n    '', SC.LOGIN_FAILURE\n  ),\n  503, makeMap(\n    'low priority msg congestion', SC.LOW_PRIORITY_MSG_CONGESTION,\n    'message vpn unavailable', SC.MESSAGE_VPN_UNAVAILABLE,\n    'replication is standby', SC.REPLICATION_IS_STANDBY,\n    'service unavailable', SC.GM_UNAVAILABLE,\n    'spool over quota', SC.SPOOL_OVER_QUOTA,\n    'subscriber delete in progress', SC.CLIENT_DELETE_IN_PROGRESS,\n    'too many clients', SC.TOO_MANY_CLIENTS,\n    'too many connections for vpn', SC.TOO_MANY_CLIENTS,\n    'max message usage exceeded', SC.MAX_MESSAGE_USAGE_EXCEEDED\n  ),\n  507, makeMap(\n    'ad not ready', SC.GM_NOT_READY\n  )\n);\n\nconst AD_MAPPING = makeMap(\n  'PARENT', ROOT_MAPPING,\n  400, makeMap(\n    'already bound', SC.ALREADY_BOUND,\n    'endpoint already exists', SC.ENDPOINT_ALREADY_EXISTS,\n    'subscription already exists', SC.SUBSCRIPTION_ALREADY_PRESENT,\n    'already exists', SC.ENDPOINT_ALREADY_EXISTS,\n    'endpoint property mismatch', SC.ENDPOINT_PROPERTY_MISMATCH,\n    'invalid durable topic endpoint name', SC.INVALID_DTE_NAME,\n    'invalid selector', SC.INVALID_SELECTOR,\n    'invalid topic name', SC.INVALID_TOPIC_NAME_FOR_TOPIC_ENDPOINT,\n    'invalid queue or topic endpoint durability', SC.INVALID_QUEUE_OR_TOPIC_ENDPOINT_DURABILITY,\n    'queue not found', SC.QUEUE_NOT_FOUND,\n    'quota out of range', SC.QUOTA_OUT_OF_RANGE,\n    'unknown flow name', SC.UNKNOWN_FLOW_NAME,\n    'unsubscribe not allowed', SC.UNSUBSCRIBE_NOT_ALLOWED_CLIENTS_BOUND\n  ),\n  403, makeMap(\n    'permission not allowed', SC.PERMISSION_NOT_ALLOWED,\n    'client initiated replay not allowed on non-exclusive topic endpoint', SC.CLIENT_INITIATED_REPLAY_NON_EXCLUSIVE_NOT_ALLOWED,\n    'client initiated replay not allowed on non-exclusive queue', SC.CLIENT_INITIATED_REPLAY_NON_EXCLUSIVE_NOT_ALLOWED,\n    'client initiated replay from inactive flow not allowed', SC.CLIENT_INITIATED_REPLAY_INACTIVE_FLOW_NOT_ALLOWED,\n    'client initiated replay from browser flow not allowed', SC.CLIENT_INITIATED_REPLAY_BROWSER_FLOW_NOT_ALLOWED,\n    // 'replay not supported on temporary topic endpoint', SC.REPLAY_TEMPORARY_NOT_SUPPORTED,\n    'replay not supported on temporary queue', SC.REPLAY_TEMPORARY_NOT_SUPPORTED,\n    'replay not supported on anonymous queue', SC.REPLAY_ANONYMOUS_QUEUE_NOT_SUPPORTED,\n    'replay not supported on anonymous queue without subscriptions', SC.REPLAY_ANONYMOUS_QUEUE_WITHOUT_SUBSCRIPTIONS_NOT_SUPPORTED,\n    'unknown start location type', SC.UNKNOWN_START_LOCATION_TYPE,\n    'mismatched endpoint error id', SC.MISMATCHED_ENDPOINT_ERROR_ID,\n    'replay start message unavailable', SC.REPLAY_START_MESSAGE_NOT_AVAILABLE,\n    'browsing not supported on partitioned queue', SC.PARTITIONED_QUEUE_BROWSING_NOT_SUPPORTED,\n    'selectors not supported on partitioned queue', SC.PARTITIONED_QUEUE_SELECTORS_NOT_SUPPORTED\n  ),\n  503, makeMap(\n    'durable topic endpoint shutdown', SC.TOPIC_ENDPOINT_SHUTDOWN,\n    'endpoint shutdown', SC.TOPIC_ENDPOINT_SHUTDOWN,\n    'max clients exceeded for durable topic endpoint', SC.MAX_CLIENTS_FOR_TE,\n    'max clients exceeded for queue', SC.MAX_CLIENTS_FOR_QUEUE,\n    'no more non-durable queue or topic endpoint', SC.NO_MORE_NON_DURABLE_QUEUE_OR_TOPIC_ENDPOINT,\n    'no subscription match', SC.NO_SUBSCRIPTION_MATCH,\n    'queue shutdown', SC.QUEUE_SHUTDOWN,\n    'te shutdown', SC.TOPIC_ENDPOINT_SHUTDOWN,\n    'unknown durable topic endpoint', SC.UNKNOWN_TOPIC_ENDPOINT_NAME,\n    'unknown queue', SC.UNKNOWN_QUEUE_NAME,\n    'replay disabled', SC.REPLAY_DISABLED,\n    'replay cancelled', SC.REPLAY_CANCELLED,\n    'replay message unavailable', SC.REPLAY_MESSAGE_UNAVAILABLE,\n    'replay started', SC.REPLAY_STARTED,\n    'replayed message rejected by topic endpoint', SC.REPLAY_MESSAGE_REJECTED,\n    'replayed message rejected by queue\"', SC.REPLAY_MESSAGE_REJECTED,\n    'replay log modified', SC.REPLAY_LOG_MODIFIED,\n    'mismatched endpoint error id', SC.MISMATCHED_ENDPOINT_ERROR_ID,\n    'out of replay resources', SC.OUT_OF_REPLAY_RESOURCES,\n    'topic or selector modified on durable topic endpoint', SC.TOPIC_OR_SELECTOR_MODIFIED_ON_DURABLE_TOPIC_ENDPOINT,\n    'replay failed', SC.REPLAY_FAILED,\n    'replay start time not available', SC.REPLAY_START_TIME_NOT_AVAILABLE,\n    'replay start message unavailable', SC.REPLAY_START_MESSAGE_NOT_AVAILABLE,\n    'sync replication ineligible', SC.SYNC_REPLICATION_INELIGIBLE\n  )\n);\n\nfunction getSubcodeMappingInner(root, respErrorCode, respStr) {\n  if (respErrorCode === 200) {\n    // success response, error subcode is 0 -  transport session use 0 as OK\n    return 0;\n  }\n  const codeMap = root[respErrorCode] || {};\n  const searchKey = (respStr || '').toLowerCase();\n  const foundKey = Object.keys(codeMap)\n    .find(mapKey => mapKey === searchKey || searchKey.indexOf(mapKey) >= 0);\n\n  if (foundKey) {\n    return codeMap[foundKey];\n  }\n\n  if (codeMap['']) {\n    return codeMap[''];\n  }\n\n  /* eslint-disable dot-notation */\n  // Don't access string keys via dot properties\n  if (root['PARENT']) {\n    return getSubcodeMappingInner(root['PARENT'], respErrorCode, respStr);\n  }\n  /* eslint-enable dot-notation */\n\n  return undefined;\n}\n\nfunction getSubcodeMapping(root, respErrorCode, respStr) {\n  const result = getSubcodeMappingInner(root, respErrorCode, respStr);\n  if (result === undefined) {\n    return SC.UNKNOWN_ERROR;\n  }\n  return result;\n}\n\n/**\n * @classdesc\n * Return {ErrorSubcode} based on response code and response string\n * from the router.\n * @private\n */\nconst ErrorResponseSubcodeMapper = {\n  /**\n   * @param {Number} respErrorCode The response code (an HTTP-like integer) to use in the lookup.\n   * @param {String} respStr The response string to use in the lookup.\n   * @returns {solace.ErrorSubcode} The subcode found, or ErrorSubcode.UNKNOWN_ERROR if not found.\n   * @static\n   * @private\n   */\n  getErrorSubcode(respErrorCode, respStr) {\n    return getSubcodeMapping(ROOT_MAPPING, respErrorCode, respStr);\n  },\n\n  getADErrorSubcode(respErrorCode, respStr) {\n    return getSubcodeMapping(AD_MAPPING, respErrorCode, respStr);\n  },\n};\n\nmodule.exports.ErrorResponseSubcodeMapper = ErrorResponseSubcodeMapper;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Defines an error subcode enumeration which is returned as a property of\n * the errors/exceptions thrown by the API. The subcode provides more detailed\n * error information.\n *\n * The following subcodes can apply to error responses resulting from\n * any API method.\n * * {@link solace.ErrorSubcode.PARAMETER_OUT_OF_RANGE}\n * * {@link solace.ErrorSubcode.PARAMETER_CONFLICT}\n * * {@link solace.ErrorSubcode.INTERNAL_ERROR}\n *\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst ErrorSubcode = {\n  /////////////\n  // SESSION //\n  /////////////\n  /**\n   * Errors that do not have a proper subcode.\n   */\n  UNKNOWN_ERROR:                                 0xFFFFFFFF,\n  /**\n   * No error is associated with this event.\n   */\n  NO_ERROR:                                      0,\n  /**\n   * The session is already connected.\n   */\n  // SESSION_ALREADY_CONNECTED: 1,\n  /**\n   * The session is not connected.\n   */\n  SESSION_NOT_CONNECTED:                         2,\n  /**\n   * The performed session operation is invalid given the state\n   * or configuration of the session.\n   * @deprecated Use {@link solace.ErrorSubCode.INVALID_OPERATION}\n   */\n  INVALID_SESSION_OPERATION:                     3,\n  /**\n   * The performed session operation is invalid given the state\n   * or configuration of the session.\n   */\n  INVALID_OPERATION:                             3,\n  /**\n   * An API call failed due to a timeout.\n   */\n  TIMEOUT:                                       4,\n  /////////////////\n  // MESSAGE VPN //\n  /////////////////\n  /**\n   * The Message VPN name configured for the session does not exist.\n   *\n   * Causes:\n   *  * 403 Message VPN Not Allowed\n   */\n  MESSAGE_VPN_NOT_ALLOWED:                       5,\n  /**\n   * The Message VPN name set for the session (or the default VPN if none\n   * was set) is currently shutdown on the router.\n   *\n   * Causes:\n   *  * 503 Message VPN Unavailable\n   */\n  MESSAGE_VPN_UNAVAILABLE:                       6,\n  ////////////\n  // CLIENT //\n  ////////////\n  /**\n   * The username for the client is administratively shutdown\n   * on the router.\n   *\n   * Causes:\n   *  * 403 Client Username Is Shutdown\n   */\n  CLIENT_USERNAME_IS_SHUTDOWN:                   7,\n  /**\n   * The username for the session has not been set and dynamic\n   * clients are not allowed.\n   *\n   * Causes:\n   *  * 403 Dynamic Clients Not Allowed\n   */\n  DYNAMIC_CLIENTS_NOT_ALLOWED:                   8,\n  /**\n   * The session is attempting to use a client name that is\n   * in use by another client, and the router is configured to reject the\n   * new session.\n   * A client name cannot be used by multiple clients in the same Message\n   * VPN.\n   *\n   * Causes:\n   *  * 403 Client Name Already In Use\n   */\n  CLIENT_NAME_ALREADY_IN_USE:                    9,\n  /**\n   * The client name chosen has been rejected as invalid by the router.\n   *\n   * Causes:\n   *  * 400 Client Name Parse Error\n   */\n  CLIENT_NAME_INVALID:                           10,\n  /**\n   * The client login is not currently possible because a previous\n   * instance of same client was being deleted.\n   *\n   * Causes:\n   *  * 503 Subscriber Delete In Progress\n   */\n  CLIENT_DELETE_IN_PROGRESS:                     11,\n  /**\n   * The client login is not currently possible because the maximum\n   * number of active clients on router has already been reached.\n   *\n   * Causes:\n   *  * 503 Too Many Clients\n   *  * 503 Too Many Connections for VPN\n   */\n  TOO_MANY_CLIENTS:                              12,\n  /**\n   * The client could not log into the router.\n   *\n   * Causes:\n   *  * 401 error codes\n   *  * 404 error codes\n   *  * Failed to send a session setup message in the transport.\n   */\n  LOGIN_FAILURE:                                 13,\n  //////////\n  // VRID //\n  //////////\n  /**\n   * An attempt was made to connect to the wrong IP address on\n   * the router (must use CVRID if configured), or the router CVRID has\n   * changed and this was detected on reconnect.\n   *\n   * Causes:\n   *  * 403 Invalid Virtual Router Address\n   */\n  INVALID_VIRTUAL_ADDRESS:                       14,\n  /////////\n  // ACL //\n  /////////\n  /**\n   * The client login to the router was denied because the\n   * IP address/netmask combination used for the client is designated in the\n   * ACL (Access Control List) profile associated with that client.\n   *\n   * Causes:\n   *  * 403 Forbidden\n   */\n  CLIENT_ACL_DENIED:                             15,\n  /**\n   * Adding a subscription was denied because it matched a\n   * subscription that was defined as denied on the ACL (Access Control List)\n   * profile associated with the client.\n   *\n   * Causes:\n   *  * 403 Subscription ACL Denied\n   */\n  SUBSCRIPTION_ACL_DENIED:                       16,\n  /**\n   * A message could not be published because its topic matched\n   * a topic defined as denied on the ACL (Access Control List) profile\n   * associated with the client.\n   *\n   * Causes:\n   *  * 403 Publish ACL Denied\n   */\n  PUBLISH_ACL_DENIED:                            17,\n  ////////////////\n  // VALIDATION //\n  ////////////////\n  /**\n   * An API call was made with an out-of-range parameter.\n   */\n  PARAMETER_OUT_OF_RANGE:                        18,\n  /**\n   * An API call was made with a parameter combination\n   * that is not valid.\n   */\n  PARAMETER_CONFLICT:                            19,\n  /**\n   * An API call was made with a parameter of incorrect type.\n   */\n  PARAMETER_INVALID_TYPE:                        20,\n  //////////////////\n  // FATAL ERRORS //\n  //////////////////\n  /**\n   *  An API call had an internal error (not an application fault).\n   */\n  INTERNAL_ERROR:                                21,\n  /**\n   * An API call failed due to insufficient space in the transport\n   * buffer to accept more data,\n   * or due to exhaustion of the Guaranteed Messaging Window on a publisher.\n   * After an insufficient space error of either kind, the\n   * listeners on the {@link solace.SessionEventCode#event:CAN_ACCEPT_DATA}\n   * event are notified when it is possible to retry the failed operation.\n   */\n  INSUFFICIENT_SPACE:                            22,\n  /**\n   * The message router has rejected the request. All available\n   * resources of the requested type are in use.\n   *\n   * Causes:\n   *  * 400 Not Enough Space\n   */\n  OUT_OF_RESOURCES:                              23,\n  /**\n   * An API call failed due to a protocol error with the router\n   * (not an application fault).\n   */\n  PROTOCOL_ERROR:                                24,\n  /**\n   * An API call failed due to a communication error. This typically indicates the\n   * transport connection to the message router has been unexpectedly closed.\n   */\n  COMMUNICATION_ERROR:                           25,\n  ////////////////\n  // KEEP ALIVE //\n  ////////////////\n  /**\n   * The session keep-alive detected a failed session.\n   */\n  KEEP_ALIVE_FAILURE:                            26,\n  /////////////////////\n  // MESSAGE RELATED //\n  /////////////////////\n  /**\n   * An attempt was made to use a topic which is longer\n   * than the maximum that is supported.\n   */\n  // TOPIC_TOO_LARGE: 27,\n  /**\n   * A send call was made that did not have a topic in a mode\n   * where one is required (for example, client mode).\n   */\n  TOPIC_MISSING:                                 28,\n  /**\n   *  An attempt was made to send a message with a total\n   * size greater than that supported by the protocol. (???)\n   */\n  //  MAX_TOTAL_MSGSIZE_EXCEEDED: 29,\n  /**\n   * An attempt was made to send a message with user data larger\n   * than the maximum that is supported.\n   */\n  // USER_DATA_TOO_LARGE: 30,\n  /**\n   * An attempt was made to use a topic which has a syntax that\n   * is not supported.\n   *\n   * Causes:\n   *  * 400 Topic Parse Error\n   */\n  INVALID_TOPIC_SYNTAX:                          31,\n  /**\n   * The client attempted to send a message larger than that\n   * supported by the router.\n   *\n   * Causes:\n   *  * 400 Document Is Too Large\n   *  * 400 Message Too Long\n   */\n  MESSAGE_TOO_LARGE:                             32,\n  /**\n   * The router could not parse an XML message.\n   *\n   * Causes:\n   *  * 400 XML Parse Error\n   */\n  XML_PARSE_ERROR:                               33,\n  ///////////////////\n  // SUBSCRIPTIONS //\n  ///////////////////\n  /**\n   * The client attempted to add a subscription that already\n   * exists. This subcode is only returned if the session property\n   * 'IgnoreDuplicateSubscriptionError' is not enabled.\n   *\n   * Causes:\n   * 400 Subscription Already Exists)\n   */\n  SUBSCRIPTION_ALREADY_PRESENT:                  34,\n  /**\n   * The client attempted to remove a subscription which did not exist.\n   * This subcode is only returned if the session property\n   * 'IgnoreDuplicateSubscriptionError' is not enabled.\n   *\n   * Causes:\n   * 400 Subscription Not Found)\n   */\n  SUBSCRIPTION_NOT_FOUND:                        35,\n  /**\n   * The client attempted to add/remove a subscription that\n   * is not valid.\n   *\n   * Causes:\n   *  * 400 Subscription Parse Error\n   */\n  SUBSCRIPTION_INVALID:                          36,\n  /**\n   * The router rejected a subscription add or remove request\n   * for a reason not separately enumerated.\n   */\n  SUBSCRIPTION_ERROR_OTHER:                      37,\n  /**\n   * The client attempted to add a subscription that\n   * exceeded the maximum number allowed.\n   *\n   * Causes:\n   *  * 400 Max Num Subscriptions Exceeded\n   */\n  SUBSCRIPTION_TOO_MANY:                         38,\n  /**\n   *  The client attempted to add a subscription which already\n   * exists but it has different properties.\n   *\n   * Causes:\n   *  * 400 Subscription Attributes Conflict With Existing Subscription\n   */\n  SUBSCRIPTION_ATTRIBUTES_CONFLICT:              39,\n  /**\n   * The client attempted to establish a session with No Local\n   * enabled and the capability is not supported by the router.\n   */\n  NO_LOCAL_NOT_SUPPORTED:                        40,\n  ////////////////////\n  // UNKNOWN ERRORS //\n  ////////////////////\n  /**\n   * The router rejected a control message for another reason\n   * not separately enumerated.\n   */\n  // CONTROL_ERROR_OTHER: 41,\n  /**\n   * The router rejected a data message for a reason\n   * not separately enumerated.\n   */\n  DATA_ERROR_OTHER:                              42,\n  //////////////////////\n  // TRANSPORT ERRORS //\n  //////////////////////\n  /**\n   * Failed to create the HTTP connection.\n   */\n  CREATE_XHR_FAILED:                             43,\n  /**\n   * Failed to create the transport.\n   */\n  CONNECTION_ERROR:                              44,\n  /**\n   * Failed to decode the data.\n   */\n  DATA_DECODE_ERROR:                             45,\n  /**\n   * @deprecated\n   * The session was inactive for too long.\n   *\n   * Causes:\n   * * 400 Inactivity Timeout\n   */\n  INACTIVITY_TIMEOUT:                            46,\n  /**\n   * @deprecated\n   * The router does not know this session's identifier.\n   *\n   * Causes:\n   * * 400 Unknown Transport Session Identfier\n   */\n  UNKNOWN_TRANSPORT_SESSION_ID:                  47,\n  /**\n   * @deprecated This subcode is not used since 10.0.0.\n   * Guaranteed Messages (with a delivery mode other than DIRECT) are not supported.\n   */\n  AD_MESSAGING_NOT_SUPPORTED:                    48,\n  /**\n   * @deprecated\n   * Creating the WebSocket transport failed.\n   */\n  CREATE_WEBSOCKET_FAILED:                       49,\n  /**\n   * An attempt to perform an operation using a VPN that is configured to be\n   * STANDBY for replication.\n   *\n   * Causes:\n   * * 403 Replication Is Standby\n   */\n  REPLICATION_IS_STANDBY:                        50,\n  ////////////////////\n  // Authentication //\n  ////////////////////\n  /**\n   * Basic authentication is administratively shut down on the\n   * router.\n   *\n   * Causes:\n   *  * 403 Basic Authentication is Shutdown\n   */\n  BASIC_AUTHENTICATION_IS_SHUTDOWN:              51,\n  /**\n   * Client certificate authentication is administratively\n   * shut down on the router.\n   *\n   * Causes:\n   *  * 403 Client Certificate Authentication Is Shutdown\n   */\n  CLIENT_CERTIFICATE_AUTHENTICATION_IS_SHUTDOWN: 52,\n  //////////////////////\n  // Guaranteed Messaging //\n  //////////////////////\n  /**\n   * Guaranteed Messaging services are not enabled on the router.\n   *\n   * Causes:\n   *  * 503 Service Unavailable\n   */\n  GM_UNAVAILABLE:                                100,\n  /**\n   * The session attempted to connect to a Guaranteed Message Publisher\n   * that does not exist on this router.\n   * All unacked messages held by the API are renumbered and redelivered. This subCode\n   * is handled internally and will not be seen by the application. After successfully\n   * renumbereing and redelivering the messages, if any messages are resent, listeners\n   * on the @{link solace.SessionEventCode#event:REPUBLISHING_UNACKED_MESSAGES} event are\n   * invoked.\n   *\n   * Causes:\n   * * 400 Unknown Flow Name\n   * @private\n   */\n  UNKNOWN_FLOW_NAME:                             111,\n  /**\n   * Already bound to the Queue or not authorized to bind to the Queue.\n   *\n   * Causes:\n   *  * 400 Already Bound\n   */\n  ALREADY_BOUND:                                 112,\n  /**\n   * An attempt was made to bind to a Guaranteed Messaging Topic Endpoint with an\n   * invalid topic.\n   *\n   * Causes:\n   *  * 400 Invalid Topic Name\n   */\n  INVALID_TOPIC_NAME_FOR_TOPIC_ENDPOINT:         113,\n  /**\n   * An attempt was made to bind to an unknown Queue name (for example, not\n   * configured on the router).\n   *\n   * Causes:\n   *  * 503 Unknown Queue\n   */\n  UNKNOWN_QUEUE_NAME:                            114,\n  /**\n   * An attempt was made to perform an operation on an unknown Guaranteed Messaging\n   * Topic Endpoint name (for example, not configured on router).\n   *\n   * Causes:\n   *  * 503 Unknown Durable Topic Endpoint\n   */\n  UNKNOWN_TOPIC_ENDPOINT_NAME:                   115,\n  /**\n   * An attempt was made to bind to a Guaranteed Messaging Queue that has already reached\n   * its maximum number of clients.\n   *\n   * Causes:\n   *  * 503 Max clients exceeded for Queue\n   */\n  MAX_CLIENTS_FOR_QUEUE:                         116,\n  /**\n   * An attempt was made to bind to a Guaranteed Messaging Topic Endpoint that has already\n   * reached its maximum number of clients.\n   *\n   * Causes:\n   *  * 503 Max clients exceeded for durable Topic Endpoint\n   */\n  MAX_CLIENTS_FOR_TE:                            117,\n  /**\n   * An unexpected unbind response was received for a Guaranteed Messaging Queue or Topic\n   * Endpoint (for example, the Queue or Topic Endpoint was deleted from the router).\n   */\n  UNEXPECTED_UNBIND:                             118,\n  /**\n   * The specified Guaranteed Messaging Queue was not found when publishing a message.\n   *\n   * Causes:\n   *  * 400 Queue Not Found\n   */\n  QUEUE_NOT_FOUND:                               119,\n  /**\n   * Message was not delivered because the Guaranteed Message spool is over its\n   * allotted space quota.\n   *\n   * Causes:\n   *  * 503 Spool Over Quota\n   */\n  SPOOL_OVER_QUOTA:                              120,\n  /**\n   * An attempt was made to operate on a shutdown Guaranteed Messaging queue.\n   *\n   * Causes:\n   *  * 503 Queue Shutdown\n   */\n  QUEUE_SHUTDOWN:                                121,\n  /**\n   * An attempt was made to operate on a shutdown Guaranteed Messaging Topic Endpoint.\n   *\n   * Causes:\n   *  * 503 Durable Topic Endpoint Shutdown\n   *  * 503 TE Shutdown\n   *  * 503 Endpoint Shutdown\n   */\n  TOPIC_ENDPOINT_SHUTDOWN:                       122,\n  /**\n   * An attempt was made to bind to a non-durable Guaranteed Messaging Queue or Topic\n   * Endpoint, and the router is out of resources.\n   *\n   * Causes:\n   *  * 503 No More Non-Durable Queue or Topic Endpoint\n   */\n  NO_MORE_NON_DURABLE_QUEUE_OR_TOPIC_ENDPOINT:   123,\n  /**\n   * An attempt was made to create a Queue or Topic Endpoint that already exists.\n   * This subcode is only returned if\n   * {@link solace.SessionProperties.ignoreProvisionEndpointExists} was not set for the current\n   * session.\n   *\n   * Causes:\n   *  * 400 Endpoint Already Exists\n   */\n  ENDPOINT_ALREADY_EXISTS:                       124,\n  /**\n   * An attempt was made to delete or create a Queue or Topic Endpoint when the\n   * Session does not have authorization for the action. This subcode is also returned when an\n   * attempt is made to remove a message from an endpoint when the Session does not have 'consume'\n   * authorization, or when an attempt is made to add or remove a Topic subscription from a Queue\n   * when the Session does not have 'modify-topic' authorization.\n   *\n   * Causes:\n   *  * 403 Permission Not Allowed\n   */\n  PERMISSION_NOT_ALLOWED:                        125,\n  /**\n   * An attempt was made to bind to a Queue or Topic Endpoint with an invalid\n   * selector.\n   *\n   * Causes:\n   *  * 400 Invalid Selector\n   */\n  INVALID_SELECTOR:                              126,\n  /**\n   * Publishing the message was denied due to exceeding the maximum spooled message\n   * count.\n   *\n   * Causes:\n   *  * 503 Max message usage exceeded\n   */\n  MAX_MESSAGE_USAGE_EXCEEDED:                    127,\n  /**\n   * An attempt was made to create a dynamic durable endpoint, and it was found to\n   * exist with different properties.\n   *\n   * Causes:\n   *  * 400 Endpoint Property Mismatch\n   */\n  ENDPOINT_PROPERTY_MISMATCH:                    128,\n  /**\n   * The client attempted to publish an Guaranteed Messaging message to a topic that\n   * did not have any guaranteed subscription matches, or only matched a replicated topic.\n   *\n   * Causes:\n   *  * 503 No Subscription Match\n   */\n  NO_SUBSCRIPTION_MATCH:                         129,\n  /**\n   * The application attempted to acknowledge a message that arrived via a delivery\n   * mode that does not allow acknowledgements.\n   */\n  MESSAGE_DELIVERY_MODE_MISMATCH:                130,\n  /**\n   * The message was already acknowledged.\n   */\n  MESSAGE_ALREADY_ACKNOWLEDGED:                  131,\n  /**\n   * The API-supplied subscription did not match when attempting to bind to a\n   * non-exclusive durable topic endoint.\n   *\n   * Causes:\n   *  * 403 Subscription Does Not Match\n   */\n\n  SUBSCRIPTION_DOES_NOT_MATCH:                       133,\n  /**\n   * The API-supplied selector did not match when attempting to bind to a\n   * non-exclusive durable topic endpoint.\n   *\n   * Causes:\n   *  * 403 Selector Does Not Match\n   */\n  SELECTOR_DOES_NOT_MATCH:                           134,\n  /**\n   * The subscriber has provided an incorrectly formatted durable topic endpoint name.\n   *\n   * Causes:\n   *  * 400 Invalid Durable Topic Endpoint Name\n   */\n  INVALID_DTE_NAME:                                  135,\n  /**\n   * The unsubscribe request was denied by the router because the durable topic endpoint\n   * had one or more clients bound.\n   *\n   * Causes:\n   *  * 400 Unsubscribe Not Allowed, Client(s) Bound To DTE\n   */\n  UNSUBSCRIBE_NOT_ALLOWED_CLIENTS_BOUND:             136,\n  /**\n   * An application callback threw an error back to the API. The reason property describes\n   * the error that occurred.\n   */\n  CALLBACK_ERROR:                                    137,\n  /**\n   * A published message was discarded by the router because it will not be published\n   * anywhere based on the NoLocal properties. This can be considered normal.\n   *\n   * Causes:\n   * * 400 Nolocal Discard\n   */\n  NOLOCAL_DISCARD:                                   138,\n  /**\n   * The operation is delayed because Guaranteed Messaging is not ready on the router.\n   *\n   * Causes:\n   * 507 Ad Not Ready\n   */\n  GM_NOT_READY:                                      140,\n  /**\n   * The message was rejected because one or more matching endpoints'\n   * reject-low-priority-msg-limit was exceeded.\n   *\n   * Causes:\n   * * 503 Low Priority Msg Congestion\n   */\n  LOW_PRIORITY_MSG_CONGESTION:                       141,\n  /**\n   * The specified endpoint quota was out of range.\n   *\n   * Causes:\n   * 400 Quota Out Of Range\n   */\n  QUOTA_OUT_OF_RANGE:                                142,\n  /**\n   * Unable to load the certificate from the TrustStore for a SSL\n   * secured session.\n   */\n  FAILED_LOADING_TRUSTSTORE:                         143,\n  /**\n   * The client failed to load certificate and/or private key files.\n   */\n  FAILED_LOADING_CERTIFICATE_AND_KEY:                144,\n  /**\n   * DNS resolution failed for all hostnames.\n   */\n  UNRESOLVED_HOSTS:                                  145,\n  /**\n   * Replay is not supported on the Solace Message Router\n   */\n  REPLAY_NOT_SUPPORTED:                              146,\n  /**\n   *  Replay is not enabled in the message-vpn\n   */\n  REPLAY_DISABLED:                                   147,\n  /**\n   *  The client attempted to start replay on a flow bound to a non-exclusive endpoint\n   */\n  CLIENT_INITIATED_REPLAY_NON_EXCLUSIVE_NOT_ALLOWED: 148,\n  /**\n   *  The client attempted to start replay on an inactive flow\n   */\n  CLIENT_INITIATED_REPLAY_INACTIVE_FLOW_NOT_ALLOWED: 149,\n  /**\n   *  N/A - Browser Flows are not supported.\n   */\n  CLIENT_INITIATED_REPLAY_BROWSER_FLOW_NOT_ALLOWED:  150,\n  /**\n   *  Replay is not supported on temporary endpoints\n   * @deprecated since 10.3.1 - Replay is now supported on Temp Endpoints\n   */\n  REPLAY_TEMPORARY_NOT_SUPPORTED:                    151,\n  /**\n   *  The client attempted to start a replay but provided an unknown start location type.\n   */\n  UNKNOWN_START_LOCATION_TYPE:                       152,\n  /**\n   *  A replay in progress on a flow was administratively cancelled, causing the flow to be unbound\n   */\n  REPLAY_CANCELLED:                                  153,\n  /**\n   *  A replay in progress on a flow failed because messages to be replayed were trimmed\n   *  from the replay log\n   */\n  REPLAY_MESSAGE_UNAVAILABLE:                        154,\n  /**\n   *  A replay was requested but the requested start time is not available in the replay log\n   */\n  REPLAY_START_TIME_NOT_AVAILABLE:                   155,\n  /**\n   *  The Solace Message Router attempted to replay a message, but the queue/topic\n   *  endpoint rejected the message to the sender\n   */\n  REPLAY_MESSAGE_REJECTED:                           156,\n  /**\n   *  A replay in progress on a flow failed because the replay log was modified\n   */\n  REPLAY_LOG_MODIFIED:                               157,\n  /**\n   * Endpoint error ID in the bind request does not match the endpoint's error ID.\n   */\n  MISMATCHED_ENDPOINT_ERROR_ID:                      158,\n  /**\n   * A replay was requested, but the router does not have sufficient resources\n   * to fulfill the request, due to too many active replays.\n   */\n  OUT_OF_REPLAY_RESOURCES:                           159,\n\n  /**\n   * A replay was in progress on a Durable Topic Endpoint (DTE)\n   * when its topic or selector was modified, causing the replay to fail.\n   */\n  TOPIC_OR_SELECTOR_MODIFIED_ON_DURABLE_TOPIC_ENDPOINT:         160,\n  /**\n   *  A replay in progress on a flow failed\n   */\n  REPLAY_FAILED:                                                161,\n  /**\n   *  A replay was started on the queue or DTE, either by another client or by the router.\n   */\n  REPLAY_STARTED:                                               162,\n  /**\n   * Router does not support Compressed TLS\n   */\n  COMPRESSED_TLS_NOT_SUPPORTED:                                 163,\n  /**\n   * The client attempted to add a shared subscription, but the capability is not supported\n   * by the appliance.\n   */\n  SHARED_SUBSCRIPTIONS_NOT_SUPPORTED:                           164,\n  /**\n   * The client attempted to add a shared subscription on a client that is not permitted to\n   * use shared subscriptions.\n   */\n  SHARED_SUBSCRIPTIONS_NOT_ALLOWED:                             165,\n  /**\n   * The client attempted to add a shared subscription to a queue or topic endpoint.\n   */\n  SHARED_SUBSCRIPTIONS_ENDPOINT_NOT_ALLOWED:                    166,\n  /**\n   * A replay was requested but the requested start message is not available in the replay log.\n   */\n  REPLAY_START_MESSAGE_NOT_AVAILABLE:                           167,\n  /**\n   * Replication Group Message Id are not comparable.\n   * Messages must be published to the same broker or HA pair for their Replicaton Group\n   * Message Id to be comparable.\n   */\n  MESSAGE_ID_NOT_COMPARABLE:                                    168,\n  /**\n   * Replay is not supported on anonymous queue\n   * - 403 Replay Not Supported on Anonymous Queue\n   */\n  REPLAY_ANONYMOUS_QUEUE_NOT_SUPPORTED:                         169,\n  /**\n   * Browser flows to Partitioned Queues are not permitted.\n   * - 403 Browsing Not Supported on Partitioned Queue\n   */\n  PARTITIONED_QUEUE_BROWSING_NOT_SUPPORTED:                     170,\n  /**\n   * Egress selectors are not permitted when binding to a Partitioned Queue.\n   * - 403 Selectors Not Supported on Partitioned Queue\n   */\n  PARTITIONED_QUEUE_SELECTORS_NOT_SUPPORTED:                    171,\n  /**\n   * Replay Not Supported on Anonymous Queue Without Subscriptions\n   * - 403 Replay Not Supported on Anonymous Queue Without Subscriptions\n   */\n  REPLAY_ANONYMOUS_QUEUE_WITHOUT_SUBSCRIPTIONS_NOT_SUPPORTED:   172,\n  /**\n   * The message was rejected because the appliance has been configured\n   * to reject messages when sync replication mode is ineligible.\n   * - 503 Sync Replication Ineligible (Reject Messages when Synchronous Replication Mode is Ineligible)\n   * \n   * * The transaction was started as a synchronous replicated transaction,\n   * but replication became ineligible during the transaction.\n   * - 503 Sync Replication Ineligible (Replication Ineligible during Synchronous Replicated Transaction)\n   */\n  SYNC_REPLICATION_INELIGIBLE:                                  173,\n  /**\n   * An attempt was made to bind to a durable TE or Queue \n   * with a flow property of non-durable.\n   *\n   * Causes:\n   *  * 400 Invalid Queue or Topic Endpoint Durability\n   */\n  INVALID_QUEUE_OR_TOPIC_ENDPOINT_DURABILITY:                   174,\n};\n\nmodule.exports.ErrorSubcode = Enum.new(ErrorSubcode);\n","const { SolaceError } = require('./solace-error');\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users.</b>\n * An error thrown when calling an API that has not been implemented.\n * @hideconstructor\n * @extends {solace.SolaceError}\n *\n * @memberof solace\n */\nclass NotImplementedError extends SolaceError {\n  /*\n   * Creates an instance of NotImplementedError.\n   * @param {any} message The message to include in the error.\n   * @memberof NotImplementedError\n   */\n  constructor(message) {\n    super('NotImplementedError', message || '', NotImplementedError);\n  }\n  /**\n   * The name of the error.\n   * @name solace.NotImplementedError#name\n   * @type {String}\n   * @readonly\n   * @description 'NotImplementedError'\n   */\n}\n\nmodule.exports.NotImplementedError = NotImplementedError;\n\n","const { SolaceError } = require('./solace-error');\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users.</b>\n * An error thrown by the API when an operational error is encountered.\n * @memberof solace\n * @extends {solace.SolaceError}\n * @hideconstructor\n */\nclass OperationError extends SolaceError {\n\n  /*\n   * @constructor\n   * @param {String} message The message to include in the error.\n   * @param {Number} [subcode] The subcode. See {@link ErrorSubcode} for valid values\n   * @param {Object} [reason] Embedded error or exception (optional)\n   */\n  constructor(message, subcode, reason) {\n    /**\n     * The name of the error.\n     * @name solace.OperationError#name\n     * @type {String}\n     * @readonly\n     * @description 'OperationError'\n     */\n    super('OperationError', message, OperationError);\n    /**\n     * The subcode for the error. @see {@link solace.ErrorSubcode}\n     * @name solace.OperationError#subcode\n     * @type {solace.ErrorSubcode}\n     */\n    this.subcode = subcode;\n    /**\n     * The reason for the error: an embedded error object or exception.\n     * @name solace.OperationError#reason\n     * @type {Object}\n     */\n    this.reason = reason;\n  }\n\n}\n\nmodule.exports.OperationError = OperationError;\n","const { ErrorSubcode } = require('./error-subcodes');\nconst { OperationError } = require('./operation-error');\nconst { RequestEventCode } = require('./request-event-codes');\n\n\nconst SUBCODE_FROM_EC = {\n  [RequestEventCode.REQUEST_ABORTED]: ErrorSubcode.SESSION_NOT_CONNECTED,\n  [RequestEventCode.REQUEST_TIMEOUT]: ErrorSubcode.TIMEOUT,\n};\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users.</b>\n *\n * Represents a request failure event; request failure events are passed to the application\n * event handling callback provided when sending the request {@link solace.Session#sendRequest}\n * @memberof solace\n * @extends solace.OperationError\n * @hideconstructor\n */\nclass RequestError extends OperationError {\n  /*\n   * <b>This class is not exposed for construction by API users.</b> Instances of this object will\n   * be passed to the application in calls to the application's\n   * {@link solace.Session.requestFailedCallback}, provided when invoking\n   * {@link solace.Session.sendReqeust}.\n   * @constructor\n   * @param {String} message Information string\n   * @param {solace.RequestEventCode} eventCode The event code\n   * @param {Object} [correlationKey] Any associated correlation key\n   * @param {Object} [reason] Any additional information\n   * @private\n   */\n  constructor(message, eventCode, correlationKey, reason) {\n    super(message, SUBCODE_FROM_EC[eventCode], reason);\n    /**\n     * The name of the error.\n     * @name solace.RequestError#name\n     * @type {String}\n     * @readonly\n     * @description 'RequestError'\n     */\n    this.name = 'RequestError';\n    this._eventCode = eventCode;\n    this._correlationKey = correlationKey;\n  }\n\n  /**\n   * @type {solace.SessionEventCode}\n   * @name solace.RequestError#requestEventCode\n   * @description A code that provides more information about the error event.\n   */\n  get requestEventCode() {\n    return this._requestEventCode;\n  }\n\n  /**\n   * @deprecated Use {@link solace.RequestError#subcode}\n   * @type {?solace.ErrorSubcode}\n   * @description if applicable, an error subcode. Defined in {@link ErrorSubcode}\n   */\n  get errorSubcode() {\n    return super.subcode;\n  }\n\n  [util_inspect_custom]() {\n    const superObj = super[util_inspect_custom] ? super[util_inspect_custom]() : {};\n    return Object.assign(superObj, {\n      'requestEventCode': RequestEventCode.describe(this.requestEventCode),\n      'infoStr':          this.infoStr,\n      'correlationKey':   this.correlationKey,\n    });\n  }\n\n  toString() {\n    return util_inspect(this);\n  }\n\n}\n\nmodule.exports.RequestError = RequestError;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * An attribute of {@link solace.RequestError}. This enumeration represents the\n * different errors emitted by\n * {@link solace.Session.requestFailedCallback}\n * when a {@link solace.Session#sendRequest} fails.\n *\n * The client application receives a request error with event code\n * {@link solace.RequestEventCode.REQUEST_ABORTED}\n * when the underlying connection is successfully closed, or closed as a result\n * of a communication error.\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst RequestEventCode = {\n  /**\n   * A request was aborted because the session is disconnected.\n   */\n  REQUEST_ABORTED: 8,\n  /**\n   * The event represents a timed-out request API call.\n   */\n  REQUEST_TIMEOUT: 9,\n};\n\nmodule.exports.RequestEventCode = Enum.new(RequestEventCode);\n","/**\n * @classdesc\n * <b>This class is not exposed for construction by API users.</b>\n * The base class for all errors thrown by the API.\n * @hideconstructor\n * @extends {Error}\n *\n * @memberof solace\n */\nclass SolaceError extends Error {\n  constructor(type, message, constructor) {\n    super(message || '');\n    /**\n     * Error Message.\n     * @name solace.SolaceError#message\n     * @type {String}\n     */\n    this.message = message; // force set\n    /**\n     * The name of the error.\n     * @name solace.SolaceError#name\n     * @type {String}\n     */\n    this.name = type;\n\n    // ES6 error semantics are disappointing\n    // Cleaner stack capture for V8-based VMs\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, constructor);\n    } else {\n      this.stack = new Error().stack;\n    }\n  }\n\n}\n\nmodule.exports.SolaceError = SolaceError;\n","const { ArrayOperations } = require('./lib/array-operations');\nconst { assert } = require('./lib/assert');\nconst { BidiMap } = require('./lib/bidi-map');\nconst { Enum } = require('./lib/enum');\nconst { Iterator } = require('./lib/iterator');\nconst { Lazy } = require('./lib/lazy');\nconst { makeMap } = require('./lib/make-map');\nconst { Mixin } = require('./lib/mixin');\nconst { Resolver } = require('./lib/resolver');\nconst { SetOperations } = require('./lib/set-operations');\n\nmodule.exports.assert = assert;\nmodule.exports.ArrayOperations = ArrayOperations;\nmodule.exports.BidiMap = BidiMap;\nmodule.exports.Enum = Enum;\nmodule.exports.Iterator = Iterator;\nmodule.exports.Lazy = Lazy;\nmodule.exports.makeIterator = Iterator.makeIterator;\nmodule.exports.makeMap = makeMap;\nmodule.exports.Mixin = Mixin;\nmodule.exports.mixin = Mixin.mixin;\nmodule.exports.Resolver = Resolver;\nmodule.exports.resolve = Resolver.resolve;\nmodule.exports.SetOperations = SetOperations;\n","/* eslint-disable no-nested-ternary */\n\nfunction defaultComparator(a, b) {\n  const astr = String(a);\n  const bstr = String(b);\n  return astr > bstr ? 1 : (astr < bstr ? -1 : 0);\n}\n\nfunction insertOrdered(array, element, comparator = defaultComparator) {\n  const result = [...array];\n  return this.inplaceInsertOrdered(result, element, comparator);\n}\n\nfunction inplaceInsertOrdered(array, element, comparator = defaultComparator) {\n  let index = 0;\n  let min = 0;\n  let max = array.length;\n  // Optimize for empty array\n  if (max > 0) {\n    // Optimize for append\n    if (comparator(element, array[max - 1]) > 0) {\n      index = max;\n    } else {\n      // Binary search\n      index = (min + max) >> 1; // math.floor((min + max) / 2)\n      while (max > min) {\n        if (comparator(element, array[index]) < 0) {\n          max = index;\n        } else {\n          min = index + 1;\n        }\n        index = (min + max) >> 1; // math.floor((min + max) / 2)\n      }\n    }\n  }\n  array.splice(index, 0, element);\n}\n\nmodule.exports = {\n  ArrayOperations: {\n    defaultComparator,\n    insertOrdered,\n    inplaceInsertOrdered,\n  },\n};\n","let assert;\n\n/**\n * Browsers and Node share a common console.assert interface, console.assert(assertion, ...);\n * In Node, console.assert throws AssertionError if its assertion is falsy.\n * In browsers, they print to the console.\n * Extend browser behaviour to also throw.\n */\n\nif (BUILD_ENV.MODE_DEBUG) {\n  let internalAssert;\n  if (BUILD_ENV.TARGET_NODE) {\n    // _eslint-disable-next-line no-console\n    internalAssert = console.assert;\n  } else {\n    internalAssert = function browserAssert(assertion, ...args) {\n      if (!assertion) {\n        throw new Error(`Assertion error: ${typeof assertion} ${assertion} (${args.join(' ')})`);\n      }\n    };\n  }\n  // Now, wrap the assert in a catch and rethrow to give us a single place\n  // to set assert breakpoints.\n  assert = function outerAssert(...args) {\n    // eslint-disable-next-line no-useless-catch\n    try {\n      internalAssert(...args);\n    } catch (e) {\n      // if (BUILD_ENV.MODE_DEBUG) debugger;\n      throw (e);\n    }\n  };\n} else {\n  // In production mode, asserts are generally disabled.\n  assert = () => {};\n}\n\nmodule.exports.assert = assert;\n","/**\n * @private\n */\nclass BidiMap {\n  constructor(...pairs) {\n    this.forward = new Map();\n    this.reverse = new Map();\n    pairs.forEach((p) => {\n      this.setValues(p[0], p[1]);\n    });\n  }\n\n  /**\n   * Sets the key => value and value => key relationships for the supplied parameters.\n   *\n   * Method name is #set, not #put, for alignment with ES map method names.\n   * @param {*} key The key for the forward mapping (value in the reverse mapping)\n   * @param {*} value The value for the forward mapping (key in the reverse mapping)\n   */\n  setValues(key, value) {\n    this.forward.set(key, value);\n    this.reverse.set(value, key);\n  }\n\n}\n\nmodule.exports.BidiMap = BidiMap;\n","function enumName(instance, keys, value) {\n  const matches = keys.filter(k => instance[k] === value);\n  return matches.length ? matches[0] : null;\n}\n\nfunction enumValues(instance, keys) {\n  return Array.from(new Set(keys.map(k => instance[k])));\n}\n\n/**\n * The base for all enumerated types. Provides common functionality such as\n * collections of keys and values, reverse mapping, and readable descriptions. Also\n * supports overriding the canonical key-value mapping to maintain readability in\n * minified environments.\n *\n * @mixin\n * @memberof solace\n */\nclass Enum {\n\n  /**\n   * Creates an Enum with the given key-value mapping.\n   *\n   * @param {Object} values The key-value mapping to use. This mapping is set as the initial\n   * canonical key-value mapping. To override, use {@link solace.Enum#_setCanonical}.\n   */\n  constructor(values) {\n    Object.defineProperties(this, {\n      _canonical: {\n        value:        null,\n        enumerable:   false,\n        writable:     true,\n        configurable: true,\n      },\n    });\n    this._setCanonical(values);\n  }\n\n  /**\n   * Resets the canonical key value mapping for the enumeration. Using this method,\n   * you add additional sets of keys that map to the same values, and specify that\n   * these new keys take precedence for reverse mapping. Any older set of keys is made\n   * non-canonical and non-enumerable.\n   *\n   * @example\n   * const c = new Enum({ HELLO: 'world' });\n   * c._setCanonical({ MAD: 'world' });\n   * c.nameOf('world') === 'MAD'; // true\n   *\n   * @param {Object} values The new key-value mapping to add to the object and set as canonical.\n   * @param {Boolean} final Whether this enumeration should accept further reconfiguration.\n   * @private\n   */\n  _setCanonical(values, final = false) {\n    this._canonical = Object.assign({}, values);\n    Object.keys(this).forEach((key) => {\n      const descriptor = Object.getOwnPropertyDescriptor(this, key);\n      if (descriptor.value !== undefined) {\n        Object.defineProperty(this, key, {\n          enumerable:   false,\n          writable:     true,\n          configurable: true,\n          value:        descriptor.value,\n        });\n      }\n    });\n    Object.keys(values).forEach((key) => {\n      Object.defineProperty(this, key, {\n        enumerable:   true,\n        writable:     !final,\n        configurable: !final,\n        value:        values[key],\n      });\n    });\n  }\n\n  /**\n   * Create a human-readable string describing the given enumeration value. This\n   * result is informational and may vary between SDK versions.\n   *\n   * Currently, it either returns the value provided (if the associated key is\n   * the same), or a string of the form `key (value)`.\n   *\n   * @example\n   * console.log(new Enum({ ANSWER: 42 }).describe(42)); // ANSWER (42)\n   * console.log(new Enum({ ECHO: 'ECHO' })).describe('ECHO'); // ECHO\n   *\n   * @param {any} enumValue The value on which to perform reverse mapping.\n   * @param {String} [noneValue=''] The string to return if the enumeration value is\n   *    undefined or null.\n   * @param {String} [unknownValue='<unknown>'] The string to return if the enumeration\n   *    value was not found in any of the canonical keys.\n   * @returns {String} A human-readable description of the reverse mapping for the value.\n   */\n  describe(enumValue, noneValue = '<none>', unknownValue = '<unknown>') {\n    if (enumValue === null || enumValue === undefined) return noneValue;\n    const name = enumName(this._canonical,\n                          Object.keys(this._canonical || {}),\n                          enumValue)\n                 || unknownValue;\n    return name === enumValue ? name : `${name} (${enumValue})`;\n  }\n\n  /**\n   * Returns the canonical name in this enumeration for the given value. This function is\n   * designed to facilitate reflection, whereas for display\n   *\n   * @param {any} enumValue The value for which to get the enumeration key.\n   * @returns {String} The name for the given value.\n   */\n  nameOf(enumValue) {\n    return enumName(this._canonical, Object.keys(this._canonical || {}), enumValue);\n  }\n\n  /**\n   * Returns all canonical names/keys in this enumeration.\n   *\n   * @readonly\n   * @returns {Array.<String>} All canonical names in this enumeration.\n   */\n  get names() {\n    return Object.keys(this._canonical || {});\n  }\n\n  /**\n   * Returns all values assigned to canonical keys in this enumeration.\n   *\n   * @readonly\n   * @returns {Array} All values defined for enumeration keys.\n   */\n  get values() {\n    return enumValues(this._canonical, Object.keys(this._canonical || {}));\n  }\n\n  /**\n   * A property returning true to faciliate duck-typing with {solace.Enum} objects.\n   *\n   * @readonly\n   * @returns {Boolean} true This is an enumeration.\n   */\n  get isEnum() { // eslint-disable-line class-methods-use-this\n    return true;\n  }\n\n  /**\n   * Returns the name of an enuerated value given the\n   * enumeration and the value.\n   *\n   * @param {Object} instance The enumeration instance.\n   * @param {*} value The value for which to return the key name.\n   * @returns {String} The key name for the given enumeration value.\n   */\n  static nameOf(instance, value) {\n    return instance.nameOf(value);\n  }\n\n  /**\n   * Returns values defined on this enumeration for the given keys. To get the enumeration keys,\n   * use {@link Object#keys}.\n   * @param {Object} instance The enumeration on which to return values.\n   * @returns {Array} The values defined on the given enumeration.\n   **/\n  static values(instance) {\n    return instance.values();\n  }\n\n  /**\n   * Alternate construction method for enumerations.\n   *\n   * @static\n   * @param {Object} values Initial key-value mapping\n   * @returns {solace.Enum} A new enumeration instance\n   * @private\n   */\n  static new(values) {\n    return new Enum(values);\n  }\n\n  /**\n   * Constructs a private enumeration in which the values are equal to the keys.\n   *\n   * @static\n   * @param {Array.<String>} strings Key names. The values will be equal to the keys.\n   * @returns {solace.Enum} An enumeration instance of the given strings\n   * @private\n   */\n  static ofStrings(strings) {\n    const map = {};\n    strings.forEach((s) => {\n      map[s] = s;\n    });\n    return Enum.new(map);\n  }\n\n  /**\n   * Constructs an enumeration in which each key is assigned a distinct integer value.\n   * Enums created this way are subject to renumbering if keys are reordered.\n   *\n   * @static\n   * @param {Array.<String>} keys Key names. The values will be sequential from zero.\n   * @returns {solace.Enum} An enumeration instance of the given values\n   * @private\n   */\n  static ofNumbers(keys) {\n    const map = {};\n    keys.forEach((key, index) => {\n      map[key] = index;\n    });\n    return Enum.new(map);\n  }\n}\n\nmodule.exports.Enum = Enum;\n","/**\n * An object managing a traversal of an Array-like object.\n *\n * @memberof solace\n * @property {function} deref Returns the value the iterator is\n *      referencing.\n * @property {function} incr Increments the iterator's reference in the\n *      iterator's data set.\n * @property {function} end Tests whether the iterator is at the end of\n *      the data set.  This MUST return false when calling deref() or\n *      incr().\n * @private\n */\nclass Iterator {\n\n  /**\n   * Creates an iterator to forward iterate over a specific contiguous\n   * section of an array, specifically in the range [start, end)\n   * @param {Array} arr The array to iterate over\n   * @param {Number} [start=0] The first item the iterator should\n   *  dereference\n   * @param {Number} [end=arr.length] One beyond the last item in the array\n   *  that the iterator should dereference.\n   * @constructor\n   */\n  constructor(arr, start = 0, end = arr.length) {\n    /**\n     * The array being iterated.\n     * @type {Array}\n     * @private\n     */\n    this._arr = arr;\n    /**\n     * The current index of the enumeration.\n     * @private\n     * @type {Number}\n     */\n    this._index = start;\n    /**\n     * The exclusive end index, or the length, of the array.\n     * @type {Number}\n     */\n    this._end = end;\n  }\n\n  /**\n   * Returns the element at the iterator's position.\n   * @returns {Object} The array element at the current position.\n   */\n  deref() {\n    return this._arr[this._index];\n  }\n\n  /**\n   * Increments the iterator.\n   * @returns {Number} The new position of the iterator.\n   */\n  incr() {\n    return ++this._index;\n  }\n\n  /**\n   * Reports whether the iterator has completed its iteration.\n   * @returns {Boolean} True if the iterator has reached the end of the iteration.\n   */\n  end() {\n    return this._index >= this._end;\n  }\n\n  /**\n   * Creates an iterator to forward iterate over a specific contiguous\n   * section of an array, specifically in the range [start, end)\n   *\n   * @param {Array} arr The array to iterate over\n   * @param {Number} [start=0] The first item the iterator should\n   *  dereference\n   * @param {Number} [end=arr.length] One beyond the last item in the array\n   *  that the iterator should dereference.\n   * @returns {solace.Iterator} An iterator to the specified set of data.\n   */\n  static makeIterator(arr, start = 0, end = arr.length) {\n    return new Iterator(arr, start, end);\n  }\n\n}\n\n// Expose both the static constructor function and the class.\nmodule.exports.Iterator = Iterator;\n","const DEFAULT_PROPERTY_OPTIONS = {\n  enumerable: true,\n};\n\nfunction setPropertyValue(target, key, value, options = null) {\n  Object.defineProperty(\n          target,\n          key,\n          Object.assign({ value }, DEFAULT_PROPERTY_OPTIONS, options));\n}\n\n\nfunction lazyProperty(target, key, evalFn) {\n  Object.defineProperty(\n    target,\n    key,\n    Object.assign({\n      configurable: true, // Allow replacing this property with resolved value.\n      get:          () => {\n        // The getter evaluates the function provided.\n        // It replaces itself with the value it resolves.\n        const result = evalFn(target, key);\n        setPropertyValue(target, key, result);\n        return result;\n      },\n      set: (value) => {\n        setPropertyValue(target, key, value);\n      },\n    }, DEFAULT_PROPERTY_OPTIONS));\n  return target;\n}\n\nfunction lazyProperties(target, obj) {\n  Object.keys(obj).forEach((k) => {\n    lazyProperty(target, k, obj[k]);\n  });\n  return obj;\n}\n\nfunction lazyValue(evalFn) {\n  return lazyProperty({}, 'value', evalFn);\n}\n\nconst Lazy = {\n  lazyProperties,\n  lazyProperty,\n  lazyValue,\n};\n\nmodule.exports.Lazy = Lazy;\n","\n// Avoid closure compiler nonsense\nmodule.exports.makeMap = function makeMap(...keyValuePairs) {\n  const result = {};\n  for (let i = 0; i < keyValuePairs.length; i += 2) {\n    result[keyValuePairs[i]] = keyValuePairs[i + 1];\n  }\n  return result;\n};\n","const Mixin = {};\n\n  /**\n   * @param  {Object} target The class to augment\n   * @param  {Object} add The class to mix in.\n   * @returns {Object} The augmented class\n   */\nMixin.mixin = function mixin(target, add) {\n  const targetProto = target.prototype;\n  const addProto = add.prototype;\n  Object.getOwnPropertyNames(addProto).forEach((name) => {\n    if (name === 'constructor') return;\n    Object.defineProperty(targetProto, name, Object.getOwnPropertyDescriptor(addProto, name));\n  });\n  return target;\n};\n\nmodule.exports.Mixin = Mixin;\n","const { Lazy } = require('./lazy');\n\nconst { lazyProperty } = Lazy;\n\nfunction traversePath(commonSource, keySource, pathArr) {\n  return pathArr.reduce((source, value) => {\n    if (typeof value === 'string') {\n      return source[value];\n    }\n    return value;\n  }, keySource);\n}\n\n/**\n * @classdesc\n * Deferred resolution for imports. A heavyweight method of breaking circular dependencies.\n * Each specified key (see below) is resolved once by a function that lazily evaluates a\n * path.\n * <pre>\n * const resolved = new Resolver({\n *  foo: [FooLib, 'fooContainer'],        // Resolves foo from FooLib.fooContainer.foo lazily\n *  bar: ['foo'],                         // Resolves bar from previously defined foo lazily\n *  'baz,quux': [FooLib, 'bazsAndQuuxes'] // baz = FooLib.bazsAndQuuxes.baz,\n *                                        // quux = FooLib.bazsAndQuuxes.quux\n * });\n * </pre>\n * In most cases this is equivalent to using FooLib.fooContainer.foo, et cetera, directly.\n * Prefer that approach unless the dependencies are deeply hierarchical. Prefer the Resolver\n * when one-time evaluation and aliasing a path makes the code more DRY and readable.\n * @private\n */\nclass Resolver {\n  constructor(options, source) {\n    // For every key...\n    Object.keys(options).forEach((compoundKey) => {\n      // Split out key names if multiple were provided\n      compoundKey.split(',').map(k => k.trim()).forEach((key) => {\n        // Build a path array. The key name is the implicit last element.\n        const rawPath = options[compoundKey];\n        const path = typeof rawPath === 'string' ? rawPath.split('.') : rawPath;\n        const pathArr = (Array.isArray(path) ? path : [path]).concat(key);\n        // Create a defer for this key.\n        lazyProperty(this, key, () => traversePath(source, this, pathArr));\n      });\n    });\n  }\n\n  static resolve(options, source) {\n    return new Resolver(options, source);\n  }\n}\n\n\nmodule.exports.Resolver = Resolver;\n","/* eslint-disable no-restricted-syntax */\n\nfunction isSuperset(set, subset) {\n  return Array.from(subset).every(elem => set.has(elem));\n}\n\nfunction inplaceUnion(setA, setB) {\n  setB.forEach((elem) => {\n    setA.add(elem);\n  });\n  return setA;\n}\n\nfunction union(setA, setB) {\n  return inplaceUnion(new Set(setA), setB);\n}\n\nfunction inplaceIntersection(setA, setB) {\n  setA.forEach((elem) => {\n    if (!setB.has(elem)) {\n      setA.delete(elem);\n    }\n  });\n  return setA;\n}\n\nfunction intersection(setA, setB) {\n  return new Set(Array.from(setA).filter(elem => setB.has(elem)));\n}\n\nfunction inplaceDifference(setA, setB) {\n  setB.forEach((elem) => {\n    setA.delete(elem);\n  });\n  return setA;\n}\n\nfunction difference(setA, setB) {\n  return new Set(Array.from(setA).filter(elem => !setB.has(elem)));\n}\n\nmodule.exports = {\n  SetOperations: {\n    inplaceDifference,\n    inplaceIntersection,\n    inplaceUnion,\n    isSuperset,\n    difference,\n    intersection,\n    union,\n  },\n}\n;\n","const { EventEmitter } = require('./lib/event-emitter');\nconst { Timer } = require('./lib/timer');\n\nmodule.exports = {\n  EventEmitter,\n  Timer,\n};\n","const NodeEventEmitter = require('events').EventEmitter;\nconst { ArrayUtils } = require('solclient-util');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\nconst { LOG_WARN } = require('solclient-log');\n\nconst { flatten, includes } = ArrayUtils;\nconst NODE_DEFAULT_EVENTS = ['error', 'newListener', 'removeListener'];\nconst BLACKLIST_DIRECT = ['newListener', 'removeListener'];\n\nfunction buildFilter(emits) {\n  if (typeof emits === 'function') return k => includes(NODE_DEFAULT_EVENTS, k) || emits(k);\n  if (!Array.isArray(emits)) return null;\n  const emitSet = new Set(flatten(emits));\n  NODE_DEFAULT_EVENTS.forEach(el => emitSet.add(el));\n  const emitArray = Array.from(emitSet);\n  return k => includes(emitArray, k);\n}\n\nconst DISABLED_ACTIONS = {\n  ignore() {},\n  fail() {\n    throw new Error('Emitter disabled');\n  },\n};\n\nclass EventEmitter extends NodeEventEmitter {\n  /**\n   * Creates an instance of EventEmitter.\n   *\n   * An EventEmitter is an object that periodically emits events that cause function objects, known\n   * as listeners, to be called. It exposes functions to attach passed functions to named events.\n   *\n   * Typically, event names are camel-cased strings, but any valid JavaScript property key can be\n   * used.\n   *\n   * @param {?Object} options Options for the emitter\n   * @param {String} [options.direct] An event that is to be directly dispatched when possible.\n   *  Direct dispatch is a performance optimization that minimizes EventEmitter overhead. Direct\n   *  dispatch skips the safe error handling path; use _formatErrorEvent if required.\n   * @param {Array.<string>} [options.emits] Valid event names. If specified, listeners for other\n   *  events are rejected. Array can be nested, e.g. `['foo', ['bar1', 'bar2']]`\n   * @param {Boolean} [options.unsafe] Determines whether dispatch is less exception-safe.\n   *  * When `false`, if an event listener throws an error, the error is thrown all the way back\n   *    to the emitting stack frame. This makes it the emitter's responsibility to catch exceptions\n   *    in listeners. This avoids a try-catch frame and may be more performant.\n   *  * When `true`, if an event listener throws an error, and an `error` listener exists, the\n   *    exception is dispatched to that listener wrapped in an {@link solace.OperationError},\n   *    `subcode={@link solace.ErrorSubcode.CALLBACK_ERROR}`. The originating event and the error\n   *    thrown by the listener are available on `event` and `error` fields respectively.\n   *\n   *  In all cases, throwing an exception in a listener prevents the event being received by\n   *  later listeners.\n   *\n   *  This option does not affect any event selected for `options.direct`, which always uses\n   *  unsafe dispatch.\n   *\n   * @memberof solace\n   * @extends {EventEmitter}\n   * @private\n   */\n  constructor(options) {\n    super();\n    const { direct, emits, unsafe, formatEventName } = options || {};\n    this.formatEventName = formatEventName || (name => name);\n\n    // Direct mode path:\n    //  emit --> (direct emit || bareEmit).\n    const bareEmit = this.emit.bind(this);\n    this._installDirectFilter(direct, bareEmit);\n\n    // Indirect mode path:\n    //  verifier -> error handlers -> emit --> bareEmit\n    this._installErrorHandlers(unsafe);\n    this._installEmitVerifier();\n\n    this._listenerVerificationFilter = buildFilter(emits);\n    this._emits = emits;\n  }\n\n  _installDirectFilter(direct, bareEmit) {\n    if (!direct) return;\n      // Direct mode class instance modifications\n\n    if (includes(BLACKLIST_DIRECT, direct)) {\n      throw new OperationError(\n        `Cannot configure listener collection events [${BLACKLIST_DIRECT.join(', ')}] as direct`,\n        ErrorSubcode.INTERNAL_ERROR);\n    }\n\n    // The default direct emitter is the base emitter. Skip any overrides we installed.\n    this._defaultEmitDirect = (...args) => bareEmit(direct, ...args);\n\n    // Initally not direct for 0 listeners\n    this.emitDirect = this._defaultEmitDirect;\n    this._directEventName = direct;\n\n    this.on = (eventName, listener) => {\n      this._verifyListenerEvent(eventName);\n      const ret = super.on(eventName, listener);\n      this._setEmitDirect(eventName, true, listener);\n      return ret;\n    };\n\n    this.addListener = (eventName, listener) => this.on(eventName, listener);\n\n    this.once = (eventName, listener) => {\n      this._verifyListenerEvent(eventName);\n      const ret = super.once(eventName, listener);\n      this._setEmitDirect(eventName, false);\n      return ret;\n    };\n\n    this.prependListener = (eventName, listener) => {\n      this._verifyListenerEvent(eventName);\n      const ret = super.prependListener(eventName, listener);\n      this._setEmitDirect(eventName, true, listener);\n      return ret;\n    };\n\n    this.prependOnceListener = (eventName, listener) => {\n      this._verifyListenerEvent(eventName);\n      const ret = super.prependOnceListener(eventName, listener);\n      this._setEmitDirect(eventName, false);\n      return ret;\n    };\n\n    this.removeAllListeners = (eventName) => {\n      const ret = super.removeAllListeners(eventName);\n      if ((eventName === this._directEventName) || (eventName === undefined)) {\n        this.emitDirect = this._defaultEmitDirect;\n      }\n      return ret;\n    };\n\n    this.removeListener = (eventName, listener) => {\n      const ret = super.removeListener(eventName, listener);\n      if ((eventName === this._directEventName) && (this.listenerCount(eventName) === 0)) {\n        this.emitDirect = this._defaultEmitDirect;\n      }\n      return ret;\n    };\n\n    this.directListenerCount = () => this.listenerCount(this._directEventName);\n\n    this.setOnFirstDirectListener = (firstDirect) => {\n      this._onFirstDirectListener = firstDirect;\n    };\n  }\n\n  _setEmitDirect(eventName, onListener, listener) {\n    if (eventName !== this._directEventName) {\n      return;\n    }\n\n    if (onListener && (this.directListenerCount() === 1)) {\n      this.emitDirect = listener;\n    } else {\n      this.emitDirect = this._defaultEmitDirect;\n    }\n\n    if ((this.directListenerCount() === 1) && (this._onFirstDirectListener !== undefined)) {\n      this._onFirstDirectListener();\n    }\n  }\n\n  _verifyListenerEvent(event) {\n    if (!this._listenerVerificationFilter) return;\n\n    if (event === undefined || event === null) {\n      this.throwInternal(\n          new OperationError(`Emitter rejects listener for no-name event: ${event}`,\n                              ErrorSubcode.PARAMETER_OUT_OF_RANGE));\n    }\n    if (!this._listenerVerificationFilter(event)) {\n      this.throwInternal(\n        new OperationError(`Emitter rejects listeners for ${event}, emits ${this._emits}`,\n                            ErrorSubcode.PARAMETER_OUT_OF_RANGE));\n    }\n  }\n\n  _installEmitVerifier() {\n    if (BUILD_ENV.MODE_DEBUG) {\n      // Debug mode: always add assert for empty event name\n      const emitBase = this.emit.bind(this);\n      this.emit = (name, ...args) => {\n        if (name === undefined || name === null) {\n          this.throwInternal(new OperationError(`Emitter rejects no-name event: ${name}`));\n        }\n        emitBase(name, ...args);\n      };\n    }\n  }\n\n  _installErrorHandlers(unsafe) {\n    if (unsafe) {\n      // If unsafe, there's no try/catch/emit so throwInternal just throws\n      this.throwInternal = (err) => { throw err; };\n      return;\n    }\n\n    // Install try/catch/emit-as-event if not unsafe mode.\n    // Introduces throwInternal, which sets the _internalError flag restore\n    // orignal throw-to-emitter functionality in case of internal error\n\n    const emitBase = this.emit.bind(this);\n\n    this.throwInternal = function throwInternal(err) {\n      this._internalError = true;\n      throw err;\n    };\n\n    this.emit = (name, ...args) => {\n      try {\n        emitBase(name, ...args);\n      } catch (ex) {\n        if (this._internalError) {\n          this._internalError = undefined;\n          throw ex; // rethrow\n        }\n\n        const err = this.formatErrorEvent(ex, name, ...args);\n        try {\n          LOG_WARN(`Listener for '${err.info.event.formattedName}' threw exception, dispatching to 'error'`);\n          emitBase('error', err);\n        } catch (innerEx) {\n          LOG_WARN(\"Listener for 'error' threw exception:\", innerEx, '\\nOriginal exception:', ex);\n        }\n      }\n    };\n  }\n\n  get isDirect() {\n    return this.emitDirect && (this.emitDirect !== this._defaultEmitDirect);\n  }\n\n  formatErrorEvent(ex, name, ...args) {\n    const formattedName = this.formatEventName(name);\n    return Object.assign(new OperationError(\n      `Unhandled error in event handler for '${formattedName}'`,\n      ErrorSubcode.CALLBACK_ERROR,\n      `On event: ${[name, ...args]} ${ex}`\n    ), {\n      stack: ex.stack,\n      info:  {\n        event: { name, formattedName, args },\n        error: ex,\n      },\n    });\n  }\n\n  disableEmitter() {\n    this._defaultEmitDirect = DISABLED_ACTIONS.ignore;\n    // If this is a direct-enabled emitter, this will also cause emitDirect to be set to\n    // _defaultEmitDirect, which is now DISALBED_ACTIONS.ignore.\n    this.removeAllListeners();\n    this.emit = DISABLED_ACTIONS.ignore;\n    // Freeze listeners by first disabling remove, then add.\n    this.addListener('removeListener', DISABLED_ACTIONS.fail);\n    this.addListener('newListener', DISABLED_ACTIONS.fail);\n  }\n\n}\n\nmodule.exports.EventEmitter = EventEmitter;\n","/**\n * @private\n */\nclass Timer {\n  /**\n   * Creates an instance of Timer.\n   * @param {function} cancel The action to perform on cancellation\n   */\n  constructor(cancel) {\n    this.cancel = () => {\n      this.cancel = () => {}; // change to no-op\n      cancel();\n    };\n  }\n\n  /**\n   * @static\n   * @param {Number} interval The interval for the timer, in milliseconds.\n   * @param {function} onInterval The function to invoke on expiration.\n   * @param {any} [args] Any arguments to pass to the onExpire callback.\n   * @returns {Timer} A new timer object.\n   */\n  static newInterval(interval, onInterval, ...args) {\n    const timerRef = setInterval(onInterval, interval, ...args);\n    return new Timer(() => clearInterval(timerRef));\n  }\n\n  /**\n   * @static\n   * @param {Number} timeout The timeout for the timer, in milliseconds.\n   * @param {function} onExpire The function to invoke on expiration.\n   * @param {any} [args] Any arguments to pass to the onExpire callback.\n   * @returns {Timer} A new timer object.\n   */\n  static newTimeout(timeout, onExpire, ...args) {\n    const timerRef = setTimeout(onExpire, timeout, ...args);\n    return new Timer(() => clearTimeout(timerRef));\n  }\n}\n\nmodule.exports.Timer = Timer;\n","const { FactoryProfile, SolclientFactoryProfiles } = require('./lib/solclient-factory-profiles');\nconst { ProfileBinding } = require('./lib/profile-binding');\nconst { SolclientFactory } = require('./lib/solclient-factory');\nconst { SolclientFactoryProperties } = require('./lib/solclient-factory-properties');\n\nmodule.exports.FactoryProfile = FactoryProfile;\nmodule.exports.ProfileBinding = ProfileBinding;\nmodule.exports.SolclientFactoryProfiles = SolclientFactoryProfiles;\nmodule.exports.SolclientFactoryProperties = SolclientFactoryProperties;\nmodule.exports.SolclientFactory = SolclientFactory;\n\n","const { OperationError } = require('solclient-error');\n\nlet binding = null;\n\nconst ProfileBinding = {\n  get value() {\n    if (binding === null) {\n      throw new OperationError('Profile binding not initialized. Call solace.SolclientFactory.init');\n    }\n    return binding;\n  },\n  set value(value) {\n    // private, so we'll allow it for testing\n    binding = value;\n  },\n};\n\nmodule.exports.ProfileBinding = ProfileBinding;\n","// Preferred configuration for the profile system:\n\n// End user:\n//  opaque profiles, property-style access\n// API implementation:\n//  inherited properties, property-style access\n// A root, forward compatible profile\n// A legacy, backwards compatible profile\n// Feature/milestone profiles that inherit from one of these two configurations\n\n// The lowest-friction way of doing this is using prototype inheritance.\n// Also considered:\n//  getProperty() with child->parent pointers -- mixes string\n//    and property access\n//  ES6 proxies -- not universal and not shimmable\n\n// Necessary to abuse prototype inheritance for static property inheritance:\n/* eslint-disable class-methods-use-this */\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users. Users should obtain an instance from\n * {@link solace.SolclientFactoryProfiles}.</b>\n *\n * A factory profile determines the default functionality of the API. Profiles are predefined\n * combinations of capabilities that represent a mutually-consistent, valid configuration state\n * for API features.\n *\n * The factory may be initialized exactly once, with a single factory profile.\n *\n * Changing which factory profile is used by {@link solace.SolclientFactory.init} may result in\n * different default property values, validation, function signatures and implementations.\n *\n * Changing the factory profile will not change relationships between API methods. That is,\n * assuming all properties and arguments are explicitly set, an application may call the\n * API with the same values as before to cause the same result, unless explicitly noted.\n *\n * If no profile is specified, the default will provide equivalent functionality to\n * SolclientJS version 7.x. New applications are encouraged to use the\n * {@link solace.SolclientFactoryProfiles.version10_5} profile for the best compatibility with\n * other APIs (excluding 7.x JavaScript APIs).\n *\n * @memberof solace\n * @private\n */\nclass FactoryProfile {\n  /**\n   * Returns whether Guaranteed Messaging is enabled for the API. When `true`,\n   * AD publishing capability is enabled by default.\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  get guaranteedMessagingEnabled() { return undefined; }\n\n  /**\n   * Returns whether the API will allow Comet (long-held HTTP request) transports\n   * to be used. If this is `true`, transport protocols may fall back to HTTP\n   * if a connection cannot be established with a preferred protocol.\n   *\n   *  * NOTE: Guaranteed Messaging cannot be enabled if Comet is enabled.\n   *\n   * @type {Boolean}\n   * @readonly\n   * @target browser\n   */\n  get cometEnabled() { return undefined; }\n\n  /**\n   * Returns whether the API performs UTF-8 encoding on user strings where the SMF\n   * spec requires it.\n   *  * When this is `true`, the API will correctly interoperate with other Solace APIs that send\n   *    UTF-8 encoded topics.\n   *  * When this is `false`, the API will interoperate correctly with 7.x and earlier JavaScript\n   *    APIs, that used an arbitrary encoding for such strings.\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  get topicUtf8Encode() { return undefined; }\n\n  /**\n   * Returns whether the API returns BYTEARRAY SDT values as Strings.\n   *\n   * In older versions (before 10.5) of the API,\n   * an SDTField with type BYTEARRAY returned a String from getValue().\n   * Newer versions (since 10.5),\n   * getValue() for the same type returns an actual ByteArray, unless this property is `true`.\n   *\n   *  * When this is `true`, SDTField.getValue() returns a String for a BYTEARRAY.\n   *  * When this is `false`, SDTField.getValue() returns a ByteArray for a BYTEARRAY.\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  get byteArrayAsString() { return undefined; }\n\n  [util_inspect_custom]() {\n    return {\n      'guaranteedMessagingEnabled': this.guaranteedMessagingEnabled,\n      'cometEnabled':               this.cometEnabled,\n      'topicUtf8Encode':            this.topicUtf8Encode,\n      'byteArrayAsString':          this.byteArrayAsString,\n    };\n  }\n\n  toString() {\n    return util_inspect(this);\n  }\n}\n\n/**\n * The Version 7 profile for SolclientJS. This profile sets factory and session default values\n * that provide SolclientJS 7.x behaviour, and interoperability with SolclientJS 7.x clients.\n *\n * @namespace\n * @type {solace.FactoryProfile}\n * @name version7\n * @memberof solace.SolclientFactoryProfiles\n * @private\n * @FactoryProfile\n */\nclass Version7Profile extends FactoryProfile {\n  /**\n   * Returns `false`: Guaranteed Messaging is disabled by default to maintain availability of Comet\n   * HTTP transports by default.\n   *\n   * @name solace.SolclientFactoryProfiles.version7.guaranteedMessagingEnabled\n   * @type {Boolean}\n   * @readonly\n   * @target browser\n   */\n  /**\n   * Returns `true`: Guaranteed Messaging is enabled for the API. Note that version 7.x SolclientJS\n   * clients cannot send or receive any messages using Guaranteed Messaging features.\n   *\n   * @name solace.SolclientFactoryProfiles.version7.guaranteedMessagingEnabled\n   * @type {Boolean}\n   * @readonly\n   * @target node\n   */\n  get guaranteedMessagingEnabled() { return !!BUILD_ENV.TARGET_NODE; }\n\n  /**\n   * Returns true: Comet HTTP transports are enabled for the API. The API user may, by default,\n   * select Comet HTTP transport protocol, and the API may fall back to these protocols during a\n   * connection attempt.\n   *\n   * @name solace.SolclientFactoryProfiles.version7.cometEnabled\n   * @type {Boolean}\n   * @readonly\n   * @target browser\n   */\n  /**\n   * Returns false: Comet HTTP transports are not present in Node.js.\n   *\n   * @name solace.SolclientFactoryProfiles.version7.cometEnabled\n   * @type {Boolean}\n   * @readonly\n   * @target node\n   */\n  get cometEnabled() { return !!BUILD_ENV.TARGET_BROWSER; }\n  /**\n   * Returns false: topic UTF-8 encoding is disabled for the API. The network encoding of topics is\n   * compatible with other SolclientJS 7.x clients, and may not be interoperable with other\n   * Solace Messaging APIs.\n   *\n   * @name solace.SolclientFactoryProfiles.version7.topicUtf8Encode\n   * @type {Boolean}\n   * @readonly\n   */\n  get topicUtf8Encode() { return false; }\n\n  /**\n   * Returns true: getValue() of SDTFields of type BYTEARRAY return a string,\n   * and so does getBinaryAttachment().\n   *\n   * @name solace.SolclientFactoryProfiles.version7.byteArrayAsString\n   * @type {Boolean}\n   * @readonly\n   */\n  get byteArrayAsString() { return true; }\n}\nconst legacyInstance = new Version7Profile();\n\n/**\n * The Version 10 profile for SolclientJS. This profile sets factory and session default values\n * that provide the full capability of the API as of version 10.0, including interoperability with\n * other Solace Messaging products.\n *\n * @namespace\n * @name version10\n * @memberof solace.SolclientFactoryProfiles\n * @private\n * @FactoryProfile\n */\nclass Version10Profile extends FactoryProfile {\n  /**\n   * Returns `true`: Guaranteed Messaging is enabled for the API,\n   * with the result that {@link solace.MessagePublisherProperties#enabled} is `true` by default\n   * on platforms that support Guaranteed Messaging publishing.\n   *\n   * Where the {@link solace.TransportType.WS_BINARY} transport is unavailable,\n   * {@link solace.MessagePublisherProperties#enabled} is `false` by\n   * default.\n   *\n   * @name solace.SolclientFactoryProfiles.version10.guaranteedMessagingEnabled\n   * @type {Boolean}\n   * @readonly\n   * @target browser\n   */\n  /**\n   * Returns `true`: Guaranteed Messaging is enabled by default for the API.\n   *\n   * @name solace.SolclientFactoryProfiles.version10.guaranteedMessagingEnabled\n   * @type {Boolean}\n   * @readonly\n   * @target node\n   */\n  get guaranteedMessagingEnabled() {\n    return true;\n  }\n  /**\n   * Returns `false`: Comet HTTP transports are disabled for the API. The API will not select or\n   * fall back to HTTP Comet transport protocols, which are mutually exclusive of Guaranteed\n   * Messaging features.\n   *\n   * @name solace.SolclientFactoryProfiles.version10.cometEnabled\n   * @type {Boolean}\n   * @readonly\n   * @target browser\n   */\n  /**\n   * Returns false: Comet HTTP transports are not present in Node.js.\n   *\n   * @name solace.SolclientFactoryProfiles.version10.cometEnabled\n   * @type {Boolean}\n   * @readonly\n   * @target node\n   */\n  get cometEnabled() {\n    return false;\n  }\n  /**\n   * Returns `true`: the API will encode topics for interoperability with other Solace Messaging\n   * products. SolclientJS 7.x clients may fail to correctly decode when topic names that include\n   * multi-byte UTF-8 code points.\n   *\n   * @name solace.SolclientFactoryProfiles.version10.topicUtf8Encode\n   * @type {Boolean}\n   * @readonly\n   */\n  get topicUtf8Encode() {\n    return true;\n  }\n\n  /**\n   * Returns true: getValue() of SDTFields of type BYTEARRAY return a string,\n   * and so does getBinaryAttachment().\n   *\n   * @name solace.SolclientFactoryProfiles.version10.byteArrayAsString\n   * @type {Boolean}\n   * @readonly\n   */\n  get byteArrayAsString() { return true; }\n}\n\nconst v10Instance = new Version10Profile();\n\n/**\n * The Version 10.5 profile for SolclientJS. This profile sets factory and session default values\n * that provide the full capability of the API as of version 10.5, including interoperability with\n * other Solace Messaging products.\n *\n * @namespace\n * @name version10_5\n * @memberof solace.SolclientFactoryProfiles\n * @private\n * @FactoryProfile\n */\nclass Version105Profile extends FactoryProfile {\n  /**\n   * Returns `true`: Guaranteed Messaging is enabled for the API,\n   * with the result that {@link solace.MessagePublisherProperties#enabled} is `true` by default\n   * on platforms that support Guaranteed Messaging publishing.\n   *\n   * Where the {@link solace.TransportType.WS_BINARY} transport is unavailable,\n   * {@link solace.MessagePublisherProperties#enabled} is `false` by\n   * default.\n   *\n   * @name solace.SolclientFactoryProfiles.version10_5.guaranteedMessagingEnabled\n   * @type {Boolean}\n   * @readonly\n   * @target browser\n   */\n  /**\n   * Returns `true`: Guaranteed Messaging is enabled by default for the API.\n   *\n   * @name solace.SolclientFactoryProfiles.version10_5.guaranteedMessagingEnabled\n   * @type {Boolean}\n   * @readonly\n   * @target node\n   */\n  get guaranteedMessagingEnabled() {\n    return true;\n  }\n  /**\n   * Returns `false`: Comet HTTP transports are disabled for the API. The API will not select or\n   * fall back to HTTP Comet transport protocols, which are mutually exclusive of Guaranteed\n   * Messaging features.\n   *\n   * @name solace.SolclientFactoryProfiles.version10_5.cometEnabled\n   * @type {Boolean}\n   * @readonly\n   * @target browser\n   */\n  /**\n   * Returns false: Comet HTTP transports are not present in Node.js.\n   *\n   * @name solace.SolclientFactoryProfiles.version10_5.cometEnabled\n   * @type {Boolean}\n   * @readonly\n   * @target node\n   */\n  get cometEnabled() {\n    return false;\n  }\n  /**\n   * Returns `true`: the API will encode topics for interoperability with other Solace Messaging\n   * products. SolclientJS 7.x clients may fail to correctly decode when topic names that include\n   * multi-byte UTF-8 code points.\n   *\n   * @name solace.SolclientFactoryProfiles.version10_5.topicUtf8Encode\n   * @type {Boolean}\n   * @readonly\n   */\n  get topicUtf8Encode() {\n    return true;\n  }\n\n  /**\n   * Returns false: getValue() of SDTFields of type BYTEARRAY return a Uint8Array,\n   * and so does getBinaryAttachment().\n   *\n   * @name solace.SolclientFactoryProfiles.version10_5.byteArrayAsString\n   * @type {Boolean}\n   * @readonly\n   */\n  get byteArrayAsString() { return false; }\n}\n\n\nconst forwardInstance = new Version105Profile();\n\n/**\n * The collection of predefined factory profiles available for application use.\n *\n * See each member for a description of its configuration.\n *\n * @namespace\n * @memberof solace\n * @FactoryProfile\n */\nconst SolclientFactoryProfiles = {\n  _legacy:  legacyInstance,\n  _v10:     v10Instance,\n  _forward: forwardInstance,\n  _default: legacyInstance,\n\n  /**\n   * The version 7 profile for browsers. {@link solace.SolclientFactoryProfiles.version7}\n   *\n   * The version 7 profile configures API defaults for interoperability with the\n   * SolclientJS 7.x API, and applications that use it.\n   *\n   * {@link solace.SolclientFactoryProfiles.version7}\n   *\n   * @name version7\n   * @memberof solace.SolclientFactoryProfiles\n   * @type {solace.FactoryProfile}\n   * @target browser\n   * @FactoryProfile\n   */\n  /**\n   * The version 7 profile for Node.JS. {@link solace.SolclientFactoryProfiles.version7}\n   *\n   * A version 7 profile configures API defaults for interoperability with the\n   * SolclientJS 7.x API, and applications that use it.\n   *\n   * {@link solace.SolclientFactoryProfiles.version7}\n   *\n   * @name version7\n   * @memberof solace.SolclientFactoryProfiles\n   * @type {solace.FactoryProfile}\n   * @target node\n   * @FactoryProfile\n   */\n  version7: legacyInstance,\n\n  /**\n   * The version 10 profile for Node.JS.\n   *\n   * The version 10 profile configures API defaults for use with Guaranteed Messaging, and other\n   * Solace Messaging APIs.\n   * It provides a backwards-compatibility mode for existing applications\n   * expecting SDTField.getValue() to return a string for BYTEARRAYs.\n   *\n   * {@link solace.SolclientFactoryProfiles.version10}\n   *\n   * @name version10\n   * @memberof solace.SolclientFactoryProfiles\n   * @type {solace.FactoryProfile}\n   * @target node\n   * @FactoryProfile\n   */\n  /**\n   * The version 10 profile for browsers.\n   *\n   * The version 10 profile configures API defaults for use with Guaranteed Messaging, and other\n   * Solace Messaging APIs.\n   * It provides a backwards-compatibility mode for existing applications\n   * expecting SDTField.getValue() to return a string for BYTEARRAYs.\n   *\n   * {@link solace.SolclientFactoryProfiles.version10}\n   *\n   * @name version10\n   * @memberof solace.SolclientFactoryProfiles\n   * @type {solace.FactoryProfile}\n   * @target browser\n   * @FactoryProfile\n   */\n  version10: v10Instance,\n\n  /**\n   * The version 10.5 profile for browsers.\n   *\n   * The version 10.5 profile configures API defaults for use with Guaranteed Messaging, and other\n   * Solace Messaging APIs.\n   *\n   * {@link solace.SolclientFactoryProfiles.version10_5}\n   *\n   * @name version10_5\n   * @memberof solace.SolclientFactoryProfiles\n   * @type {solace.FactoryProfile}\n   * @target browser\n   * @FactoryProfile\n   */\n  /**\n   * The version 10.5 profile for Node.JS.\n   *\n   * The version 10.5 profile configures API defaults for use with Guaranteed Messaging, and other\n   * Solace Messaging APIs.\n   *\n   * {@link solace.SolclientFactoryProfiles.version10_5}\n   *\n   * @name version10_5\n   * @memberof solace.SolclientFactoryProfiles\n   * @type {solace.FactoryProfile}\n   * @target node\n   * @FactoryProfile\n   */\n  version10_5: forwardInstance,\n\n  [util_inspect_custom]() {\n    return {\n      'version7':    this.version7,\n      'version10':   this.version10,\n      'version10_5': this.version10_5,\n    };\n  },\n\n  toString() {\n    return util_inspect(this);\n  },\n};\n\nmodule.exports.FactoryProfile = FactoryProfile;\nmodule.exports.SolclientFactoryProfiles = SolclientFactoryProfiles;\n","const { APIProperties } = require('solclient-util');\nconst { Check } = require('solclient-validate');\n\nfunction getDefaultLogLevel() {\n  // break dependency loop\n  // eslint-disable-next-line global-require\n  const { LogLevel } = require('solclient-log');\n  return LogLevel.INFO;\n}\n\n/**\n * @classdesc\n * Properties used during initialization of {@link solace.SolclientFactory}.\n *\n * @memberof solace\n */\nclass SolclientFactoryProperties extends APIProperties {\n  /**\n   * Creates an instance of SolclientFactoryProperties.\n   *\n   * @param {Object} [options] The property names and values to apply to this instance\n   * @param {solace.LogLevel} [options.logLevel]  logLevel (default={@link solace.LogLevel.INFO}\n   * @param {solace.LogImpl} [options.logger]     log implementation (default=NULL)\n   * @param {solace.SolclientFactoryProfiles} [options.profile] Javascript profile\n   *  (default={@link solace.SolclientFactoryProfiles.version7})\n   * @memberOf SolclientFactoryProperties\n   */\n  constructor(options) {\n    super({\n      logLevel: getDefaultLogLevel(),\n      logger:   null,\n    }, options);\n  }\n\n  /**\n   * The factory profile to use. The following factory profiles are available:\n   * * {@link solace.SolclientFactoryProfiles.version7}, a backwards-compatible profile\n   *      for existing solClientJS 7.x applications\n   * * {@link solace.SolclientFactoryProfiles.version10}, the recommended profile\n   *      for new applications\n   *\n   * @type {solace.SolclientFactoryProfiles}\n   */\n  get profile() {\n    return this._profile;\n  }\n  set profile(profile) {\n    this._profile = profile;\n  }\n\n  /**\n   * The logging level to use for filtering log events. Messages with a level of lesser importance\n   * than this will be filtered out and not logged.\n   * @type {solace.LogLevel}\n   */\n  get logLevel() {\n    return Check.number(this._logLevel) ? this._logLevel : getDefaultLogLevel();\n  }\n  set logLevel(val) {\n    this._logLevel = val;\n  }\n\n  /**\n   * The logging implementation to use. In the debug API, the log implementation will be called\n   * for every log statement not filtered out by the log level. If no implementation is supplied,\n   * the default implementation will be used, which logs to the global console object.\n   * @type {solace.LogImpl}\n   */\n  get logger() {\n    return this._logger || null;\n  }\n  set logger(val) {\n    this._logger = val;\n  }\n\n  [util_inspect_custom]() {\n    // break dependency loop\n    // eslint-disable-next-line global-require\n    const { LogLevel } = require('solclient-log');\n    return {\n      'logLevel': LogLevel.describe(this._logLevel),\n      'profile':  this._profile,\n    };\n  }\n\n  toString() {\n    return util_inspect(this);\n  }\n}\n\nmodule.exports.SolclientFactoryProperties = SolclientFactoryProperties;\n","const {\n  ErrorSubcode,\n  OperationError,\n} = require('solclient-error');\nconst { FactoryProfile, SolclientFactoryProfiles } = require('./solclient-factory-profiles');\nconst { Parameter } = require('solclient-validate');\nconst { ProfileBinding } = require('./profile-binding');\nconst { SolclientFactoryProperties } = require('./solclient-factory-properties');\n\nconst factoryState = {\n  initializeCount: 0,\n  initializers:    [],\n};\n/**\n * @global\n * @name solClientJS\n * @description\n * <b>solClientJS</b> is a full functioned Solace Messaging API written entirely in JavaScript.\n * Applications using the <i>solClientJS</i> API can access all the features of a\n * Solace Message Router.\n *\n * The API is intended for use by applications written in JavaScript, targetting\n * either <b>NODE</b> or a traditional web browser.\n *\n * All classes, objects, methods of the API are encapsulated in the {@link solace} namespace.\n * The starting point for all applications is {@link solace.SolclientFactory}. This factory object\n * generates the {@link solace.Session} for connecting to the Solace Message Router.\n * {@link solace.SolclientFactory} also generates the {@link solace.Message} object\n * which enncapsulates the messages and {@link solace.Destination} the application will use\n * to send and receive data.\n * @summary The Solace Message Router Messaging API for Javascript.\n * @importTypeDefinitions import {EventEmitter} from 'events';\n * @importTypeDefinitions import Long = require('long');\n */\n\n/**\n * A singleton used as the main factory for the messaging APIs. The very first operation by\n * any application must be to initialize the API:\n * * {@link solace.SolclientFactory.init}\n *\n * <i>SolclientFactory</i> provides methods to construct:\n * * {@link solace.Session}\n * * {@link solace.Message}\n * * {@link solace.Destination}\n *\n * Additionally <i>SolclientFactory</i> manages the\n * logging level in the API.\n * @namespace\n * @public\n * @memberof solace\n */\nconst SolclientFactory = {\n\n  /**\n   * Adds a function to be called on factory initialization\n   * @param {function(factoryProps, factoryState)} func initializer function to be called\n   * @internal\n   */\n  addInitializer(func) {\n    factoryState.initializers.push(func);\n  },\n\n  /**\n   * @param {function} func function to wrap\n   * @returns {function} new factory method\n   * @internal\n   */\n  createFactory(func) {\n    return function factoryMethod(...args) {\n      if (factoryState.initializeCount === 0) {\n        throw new OperationError('SolclientFactory not initialized', ErrorSubcode.INVALID_OPERATION);\n      }\n      return func(...args);\n    };\n  },\n\n  /**\n   * Initialize global properties. This function must be called before any other API call is made.\n   *\n   * Note: After the first call to this method, subsequent calls have no effect.\n   *\n   * @param {solace.SolclientFactoryProperties} [factoryProps] The initialization properties for\n   *  the factory, if required.\n   * @param {solace.LogImpl} [factoryProps.logger] A logging implementation\n   * @param {solace.LogLevel}[factoryProps.logLevel] The logging level to use\n   *  for filtering log events.\n   * @param {solace.SolclientFactoryProfiles}\n   *  [factoryProps.profile=solace.SolclientFactoryProfiles.version7]\n   *     The factory profile. This class cannot be created by an API user; choose one of the static\n   *     instances from {@link solace.SolclientFactoryProfiles}.\n   * @throws {solace.OperationError} Invalid logger implementation\n   * @returns {solace.SolclientFactory} For method chaining\n   */\n  init(factoryProps) {\n    if (factoryState.initializeCount > 0) {\n      return this;\n    }\n\n    const props = new SolclientFactoryProperties(factoryProps);\n    const profile = factoryProps && factoryProps.profile || SolclientFactoryProfiles.version7;\n    Parameter.isInstanceOf('factoryProps.profile', profile, FactoryProfile);\n    ProfileBinding.value = profile;\n\n    factoryState.initializers.forEach((initializer) => {\n      initializer.call(this, props, factoryState);\n    });\n    ++factoryState.initializeCount;\n\n    if ((factoryProps !== undefined) && (factoryProps !== null)) {\n      // Factory should not depend on other packages at file scope\n      // eslint-disable-next-line global-require\n      const { LOG_DEBUG } = require('solclient-log');\n      LOG_DEBUG('Factory properties:\\n', factoryProps);\n    }\n    return this;\n  },\n\n  /**\n   * @private\n   */\n  reset() {\n    factoryState.initializeCount = 0;\n  },\n\n\n  /**\n   * @returns {Number} Count of factory initializations.\n   *    Nonzero means cannot be initialized again.\n   * @internal\n   */\n  _getInitializeCount() {\n    return factoryState.initializeCount;\n  },\n\n  /**\n   * @private\n   * @name solace.SolclientFactory.profiles\n   * @type {solace.SolclientFactoryProfiles}\n   * @readonly\n   * @description The collection of {@link solace.FactoryProfile}. See a description of\n   * each in {@link solace.SolclientFactoryProfiles}.\n   */\n  get profiles() {\n    return SolclientFactoryProfiles;\n  },\n};\n\nmodule.exports.SolclientFactory = SolclientFactory;\n","const { Flow } = require('./lib/flow');\nconst { FlowOperation } = require('./lib/flow-operation');\nconst { PrivateFlowEventName } = require('./lib/private-flow-event-names');\n\nmodule.exports.Flow = Flow;\nmodule.exports.FlowOperation = FlowOperation;\nmodule.exports.PrivateFlowEventName = PrivateFlowEventName;\n","const { Enum } = require('solclient-eskit');\n\nconst FlowOperation = {\n  CONNECT:         'FlowOperation_CONNECT',\n  DISCONNECT:      'FlowOperation_DISCONNECT',\n  START:           'FlowOperation_START',\n  STOP:            'FlowOperation_STOP',\n  DISPOSE:         'FlowOperation_DESTROY',\n  GET_STATS:       'FlowOperation_GET_STATS',\n  RESET_STATS:     'FlowOperation_RESET_STATS',\n  GET_PROPERTIES:  'FlowOperation_GET_PROPERTIES',\n  GET_DESTINATION: 'FlowOperation_GET_DESTINATION',\n};\n\nmodule.exports.FlowOperation = Enum.new(FlowOperation);\n","const {\n  ErrorSubcode,\n  NotImplementedError,\n  OperationError,\n} = require('solclient-error');\nconst { EventEmitter } = require('solclient-events');\nconst { FlowOperation } = require('./flow-operation');\nconst { LogFormatter } = require('solclient-log');\nconst { PrivateFlowEventName } = require('./private-flow-event-names');\nconst { Stats } = require('solclient-stats');\n\n// Unless flow is disposed, these operations are always allowed\nconst ALWAYS_OPS = [\n  FlowOperation.DISPOSE,\n  FlowOperation.GET_STATS,\n  FlowOperation.GET_PROPERTIES,\n  FlowOperation.RESET_STATS,\n];\n\n\n/**\n * @classdesc Flow\n * * <b>This class is not exposed for construction by API users.</b>\n * A Flow is an abstract base class. A Flow represents a guaranteed message connection to the\n * Solace Message Router. There may be many Guaranteed Message\n * Consumers on a {@link solace.Session}, each\n * instantiated as a {@link solace.MessageConsumer}.\n * @memberof solace\n * @extends {solace.EventEmitter}\n * @private\n */\nclass Flow extends EventEmitter {\n\n  /**\n   * Creates a Flow instance.\n   * @constructor Flow\n   * @param {APIProperties} flowProperties The properties object for this flow.\n   * @param {Object} sessionInterfaceFactory Function that creates session interface methods\n   * @param {Object} [emitterOptions] The options to pass to the EventEmitter constructor.\n   * @private\n   */\n  constructor(flowProperties, sessionInterfaceFactory, emitterOptions) {\n    const emitterOptionsFull = Object.assign({}, emitterOptions);\n    emitterOptionsFull.emits = (emitterOptionsFull.emits || []).concat(\n      PrivateFlowEventName.values\n    );\n    super(emitterOptionsFull);\n    const sessionInterface = sessionInterfaceFactory(this);\n    const self = this;\n    this.logger = new LogFormatter((...args) =>\n      [`[session=${sessionInterface.sessionIdHex}]`, `[flow=${self.flowIdDec}]`, ...args]);\n    this.log = this.logger.wrap(this.log, this);\n    // dispose() was called on this flow.\n    // It is not always executed immediately, leaving time for the auto-ack.\n    this._disposing = false;\n    // The flow truly was destroyed, no more delays.\n    this._disposed = false;\n    this._userDisconnected = true;\n    this._properties = flowProperties;\n    this._sessionInterface = sessionInterface;\n    this._stats = new Stats(sessionInterface);\n    this._privateEventEmitter = new EventEmitter(emitterOptionsFull);\n  }\n\n  // Private event emitter functions, hidden from the public interface.\n  _emit(type, ...args) {\n    this._privateEventEmitter.emit(type, ...args);\n    this.emit(type, ...args);\n  }\n  _on(type, listener) {\n    this._privateEventEmitter.on(type, listener);\n  }\n  _once(type, listener) {\n    this._privateEventEmitter.once(type, listener);\n  }\n  _removeListener(type, listener) {\n    this._privateEventEmitter.removeListener(type, listener);\n  }\n\n  /**\n   * Clears all statistics for this Guaranteed Message Connection. All previous Guaranteed\n   * Message Connection statistics are lost\n   * when this is called.\n   * @throws {solace.OperationError}\n   *  * if the Message Consumer is disposed. subcode = {@link solace.ErrorSubcode.INVALID_OPERATION}\n   */\n  clearStats() {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Clearing stats');\n    this._operationCheck(FlowOperation.RESET_STATS);\n    this._stats.resetStats();\n  }\n\n  /**\n   * Establish a Guaranteed Messaging connection.\n   * The Messge Consumer may immediately begin emitting events. The application is expected to\n   * add listeners for events on this Message Consumer before calling this method.\n   */\n  connect() {\n    const { LOG_DEBUG } = this.logger;\n    LOG_DEBUG('Connecting');\n    this.userDisconnected = false;\n    this._operationCheck(FlowOperation.CONNECT);\n  }\n\n  /**\n   * Disposes the Guaranteed Message connection, removing all listeners and releasing references.\n   */\n  dispose() {\n    const { LOG_TRACE, LOG_DEBUG } = this.logger;\n    // The session may dispose the publisher or consumer, so be tolerant of\n    // multiple attempts to do so.\n    if (this._disposed || this._disposing) {\n      LOG_TRACE('Ignoring #dispose on disposed Guaranteed Message connection');\n      return;\n    }\n    LOG_TRACE('Disposing');\n\n    this._operationCheck(FlowOperation.DISPOSE);\n\n    this._disposing = true;\n\n    const terminate = () => {\n      this._disposed = true;\n      this._properties = null;\n      this._userDisconnected = true;\n      this._emit(this.getDisposedEvent());\n      this.disableEmitter();\n      this._privateEventEmitter.disableEmitter();\n      LOG_DEBUG('Disposed');\n    };\n    if (this._fsm._midDispatch) {\n      // weird case, dispose was called by the user from a message callback:\n      // Guard this in a timeout\n      const terminateWithRunningFSM = () => {\n        this._fsm.terminateFsm();\n        terminate();\n      };\n      //setImmediate(() => terminateWithRunningFSM());\n      setTimeout(() => terminateWithRunningFSM(), 0);\n    } else {\n      // normal case:\n      terminate();\n    }\n  }\n\n  /**\n   * Disconnects the Message Consumer in such a way that it can be reconnected.\n   */\n  disconnect() {\n    this._operationCheck(FlowOperation.DISCONNECT);\n    const { LOG_DEBUG } = this.logger;\n    LOG_DEBUG('Disconnecting');\n    this.userDisconnected = true;\n  }\n\n  /**\n   *\n   * Begins a disconnect that is not user-initiated.\n   *\n   * Must be overridden.\n   *\n   * @private\n   * @memberof Flow\n   */\n  _disconnectSession() {\n    this._operationCheck(FlowOperation.DISCONNECT);\n  }\n\n  /**\n   * Gets the event to be returned when the Consumer or Publisher is disposed.\n   *\n   * Must be overridden.\n   *\n   * @private\n   * @memberof Flow\n   */\n  getDisposedEvent() { // eslint-disable-line class-methods-use-this\n    throw new NotImplementedError('Abstract method');\n  }\n\n  /**\n   * Creates and returns copy of the properties for this object.\n   * @returns {?} The properties object\n   * @internal\n   */\n  getProperties() {\n    this._operationCheck(FlowOperation.GET_PROPERTIES);\n    return this._properties.clone();\n  }\n\n  /**\n   * Returns a statistic for this Guaranteed Message connection.\n   *\n   * @param {solace.StatType} statType The statistic to return.\n   * @returns {Number} The value for the statistic.\n   */\n  getStat(statType) {\n    this._operationCheck(FlowOperation.GET_STATS);\n    return this._stats.getStat(statType);\n  }\n\n  /**\n   * @param {AdMessage} message The message to be handled by this Consumer or Publisher\n   * @private\n   */\n  handleUncorrelatedControlMessage(message) { // eslint-disable-line class-methods-use-this\n    throw new NotImplementedError('Guaranteed Message Connection does not implement a control message handler', message);\n  }\n\n  /**\n   * @param {StatType} statType The stat to increment\n   * @param {Number} [value] The value to add to the statistic.\n   * @private\n   */\n  incStat(statType, value) {\n    this._stats.incStat(statType, value);\n  }\n\n  /**\n   * @param {any} event The event to be handled by this objects's FSM\n   * @private\n   */\n  processFSMEvent(event) {\n    this._fsm.processEvent(event);\n  }\n\n  /**\n   * @returns {String} An inspection of this object's properties\n   * @private\n   */\n  [util_inspect_custom]() {\n    return {\n      'flowId': this.flowIdDec,\n    };\n  }\n\n  /**\n   * @returns {String} A description of this Guaranteed Message Connection\n   */\n  toString() {\n    return this[util_inspect_custom]();\n  }\n\n  /**\n   * @returns {Boolean} Whether this Publisher or Consumer can be connected.\n   * @readonly\n   * @private\n   */\n  get canAck() {\n    return !this.disposed;\n  }\n\n  /**\n   * Returns `true` if this Guaranteed Message Consumer was disposed.\n   * @readonly\n   * @type {Boolean}\n   */\n  get disposed() {\n    return this._disposed;\n  }\n\n  get flowIdDec() {\n    return this.flowId || '(N/A)';\n  }\n\n  /**\n   * @returns {Number} The ID for this flow\n   * @readonly\n   * @private\n   */\n  get flowId() { // eslint-disable-line class-methods-use-this\n    return new NotImplementedError('Flow does not implement ID accessor');\n  }\n\n  /**\n   * @returns {solace.Session} The owning session for this MessageConsumer.\n   * @readonly\n   */\n  get session() {\n    return this._session;\n  }\n\n  get userDisconnected() {\n    return this._userDisconnected;\n  }\n  set userDisconnected(value) {\n    this._userDisconnected = value;\n  }\n\n  /**\n   * @param {FlowOperation} operation The operation to check\n   * @returns {Boolean} `true` if the operation is allowed.\n   * @throws {@link solace.OperationError} if the operation is not allowed.\n   * @private\n   */\n  _operationCheck(operation) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE(`Checking operation ${FlowOperation.describe(operation)}`);\n    if (this._disposed) {\n      throw new OperationError('Operation is invalid for Message Consumer in disposed state',\n                               ErrorSubcode.INVALID_OPERATION);\n    }\n\n    // Any read-only operation is always valid unless the object was disposed\n    // (which purges properties)\n    if (ALWAYS_OPS.some(v => v === operation)) return true;\n\n    if (operation === FlowOperation.DISCONNECT && this._isDisconnected()) {\n      throw new OperationError(\n        'Operation is invalid for Message Consumer in disconnected state',\n        ErrorSubcode.INVALID_OPERATION\n      );\n    }\n\n    return undefined;\n  }\n\n  _isDisconnected() { // eslint-disable-line class-methods-use-this\n    throw new NotImplementedError('Flow#_isDisconnected not implemented');\n  }\n\n}\n\nmodule.exports.Flow = Flow;\n","const { Enum } = require('solclient-eskit');\n\nconst PrivateFlowEventName = {\n  BIND_WAITING: 'PrivateFlowEventName_bindWaiting',\n};\n\nmodule.exports.PrivateFlowEventName = Enum.new(PrivateFlowEventName);\n","/**\n * @module solace/fsm\n */\n\nconst { FsmEvent } = require('./lib/event');\nconst { State } = require('./lib/state');\nconst { StateMachine } = require('./lib/state-machine');\n\nmodule.exports.FsmEvent = FsmEvent;\nmodule.exports.State = State;\nmodule.exports.StateMachine = StateMachine;\n","const StateLib = require('./state');\nconst { FsmObject } = require('./object');\n\n/**\n * @classdesc\n * This object type represents an entryPoint for a particular FSM state.\n *\n * Note this initial implementation isn't particularly efficient, but it is\n * very simple by making use of two state objects (one just inside of and\n * one just outside of) the state the entryPoint belongs to.  If necessary, we\n * could optimize this if we wish.\n * @extends FsmObject\n * @private\n */\nclass EntryPoint extends FsmObject {\n\n  /**\n  * @constructor\n  * @param {Object} spec The object specifier used to implement the named\n  *      parameter idiom.\n  * @param {fsm.State} spec.state The state that the entryPoint belongs\n  *      to.\n  * @param {String} spec.entryPointName The name of the entryPoint.\n  * @param {fsm.StateContext~reactionCallback} spec.func The reaction\n  *      function for the entryPoint, which defines where to transition to\n  *      after state has been entered.\n  */\n  constructor(spec) {\n    super({ name: spec.entryPointName });\n\n    let innerState;\n    this.impl = this.impl || {};\n    // The outer portion of the entryPoint accepts incoming transitions before\n    // entering the entryPoint's state.  Then the entryPoint's state is\n    // entered through the use of the outerEntryPoint's initial transition.\n    this.impl.outerState = new StateLib.State({\n      name:          `${spec.state.getName()} outerEntryPoint: ${spec.entryPointName}`,\n      parentContext: spec.state.getParent(),\n    }).initial(() => spec.state.transitionTo(innerState));\n\n    // The job of the inner portion of the entryPoint is to follow a\n    // transition as specified by the application's reaction function.\n    innerState = new StateLib.State({\n      name:          `${spec.state.getName()} innerEntryPoint: ${spec.entryPointName}`,\n      parentContext: spec.state,\n    }).initial(spec.func);\n  }\n\n  /**\n   * @returns {fsm.State} The destination state for a transition to the\n   *      EntryPoint.\n   */\n  getDestState() {\n    return this.impl.outerState;\n  }\n}\n\nmodule.exports.EntryPoint = EntryPoint;\n","const { FsmObject } = require('./object');\n\nclass FsmEvent extends FsmObject {\n}\n\nmodule.exports.FsmEvent = FsmEvent;\n","const StateLib = require('./state');\nconst { FsmObject } = require('./object');\n\n/**\n * @classdesc\n * This object type represents an exitPoint for a particular FSM state.\n *\n * Note this initial implementation isn't particularly efficient, but it is\n * very simple by making use of two state objects (one just inside of and\n * one just outside of) the state the exitPoint belongs to.  If necessary, we\n * could optimize this if we wish.\n * @private\n */\nclass ExitPoint extends FsmObject {\n\n  /**\n  * @constructor\n  * @param {Object} spec The object specifier used to implement the named\n  *      parameter idiom.\n  * @param {fsm.State} spec.state The state that the exitPoint belongs\n  *      to.\n  * @param {String} spec.exitPointName The name of the exitPoint.\n  * @param {fsm.StateContext~reactionCallback} spec.func The reaction\n  *      function for the exitPoint, which defines where to transition to\n  *      after state has been exited.\n  */\n  constructor(spec) {\n    super({ name: spec.exitPointName });\n\n    let outerState;\n    // The inner portion of the exitPoint accepts incoming transitions before\n    // exiting the exitPoint's state.  Then the exitPoint's state is exited\n    // through the use of the innerExitPoint's initial transition.\n    this.impl.innerState = new StateLib.State({\n      name:          `${spec.state.getName()} innerExitPoint: ${spec.exitPointName}`,\n      parentContext: spec.state,\n    }).initial(() => spec.state.transitionTo(outerState));\n\n        // The job of the outer portion of the exitPoint is to follow a\n        // transition as specified by the application's reaction function.\n    outerState = new StateLib.State({\n      name:          `${spec.state.getName()} outerExitPoint: ${spec.exitPointName}`,\n      parentContext: spec.state.getParent(),\n    }).initial(spec.func);\n  }\n\n  getDestState() {\n    return this.impl.innerState;\n  }\n}\n\nmodule.exports.ExitPoint = ExitPoint;\n","const { OperationError } = require('solclient-error');\n\n/**\n * @classdesc\n * This is a base class for various FSM-related objects.\n * @private\n */\nclass FsmObject {\n\n  /**\n   * @constructor\n   * @param {Object} spec The object specifier used to implement the named\n   *      parameter idiom.\n   * @param {String} spec.name The name of the object.\n   */\n  constructor(spec) {\n    if (!spec) {\n      throw new OperationError('No spec provided');\n    }\n    if (!spec.name) {\n      throw new OperationError('No name provided for spec');\n    }\n    this.impl = {\n      name: spec.name,\n    };\n  }\n\n  /**\n   * @returns {String} A string representation of the object.\n   */\n  toString() {\n    let extraStringInfo = this.getExtraStringInfo();\n    if (extraStringInfo.length > 0) {\n      extraStringInfo = `; ${extraStringInfo}`;\n    }\n    return `{${this.constructor.name}: ${this.getName()}${extraStringInfo}}`;\n  }\n\n  /**\n   * This is overridden by classes wanting to add more data, typically in the\n   * form of 'name: value; name: value'.\n   * @returns {String} Extra string information to be included in the object's\n   *      toString() output.\n   */\n  getExtraStringInfo() { // eslint-disable-line class-methods-use-this\n    return '';\n  }\n\n  /**\n   * @returns {?String} The name passed into the object specifier.\n   */\n  getName() {\n    return this.impl.name;\n  }\n\n}\n\nmodule.exports.FsmObject = FsmObject;\n","const StateLib = require('./state');\nconst { FsmObject } = require('./object');\nconst { Iterator } = require('solclient-eskit');\nconst { LOG_TRACE } = require('solclient-log');\n\nconst { makeIterator } = Iterator;\n\n/**\n * React to an event.\n * @callback StateContext.reactionCallback\n * @param {FsmEvent} event The event to react to.\n * @returns {StateContext.ReactionResult} One of the many possible\n *      reaction results that can be created by one of the following methods:\n *          - {@link StateContext#transitionTo}\n *          - {@link FsmState#internalTransition}\n *          - {@link FsmState#externalTransitionTo}\n *          - {@link FsmState#terminate}\n *          - {@link FsmState#eventUnhandled}\n */\n\n\n/**\n * @classdesc\n * This abstract class can host one or more states.  Concrete examples would\n * be a state, which can host one or more inner states, or a state machine,\n * which would typically have multiple top-level states.  It also serves as a\n * context in which transitions can occur.\n * @memberof solace\n * @private\n */\nclass StateContext extends FsmObject {\n  /**\n   * @constructor\n   * @param {Object} spec Object specifier used to implement the named parameter\n   *  idiom.\n   * @param {String} spec.name The name of the context.\n   */\n  constructor(spec) {\n    super(spec);\n    this.impl = this.impl || {};\n    this.impl.logPadding = '';\n  }\n\n  /**\n   * Gets the state-machine that hosts this state context.\n   * @returns {StateMachine} The FSM that hosts this context.\n   */\n  getStateMachine() {\n    return this.impl.ancestorList[0];\n  }\n\n  /**\n   * Sets the initial reaction for the state context.\n   * @param {StateContext.reactionCallback} func The reaction callback to be\n   *      called after the state is entered as the deepest state of a\n   *      transition, or for a state machine when it is started.\n   * @returns {StateContext} The object this function was called on\n   */\n  initial(func) {\n    if (this.impl.initialReaction) {\n      this.log(`Replacing ${this} initialReaction ${this.impl.initialReaction} with ${func}`);\n    }\n    this.impl.initialReaction = func.bind(this);\n    return this;\n  }\n\n  /**\n   * This is used for 'local' transitions.  However, we extend the formal\n   * definition of local transitions here.  The formal definition is that\n   * the dest state is within the src state, and the src state is not\n   * exited.  We extend this definition to include states where the src\n   * state is within dest. In this case, a local transition means that dest\n   * will not be exited and entered and the transition will occur in the\n   * context of dest before executing dest's initial transition.  Note that\n   * this definition of local transition matches that of\n   * {@link https://en.wikipedia.org/wiki/UML_state_machine#Local_versus_external_transitions|Wikipedia}.\n   * But it does not match figure 14.34 or section 14.5.12 of the\n   * {@link http://www.omg.org/spec/UML/2.5/PDF/|Formal UML Specification v2.5}.\n   * Nevertheless, it does seem helpful to be able to express a transition\n   * that does leave the destination state vs. a transition that does not.\n   *\n   * If neither the source nor the dest states are within the other, the\n   * behaviour is the same as an external transition -- src is always exited\n   * and dest is always entered.\n   *\n   * This is included in the StateContext instead of within the State itself\n   * since this can be used by the initial reaction for a state machine.\n   *\n   * @param {State} state The state to transition to.\n   * @param {StateContext.actionCallback} [action] Optional The action to perform as\n   *      part of the transition, if desired.\n   * @returns {StateContext.ReactionResult} the result object used\n   *      internally for further processing of the event.\n   */\n  transitionTo(state, action) {\n    return new StateContext.ReactionResult({\n      caller:    this,\n      destState: state,\n      action,\n    });\n  }\n\n  /**\n   * Used to terminate the FSM.\n   * @param {StateContext.actionCallback} action An optional action to\n   *      take within the FSM context after all states have been exited.\n   * @returns {StateContext.ReactionResult} The reaction result for the termination.\n   */\n  terminate(action) {\n    return new StateContext.ReactionResult({\n      caller:    this,\n      destState: this.getStateMachine().getFinalState(),\n      action,\n    });\n  }\n\n  /**\n   * A callback to execute an action as part of a transition in the\n   * appropriate context.\n   *\n   * To be used only by the FSM infrastructure or unit tests.\n   *\n   * @callback StateContext.actionCallback\n   * @param {StateContext} context The context within which the action is\n   *      executed.  When the active state changes, this is done after\n   *      states are exited and before states are entered.  It is the\n   *      deepest context that contains the last exited and first entered\n   *      state as part of the transition.\n   * @param {FsmEvent} event The event that triggered the transition.\n   * @returns {Array.<StateContext>} The context's ancestor list.\n   * @protected\n   */\n  getAncestorList() {\n    return this.impl.ancestorList;\n  }\n\n  /**\n   * Perform a debug log with appropriate padding for the context.  The padding\n   * helps to visualize the level within the hierarchical state machine.\n   * @protected\n   */\n  log(...args) {\n    LOG_TRACE(this.impl.logPadding, ...args);\n  }\n\n  /**\n   * Called when the initial transition for the context needs to be taken.\n   * @param {FsmEvent} [event] The event causing this transition; undefined for the\n   *      FSM's initial transition.\n   * @returns {StateContext.ReactionResult} the result to be processed by\n   *      the FSM infrastructure.\n   * @protected\n   */\n  onInitial(event) {\n    let result;\n\n    if (this.impl.initialReaction) {\n      this.log(`Initial: for ${this}`);\n      result = this.impl.initialReaction(event);\n      if (result.external) {\n        throw new Error(`Initial reaction for ${this} returned external transitions`);\n      }\n      return result;\n    }\n\n    if (!(this instanceof (StateLib.State))) {\n      throw new Error(`Missing initial reaction for ${this}`);\n    }\n\n    // If there is no initial reaction, then we just enter this state.\n    // Technically this is a malformed FSM if there are inner states and\n    // this state has no initial reaction.  We won't police this since it\n    // isn't easily done with the data we are otherwise maintaining (we only\n    // know about parent states, not children), and such a problem would be\n    // easily caught by testing of the FSM.\n    return this.transitionTo(this);\n  }\n\n  /**\n   * After a reaction function has been called, this function processes the\n   * returned {@link StateContext.ReactionResult}.\n   * @param {StateContext.ReactionResult} result The result of a reaction.\n   * @param {FsmEvent|undefined} e The event that triggered the reaction;\n   *      undefined if this was due to the initial reaction.\n   * @returns {State} The active state of the FSM after the ReactionResult was\n   *      processed.\n   * @protected\n   */\n  processReactionResult(result, e) {\n    let curContext = this;\n\n    if (!result.destState) {\n      return this;\n    }\n\n    const destStateIter = this.lowestCommonAncestor(result);\n\n    // exit states until we get to the LCA\n    while (curContext !== destStateIter.deref()) {\n      curContext.onExit();\n      curContext = curContext.getParent();\n    }\n\n    // perform the transition\n    if (result.action) {\n      result.action(curContext, e);\n    }\n\n    curContext.log(`Action: transition to ${result.destState} in context ${curContext}`);\n\n    // Start by incrementing the iterator so we don't enter the\n    // context, which we are already in.  Then enter remaining states\n    // in the list.\n    for (destStateIter.incr(); !destStateIter.end(); destStateIter.incr()) {\n      curContext = destStateIter.deref();\n      curContext.onEntry();\n    }\n\n    // execute the initial transition in the destState.\n    const destInitial = curContext.onInitial(e);\n    if (destInitial.destState !== curContext) {\n      return curContext.processReactionResult(destInitial, e);\n    }\n    return curContext;\n  }\n\n  /**\n   * For a given reactionResult, this function returns an iterator to the\n   * context in which to process a transition from 'self' to\n   * 'reactionResult.destState'.  Advancing the iterator provides the states\n   * that need to be entered after the transition is processed.\n   * @param {ReactionResult} reactionResult An object created with one of the\n   *                                        reaction result methods defined in\n   *                                        either a state context or a state.\n   * @returns {Iterator} The iterator where the first element is the\n   * context in which to execute the transaction, and subsequent elements are\n   * to be entered after executing the transaction.\n   * @protected\n   */\n  lowestCommonAncestor(reactionResult) {\n    const ancestorList = this.impl.ancestorList;\n    const destAncestorList = reactionResult.destState.getAncestorList();\n    let i;\n\n    // Make sure the states belong to the same state machine\n    if (ancestorList[0] !== destAncestorList[0]) {\n      throw new Error(`No common ancestor between (${this} in ${ancestorList[0]}) and (${reactionResult.destState} in ${destAncestorList[0]})`);\n    }\n\n    // Optimize case where the two states are the same.  This would be the\n    // case for internal and self-transitions.\n    if (this === reactionResult.destState) {\n      i = ancestorList.length;\n      if (reactionResult.external) {\n        // self-transition, must exit then re-enter state.  Therefore,\n        // the context is our parent.\n        --i;\n      }\n    } else {\n      for (i = 1; i < ancestorList.length; ++i) {\n        if (ancestorList[i] !== destAncestorList[i]) {\n          break;\n        }\n      }\n\n      // Check if one state is within the other state.\n      if ((i === ancestorList.length) || (i === destAncestorList.length)) {\n        // One state within the other. Check whether this is a local\n        // or an external transition.\n        if (reactionResult.external) {\n          --i;    // Need to exit/re-enter the outermost state\n        }\n      }\n    }\n\n    // Here 'i' points to the first state to be entered after executing the\n    // transition.  We make the iterator with 'i-1' so that the first element\n    // is the context within which to execute the transition.\n    return makeIterator(destAncestorList, i - 1);\n  }\n\n  setLogPadding(padding) {\n    this.impl.logPadding = padding;\n  }\n}\n\n/**\n * @classdesc\n * A ReactionResult is suitable as a return value from a reaction function\n * or an initial reaction.\n * @private\n */\nStateContext.ReactionResult = class {\n  /**\n   * The ReactionResult constructor should never be invoked by users of the\n   * infrastructure. It should only be used by various public methods of\n   * StateContext or State, which return a ReactionResult.\n   *\n   * @param {Object} spec Defined according to members described below for\n   *      events that are handled by the reaction function; undefined if the\n   *      event was not handled by the reaction function.  For initial\n   *      reactions, spec must NOT be undefined.\n   * @param {StateContext} spec.caller The state context from which\n   *      {StateContext.ReactionResult} is being constructed.\n   * @param {State} spec.destState The destination state to\n   *      transition to.\n   * @param {StateContext.actionCallback} [spec.action] The function to call in\n   *      the transition context after the appropriate states have been\n   *      exited, if desired; undefined if no action is to be performed as a\n   *      result of the transition.\n   * @param {Boolean} spec.external True if the transition is an external\n   *      transition; false or undefined otherwise.\n   * @constructor\n   */\n  constructor(spec) {\n    if (!spec || !spec.caller || !(spec.caller instanceof StateContext)) {\n      throw new Error('spec.caller is required to be a StateContext');\n    }\n\n    if (!spec.caller.getStateMachine().isRunning()) {\n      throw new Error('ReactionResult objects can only be created while processing events');\n    }\n    if (spec.destState) {\n      if (!(spec.destState instanceof StateLib.State)) {\n        throw new Error('destState must be a State object');\n      }\n      if (spec.action && (typeof (spec.action) !== 'function')) {\n        throw new Error('action must be a function');\n      }\n      this.destState = spec.destState;\n      this.action = spec.action;\n      this.external = spec.external;\n    }\n  }\n};\n\nmodule.exports.StateContext = StateContext;\n","const { LOG_ERROR } = require('solclient-log');\nconst { State } = require('./state');\nconst { StateContext } = require('./state-context');\n\n/**\n * @classdesc\n * This is a state machine that can host states.  States themselves can also\n * host inner states in a hierarchical manner.  This class also provides the\n * basic interface for manipulating the current state via processing of\n * events, and querying the current state through 'getActiveState' methods.\n *\n * @private\n * @memberof solace\n */\nclass StateMachine extends StateContext {\n  /**\n   * @constructor\n   *\n   * @param {Object} spec The object specifier for the FSM.\n   * @param {String} spec.name The name of the FSM, used in debug logs.\n   */\n  constructor(spec) {\n    if (spec.parentContext) {\n      throw new Error(`State machine cannot have parent state: ${spec.parentContext}`);\n    }\n    super(spec);\n    this.impl.ancestorList = [this];\n    this.impl.eventQueue = [];\n    this.impl.finalState = new State({ name: 'impl.final', parentContext: this });\n    this.impl.handleUncaughtException = (ev, exc) => {\n      LOG_ERROR(`Uncaught exception in ${this} while processing ${ev}: ${exc.stack}`);\n      return this.terminate();\n    };\n  }\n\n  /**\n   * This method enqueues the given function, and begins execution of queued functions if\n   * they aren't already executing.\n   * @param {Function} func The function to enqueue and execute.\n   * @returns {Boolean} `true` if the supplied function has completed; false if it was deferred.\n   */\n  process(func) {\n    const { impl } = this;\n    const { eventQueue } = impl;\n\n    eventQueue.push(func);\n    if (impl.processingEvents) {\n      return false;\n    }\n    impl.processingEvents = true;\n\n    while (eventQueue.length) {\n      const evt = eventQueue.shift();\n      evt.apply(this);\n    }\n\n    impl.processingEvents = false;\n    this._onEventCompletion();\n    return true;\n  }\n\n  /**\n   * This method starts a state machine after it has been created and states\n   * have been associated and configured any time getCurrentState() returns\n   * undefined.  This would be after initial creation and after the state\n   * machine has terminated (i.e. transitioned to the final state).\n   */\n  start() {\n    if (this.getCurrentState()) {\n      throw new Error(`Cannot start ${this.getName()}; it is already started.`);\n    }\n\n    this.process(() => {\n      const result = this.onInitial();\n\n      // A state machine's onInitial must specify a destState, the state\n      // cannot be the state machine itself, and the state must have the\n      // state machine as the top ancestor.\n      if (result.destState === undefined) {\n        throw new Error(`Missing destination state from initial transition for ${this}`);\n      }\n\n      if (result.destState === this) {\n        throw new Error(`Destination state for initial transition for ${this} cannot be the FSM.`);\n      }\n\n      const destAncestorList = result.destState.getAncestorList();\n      if (destAncestorList[0] !== this) {\n        throw new Error(`Invalid destination state (${result.destState\n          }) from initial transition for state machine (${this\n          }); destState ancestor (${destAncestorList[0]})`);\n      }\n\n      this.impl.currentState = this.processReactionResult(result);\n    });\n  }\n\n  /**\n   * Used to query whether the state machine is currently running\n   * @returns {Boolean} `true` if the state machine is processing events; false otherwise.\n   */\n  isRunning() {\n    return this.impl.processingEvents;\n  }\n\n  /**\n   * This is the main function to invoke an FSM with an event.\n   * @param {FsmEvent} evt The event to be processed by the FSM.\n   */\n  processEvent(evt) {\n    const { impl } = this;\n    if (!this.process(() => {\n      this.log(`Processing event ${evt}`);\n      let result;\n      if (impl.currentState) {\n        try {\n          result = impl.currentState.handleEvent(evt);\n          impl.currentState = impl.currentState.processReactionResult(result, evt);\n        } catch (exc) {\n          this.log(`Caught exception ${exc}, continuing`);\n          result = impl.handleUncaughtException.call(impl.currentState,\n                                                     evt,\n                                                     exc);\n          impl.currentState = impl.currentState.processReactionResult(result, evt);\n        }\n      }\n    })) {\n      // Didn't run immediately\n      this.log(`Deferring event ${evt}`);\n    }\n  }\n\n  /**\n   * Terminates the FSM by transitioning the FSM to its final state. After\n   * this returns, the FSM may be started again with @link start.  This method\n   * should only be called externally from the FSM, not from within a reaction.\n   * To terminate the FSM within a reaction, use the\n   * {@link StateContext.ReactionResult} returned by {@link State#terminate}.\n   */\n  terminateFsm() {\n    const curState = this.getCurrentState();\n    if (!curState) {\n      return;\n    }\n    if (this.impl.processingEvents) {\n      throw new Error('Cannot terminate state machine while FSM is processing ' +\n            'events. To terminate the FSM from within a reaction, return ' +\n            'State~terminate() from a reaction.');\n    }\n    this.process(() => {\n      const result = curState.terminate();\n      this.impl.currentState = curState.processReactionResult(result);\n    });\n  }\n\n  /**\n   * This should only be called from within the context of a reaction\n   * function, which is to say a function called by the FSM infrastructure\n   * that returns {@link StateContext~ReactionResult}.  The purpose of this\n   * function is to set a function to be called after the currently\n   * executing event is completely handled, which includes the execution of\n   * any events that have been or will be queued as a result of processing\n   * the current event.\n   *\n   * Typical uses of this would be to set a function that does one of:\n   * 1. Throws an exception to the caller.\n   * 2. Calls an application callback.\n   * @param {Function} postEventAction function to call when the FSM has finished\n   *  processing events.  The context (i.e. 'this') will be the FSM when it\n   *  is called.\n   */\n  setPostEventAction(postEventAction) {\n    if (!this.impl.processingEvents) {\n      throw new Error('Cannot set post event hook unless FSM is processing events.');\n    }\n    if (!postEventAction || typeof postEventAction !== 'function') {\n      // TBD: Do we need to allow clearing of the hook?  Not that\n      // I'm aware of for the known use cases.  If we want to allow\n      // it, I propose adding a 'clearPostEventAction' rather than\n      // allowing null or undefined as the argument.\n      throw new Error(`postEventAction must be a function; got (${postEventAction})`);\n    }\n    this.impl.postEventAction = postEventAction.bind(this);\n  }\n\n  /**\n   * Called by the FSM when it finishes processing events.  If a\n   * postEventAction had been set, it will be called, then cleared.\n   * @private\n   */\n  _onEventCompletion() {\n    const action = this.impl.postEventAction;\n    if (action) {\n      this.impl.postEventAction = undefined;\n      this.log('Running post event action');\n      action.apply(this);\n    }\n  }\n\n  /**\n   * Returns the innermost active state.\n   *\n   * If regions were implemented, this would return an iterator to innermost\n   * active states.\n   *\n   * @returns {StateContext} The innermost active state.\n   */\n  getCurrentState() {\n    return this.impl.currentState;\n  }\n\n  /**\n   * Gets an active state by name.  Returns undefined if the named state is\n   * not currently active.\n   *\n   * Note the returned state may not be the innermost state as returned by\n   * {@link StateMachine#getCurrentState}.  If the innermost active state is not\n   * returned, the returned state is guaranteed to contain the innermost active\n   * state.\n   *\n   * @param {String} name The name of the state to be retrieved.\n   * @returns {?StateContext} The state with the specified name, if the\n   *      state is active; undefined otherwise.  Note the returned state may not\n   *      be the innermost active state.\n   */\n  getActiveState(name) {\n    const activeStates = this.impl.currentState.getAncestorList();\n    // Don't include the first ancestor in the loop since it is the state\n    // machine itself, not a state.\n    for (let i = 1; i < activeStates.length; ++i) {\n      if (activeStates[i].getName() === name) {\n        return activeStates[i];\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Checks if the named state is currently active.\n   * @param {String} name The name of the state to be queried.\n   * @returns {Boolean} Whether or not the named state is active.\n   */\n  isStateActive(name) {\n    return this.getActiveState(name) !== undefined;\n  }\n\n  /**\n   * Allows a reaction to be registered for unhandled events in the FSM.  The\n   * default reaction is to log the unhandled event at debug and remain in the\n   * current state with no other side effects.\n   * @param {StateContext.reactionCallback} r The reaction to be invoked when an\n   *      event is unhandled by the FSM.\n   * @returns {StateMachine} This StateMachine object.\n   */\n  unhandledEventReaction(r) {\n    if (typeof r !== 'function') {\n      throw new Error(`In ${this}: unhandled event reaction must be a function; got ${r}`);\n    }\n    this.impl.handleUnhandledEvent = r.bind(this);\n    return this;\n  }\n\n  /**\n   * This allows a reaction to be registered for uncaught exceptions while\n   * processing events.  Generally, it is preferred to catch exceptions from\n   * within reaction functions.  However, this is a good way to safeguard\n   * against missed exceptions.  Usually an error should be logged here,\n   * which is the default behaviour.\n   *\n   * Also note that this is only called for either:\n   * - an exception thrown from an event reaction;\n   * - an exception thrown from a transition action\n   * If exceptions are thrown from within state entry, exit, initials, etc,\n   * this function is not invoked.  These functions may end up getting\n   * invoked from the transition taken as a result of the exception in the\n   * first place.  The generate another exception would be difficult to\n   * handle in a sensible way.  Users of this infrastructure must always\n   * catch exceptions from these functions.\n   *\n   * @param {fsm.StateContext.reactionCallback} r The reaction to be\n   *      invoked when an exception has not been caught by another of the\n   *      FSM's reactionCallbacks.  When this function is invoked, 'this'\n   *      will be the FSM's current state.\n   * @returns {StateMachine} `this`, for method chaining.\n   */\n  uncaughtExceptionReaction(r) {\n    if (typeof r !== 'function') {\n      throw new Error(`In ${this}: Uncaught exception reaction must be a function; got ${r}`);\n    }\n    this.impl.handleUncaughtException = r;\n    return this;\n  }\n\n  /**\n   * Used by the implementation to get the final state.  This should never be\n   * used by applications.  Their only need to reference this state should be\n   * indirectly via the {@link State#terminate} function.\n   * @returns {State} The FSM's final state, which is a hidden implementation\n   *      detail of the FSM.\n   * @protected\n   */\n  getFinalState() {\n    return this.impl.finalState;\n  }\n}\n\nmodule.exports.StateMachine = StateMachine;\n","const { EntryPoint } = require('./entry-point');\nconst { ExitPoint } = require('./exit-point');\nconst { StateContext } = require('./state-context');\n\n/**\n * @classdesc\n * This class represents a state in a state machine.\n * @private\n */\nclass State extends StateContext {\n  /**\n   * @constructor\n   * @param {Object} spec Object specifier used to implement the named parameter\n   *  idiom.  In addition to the properties documented here, it is also expected\n   *  to have properties required by the [StateContext base class]{@link StateContext}.\n   * @param {String} spec.name The name of the state, used in debug logs.\n   * @param {State|StateMachine} spec.parentContext One of:\n   *  - The parent state object or;\n   *  - The stateMachine object for top-level states.\n   * @param {Object} [extensions] Additional methods to add to the state.\n   */\n  constructor(spec, extensions = null) {\n    super(spec);\n\n    const parentContext = spec.parentContext;\n    Object.assign(this.impl, {\n      parentContext,\n      reactions:            {},\n      entryPoints:          {},\n      exitPoints:           {},\n      ancestorList:         [...parentContext.getAncestorList(), this],\n      handleUnhandledEvent: e => (\n        parentContext.handleEvent\n          ? parentContext.handleEvent(e)\n          : parentContext.impl.handleUnhandledEvent(e)\n      ),\n    });\n    if (parentContext) this.log = parentContext.log.bind(this);\n\n    // Extend and bind functions\n    Object.keys(extensions || {}).forEach((k) => {\n      const extension = extensions[k];\n      this[k] = typeof extension === 'function' ? extension.bind(this) : extension;\n    });\n\n    this.setLogPadding(' '.repeat(this.impl.ancestorList.length));\n  }\n\n  /**\n   * Register a reaction function for a particular event.\n   * @param {String} eventName The name of the event func is to react to.\n   * @param {StateContext.reactionCallback} func The function to call when\n   *  the state processes an event with the name eventName.  The function is\n   *  bound to this object so that this refers to this state object when it\n   *  is invoked.\n   * @returns {State} This state object.\n   * @public\n   */\n  reaction(eventName, func) {\n    if (!eventName) throw new Error('No event name for reaction');\n    if (!func) throw new Error(`No reaction function for reaction ${eventName}`);\n\n    this.log(`Adding reaction to ${this} for event ${eventName}`);\n\n    if (this.impl.reactions[eventName]) {\n      this.log(`Replacing reaction ${this.impl.reactions[eventName]} with ${func}`);\n    }\n    this.impl.reactions[eventName] = func.bind(this);\n    return this;\n  }\n\n  /**\n   * Create an entryPoint for this state.\n   * @param {String} entryPointName The name of the entryPoint being created.\n   * @param {StateContext.reactionCallback} func The reaction to invoke after\n   *  the state is entered via this entryPoint\n   * @returns {State} This state object.\n   * @public\n   */\n  entryPoint(entryPointName, func) {\n    if (!entryPointName) throw new Error('No entry point name for entry point');\n    if (!func) throw new Error(`No reaction function for entry point ${entryPointName}`);\n\n    this.log(`Adding entryPoint ${entryPointName} to ${this}`);\n\n    if (this.impl.entryPoints[entryPointName]) {\n      this.log(`EntryPoint ${entryPointName} already exists in ${this}`);\n      return this;\n    }\n\n    this.impl.entryPoints[entryPointName] = new EntryPoint({\n      state: this,\n      entryPointName,\n      func,\n    });\n\n    return this;\n  }\n\n  /**\n   * Create an exitPoint for this state.\n   * @param {String} exitPointName The name of the exitPoint being created.\n   * @param {StateContext.reactionCallback} func The reaction to invoke after\n   *  the state is exited via this exitPoint.\n   * @returns {State} This state object.\n   * @public\n   */\n  exitPoint(exitPointName, func) {\n    if (!exitPointName) throw new Error('No exit point name for entry point');\n    if (!func) throw new Error(`No reaction function for exit point ${exitPointName}`);\n\n    this.log(`Adding exitPoint ${exitPointName} to ${this}`);\n\n    if (this.impl.exitPoints[exitPointName]) {\n      this.log(`ExitPoint ${exitPointName} already exists in  ${this}`);\n      return this;\n    }\n\n    this.impl.exitPoints[exitPointName] = new ExitPoint({\n      state: this,\n      exitPointName,\n      func,\n    });\n\n    return this;\n  }\n\n  /**\n   * @param {String} entryPointName The name of the entry point to be\n   *      transitioned to.\n   * @returns { StateContext } The state context to transition to when\n   *      entering via the state's entryPoint named entryPointName.\n   * @protected\n   */\n  getEntryPointDestState(entryPointName) {\n    if (this.impl.entryPoints[entryPointName] === undefined) {\n      this.log(`${this}: EntryPoint ${entryPointName} does not exist.`);\n      return this;\n    }\n\n    return this.impl.entryPoints[entryPointName].getDestState();\n  }\n\n  /**\n   * @param {String} exitPointName The name of the exit point to be\n   *      transitioned to.\n   * @returns {StateContext} The state context to transition to when\n   *      exiting via the state's exitPoint named exitPointName.\n   * @protected\n   */\n  getExitPointDestState(exitPointName) {\n    if (this.impl.exitPoints[exitPointName] === undefined) {\n      this.log(`${this}: ExitPoint ${exitPointName} does not exist.`);\n      return this;\n    }\n\n    return this.impl.exitPoints[exitPointName].getDestState();\n  }\n\n  /**\n   * Register a function to be called when the state is entered.\n   * @param {function} func The function to call when the state is entered.\n   *  The function is bound to this object so that this refers to this\n   *  state object when it is invoked.\n   * @returns {State} This state object.\n   * @public\n   */\n  entry(func) {\n    if (this.impl.appEntryFunc) {\n      this.log(`Replacing entry function ${this.impl.appEntryFunc} with ${func}`);\n    }\n    this.impl.appEntryFunc = func.bind(this);\n    return this;\n  }\n\n  /**\n   * Register a function to be called when the state is exited.\n   * @param {function} func The function to call when the state is exited.\n   *  The function is bound to this object so that this refers to this\n   *  state object when it is invoked.\n   * @returns {State} This state object.\n   * @public\n   */\n  exit(func) {\n    if (this.impl.appExitFunc) {\n      this.log(`Replacing exit function ${this.impl.appExitFunc} with ${func}`);\n    }\n    this.impl.appExitFunc = func.bind(this);\n    return this;\n  }\n\n  /**\n   * This is the same as [transitionTo]{@link StateContext#transitionTo},\n   * except the outermost state is exited if the source state is within the\n   * dest state or vice versa.  If one state is not within the other, this\n   * is equivalent to [transitionTo]{@link StateContext#transitionTo}.\n   * @param {State} state The state to transition to; if undefined, it is\n   *      a self-transition.\n   * @param {StateContext.actionCallback} [action] Optional The action to perform as part\n   *      of the transition, if desired.\n   * @returns {StateContext.ReactionResult} The result of the transition.\n   */\n  externalTransitionTo(state, action) {\n    return new StateContext.ReactionResult({\n      caller:    this,\n      destState: state,\n      action,\n      external:  true,\n    });\n  }\n\n  /**\n   * This is similar to [transitionTo]{@link StateContext#transitionTo}, except\n   * that this is a transition to a named entryPoint created on state.  If the\n   * named entryPoint does not exist, this is a malformed FSM and the behaviour\n   * is undefined.\n   * @param {State} state The state that has the named entryPoint.\n   * @param {String} entryPointName The name of the entryPoint of state.\n   * @param {StateContext.actionCallback} action The action to perform as part of\n   *      the transaction, if desired.\n   * @returns {StateContext.ReactionResult} The result of the transition\n   */\n  transitionToEntryPoint(state, entryPointName, action) {\n    return new StateContext.ReactionResult({\n      caller:    this,\n      destState: state.getEntryPointDestState(entryPointName),\n      action,\n    });\n  }\n\n  /**\n   * This is similar to [transitionTo]{@link StateContext#transitionTo}, except\n   * that this is a transition to a named exitPoint created on state.  If the\n   * named exitPoint does not exist, this is a malformed FSM and the behaviour\n   * is undefined.\n   * @param {State} state The state that has the named exitPoint.\n   * @param {String} exitPointName The name of the exitPoint of state.\n   * @param {StateContext.actionCallback} [action] Optional The\n   * action to perform as part of the transaction, if desired.\n   * @returns {StateContext.ReactionResult} The result of the transition\n   */\n  transitionToExitPoint(state, exitPointName, action) {\n    return new StateContext.ReactionResult({\n      caller:    this,\n      destState: state.getExitPointDestState(exitPointName),\n      action,\n    });\n  }\n\n  /**\n   * If a reaction evaluates the guard conditions for the reaction and none\n   * succeed, the eventUnhandled\n   * [ReactionResult]{@link StateContext.ReactionResult} should be\n   * returned.  This causes the FSM to continue looking for a reaction to\n   * process the event.\n   * @returns {StateContext.ReactionResult} The result of the transition\n   */\n  eventUnhandled() {\n    return new StateContext.ReactionResult({\n      caller: this,\n    });\n  }\n\n  /**\n   * This [ReactionResult]{@link StateContext.ReactionResult} is used\n   * when an event has been handled in a state and the transition is a local\n   * transition back to itself.  Note that internal transitions never cause\n   * state exits or entries -- if the internal transition is defined in an\n   * outer state that contains the active state, then the behaviour is as if the\n   * active state has inherited the internal transition from the outer state.\n   * @param {?Function} action The action to perform in the transition.\n   * @returns {StateContext.ReactionResult} The result of the transition\n   */\n  internalTransition(action) {\n    return new StateContext.ReactionResult({\n      caller:    this,\n      destState: this.getStateMachine().getCurrentState(),\n      action,\n    });\n  }\n\n  /**\n   * Used to terminate the FSM.\n   * @param {StateContext.actionCallback} action An optional action to\n   *      take within the FSM context after all states have been exited.\n   * @returns {StateContext.ReactionResult} The result of the transition\n   */\n  terminate(action) {\n    return new StateContext.ReactionResult({\n      caller:    this,\n      destState: this.getStateMachine().getFinalState(),\n      action,\n    });\n  }\n\n\n  /**\n   * @returns {StateContext} The parent state context for this state, which\n   *      could either be an outer state, or the state machine for top-level\n   *      states.\n   * @protected\n   */\n  getParent() {\n    return this.impl.parentContext;\n  }\n\n  /**\n   * Called when a state is being entered.  Calls the app's registered entry\n   * function, if any.\n   * @protected\n   */\n  onEntry() {\n    this.log(`Entering: ${this}`);\n    if (this.impl.appEntryFunc) {\n      this.impl.appEntryFunc();\n    }\n  }\n\n  /**\n   * Called when a state is being exited.  Calls the app's registered exit\n   * function, if any.\n   * @protected\n   */\n  onExit() {\n    this.log(`Exiting: ${this}`);\n    if (this.impl.appExitFunc) {\n      this.impl.appExitFunc();\n    }\n  }\n\n  /**\n   * Called when a state is to handle an event.\n   * @param {FsmEvent} e The event to handle.\n   * @returns {ReactionResult} The result of handling the event.\n   * @protected\n   */\n  handleEvent(e) {\n    this.log(`Process: ${e}`);\n    const reaction = this.impl.reactions[e.getName()];\n    if (reaction) {\n      const result = reaction(e);\n      // All ReactionResults in which an event is considered handled\n      // have a destState defined.\n      if (!result) {\n        this.log(`Reaction returned undefined: ${e} in ${this}`);\n      }\n      if (result.destState) {\n        this.log(`Handled: ${e}`);\n        return result;\n      }\n      this.log(`Unhandled: ${e} in ${this}`);\n    } else {\n      this.log(`No reaction: ${e} in ${this}`);\n    }\n\n    return this.impl.handleUnhandledEvent(e);\n  }\n}\n\nmodule.exports.State = State;\n","const { ConsoleLogImpl } = require('./lib/console-log-impl');\nconst { GlobalBinding } = require('./lib/global-binding');\nconst { LogImpl } = require('./lib/log-impl');\nconst { LogLevel } = require('./lib/log-levels');\n\nconst { Parameter } = require('solclient-validate');\nconst { SolclientFactory } = require('solclient-factory');\n\nconst {\n  isEnumMember,\n  isFunction,\n} = Parameter;\n\nconst {\n  getImpl,\n  getLogLevel,\n  setImpl,\n  setLogLevel,\n} = GlobalBinding;\n\nconst forwarder = {};\nfunction buildLogForwarder() {\n  Object.assign(forwarder, {\n    trace(...args) {\n      const impl = getImpl();\n      if (impl && impl.trace && getLogLevel() >= LogLevel.TRACE) {\n        impl.trace.apply(null, ['solclientjs: ', ...args]);\n      }\n    },\n\n    debug(...args) {\n      const impl = getImpl();\n      if (impl && impl.debug && getLogLevel() >= LogLevel.DEBUG) {\n        impl.debug.apply(null, ['solclientjs: ', ...args]);\n      }\n    },\n\n    info(...args) {\n      const impl = getImpl();\n      if (impl && impl.info && getLogLevel() >= LogLevel.INFO) {\n        impl.info.apply(null, ['solclientjs: ', ...args]);\n      }\n    },\n\n    warn(...args) {\n      const impl = getImpl();\n      if (impl && impl.warn && getLogLevel() >= LogLevel.WARN) {\n        impl.warn.apply(null, ['solclientjs: ', ...args]);\n      }\n    },\n\n    error(...args) {\n      const impl = getImpl();\n      if (impl && impl.error && getLogLevel() >= LogLevel.ERROR) {\n        impl.error.apply(null, ['solclientjs: ', ...args]);\n      }\n    },\n\n    fatal(...args) {\n      const impl = getImpl();\n      if (impl && impl.fatal) {\n        impl.fatal.apply(null, ['solclientjs: ', ...args]);\n      }\n    },\n  });\n}\nbuildLogForwarder(); // stripped by production build\n\nfunction addGlobalFuncs(source, target) {\n  Object.keys(forwarder).forEach((k) => {\n    target[`LOG_${k.toUpperCase()}`] = source[k];\n  });\n}\n\nclass LogFormatter {\n  constructor(formatter) {\n    this._formatter = (() => {\n      if (typeof formatter === 'function') return formatter;\n      if (typeof formatter === 'string') return function prepend(...args) { return [formatter, ...args]; };\n      if (!formatter) return function passthrough(...args) { return [...args]; };\n      return formatter;\n    })();\n    const self = this;\n    Object.keys(forwarder).forEach((key) => {\n      this[key] = function forward(...args) {\n        return forwarder[key].apply(null, self._formatter(...args));\n      };\n    });\n    addGlobalFuncs(this, this);\n  }\n\n  get formatter() {\n    return this._formatter;\n  }\n  set formatter(func) {\n    this._formatter = func;\n  }\n\n  wrap(genericFunction, targetSelf) {\n    const self = this;\n    return function genericLogWrapper(...args) {\n      return genericFunction.apply(targetSelf, self._formatter(...args));\n    };\n  }\n\n}\n\n/**\n * Gets the current log level, which was set by {@link solace.SolclientFactory.init} or a\n * subsequent call to {@link solace.SolclientFactory.setLogLevel}.\n *\n * @returns {solace.LogLevel} The current log level.\n */\nSolclientFactory.getLogLevel = () => getLogLevel();\n\n  /**\n   * This method changes the current log level from the level set when\n   * {@link solace.SolclientFactory.init} was called.\n   *\n   * @param {solace.LogLevel} newLevel The new log level to set.\n   * @throws {solace.OperationError} Invalid log level\n   */\nSolclientFactory.setLogLevel = (newLevel) => {\n  isEnumMember('logLevel', newLevel, LogLevel);\n  setLogLevel(newLevel);\n};\n\nSolclientFactory.addInitializer((props) => {\n  setLogLevel(props.logLevel);\n\n  const logger = props.logger || getImpl() || new ConsoleLogImpl();\n  // Validate that the supplied log implementation is a superset of LogImpl\n  Object.keys(new LogImpl()).forEach(key => isFunction(`logger.${key}`, logger[key]));\n\n  setImpl(logger);\n});\n\naddGlobalFuncs(forwarder, module.exports);\nmodule.exports.LogImpl = LogImpl;\nmodule.exports.LogLevel = LogLevel;\nmodule.exports.Binding = GlobalBinding;\nmodule.exports.ConsoleLogImpl = ConsoleLogImpl;\nGlobalBinding.setImpl(new ConsoleLogImpl());\nmodule.exports.LogFormatter = LogFormatter;\n","const { LogImpl } = require('./log-impl');\n\nconst STUB = () => undefined;\n\nfunction generateLogHeader(levelStr) {\n  const date = new Date();\n  const levelStrPadding = ' '.repeat(6 - levelStr.length);\n  let YY = String(date.getFullYear());\n  let MM = String(date.getMonth() + 1);\n  let DD = String(date.getDate());\n  let hh = String(date.getHours());\n  let mm = String(date.getMinutes());\n  let ss = String(date.getSeconds());\n  let ms = String(date.getMilliseconds());\n\n  YY = '0'.repeat(4 - YY.length) + YY;\n  MM = MM.length < 2 ? `0${MM}` : MM;\n  DD = DD.length < 2 ? `0${DD}` : DD;\n  hh = hh.length < 2 ? `0${hh}` : hh;\n  mm = mm.length < 2 ? `0${mm}` : mm;\n  ss = ss.length < 2 ? `0${ss}` : ss;\n  ms = ms.length < 3 ? `0${ms}` : ms;\n  ms = ms.length < 3 ? `0${ms}` : ms; // twice: pad to 3\n\n  return [`${YY}-${MM}-${DD} ${hh}:${mm}:${ss}.${ms}`, `${levelStr}${levelStrPadding}`];\n}\n\n/**\n * @classdesc\n * A log implementation that uses the global or window console.\n *\n * This is the default log implementation used by the API if no logger was\n * supplied via {@link solace.SolclientFactoryProperties}.\n *\n * @memberof solace\n * @private\n */\nclass ConsoleLogImpl extends LogImpl {\n  /**\n   * @constructor\n   * @param {Object} [consoleIn] The console to which to apply this implementation. If\n   *  not specified, uses the global or window console.\n   */\n  constructor(consoleIn) {\n    /**\n     * Logs the given arguments at TRACE level. This is bound to the first valid method of the\n     * following on the global or window console object, in priority order:\n     *  * console.log\n     *  * console.debug\n     *\n     * @name solace.ConsoleLogImpl#trace\n     * @method\n     * @param {...*} args Arguments to be logged\n     */\n    let _trace = STUB;\n\n    /**\n     * Logs the given arguments at DEBUG level. This is bound to the first valid method of the\n     * following on the global or window console object, in priority order:\n     *  * console.log\n     *  * console.debug\n     *\n     * @name solace.ConsoleLogImpl#debug\n     * @method\n     * @param {...*} args Arguments to be logged\n     */\n    let _debug = STUB;\n\n    /**\n     * Logs the given arguments at INFO level. This is bound to the first valid method of the\n     * following on the global or window console object, in priority order:\n     *  * console.info\n     *  * console.log\n     *\n     * @name solace.ConsoleLogImpl#info\n     * @method\n     * @param {...*} args Arguments to be logged\n     */\n    let _info = STUB;\n\n    /**\n     * Logs the given arguments at WARN level. This is bound to the first valid method of the\n     * following on the global or window console object, in priority order:\n     *  * console.warn\n     *  * console.log\n     *\n     * @name solace.ConsoleLogImpl#warn\n     * @method\n     * @param {...*} args Arguments to be logged\n     */\n    let _warn = STUB;\n\n\n    /**\n     * Logs the given arguments at ERROR level. This is bound to the first valid method of the\n     * following on the global or window console object, in priority order:\n     *  * console.info\n     *  * console.log\n     *\n     * @name solace.ConsoleLogImpl#error\n     * @method\n     * @param {...*} args Arguments to be logged\n     */\n    let _error = STUB;\n\n    /**\n     * Logs the given arguments at FATAL level. This is bound to the first valid method of the\n     * following on the global or window console object, in priority order:\n     *  * console.info\n     *  * console.log\n     *\n     * @name solace.ConsoleLogImpl#fatal\n     * @method\n     * @param {...*} args Arguments to be logged\n     */\n    let _fatal = STUB;\n\n    const console = consoleIn || (\n      typeof window === 'undefined'\n        /* eslint-env node */ ? global\n        /* eslint-env browser */ : window\n      ).console;\n    /* eslint-env shared-node-browser */\n\n    if (console && (console.log || console.warn)) {\n      /* eslint-disable no-console */\n      // Where console.log is supported, it is preferred over console.debug\n      // https://developer.mozilla.org/en-US/docs/DOM/console\n      // console methods in IE9 are object, not function, unfortunately\n      //\n      // Also, console.trace outputs a stack trace on some platforms.  So we\n      // use the same underlying logger as debug for trace to avoid the\n      // excessive verbosity that would result.\n      if (console.log && console.log !== undefined) {\n        _trace = Function.prototype.bind.call(console.log, console);\n        _debug = Function.prototype.bind.call(console.log, console);\n      } else if (console.debug && typeof console.debug === 'function') {\n        _trace = Function.prototype.bind.call(console.debug, console);\n        _debug = Function.prototype.bind.call(console.debug, console);\n      }\n\n      // Where console.info exists, it is preferred. Otherwise, fall back to\n      // console.log.\n      if (console.info && console.info !== undefined) {\n        _info = Function.prototype.bind.call(console.info, console);\n      } else {\n        _info = Function.prototype.bind.call(console.log, console);\n      }\n\n      // Where console.warn exists, it is preferred. Otherwise, fall back to\n      // console.log.\n      if (console.warn && console.warn !== undefined) {\n        _warn = Function.prototype.bind.call(console.warn, console);\n      } else {\n        _warn = Function.prototype.bind.call(console.log, console);\n      }\n\n      // Where console.error exists, it is preferred. Otherwise, fall back to\n      // console.log.\n      //\n      // console.fatal is not present in any known console implementation. Use\n      // console.error or console.log.\n      if (console.error && console.error !== undefined) {\n        _error = Function.prototype.bind.call(console.error, console);\n        _fatal = Function.prototype.bind.call(console.error, console);\n      } else {\n        _error = Function.prototype.bind.call(console.log, console);\n        _fatal = Function.prototype.bind.call(console.log, console);\n      }\n\n      /* eslint-enable no-console */\n    } // else no console implementation was found, so the default (stub) is used for each level.\n\n    super((...args) => { _trace(...generateLogHeader('TRACE'), ...args); },\n          (...args) => { _debug(...generateLogHeader('DEBUG'), ...args); },\n          (...args) => { _info(...generateLogHeader('INFO'), ...args); },\n          (...args) => { _warn(...generateLogHeader('WARN'), ...args); },\n          (...args) => { _error(...generateLogHeader('ERROR'), ...args); },\n          (...args) => { _fatal(...generateLogHeader('FATAL'), ...args); });\n  }\n\n\n}\n\nmodule.exports.ConsoleLogImpl = ConsoleLogImpl;\n","const { LogLevel } = require('./log-levels');\n\nconst state = {\n  impl:  null,\n  level: LogLevel.INFO,\n};\n\nconst LogBinding = {};\nLogBinding.getImpl = function getImpl() {\n  return state.impl;\n};\n\nLogBinding.setImpl = function setImpl(impl) {\n  state.impl = impl;\n};\n\nLogBinding.getLogLevel = function getLogLevel() {\n  return state.level;\n};\n\nLogBinding.setLogLevel = function setLogLevel(level) {\n  state.level = level;\n};\n\nmodule.exports.GlobalBinding = LogBinding;\n","/* eslint-disable class-methods-use-this */ // declare prototype stubs\n\n/**\n * A logging callback. It must accept any valid number of arguments of any type. It must not throw.\n *\n * @callback\n * @function\n * @name solace.LogImpl.loggingCallback\n * @param {...*} args The arguments to log. Typically this is a mixture of strings and\n *  objects to be inspected. A simple implementation might call .toString() on each\n *  argument.\n */\n\n/**\n * @classdesc\n * A class that provides a binding to a log implementation. Applications that need to\n * control API logging must construct a LogImpl\n * instance, a log implementation that can be set in\n * {@link solace.SolclientFactoryProperties#logger}.\n * The binding will call the supplied log methods with the\n * parameters supplied to each.\n * @memberof solace\n */\nclass LogImpl {\n  /**\n   * @param {solace.LogImpl.loggingCallback} trace Callback for {@link solace.LogLevel.TRACE} logs.\n   * @param {solace.LogImpl.loggingCallback} debug Callback for {@link solace.LogLevel.DEBUG} logs.\n   * @param {solace.LogImpl.loggingCallback} info Callback for {@link solace.LogLevel.INFO} logs.\n   * @param {solace.LogImpl.loggingCallback} warn Callback for {@link solace.LogLevel.WARN} logs.\n   * @param {solace.LogImpl.loggingCallback} error Callback for {@link solace.LogLevel.ERROR} logs.\n   * @param {solace.LogImpl.loggingCallback} fatal Callback for {@link solace.LogLevel.FATAL} logs.\n   *\n   * @constructor\n   */\n  constructor(trace, debug, info, warn, error, fatal) {\n    Object.assign(this, {\n      trace,\n      debug,\n      info,\n      warn,\n      error,\n      fatal,\n    });\n  }\n\n  trace() {}\n  debug() {}\n  info() {}\n  warn() {}\n  error() {}\n  fatal() {}\n}\n\nmodule.exports.LogImpl = LogImpl;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Represents a log level enumeration.\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst LogLevel = {\n  /**\n   * Fatal. Rserved for unrecoverable errors.\n   * @type {Number}\n   */\n  FATAL: 0,\n  /**\n   * Error. An internal error to the API or Solace Message Router.\n   * @type {Number}\n   */\n  ERROR: 1,\n  /**\n   * Warn. An external error which may be caused by the application passing invalid\n   * arguments or objects to the API. Often accompanied by an thrown exception.\n   * @type {Number}\n   */\n  WARN:  2,\n  /**\n   * Info. An unexpected event or occurrence that does not affect the sane\n   * operation of the SDK or application.\n   * @type {Number}\n   */\n  INFO:  3,\n  /**\n   * Debug. The highest (least) level of debug logs. Debug logs provide an overview of\n   * the API operation.\n   * @type {Number}\n   */\n  DEBUG: 4,\n  /**\n   * Trace. The loweest (most verbose) level of debug logs.\n   * @type {Number}\n   */\n  TRACE: 5,\n};\n\nmodule.exports.LogLevel = Enum.new(LogLevel);\n","const { ConsumerFlows } = require('./lib/consumer-flows');\nconst { ConsumerFSMEvent } = require('./lib/consumer-fsm-event');\nconst { ConsumerFSMEventNames } = require('./lib/consumer-fsm-event-names');\nconst { MessageConsumer } = require('./lib/message-consumer');\nconst { MessageConsumerAcknowledgeMode } = require('./lib/message-consumer-acknowledge-modes');\nconst { MessageConsumerEvent } = require('./lib/message-consumer-event');\nconst { MessageConsumerEventName } = require('./lib/message-consumer-event-names');\nconst { MessageConsumerProperties } = require('./lib/message-consumer-properties');\nconst { QueueBrowser } = require('./lib/queue-browser');\nconst { QueueBrowserEventName } = require('./lib/queue-browser-event-names');\nconst { QueueBrowserProperties } = require('./lib/queue-browser-properties');\n\nmodule.exports.ConsumerFlows = ConsumerFlows;\nmodule.exports.ConsumerFSMEvent = ConsumerFSMEvent;\nmodule.exports.ConsumerFSMEventNames = ConsumerFSMEventNames;\nmodule.exports.MessageConsumer = MessageConsumer;\nmodule.exports.MessageConsumerEvent = MessageConsumerEvent;\nmodule.exports.MessageConsumerAcknowledgeMode = MessageConsumerAcknowledgeMode;\nmodule.exports.MessageConsumerEventName = MessageConsumerEventName;\nmodule.exports.MessageConsumerProperties = MessageConsumerProperties;\nmodule.exports.QueueBrowser = QueueBrowser;\nmodule.exports.QueueBrowserEventName = QueueBrowserEventName;\nmodule.exports.QueueBrowserProperties = QueueBrowserProperties;\n","const { Enum, assert } = require('solclient-eskit');\nconst { MessageOutcome } = require('solclient-message');\nconst { LOG_DEBUG, LOG_ERROR } = require('solclient-log');\n\n/**\n * @private\n */\nconst ApplicationAckState = Enum.new({\n  UNACKED:        'UNACKED',\n  ACKED_NOT_SENT: 'ACKED_NOT_SENT',\n  ACKED_SENT:     'ACKED_SENT',\n});\n\n// For the ring buffer update index, we have two key-value options:\n//  Map() - generally faster where supported\n//  Object - seems to automatically coerce keys to string, which is what we want in this case\n// By using Map and explicly creating a .key attribute and using it whenever possible,\n// we should get performance that is no worse than Object, which may have to perform that\n// coercion more often.\n\n/**\n * @private\n */\nclass ApplicationAck {\n  constructor(id, state, settlementOutcome) {\n    if (id) {\n      this.exists = true;\n      this.id = id;\n      this.key = id.toString();\n      this.state = state || ApplicationAckState.UNACKED;\n      this.settlementOutcome = settlementOutcome || MessageOutcome.ACCEPTED;\n    } else {\n      this.exists = false;\n    }\n  }\n\n  set(id, state, settlementOutcome = undefined) {\n    this.exists = true;\n    this.id = id;\n    this.key = id.toString();\n    this.state = state || ApplicationAckState.UNACKED;\n    this.settlementOutcome = (settlementOutcome !== undefined) ? settlementOutcome : null; // outcome not yet set at point of insertion\n  }\n\n  clear() {\n    this.exists = false;\n    this.id = null;\n    this.key = null;\n    this.state = null;\n    this.settlementOutcome = null;\n  }\n}\n\n/**\n * @private\n */\nclass ApplicationAckRingBuffer {\n  /**\n   * Creates an instance of ApplicationAckRingBuffer. A standard ring buffer except that\n   * it reserves an empty entry so that an operation can occur during insert that includes\n   * both the new element and any element to be evicted. Also includes an ID-to-index map\n   * to speed updates.\n   *\n   * @param {Number} size The number of entries in the ring. Effective size is (size - 1).\n   * @memberof ApplicationAckRingBuffer\n   */\n  constructor(size) {\n    LOG_DEBUG('Creating application ack ring buffer with size ', size, ' retained size', size - 1);\n    assert(size >= 2); // one always free doesn't work with < 2 elements\n    this._size = size;\n    this._insertIndex = 0;\n    /**\n     * @property {Array.<?ApplicationAck>}\n     */\n    this._buffer = Array(size).fill(null).map(() => new ApplicationAck());\n    /**\n     * @property {Map.<String, Number>}\n     */\n    this._index = new Map();\n  }\n\n  reset() {\n    this._insertIndex = 0;\n    this._buffer.forEach((ack) => { ack.exists = false; });\n    this._index.clear();\n  }\n\n  /**\n   * @param {Long} id The id of the new entry\n   * @param {function(ApplicationAck)} beforeEvictCallback Call this before operation completes\n   * @returns {any} Return value of beforeEvictCallback\n   * @private\n   */\n  insert(id, beforeEvictCallback) {\n    assert(beforeEvictCallback);\n    assert(id);\n\n    const size = this._size;\n    const buffer = this._buffer;\n    const index = this._index;\n    const insertIndex = this._insertIndex;\n\n    /*\n     * Because of the postprocessing step, we are not re-entrant safe. It is expected\n     * that we are called from TCP -> Transport -> Session -> acceptMessage().\n     * This assert verifies that the postprocess cleanup has happened.\n     */\n    assert(!buffer[insertIndex].exists, 'Invariant not enforced (before): insert index not empty');\n\n    // First, insert.\n    const inserting = buffer[insertIndex];\n    inserting.set(id, ApplicationAckState.UNACKED);\n    if (index.has(inserting.key)) {\n      LOG_ERROR(`Duplicate ID: ${index.get(inserting.key)} insertIndex: ${insertIndex}`);\n    }\n    index.set(inserting.key, insertIndex);\n\n    const evictingIndex = (insertIndex + 1) % size;\n    const evicting = buffer[evictingIndex];\n    let result;\n    try {\n      result = beforeEvictCallback(evicting.exists ? evicting : null);\n    } finally {\n      // Always clean up to keep the RB in a consistent state.\n      // If inProgressCallback threw, this runs before the exception propagates.\n\n      // Update insert index for next operation.\n      this._insertIndex = (insertIndex + 1) % size;\n\n      if (evicting.exists) {\n        index.delete(evicting.key);\n        evicting.clear();\n      }\n    }\n\n    assert(!buffer[this._insertIndex].exists, 'Invariant not enforced (after): insert index not empty');\n    return result;\n  }\n\n  /**\n   * Returns the number of elements in this ringbuffer. Will increase to\n   * one less than the size provided to the constructor as the buffer is used.\n   *\n   * @readonly\n   * @memberof ApplicationAckRingBuffer\n   */\n  get length() {\n    return this._index.size;\n  }\n\n  /**\n   * Returns the first element in the ring buffer.\n   *\n   * This could be called from the evict callback, so insert needs to be sure\n   * that internal state is correct for that scenario.\n   *\n   * The expected case is that the first element is at insertIndex + 1, but if the\n   * buffer has not been filled yet, we will iterate the buffer and skip nonexistent\n   * elements to find it.\n   *\n   * This is a little inefficient until we have received this._size messages, but after\n   * that it is more efficient than maintaining a read pointer.\n   *\n   * @returns {?ApplicationAck} The first ack in the buffer.\n   */\n  front() {\n    if (this.length === 0) return null;\n\n    const buffer = this._buffer;\n    const insertIndex = this._insertIndex;\n    const size = this._size;\n    const firstIndex = (insertIndex + 1) % size;\n    // Cannot assert invariant here: insert is usually in progress.\n\n    // Buffer full case\n    if (buffer[firstIndex].exists) return buffer[firstIndex];\n\n    // Not yet filled case\n    // The last checked element for the iteration is the start point,\n    //  plus size, a full lap including the start index,\n    //  minus 1, to exclude the start\n    //  minus 1, to exclude the invariant null entry\n    for (let rawIndex = firstIndex, lastIndex = firstIndex + size - 1;\n         rawIndex <= lastIndex;\n         ++rawIndex) {\n      const readIndex = rawIndex % size;\n      const element = buffer[readIndex];\n      if (element.exists) {\n        return element;\n      }\n    }\n\n    // Buffer is completely empty\n    assert(this._index.size === 0, '#front() failed so buffer must be empty');\n    return null;\n  }\n\n  /**\n   * Rather than implementing the iterator protocol, which requires Symbol support,\n   * we'll implement a forEach that behaves as though this is an array.\n   *\n   * @param {function(ApplicationAppState, index, collection)} callback The iteration callback\n   */\n  forEach(callback) {\n    if (this.length === 0) return;\n\n    const buffer = this._buffer;\n    const size = this._size;\n    let index = 0;\n\n    for (let rawIndex = this._insertIndex + 1, lastIndex = this._insertIndex + size;\n         rawIndex <= lastIndex;\n         ++rawIndex) {\n      const readIndex = rawIndex % size;\n      const element = buffer[readIndex];\n      if (element.exists) {\n        callback(element, index++, this);\n      }\n    }\n\n    assert(index > 0, 'Not empty but did not dispatch');\n  }\n\n  /**\n   * @param {Long} id The ID to update\n   * @param {ApplicationAckState} state The new state for the ID\n   * @param {?MessageOutcome} settlementOutcome where available, update the settlement outcome for the ID\n   * @private\n   */\n  updateAckState(id, state, settlementOutcome = undefined) {\n    const key = id.toString(); assert(this._index.has(key), 'Ack key not found');\n    const buffer = this._buffer;\n    const updateIndex = this._index.get(key);\n    const existing = buffer[updateIndex]; assert(existing, 'Ack key has no entry');\n    existing.state = state;\n    // where available, update the settlement outcome too\n    if(settlementOutcome != undefined) {\n      existing.settlementOutcome = settlementOutcome;\n    } else if(state === ApplicationAckState.ACKED_NOT_SENT) {\n      // set default settlement outcome to ACCEPTED for ACKed messages if no outcome available\n      existing.settlementOutcome = MessageOutcome.ACCEPTED;\n    }\n  }\n\n  /**\n   * @param {Long} id The ID to look up\n   * @returns {Boolean} `true` if this ID exists in the ringbuffer\n   */\n  has(id) {\n    const key = id.toString();\n    return this._index.has(key);\n  }\n}\n\nObject.assign(module.exports, {\n  ApplicationAckState,\n  ApplicationAck,\n  ApplicationAckRingBuffer,\n});\n","const { assert } = require('solclient-eskit');\nconst { MessageConsumer } = require('./message-consumer');\nconst { MessageConsumerEventName } = require('./message-consumer-event-names');\n\nclass ConsumerFlows {\n  /**\n   * Defines a set of Guaranteed Messaging Flows.  There are two sets allocated, one\n   * for publishers (typically just one entry) and one for Subscribers.\n   * There is a separate set for flows in RECONNECTING state.\n   * These need special treatment during SESSION_DOWN:\n   * they need to be notified, but not waited on by the session FSM.\n   * Flows in _reconnectingFlows are not in _allFLows.\n   * @param {any} options Construction options\n   * @private\n   */\n  constructor() {\n    this._allFlows = new Set();\n    this._reconnectingFlows = new Set();\n    // Flows by id (UP)\n    this._flowsById = {};\n  }\n\n  add(flow) {\n    assert(flow instanceof MessageConsumer, 'Flow was not a consumer');\n    if (this._allFlows.has(flow)) {\n      return flow;\n    }\n\n    const flowUp = () => {\n      // Don't worry about flow collisions -- the router assigned the new flow to the same ID\n      // so it won't address the old flow. Retain the old flow in _allFlows and make sure we\n      // dispose the right flow.\n      this._flowsById[flow.flowId] = flow;\n    };\n    const flowDisposed = () => {\n      const flowId = flow.flowId;\n      this._allFlows.delete(flow);\n      this._reconnectingFlows.delete(flow);\n      const flowById = this._flowsById[flowId];\n      // If this test fails, the router reassigned the flow ID, and we were only keeping the\n      // _allFlows set reference for blanket cleanup.\n      if (flowById === flow) {\n        delete this._flowsById[flowId];\n      }\n      // Flow will be disposed and this will happen automatically\n    };\n    const flowReconnecting = () => {\n      flowDisposed();\n      this._reconnectingFlows.add(flow);\n    };\n    const flowReconnected = () => {\n      flowUp();\n      this._allFlows.add(flow);\n      this._reconnectingFlows.delete(flow);\n    };\n    const flowDown = () => {\n      this._reconnectingFlows.delete(flow);\n    };\n\n    flow._on(MessageConsumerEventName.UP, flowUp);\n    flow._on(MessageConsumerEventName.RECONNECTED, flowReconnected);\n    flow._on(MessageConsumerEventName.DISPOSED, flowDisposed);\n    flow._on(MessageConsumerEventName.RECONNECTING, flowReconnecting);\n    flow._on(MessageConsumerEventName.DOWN, flowDown);\n    flow._on(MessageConsumerEventName.DOWN_ERROR, flowDown);\n\n    this._allFlows.add(flow);\n    return flow;\n  }\n\n  get flows() {\n    return Array.from(this._allFlows);\n  }\n  get reconnectingFlows() {\n    return Array.from(this._reconnectingFlows);\n  }\n\n  getFlowById(flowId) {\n    return this._flowsById[flowId];\n  }\n\n  disposeAll() {\n    this._allFlows.forEach(flow => flow.dispose());\n  }\n\n}\n\nmodule.exports.ConsumerFlows = ConsumerFlows;\n","/**\n * Created by rpaulson on 06/02/2017.\n */\nconst { Enum } = require('solclient-eskit');\n\n/********************************************************************************\n * @private\n * Events on the Consumer FSM\n * @enum {string}\n ********************************************************************************/\nconst ConsumerFSMEventNames = {\n  SESSION_UP:                 'SESSION_UP',\n  SESSION_UP_NO_AD:           'SESSION_UP_NO_AD',\n  SESSION_DOWN:               'SESSION_DOWN',\n  SESSION_DISCONNECT:         'SESSION_DISCONNECT',\n  FLOW_FAILED:                'FLOW_FAILED',\n  FLOW_UP:                    'FLOW_UP',\n  FLOW_ACTIVE_IND:            'FLOW_ACTIVE_IND',\n  FLOW_CLOSE:                 'FLOW_CLOSE',\n  FLOW_OPEN:                  'FLOW_OPEN',\n  FLOW_UNBOUND:               'FLOW_UNBOUND',\n  ACK:                        'ACK',\n  ACK_TIMEOUT:                'ACK_TIMEOUT',\n  BIND_TIMEOUT:               'BIND_TIMEOUT',\n  CREATE_TIMEOUT:             'CREATE_TIMEOUT',\n  UNBIND_TIMEOUT:             'UNBIND_TIMEOUT',\n  CAN_SEND:                   'CAN_SEND',\n  TRANSPORT_ERROR:            'TRANSPORT_ERROR',\n  DISPOSE:                    'DISPOSE',\n  VIRTUALROUTER_NAME_CHANGED: 'VIRTUALROUTER_NAME_CHANGED',\n  RECONNECT_INTERVAL_TIMEOUT: 'RECONNECT_INTERVAL_TIMEOUT',\n  BIND_RESPONSE:              'BIND_RESPONSE',\n  CREATE_FAILED:              'CREATE_FAILED',\n  CREATE_SUCCESS:             'CREATE_SUCCESS',\n};\n\nmodule.exports.ConsumerFSMEventNames = Enum.new(ConsumerFSMEventNames);\n","/**\n * Created by rpaulson on 06/02/2017.\n */\nconst { FsmEvent } = require('solclient-fsm');\n\n/**\n *\n * ConsumerFSMEvent extends {@link FsmEvent}.  This object should be used for all events\n * passed to the Subscriber FSM.  This extension provides members to carry information specfic to\n * the Subscriber FSM transitions.\n *\n * @extends FsmEvent\n * @private\n */\nclass ConsumerFSMEvent extends FsmEvent {\n  constructor(spec, details) {\n    super(spec);\n    this.details = details;\n  }\n}\n\nmodule.exports.ConsumerFSMEvent = ConsumerFSMEvent;\n","const SMFLib = require('solclient-smf');\nconst { ApplicationAck,\n        ApplicationAckRingBuffer,\n        ApplicationAckState } = require('./application-acks');\nconst { assert } = require('solclient-eskit');\nconst { CapabilityType } = require('solclient-session');\nconst { ConsumerFSMEvent } = require('./consumer-fsm-event');\nconst { ConsumerFSMEventNames } = require('./consumer-fsm-event-names');\nconst { ConsumerStateNames } = require('./consumer-state-names');\nconst { DestinationFromNetwork,\n        DestinationType,\n        Queue,\n        Topic } = require('solclient-destination');\nconst { ErrorResponseSubcodeMapper,\n        ErrorSubcode,\n        OperationError } = require('solclient-error');\nconst { LogFormatter } = require('solclient-log');\nconst { Long } = require('solclient-convert');\nconst { MessageConsumerAcknowledgeMode } = require('./message-consumer-acknowledge-modes');\nconst { MessageConsumerEventName } = require('./message-consumer-event-names');\nconst { MessageDispatcher } = require('./message-dispatcher');\nconst { PrivateFlowEventName } = require('solclient-flow');\nconst { QueueAccessType,\n        QueueDescriptor,\n        QueuePermissions,\n        QueueProperties,\n        QueueType } = require('solclient-queue');\nconst { MessageOutcome, RgmidFactory } = require('solclient-message');\nconst { State, StateMachine } = require('solclient-fsm');\nconst { Stats,\n        StatType } = require('solclient-stats');\nconst { Timer } = require('solclient-events');\nconst { TransportAcks,\n        TransportAckResult } = require('./transport-acks');\n\nconst RING_BUFFER_SIZE = 512;\n// assumption is that this first message (messageId = 0) settlement outcome is ACCEPTED (ACKed)\nconst ZERO_APP_ACK = new ApplicationAck(Long.UZERO, ApplicationAckState.ACKED_SENT, MessageOutcome.ACCEPTED);\n\n\nclass ConsumerFSM extends StateMachine {\n  constructor({ name, consumer, sessionInterface, properties } = {}) {\n    super({ name });\n\n    const fsm = this;\n    const formatter = function formatter(...args) {\n      return [\n        `[session=${sessionInterface.sessionIdHex}]`,\n        `[message-consumer-fsm=${consumer.flowIdDec}]`,\n        ...args,\n      ];\n    };\n    const logger = this.logger = new LogFormatter(formatter);\n    const {\n      LOG_TRACE,\n      LOG_DEBUG,\n      LOG_INFO,\n      LOG_WARN,\n      LOG_ERROR,\n    } = logger;\n    this.log = logger.wrap(this.log, this);\n\n    const autoAck = properties.acknowledgeMode === MessageConsumerAcknowledgeMode.AUTO;\n\n    this._consumer = consumer;\n    this._sessionInterface = sessionInterface;\n\n    // Save copies of properties accessed outside the constructor\n    this._acknowledgeTimeoutInMsecs = properties.acknowledgeTimeoutInMsecs;\n    this._acknowledgeThreshold = properties.acknowledgeThreshold;\n    this._localPreferredWindowSize = properties.windowSize;\n    this._localMaxWindowSize = properties.windowSize;\n    this._hasAutoAckSupport = autoAck;\n\n    this._messageDispatch = new MessageDispatcher({ emitter: consumer, autoAck, logger });\n\n    this._stats = new Stats();\n\n    this._resetRemoteConnectionState();\n    this._resetLocalConnectionState();\n\n    // Flag to delay flow dispose() for autoAck.\n    this._midDispatch = false;\n    // Save a copy to clear out on first successful bind\n    this._replayStartLocation = properties.replayStartLocation;\n\n    this._errorCausingReconnect = null;\n    //**********************************************************************************************\n    // A bit of infrastructure around post-event actions, which includes maintaining a queue of\n    // pending actions, and some logic to pre-process the actions before performing them.\n\n    // These should not be the same as any MessageConsumerEventName value or they will collide in\n    // the actionLocations object during event pre-processing.\n    const emitEventActionType = 'EMIT';\n    const startDispatchActionType = 'DISPATCH';\n    const stopDispatchActionType = 'NO_DISPATCH';\n\n    let postEventActions = [];\n    function preprocessPostEventActions(startIndex) {\n      // first pre-process post event actions.  This isn't an exhaustive search of every possible\n      // combination of event sequences, as many are practically impossible, and therefore\n      // impossible to test.  We only handle sequences that are known to be possible.  If there\n      // are other sequences that need to be considered, we can add processing for them when we\n      // know they are possible.\n      LOG_TRACE(`Pre-processing post event action list @${startIndex}`, postEventActions);\n      const actionLocations = {};\n      postEventActions.forEach((action, i, arr) => {\n        function cancelAction(firstActionName, cancellingActionName) {\n          if (actionLocations[firstActionName] === undefined) {\n            return;\n          }\n          const firstLocation = actionLocations[firstActionName];\n          LOG_TRACE(`Cancelling post event action ${firstActionName}@${firstLocation} with ${\n            cancellingActionName}@${i}`);\n          actionLocations[firstActionName] = undefined;\n          arr[firstLocation] = null;\n          arr[i] = null;\n        }\n        if ((i < startIndex) || (!action)) {\n          LOG_TRACE(`Skip n/a action@${i}, start: ${startIndex}, action:`, action);\n          return;\n        }\n        switch (action.type) {\n          case emitEventActionType:\n            switch (action.data) {\n              case MessageConsumerEventName.UP:\n              case MessageConsumerEventName.ACTIVE:\n              case MessageConsumerEventName.RECONNECTED:\n                actionLocations[action.data] = i;\n                break;\n\n              case MessageConsumerEventName.DOWN:\n              case MessageConsumerEventName.DOWN_ERROR:\n              //case MessageConsumerEventName.RECONNECTED: // I can't get this to work :-/\n                cancelAction(MessageConsumerEventName.UP, action.data);\n                break;\n\n              case MessageConsumerEventName.INACTIVE:\n                cancelAction(MessageConsumerEventName.ACTIVE, action.data);\n                break;\n\n              default:\n                LOG_ERROR(`Unexpected event in post-event action: ${action.data}`);\n                break;\n            }\n            break;\n\n          case startDispatchActionType:\n            actionLocations[action.type] = i;\n            break;\n\n          case stopDispatchActionType:\n            cancelAction(startDispatchActionType, action.type);\n            break;\n\n          default:\n            break;\n        }\n      });\n    }\n\n    function processPostEventActions() {\n      let preprocessedActions = 0;\n      let i;\n\n      // Now we've pre-processed the list, execute any remaining non-null entries.  We don't use a\n      // foreach loop since foreach won't include elements added after processing has started.  This\n      // can occur if a callback causes more postEventActions to be added.\n      LOG_TRACE('Executing post event action list', postEventActions);\n      for (i = 0; i < postEventActions.length; ++i) {\n        if (preprocessedActions < postEventActions.length) {\n          preprocessPostEventActions(i);\n          preprocessedActions = postEventActions.length;\n        }\n        const action = postEventActions[i];\n        LOG_TRACE(`Action ${i}:`, action);\n        if (!action) {\n          continue;\n        }\n        switch (action.type) {\n          case emitEventActionType:\n            if (action.error !== undefined) {\n              consumer._emit(action.data, action.error);\n            } else {\n              consumer._emit(action.data);\n            }\n            break;\n\n          case stopDispatchActionType:\n            // We don't actually do the stop here -- it is always done when this is enqueued.\n            // The reason for enqueuing this event is to that it can cencel a startDispatch, if\n            // present.\n            break;\n\n          case startDispatchActionType:\n            this.requestStartDispatchFSM();\n            break;\n\n          default:\n            LOG_ERROR(`Unhandled post event action type: ${action.type}`);\n            break;\n        }\n      }\n      postEventActions = [];\n    }\n\n    function addPostEventAction(type, data, error) {\n      let newEvent;\n      if (data !== undefined) {\n        newEvent = { type, data, error };\n      } else {\n        newEvent = { type };\n      }\n      postEventActions.push(newEvent);\n      LOG_TRACE(`Added post event action ${postEventActions.length}:`, newEvent);\n      if (postEventActions.length === 1) {\n        fsm.setPostEventAction(processPostEventActions);\n      }\n    }\n\n    const addEventToEmit = (event, error) => {\n      if (!properties.activeIndicationEnabled) {\n        if ((event === MessageConsumerEventName.INACTIVE) ||\n            (event === MessageConsumerEventName.ACTIVE)) {\n          LOG_TRACE(`Skip emitting ${event} due to disabled flow active indications`);\n          return;\n        }\n      }\n      addPostEventAction(emitEventActionType, event, error);\n    };\n    const requestStartDispatch = () => {\n      addPostEventAction(startDispatchActionType);\n    };\n    const requestStopDispatch = () => {\n      // We do the stop inline, then add a post-event action so that it can have the effect of\n      // cancelling a previous start.  It will not execute the stop when processed however since we\n      // have already done it here.\n      this.requestStopDispatchFSM();\n      addPostEventAction(stopDispatchActionType);\n    };\n\n    this._addEventToEmit = addEventToEmit;\n    this._requestStartDispatch = requestStartDispatch;\n    this._requestStopDispatch = requestStopDispatch;\n\n    // End of post-event action infrastructure\n\n    // Utility functions\n    function emitBindFailed(error) {\n      assert(error instanceof OperationError);\n      consumer._emit(MessageConsumerEventName.CONNECT_FAILED_ERROR, error);\n    }\n\n    function emitRebindFailed(error) {\n      assert(error instanceof OperationError);\n      consumer._emit(MessageConsumerEventName.DOWN_ERROR, error);\n    }\n\n    function verifyEndpointSubscription(destination) {\n      let error = null;\n      if (destination) {\n        const subInfo = destination.getSubscriptionInfo();\n        if (subInfo && (subInfo.isShare || subInfo.isNoExport) &&\n            !fsm._sessionInterface.isCapable(CapabilityType.SHARED_SUBSCRIPTIONS)) {\n          error = new OperationError('Shared Subscriptions not Supported',\n                                     ErrorSubcode.SHARED_SUBSCRIPTIONS_NOT_SUPPORTED);\n        }\n      }\n      return error;\n    }\n\n    function verifyNackSettlementOutcomesSupport(requiredSettlementOutcomes) {\n      let error = null;\n      // check for whether the broker session supports the NACK capability\n      const settlementOutcomes = requiredSettlementOutcomes;\n      if (settlementOutcomes && settlementOutcomes.length > 0) {\n        // check the capability bit for settlement outcome (NACK) support or throw OperationError()\n        const isNackRequired = settlementOutcomes.some(v => v === MessageOutcome.FAILED || MessageOutcome.REJECTED);\n        if(isNackRequired && !fsm._sessionInterface.isCapable(CapabilityType.AD_APP_ACK_FAILED)) {\n          const outcomeNotSupportedError = `Session.capabilitySettlementOutcomeNotSupported: [ ${\n            settlementOutcomes.map(v => MessageOutcome.nameOf(v)).join(', ')\n          } ]`;\n          // log the operation error as a Warning\n          LOG_WARN(outcomeNotSupportedError);\n          // then create the actual OperationError object here\n          error = new OperationError(outcomeNotSupportedError, ErrorSubcode.INVALID_OPERATION);\n        }      \n      }\n      return error;\n    }\n    //**********************************************************************************************\n    // ChoicePoints on transitions.\n    // Not every transition is unilateral. In some cases, particularly with session-up/flow-open\n    // we want to check the session capabilities, which will effect which transition is taken.\n    // The following choicePoints are NOT generic, they may only be used in the documented states\n    // to control the transition out of that state.\n    // ChoicePoints must return a new state (this.transitionTo())\n    //\n    // checkCapabiltiesChoicePoint - Check the session capabilities against the consumer properties.\n    // If all requested properties are supported by the session capabilties, transitionTo(BindSent).\n    // otherwise emitError and transitionTo unbound.\n    // Used in:  fsm.Unbound.AwaitFlowOpen\n    //           fsm.Unbound.AwaitSessionUp\n    //\n    function checkCapabilitiesChoicePoint(curState) {\n      let error = null;\n      if (fsm._replayStartLocation !== undefined &&\n        !fsm._sessionInterface.isCapable(CapabilityType.MESSAGE_REPLAY)) {\n        error = new OperationError('Message Replay Not Supported',\n              ErrorSubcode.REPLAY_NOT_SUPPORTED);\n      } else if (properties.topicEndpointSubscription) {\n        error = verifyEndpointSubscription(properties.topicEndpointSubscription);\n      }\n      else if (properties.requiredSettlementOutcomes) {\n        error = verifyNackSettlementOutcomesSupport(properties.requiredSettlementOutcomes);\n      }\n\n      if (error) {\n        // Transition to Unbound means we wait for both SessionUp and flow open, which is rare.\n        // It makes sense here though, because the next session might be capable,\n        // but this one surely isn't.\n        // (and FLOW_DOWN is emitted, so we are waiting for both.)\n        return curState.transitionTo(fsm.Unbound, () =>\n              emitBindFailed(error));\n      }\n      // OK to bind\n      if (properties.createIfMissing &&\n        properties.queueDescriptor &&\n        properties.queueDescriptor.durable) {\n        return curState.transitionTo(fsm.CreateSent);\n      }\n      return curState.transitionTo(fsm.BindSent);\n    }\n\n    /**\n     * Check Capabilities on Re-Bind\n     * \n     * @param {*} curState - current state\n     * @param {*} externalTransition - is an external transition?\n     * @returns {State} retrurns the new state for the state machine\n     * @private\n     */\n    function checkCapabilitiesChoicePointOnRebind(curState, externalTransition = false) {\n      let error = null;\n      if (properties.requiredSettlementOutcomes) {\n        error = verifyNackSettlementOutcomesSupport(properties.requiredSettlementOutcomes);\n      }\n\n      if (error) {\n        // Transition to Unbound means we wait for both SessionUp and flow open, which is rare.\n        // It makes sense here though, because the next session might be capable,\n        // but this one surely isn't.\n        // (and FLOW_DOWN is emitted, so we are waiting for both.)\n        return curState.transitionTo(fsm.Unbound, () =>\n              emitBindFailed(error));\n      }\n      // OK to re-bind\n      if (externalTransition) {\n        return curState.externalTransitionTo(fsm.Reconnecting.RBindSent);\n      }\n      return curState.transitionTo(fsm.Reconnecting.RBindSent);\n    }\n    // End of ChoicePoints\n    //*********************************************************************************************\n    // FSM config\n\n    function handleAccidentalBind(msg) {\n      // Unbind with timout-recursion using flowid.\n\n      LOG_TRACE(`handleAccidentalBind mssg: ${msg}`);\n      const correlationTag = sessionInterface.getCorrelationTag();\n      const message = SMFLib.AdProtocolMessage.getCloseMessageConsumer(msg.flowId, correlationTag);\n      sessionInterface.sendControl(message);\n      sessionInterface.enqueueRequest(\n        correlationTag,\n        () => this.handleAccidentalBind(msg),\n        properties.connectTimeoutInMsecs,\n        null,\n        null); //ignore response. Maybe log?\n    }\n\n    this.unhandledEventReaction(function onUnhandledEvent(event) {\n      switch (event.getName()) {\n        case ConsumerFSMEventNames.VIRTUALROUTER_NAME_CHANGED:\n          LOG_INFO('VirtualRouter name change: clearing all acknowledgement state and partition group ID, if any');\n          fsm._resetRemoteConnectionState();\n          return this;\n        case ConsumerFSMEventNames.FLOW_UNBOUND:\n          LOG_INFO('Received unsolicited unbind. Flow may be manually reconnected.');\n          return this.transitionToUnbound(MessageConsumerEventName.DOWN_ERROR, event.details);\n        case ConsumerFSMEventNames.DISPOSE:\n          fsm._dispose();\n          return fsm.getCurrentState().terminate();\n        case ConsumerFSMEventNames.BIND_RESPONSE:\n          LOG_TRACE('Unhandled bind, assuming accidental BIND duplication');\n          handleAccidentalBind(event.details);\n          return this;\n        default:\n          LOG_TRACE(`Ignoring event ${event.getName()} in state ${this.getCurrentState().getName()}`);\n          return this;\n      }\n    });\n\n    this.initial(function onInitial() {\n      return this.transitionTo(fsm.Unbound, (context) => {\n        LOG_INFO(`Starting ${context.getStateMachine().getName()}`);\n      });\n    });\n\n    /*\n      We don't transition directly from Unbound to BindSent.\n      We need the following events:\n       * FLOW_OPEN\n       * SESSION_UP\n      (The session ensures we get SESSION_UP or SESSION_UP_NO_AD if we are created\n      and there is a session already up.)\n      The Unbound base state implements transitions to its wait state children:\n       * FLOW_OPEN -> AwaitSessionUp\n       * SESSION_UP -> AwaitFlowOpen\n      It also has the following transitions that pull the FSM out of its children\n      and back to itself:\n       * FLOW_CLOSE\n       * SESSION_DOWN\n      The child states can override these with internal transitions.\n     */\n    this.Unbound = new State({\n      name:          ConsumerStateNames.UNBOUND,\n      parentContext: fsm,\n    }, {\n      emitDisabledEvent() {\n        consumer._emit(MessageConsumerEventName.GM_DISABLED);\n      },\n    })\n      .reaction(ConsumerFSMEventNames.FLOW_CLOSE, function onFlowClose() {\n        return this.transitionTo(this);\n      })\n      .reaction(ConsumerFSMEventNames.SESSION_DOWN, function onSessionDown() {\n        return this.transitionTo(this);\n      })\n      .reaction(ConsumerFSMEventNames.SESSION_DISCONNECT, function onSesssionDisconnect() {\n        return this.transitionTo(this);\n      })\n      .reaction(ConsumerFSMEventNames.FLOW_OPEN, function onFlowOpen() {\n        return this.transitionTo(fsm.Unbound.AwaitSessionUp); // Enter child state\n      })\n      .reaction(ConsumerFSMEventNames.SESSION_UP, function onSessionUp() {\n        if (fsm._sessionInterface.isCapable(CapabilityType.GUARANTEED_MESSAGE_CONSUME)) {\n          return this.transitionTo(fsm.Unbound.AwaitFlowOpen); // Enter child state\n        }\n        LOG_WARN(`Consumer is not supported by router for this client on sessionId 0x${\n                 fsm._sessionInterface.sessionIdHex}`);\n        // Act as if the child state handled this\n        return this.internalTransition(() => this.emitDisabledEvent());\n      })\n      .reaction(ConsumerFSMEventNames.SESSION_UP_NO_AD, function onSessionUpNoAD() {\n        // Act as if the child state handled this\n        return this.internalTransition(() => this.emitDisabledEvent());\n      })\n      .exit(() => {\n        fsm._connectAttempts = properties.connectAttempts;\n      });\n\n    /*\n      In this state, we have received FLOW_OPEN, but no SESSION_UP.\n      SESSION_DOWN does not cancel this wait, so we must override the\n      parent and explicitly do nothing.\n    */\n    this.Unbound.AwaitSessionUp = new State({\n      name:          ConsumerStateNames.UNBOUND_AWAIT_SESSION_UP,\n      parentContext: this.Unbound,\n    }, {\n      emitBindWaiting() {\n        consumer._emit(PrivateFlowEventName.BIND_WAITING);\n      },\n    })\n      .entry(function onEntry() {\n        this.emitBindWaiting();\n      })\n      .reaction(ConsumerFSMEventNames.SESSION_DOWN, function onSessionDown() {\n        return this.internalTransition(); // Don't exit; continue waiting\n      })\n      .reaction(ConsumerFSMEventNames.SESSION_DISCONNECT, function onSessionDown() {\n        return this.internalTransition(); // Don't exit; continue waiting\n      })\n      .reaction(ConsumerFSMEventNames.SESSION_UP, function onSessionUp() {\n        return checkCapabilitiesChoicePoint(this);\n      });\n\n    /*\n      In this state, we have received SESSION_UP but not FLOW_OPEN.\n      If we get FLOW_OPEN, attempt to bind. Any other event is handled\n      by the parent.\n     */\n    this.Unbound.AwaitFlowOpen = new State({\n      name:          ConsumerStateNames.UNBOUND_AWAIT_FLOWOPEN,\n      parentContext: this.Unbound,\n    })\n      .reaction(ConsumerFSMEventNames.FLOW_OPEN, function onFlowOpen() {\n        return checkCapabilitiesChoicePoint(this);\n      });\n    // Factored out the extension object from the State constructor for reuse in\n    // flow auto-reconnect sister-states.\n    this.BindSentExtensions = {\n      sendBindRequest() {\n        const correlationTag = sessionInterface.getCorrelationTag();\n        const transportAcks = fsm._transportAcks;\n\n        fsm._endpointEnsure();\n        const endpoint = fsm._endpoint;\n        const subscription = fsm._subscription;\n\n        const message = SMFLib.AdProtocolMessage.getOpenMessageConsumer(\n          properties.queueDescriptor,\n          properties.queueProperties,\n          endpoint,\n          subscription,\n          correlationTag,\n          properties.windowSize,\n          properties.noLocal,\n          properties.activeIndicationEnabled,\n          transportAcks.lastAcked,\n          transportAcks.lastReceived,\n          properties.browser,\n          fsm._replayStartLocation,\n          consumer.endpointErrorId,\n          consumer.partitionGroupId,\n          (properties.requiredSettlementOutcomes && properties.requiredSettlementOutcomes.length > 0));\n        sessionInterface.sendControl(message);\n        sessionInterface.enqueueRequest(correlationTag,\n                                        this.handleBindTimeout.bind(this),\n                                        properties.connectTimeoutInMsecs,\n                                        null,\n                                        this.handleBindResponse.bind(this));\n        LOG_TRACE('Sent consumer bind request with arguments', [\n          properties.queueDescriptor,\n          properties.queueProperties,\n          endpoint,\n          subscription,\n          correlationTag,\n          properties.windowSize,\n          properties.noLocal,\n          properties.activeIndicationEnabled,\n          transportAcks.lastAcked,\n          transportAcks.lastReceived,\n          properties.browser,\n          fsm._replayStartLocation,\n          consumer.endpointErrorId,\n          consumer.partitionGroupId,\n          properties.requiredSettlementOutcomes]);\n      },\n      cancelBindRequestTimer() {\n        LOG_TRACE('Cancelling bindRequestTimer.');\n        this.bindRequestTimer.cancel();\n      },\n      handleBindTimeout() {\n        LOG_INFO('Bind timeout');\n        fsm.processEvent(new ConsumerFSMEvent({ name: ConsumerFSMEventNames.BIND_TIMEOUT }));\n      },\n      handleExpectedBind(msg) {\n        const accessTypeOrDefault = x => (x === undefined ? QueueAccessType.EXCLUSIVE : x);\n\n        // the partition group ID\n        let partitionGroupIdValue = msg.getPartitionGroupId();\n        if(partitionGroupIdValue == undefined || partitionGroupIdValue == null) {\n          partitionGroupIdValue = undefined; // set it as undefined\n          fsm._clearPartitionGroupId(); // clear the partitionGroupId\n        }\n\n        const attrs = {\n          lastMsgIdAcked:       msg.getLastMsgIdAcked(),\n          flowId:               msg.getFlowId(),\n          accessType:           accessTypeOrDefault(msg.getAccessType()),\n          topicEndpointBytes:   msg.getTopicEndpointBytes(),\n          grantedPermissions:   msg.getGrantedPermissions(),\n          allOthersPermissions: msg.getAllOthersPermissions(),\n          respectsTTL:          msg.getRespectsTTL(),\n          activeFlow:           msg.getActiveFlow(),\n          wantFlowChangeNotify: msg.getWantFlowChangeNotify(),\n          discardBehavior:      msg.getQueueDiscardBehavior(),\n          deliveryCountSent:    msg.getEndpointDeliveryCountSent(),\n          endpointId:           msg.getEndpointId(),\n          maxUnackedMessages:   msg.getMaxUnackedMessages(),\n          endpointErrorId:      msg.getEndpointErrorId(),\n          spoolerUniqueId:      msg.getSpoolerUniqueId(),\n          quota:                msg.getQuota(),\n          maxMsgSize:           msg.getMaxMsgSize(),\n          maxRedelivery:        msg.getMaxRedelivery(),\n          partitionGroupId:     partitionGroupIdValue,\n        };\n        LOG_DEBUG('BIND response attributes:', attrs);\n\n        Object.assign(consumer, {\n          accessType:           attrs.accessType,\n          queueDiscardBehavior: attrs.discardBehavior,\n          deliveryCountSent:    attrs.deliveryCountSent,\n          endpointId:           attrs.endpointId,\n          respectsTTL:          attrs.respectsTTL,\n          flowId:               attrs.flowId,\n          permissions:          attrs.grantedPermissions,\n          wantFlowChangeNotify: attrs.wantFlowChangeNotify,\n          endpointErrorId:      attrs.endpointErrorId,\n          spoolerUniqueId:      attrs.spoolerUniqueId,\n          partitionGroupId:     partitionGroupIdValue,\n        });\n        if (fsm._sessionInterface.isCapable(CapabilityType.BR_REPLAY_ERRORID)) {\n          consumer.endpointErrorId = attrs.endpointErrorId;\n        }\n\n        if (attrs.topicEndpointBytes && attrs.topicEndpointBytes.length) {\n          attrs.endpoint = DestinationFromNetwork.createDestinationFromBytes(\n            attrs.topicEndpointBytes);\n          LOG_DEBUG('Overwriting local endpoint:', fsm._endpoint, 'with remote:', attrs.endpoint);\n          fsm._endpoint = attrs.endpoint;\n          const consumerProperties = fsm._consumer._properties;\n          consumerProperties.queueDescriptor = new QueueDescriptor({\n            name:    attrs.endpoint.name,\n            type:    consumerProperties.queueDescriptor.type,\n            durable: consumerProperties.queueDescriptor.durable,\n          });\n        }\n\n        const consumerProperties = fsm._consumer._properties;\n        consumerProperties.queueProperties = new QueueProperties({\n          respectsTTL:          attrs.respectsTTL,\n          permissions:          attrs.allOthersPermissions,\n          quotaMB:              attrs.quota,\n          maxMessageSize:       attrs.maxMsgSize,\n          discardBehavior:      attrs.discardBehavior,\n          maxMessageRedelivery: attrs.maxRedelivery,\n          accessType:           attrs.accessType,\n        });\n        if (!consumerProperties.queueProperties.permissions) {\n          consumerProperties.queueProperties.permissions = QueuePermissions.NONE;\n        }\n\n\n        Object.assign(fsm, {\n          _active:           attrs.activeFlow,\n          _remoteWindowSize: attrs.maxUnackedMessages,\n        });\n\n        if (Long.UZERO.eq(fsm._transportAcks.lastAcked)) {\n          fsm._transportAcks.lastAcked = attrs.lastMsgIdAcked || Long.UZERO;\n        } else {\n          LOG_DEBUG(`Retaining last acked/last received: ${fsm._transportAcks}`);\n        }\n        //return this.transitionTo(fsm.FlowUp);\n        //return fsm.processEvent(new ConsumerFSMEvent({ name: ConsumerFSMEventNames.FLOW_UP }));\n      },\n      handleBindResponse(msg) {\n        LOG_TRACE(`handleBindResponse called for message ${msg}`);\n        if (msg.msgType !== SMFLib.SMFAdProtocolMessageType.BIND) {\n          LOG_INFO(`Unexpected message type in bind response: ${SMFLib.SMFAdProtocolMessageType.describe(msg.msgType)}`);\n          return fsm.processEvent(\n            new ConsumerFSMEvent(\n              { name: ConsumerFSMEventNames.FLOW_FAILED },\n              new OperationError(`Unexpected bind response: ${\n                                 SMFLib.SMFAdProtocolMessageType.describe(msg.msgType)}`,\n                                 ErrorSubcode.PROTOTOCOL_ERROR)));\n        }\n\n        const header = msg.smfHeader;\n        const responseCode = header.pm_respcode;\n\n        if (responseCode === null) {\n          // Drop message and increment stats. Flow will time out\n          this._consumer.incStat(StatType.RX_DISCARD_SMF_UNKNOWN_ELEMENT);\n          LOG_DEBUG(`Drop Open-Publisher-Flow Request message on sessionId 0x${\n                    this._sessionInterface.sessionIdHex}`);\n          return undefined;\n        }\n\n        if (responseCode !== 200) {\n          const description = header.pm_respstr;\n          const errorSubcode = ErrorResponseSubcodeMapper.getADErrorSubcode(responseCode,\n                                                                            description);\n          LOG_INFO('Flow failed (bind):', responseCode, description, ErrorSubcode.describe(errorSubcode));\n          LOG_DEBUG('subcode:', errorSubcode);\n          return fsm.processEvent(new ConsumerFSMEvent(\n              { name: ConsumerFSMEventNames.FLOW_FAILED },\n              new OperationError(description, errorSubcode, { responseCode })));\n        }\n\n        const respEvent = { name: ConsumerFSMEventNames.BIND_RESPONSE };\n        return fsm.processEvent(new ConsumerFSMEvent(respEvent, msg));\n      },\n    };\n    this.BindSent = new State({\n      name:          ConsumerStateNames.BIND_SENT,\n      parentContext: fsm,\n    }, this.BindSentExtensions)\n      .entry(function onEntry() {\n        fsm._connectAttempts--;\n        this.sendBindRequest();\n        this.bindRequestTimer = Timer.newTimeout(properties.connectTimeoutInMsecs,\n                                                 this.handleBindTimeout);\n      })\n      .reaction(ConsumerFSMEventNames.SESSION_DOWN, function onSessionDown() {\n        return this.transitionTo(fsm.Unbound.AwaitSessionUp);\n      })\n      .reaction(ConsumerFSMEventNames.SESSION_DISCONNECT, function onSessionDown() {\n        return this.transitionTo(fsm.Unbound.AwaitSessionUp,\n                                 () => fsm._addEventToEmit(MessageConsumerEventName.DOWN));\n      })\n      .reaction(ConsumerFSMEventNames.FLOW_CLOSE, function onFlowClose() {\n        return this.transitionTo(fsm.UnbindSent);\n      })\n      .reaction(ConsumerFSMEventNames.BIND_TIMEOUT, function onBindTimeout() {\n        LOG_TRACE(`Bind timeout, connectAttempts left: ${fsm._connectAttempts}`);\n        if (fsm._connectAttempts > 0) {\n          return this.externalTransitionTo(fsm.BindSent);\n        }\n        return this.transitionTo(fsm.Unbound.AwaitFlowOpen,\n                                 () => emitBindFailed(\n                                    new OperationError('Bind failed due to timeout',\n                                                       ErrorSubcode.TIMEOUT)));\n      })\n      .reaction(ConsumerFSMEventNames.FLOW_FAILED, function onFlowFailed(evt) {\n        // Act like a newly created flow\n        return this.transitionTo(fsm.Unbound.AwaitFlowOpen, () => emitBindFailed(evt.details));\n      })\n      .reaction(ConsumerFSMEventNames.BIND_RESPONSE, function onBindResponse(event) {\n        this.handleExpectedBind(event.details);\n        //return this;\n        return this.transitionTo(fsm.FlowUp);\n      })\n      .reaction(ConsumerFSMEventNames.FLOW_UP, function onFlowUp() {\n        return this.transitionTo(fsm.FlowUp);\n      })\n      .exit(function onExit() {\n        this.cancelBindRequestTimer();\n      });\n    this.Reconnecting = new State({\n      name:          ConsumerStateNames.RECONNECTING,\n      parentContext: fsm,\n    })\n      .entry(function onEntry() {\n        LOG_TRACE('RECONNECTING onEntry: emitting RECONNECTING, resetting attempt counters');\n        LOG_TRACE(`this._errorCausingReconnect: ${this._errorCausingReconnect}`);\n        LOG_TRACE(`fsm._errorCausingReconnect: ${fsm._errorCausingReconnect}`);\n        consumer._emit(MessageConsumerEventName.RECONNECTING, fsm._errorCausingReconnect);\n        fsm._connectAttempts = properties.connectAttempts;\n        fsm.reconnectAttempts = properties.reconnectAttempts;\n      })\n      .initial(\n        function onInitial() {\n          return checkCapabilitiesChoicePointOnRebind(this, false);\n          // return this.transitionTo(fsm.Reconnecting.RBindSent);\n        })\n      .reaction(ConsumerFSMEventNames.SESSION_DISCONNECT, function onSessionDown() {\n        return this.transitionTo(fsm.Reconnecting.RAwaitSessionUp);\n      })\n      .reaction(ConsumerFSMEventNames.SESSION_DOWN, function onSessionDown() {\n        return this.transitionTo(fsm.Reconnecting.RAwaitSessionUp);\n      });\n    this.Reconnecting.RAwaitSessionUp = new State({\n      name:          ConsumerStateNames.RECONNECTING_AWAIT_SESSION_UP,\n      parentContext: this.Reconnecting,\n    })\n      .reaction(ConsumerFSMEventNames.SESSION_UP, function onSessionUp() {\n        fsm._connectAttempts = properties.connectAttempts;\n        return checkCapabilitiesChoicePointOnRebind(this, false);\n        // return this.transitionTo(fsm.Reconnecting.RBindSent);\n      });\n    this.Reconnecting.RBindSent = new State({\n      name:          ConsumerStateNames.RECONNECTING_BIND_SENT,\n      parentContext: this.Reconnecting,\n    }, this.BindSentExtensions)\n      .entry(function onEntry() {\n        fsm._connectAttempts--;\n        this.sendBindRequest();\n        this.bindRequestTimer = Timer.newTimeout(properties.connectTimeoutInMsecs,\n                                                 this.handleBindTimeout);\n      })\n      .reaction(ConsumerFSMEventNames.FLOW_CLOSE, function onFlowClose() {\n        // TODO: This is probably wrong in the original state machine too:\n        // flowid is either missing or stale. Keeping it the same as there for now.\n        return this.transitionTo(fsm.UnbindSent);\n      })\n      .reaction(ConsumerFSMEventNames.BIND_TIMEOUT, function onBindTimeout() {\n        LOG_TRACE(`Bind timeout during reconnect, connectAttempts left: ${fsm._connectAttempts}`);\n        if (fsm._connectAttempts > 0) {\n          return checkCapabilitiesChoicePointOnRebind(this, true);\n          // return this.externalTransitionTo(fsm.Reconnecting.RBindSent);\n        }\n        // Running out of rebinds is a non rebindable failure, so break the reconect loop.\n        LOG_TRACE('Running out of rebinds is a non rebindable failure, so break the reconect loop.');\n        return this.transitionTo(fsm.Unbound.AwaitFlowOpen,\n                                 () => emitBindFailed(\n                                    new OperationError('Rebind failed due to timeout',\n                                                       ErrorSubcode.TIMEOUT)));\n      })\n      .reaction(ConsumerFSMEventNames.FLOW_FAILED, function onFlowFailed(evt) {\n        // These three reconnect-errors are \"rebindable\",\n        // anything else breaks the reconnect loop.\n        if (fsm.reconnectAttempts > 0 || fsm.reconnectAttempts === -1) {\n          if (evt && evt.details && evt.details.subcode) {\n            if (evt.details.subcode === ErrorSubcode.QUEUE_SHUTDOWN ||\n              evt.details.subcode === ErrorSubcode.TOPIC_ENDPOINT_SHUTDOWN ||\n              evt.details.subcode === ErrorSubcode.GM_UNAVAILABLE) {\n              LOG_TRACE(`ReconnectAttempts left: ${fsm.reconnectAttempts} subcode: ${evt.details.subcode}, giving it another shot.`);\n              return this.transitionTo(fsm.Reconnecting.RAwaitTimer);\n            }\n          } else {\n            LOG_DEBUG(`Hmm, no subcode in FLOW_FAILED? ${evt}`);\n          }\n        } else {\n          LOG_TRACE(`Ran out of reconnectAttempts: ${fsm.reconnectAttempts}`);\n        }\n        return this.transitionTo(fsm.Unbound.AwaitFlowOpen, () => emitRebindFailed(evt.details));\n      })\n      .reaction(ConsumerFSMEventNames.BIND_RESPONSE, function onBindResponse(event) {\n        this.handleExpectedBind(event.details);\n        //return this;\n        return this.transitionTo(fsm.FlowUp,\n                                 () => fsm._addEventToEmit(MessageConsumerEventName.RECONNECTED));\n      })\n      .reaction(ConsumerFSMEventNames.FLOW_UP, function onFlowUp() {\n        return this.transitionTo(fsm.FlowUp,\n                                 () => fsm._addEventToEmit(MessageConsumerEventName.RECONNECTED));\n                                 //() => consumer._emit(MessageConsumerEventName.RECONNECTING));\n      })\n      .exit(function onExit() {\n        this.cancelBindRequestTimer();\n      });\n    this.Reconnecting.RAwaitTimer = new State({\n      name:          ConsumerStateNames.RECONNECTING_AWAIT_TIMER,\n      parentContext: this.Reconnecting,\n    }, {\n      handleReconnectIntervalTimeout() {\n        LOG_DEBUG('Reconnect interval timeout (expected)');\n        fsm.processEvent(new ConsumerFSMEvent({\n          name: ConsumerFSMEventNames.RECONNECT_INTERVAL_TIMEOUT }));\n      },\n      cancelReconnectIntervalTimer() {\n        this.reconnectIntervalTimer.cancel();\n      },\n\n    }).entry(function onEntry() {\n      if (fsm.reconnectAttempts > 0) {\n        --fsm.reconnectAttempts;\n      }\n      LOG_TRACE(`Setting up timer for ${properties.reconnectIntervalInMsecs}. reconnectAttempts left: ${fsm.reconnectAttempts}`);\n      this.reconnectIntervalTimer = Timer.newTimeout(properties.reconnectIntervalInMsecs,\n                                                     this.handleReconnectIntervalTimeout);\n    }).exit(function onExit() {\n      this.cancelReconnectIntervalTimer();\n    }).reaction(ConsumerFSMEventNames.RECONNECT_INTERVAL_TIMEOUT, function onTimeout() {\n      fsm._connectAttempts = properties.connectAttempts;\n      return checkCapabilitiesChoicePointOnRebind(this, false);\n      // return this.transitionTo(fsm.Reconnecting.RBindSent);\n    });\n\n    const flowUpFSM = this.FlowUp = new State({\n      name:          ConsumerStateNames.FLOW_UP,\n      parentContext: fsm,\n    })\n      .initial(\n        function onInitial() {\n          return this.transitionTo(fsm._active === 0\n            ? flowUpFSM.XferInactive\n            : flowUpFSM.Xfer);\n        }\n      )\n      .entry(() => {\n        fsm._replayStartLocation = undefined; //SOL-12945: only replay once.\n        // This is ugly, but I can't coerce the post event action queue to work with me:\n        // RECONNECTING should suppress UP.\n        if (!fsm._errorCausingReconnect) {\n          LOG_TRACE('Emitting UP, because there is no errorCausingReconnect');\n          fsm._addEventToEmit(MessageConsumerEventName.UP);\n        } else {\n          LOG_TRACE('Not emitting UP, because there is errorCausingReconnect');\n          fsm._errorCausingReconnect = null;\n        }\n      })\n      .reaction(ConsumerFSMEventNames.SESSION_DOWN, function onSessionDown() {\n        return this.transitionTo(fsm.Unbound.AwaitSessionUp);\n      })\n      .reaction(ConsumerFSMEventNames.SESSION_DISCONNECT, function onSessionDisconnect() {\n        return this.transitionTo(fsm.Unbound.AwaitSessionUp,\n                                 () => fsm._addEventToEmit(MessageConsumerEventName.DOWN));\n      })\n      .reaction(ConsumerFSMEventNames.FLOW_CLOSE, function onFlowClose() {\n        // Acks will be sent by UnbindSent\n        return this.transitionTo(fsm.UnbindSent);\n      })\n      .reaction(ConsumerFSMEventNames.FLOW_UNBOUND, event =>\n        // Acks will be sent by UnbindSent\n        fsm.transitionToUnboundFromUp(\n          properties,\n          MessageConsumerEventName.DOWN_ERROR,\n          event.details)\n      );\n\n    flowUpFSM.Xfer = new State({\n      name:          ConsumerStateNames.FLOW_UP_XFER,\n      parentContext: flowUpFSM,\n    })\n      .entry(() => {\n        fsm._addEventToEmit(MessageConsumerEventName.ACTIVE);\n        fsm._sendAcks(true);\n        fsm._requestStartDispatch();\n      })\n      .exit(() => {\n        fsm._addEventToEmit(MessageConsumerEventName.INACTIVE);\n        fsm._requestStopDispatch();\n      })\n      // Here we send acks on disconnect.  Acks for the FLOW_CLOSE event are coupled to the sending\n      // of the unbind.\n      .reaction(ConsumerFSMEventNames.SESSION_DISCONNECT, function onSessionDown() {\n        fsm._sendAcks(true);            // send acks, then...\n        return this.eventUnhandled();   // let the parent state handle the remaining steps.\n      });\n\n    flowUpFSM.XferInactive = new State({\n      name:          ConsumerStateNames.FLOW_UP_XFER_INACTIVE,\n      parentContext: flowUpFSM,\n    })\n      .reaction(ConsumerFSMEventNames.FLOW_ACTIVE_IND, function onFlowActiveIndication() {\n        return this.transitionTo(flowUpFSM.Xfer);\n      });\n\n    this.UnbindSent = new State({\n      name:          ConsumerStateNames.UNBIND_SENT,\n      parentContext: fsm,\n    }, {\n\n      sendUnbindRequest() {\n        // Don't do this on entry to UNBIND, do it when the user\n        // wants to unbind\n\n        fsm._endpointClear();\n        try {\n          const correlationTag = sessionInterface.getCorrelationTag();\n          const message = SMFLib.AdProtocolMessage.getCloseMessageConsumer(consumer.flowId,\n                                                                           correlationTag);\n          sessionInterface.sendControl(message);\n          sessionInterface.enqueueRequest(\n            correlationTag,\n            () => this.handleUnbindTimeout(),\n            properties.connectTimeoutInMsecs,\n            null,\n            response => this.handleUnbindResponse(response));\n          LOG_INFO('Sent consumer unbind request with arguments',\n                   {\n                     flowId: consumer.flowId,\n                     correlationTag,\n                   });\n        } catch (e) {\n          LOG_INFO(`Exception in sendUnbindRequest while trying to send unbind request: ${e}`);\n          LOG_DEBUG(`Session (${sessionInterface.getCurrentStateName()}) assumed lost before flow unbind could be sent. Considering this flow unbound.`);\n          fsm.processEvent(new ConsumerFSMEvent({ name: ConsumerFSMEventNames.FLOW_UNBOUND }));\n        }\n      },\n\n      handleUnbindTimeout() {\n        LOG_INFO('Unbind timeout');\n        return fsm.processEvent(\n          new ConsumerFSMEvent({ name: ConsumerFSMEventNames.UNBIND_TIMEOUT })\n        );\n      },\n\n      handleUnbindResponse(msg) {\n        if (msg.msgType !== SMFLib.SMFAdProtocolMessageType.UNBIND) {\n          LOG_INFO(`Unexpected message type in bind response: ${SMFLib.SMFAdProtocolMessageType.describe(msg.msgType)}`);\n        }\n        const responseCode = msg.smfHeader.pm_respcode;\n        const description = msg.smfHeader.pm_respstr;\n        const errorSubcode = ErrorResponseSubcodeMapper.getADErrorSubcode(responseCode,\n                                                                          description);\n        consumer.endpointErrorId = msg.getEndpointErrorId();\n        LOG_INFO('Flow failed (unbind):', responseCode, description, ErrorSubcode.describe(errorSubcode));\n        return fsm.processEvent(new ConsumerFSMEvent(\n          { name: ConsumerFSMEventNames.FLOW_UNBOUND },\n          new OperationError(description, errorSubcode, responseCode)));\n      },\n\n    })\n      .entry(function onEntry() {\n        this.sendUnbindRequest();\n      })\n      .reaction(ConsumerFSMEventNames.UNBIND_TIMEOUT, function onUnbindTimeout() {\n        return this.externalTransitionTo(fsm.UnbindSent);\n      })\n      // The choice point will emit on this transition, not on exit, which is OK:\n      // we don't want to repeatedly dispatch \"unbound\" when the unbinds are timing out\n      .reaction(ConsumerFSMEventNames.FLOW_UNBOUND,\n                () => fsm.transitionToUnbound(MessageConsumerEventName.DOWN));\n\n\n    this.CreateSent = new State({\n      name:          ConsumerStateNames.CREATE_SENT,\n      parentContext: fsm,\n    }, {\n      sendCreateRequest() {\n        const correlationTag = sessionInterface.getCorrelationTag();\n        const message = SMFLib.AdProtocolMessage.getCreate(\n          properties.queueDescriptor,\n          properties.queueProperties,\n          correlationTag);\n        sessionInterface.sendControl(message);\n        sessionInterface.enqueueRequest(\n          correlationTag,\n          this.handleCreateTimeout.bind(this),\n          properties.connectTimeoutInMsecs,\n          null,\n          this.handleCreateResponse.bind(this));\n      },\n      handleCreateTimeout() {\n        LOG_INFO('Create timeout');\n        fsm.processEvent(new ConsumerFSMEvent({ name: ConsumerFSMEventNames.CREATE_TIMEOUT }));\n      },\n      handleCreateResponse(msg) {\n        LOG_TRACE(`handleCreateResponse called for message ${msg}`);\n\n\n        if (msg.msgType !== SMFLib.SMFAdProtocolMessageType.CREATE) {\n          LOG_INFO(`Unexpected message type in create response: ${SMFLib.SMFAdProtocolMessageType.describe(msg.msgType)}`);\n          return fsm.processEvent(\n            new ConsumerFSMEvent(\n              { name: ConsumerFSMEventNames.CREATE_FAILED },\n              new OperationError(`Unexpected create response: ${\n                                 SMFLib.SMFAdProtocolMessageType.describe(msg.msgType)}`,\n                                 ErrorSubcode.PROTOTOCOL_ERROR)));\n        }\n\n        const header = msg.smfHeader;\n        const responseCode = header.pm_respcode;\n\n        if (responseCode !== 200) {\n          const description = header.pm_respstr;\n          const errorSubcode = ErrorResponseSubcodeMapper.getADErrorSubcode(responseCode,\n                                                                            description);\n          LOG_INFO('Endpoint create failed:', responseCode, description, ErrorSubcode.describe(errorSubcode));\n          LOG_DEBUG('subcode:', errorSubcode);\n          if (errorSubcode === ErrorSubcode.ENDPOINT_ALREADY_EXISTS) {\n            LOG_TRACE('subcode recognized as ALREADY EXISTS:', errorSubcode);\n            const respEvent = { name: ConsumerFSMEventNames.CREATE_SUCCESS };\n            return fsm.processEvent(new ConsumerFSMEvent(respEvent, msg));\n          }\n          LOG_TRACE('subcode not recognized as ALREADY EXISTS:', errorSubcode);\n          return fsm.processEvent(new ConsumerFSMEvent(\n              { name: ConsumerFSMEventNames.CREATE_FAILED },\n              new OperationError(description, errorSubcode, { responseCode })));\n        }\n\n        const respEvent = { name: ConsumerFSMEventNames.CREATE_SUCCESS };\n        return fsm.processEvent(new ConsumerFSMEvent(respEvent, msg));\n      },\n    }\n    )\n      .entry(function onEntry() {\n        //send create request\n        this.sendCreateRequest();\n      })\n      .reaction(ConsumerFSMEventNames.CREATE_TIMEOUT, function onCreateTimeout() {\n        LOG_DEBUG('Create timeout, just moving on to bind and hoping for the best.');\n        return this.externalTransitionTo(fsm.BindSent);\n      })\n      .reaction(ConsumerFSMEventNames.CREATE_SUCCESS, function onCreateSuccess() {\n        return this.externalTransitionTo(fsm.BindSent);\n      })\n      .reaction(ConsumerFSMEventNames.CREATE_FAILED, function onCreateFailed(evt) {\n        // \"queue exists\" should be noticed in the response handler and emit CREATE_SUCCESS.:\n        return this.transitionTo(fsm.Unbound.AwaitFlowOpen, () => emitBindFailed(evt.details));\n      });\n  }\n\n  /**\n   *\n   * @param {solace.Message} message The message being accepted by the flow.\n   * @returns {Boolean} True if the message was accepted.\n   * @private\n   */\n  acceptMessage(message) {\n    const { LOG_TRACE, LOG_DEBUG } = this.logger;\n    const messageID = message.getGuaranteedMessageId();\n    const idstr = messageID.toString();\n    const consumer = this._consumer;\n\n    if (!this._fsmDispatch) {\n      // We're disconnecting. Drop the message.\n      LOG_TRACE('Dropping message because this flow cannot acknowledge it');\n      consumer.incStat(StatType.RX_DISCARD_NO_MATCHING_CONSUMER);\n      return false;\n    }\n    //Booby trap getDeliveryCount() on the message if the flow doesn't support it:\n    if (!consumer.deliveryCountSent) {\n      message.setDeliveryCount(-1);\n    }\n    // SMF flow suid can be updated via data message if there is a\n    // header parameter containing the suid. All subsequent data messages\n    // without suid must have the stored Flow suid set on data message.\n    //\n    // Update flow with message suid if and only if there was an initialized\n    // suid from the flow bind response.\n    // There is a legacy router case where suid are passed opaquely through the\n    // network of brokers on the message. In the case where a suid is present\n    // on a message without a suid on the bind response this indicates the suid\n    // is not an update to subsequent messages suid values. As the current broker\n    // connected does not support suid generation or assignment.\n    //\n    // Note a spooler unique id is only set if the message SMF\n    // contained the SpoolerUniqueId header parameter.\n    // See decode for details.\n    const messageSuid = message._getSpoolerUniqueId();\n    if (RgmidFactory.INVALID_SUID.eq(messageSuid)) {\n      // set the message suid value to stored consumer suid value\n      message._setSpoolerUniqueId(consumer.spoolerUniqueId);\n    } else if (consumer.spoolerUniqueId !== undefined\n        && !RgmidFactory.INVALID_SUID.eq(consumer.spoolerUniqueId)) {\n      // otherwise update the consumer with new suid value if consumer suid was initialized\n      const consumerSuidStr = consumer.spoolerUniqueId.toString();\n      const msgSuidStr = messageSuid.toString();\n      LOG_DEBUG('Updating Consumer message spoolerUniqueId from ', consumerSuidStr,\n                ' to ', msgSuidStr);\n      consumer.spoolerUniqueId = messageSuid;\n    } else if ((consumer.spoolerUniqueId === undefined\n        || RgmidFactory.INVALID_SUID.eq(consumer.spoolerUniqueId))\n        && !RgmidFactory.INVALID_SUID.eq(messageSuid)) {\n      // clear the message spooler unique id on flows without initial spooler\n      // unique id as rmid is not supported\n      message._setSpoolerUniqueId(RgmidFactory.INVALID_SUID);\n    }\n\n    const transportAcks = this._transportAcks;\n    const ackResult = transportAcks.tryReceive(messageID,\n                                               message.getGuaranteedPreviousMessageId());\n    const transportAckRequired = transportAcks.acksPending > this.maxPendingAcks;\n    switch (ackResult) {\n      case TransportAckResult.OK:\n        break; // carry on\n      case TransportAckResult.DUPLICATE:\n        consumer.incStat(StatType.RX_DISCARD_DUPLICATE);\n        // Two options here: could check membership in the ringbuffer,\n        // or could check whether the ID is less than ringbuffer.front().\n        // Untested assumption: arithmetic comparison on boxed Long at front()\n        // is more computationally expensive than native Map() lookup.\n        if (!this._applicationAcks.has(messageID) &&\n            !this._oldUnacked.has(idstr)) {\n          LOG_TRACE('Will application ack unknown duplicate ID', idstr);\n          const dupAckRanges = new Map();\n          dupAckRanges.set(MessageOutcome.ACCEPTED, [[messageID, messageID]]);\n          this._sendAck(dupAckRanges); // send ack for duplicates as ACCEPTED outcome (broker would use previous settlement outcome for message)\n        } else if (transportAckRequired) {\n          this._sendAcks(transportAckRequired);\n        } else {\n          // if we are receiving dups we should make sure we send\n          // and ack in case we don't receive any non duplicates\n          // and we don't receive enough duplicates to exceed\n          // maxPendingAcks.  Eventually we would but only after\n          // the  router retransmitted many times.\n          this._setTransportAckTimer();\n        }\n        return false;\n      case TransportAckResult.OUT_OF_ORDER:\n        consumer.incStat(StatType.RX_DISCARD_OUT_OF_ORDER);\n        return false;\n      default:\n        assert(false, 'Unhandled transport ack result', ackResult);\n        return false;\n    }\n\n    return this._applicationAcks.insert(messageID, (evicting) => {\n      let applicationAckRequired = false;\n      if (evicting) {\n        switch (evicting.state) {\n          case ApplicationAckState.UNACKED:\n            this._oldUnacked.add(evicting.key);\n            break;\n          case ApplicationAckState.ACKED_NOT_SENT:\n            applicationAckRequired = true;\n            break;\n          case ApplicationAckState.ACKED_SENT:\n            // OK to evict\n            break;\n          default:\n            assert(false,\n                   'Unhandled application ack state',\n                   ApplicationAckState.describe(evicting.state));\n        }\n      }\n\n      this._midDispatch = true;\n      this._messageDispatch.push(message);\n      this._midDispatch = false;\n\n      if (transportAckRequired || applicationAckRequired) {\n        LOG_TRACE('Need to send acks:',\n                  'transport', transportAckRequired,\n                  'application', applicationAckRequired);\n        this._sendAcks(transportAckRequired);\n      } else {\n        this._setTransportAckTimer();\n      }\n\n      return true;\n    });\n  }\n\n  applicationAck(messageId, isAutoAcked = false) {\n    // internally call the applicationSettle(messageId, MessageOutcome.ACCEPTED); \n    // since the implementations are the same\n    this.applicationSettle(messageId, MessageOutcome.ACCEPTED, isAutoAcked);\n  }\n\n  applicationSettle(messageId, messageOutcome = MessageOutcome.ACCEPTED, isAutoAcked = false) {\n    const { LOG_TRACE } = this.logger;\n\n    const idstr = messageId.toString();\n\n    // increment the correct stat for the outcome\n    switch(messageOutcome) {\n      case MessageOutcome.FAILED:\n        LOG_TRACE('Settling the message with outcome as solace.MessageOutcome.FAILED');\n        // count persistent and non-persistent settled failed msgs\n        this._consumer.incStat(StatType.RX_SETTLE_FAILED);\n        break;\n      // case MessageOutcome.RELEASED:\n      //   // no current support for RELEASED settlement Outcome\n      //   break;\n      case MessageOutcome.REJECTED:\n        LOG_TRACE('Settling the message with outcome as solace.MessageOutcome.REJECTED');\n        // count persistent and non-persistent settled rejected msgs\n        this._consumer.incStat(StatType.RX_SETTLE_REJECTED);\n        break;\n\n      case MessageOutcome.ACCEPTED:\n         // count persistent and non-persistent settled accepted msgs\n        LOG_TRACE('Settling the message with outcome as solace.MessageOutcome.ACCEPTED');\n        // count for manual calls on Message.acknowledge(); or Message.settle(outcome); methods\n        // so that we don't count for auto-Acks\n        if(!isAutoAcked) {\n          this._consumer.incStat(StatType.RX_SETTLE_ACCEPTED); // count persistent and non-persistent settled accepted msgs\n        }\n        // increment the Acked stat for calls to accept() and auto-acks\n        this._consumer.incStat(StatType.RX_ACKED); // count it as normal acknowledgement\n        break;\n    }\n\n    // Was the message old, and demoted to _oldUnacked?\n    if (this._oldUnacked.delete(idstr)) { // True if idstr was member\n      // It was old. Ack immediatesly.\n      LOG_TRACE('Application acking old message immediately');\n      const oldAckRanges = new Map();\n      oldAckRanges.set(messageOutcome, [[messageId, messageId]]);\n      this._sendAck(oldAckRanges); // send settlement outcome for message\n      return;\n    }\n\n    // We can't regress the ack_state this way; message.acknowledge() throws if called\n    // more than once.\n    this._applicationAcks.updateAckState(messageId, ApplicationAckState.ACKED_NOT_SENT, messageOutcome);\n    // if the message outcome is not ACCEPTED, then flush the buffer immediately\n    if(messageOutcome !== MessageOutcome.ACCEPTED) {\n      this._sendAcks(true); // send the accumulated Ack(s) and Nacks immediately\n    } else {\n      this._setTransportAckTimer();\n    }\n  }\n\n  getDestination() {\n    this._endpointEnsure();\n    return this._destination;\n  }\n\n  isDisconnected() {\n    if (!this.getCurrentState()) return true;\n    return (\n      this.getActiveState(ConsumerStateNames.UNBOUND) ||\n      this.getActiveState(ConsumerStateNames.UNBOUND_AWAITING_FLOWOPEN)\n    );\n  }\n\n  requestStartDispatchUser() {\n    this._userDispatch = true;\n    this.applyStartDispatch();\n  }\n\n  requestStartDispatchFSM() {\n    this._fsmDispatch = true;\n    this.applyStartDispatch();\n  }\n\n  applyStartDispatch() {\n    if (this._userDispatch && this._fsmDispatch) {\n      this.log(`Starting message dispatch (fsm ${this._fsmDispatch}, user ${this._userDispatch})`);\n      this._messageDispatch.start();\n      this._localMaxWindowSize = this._localPreferredWindowSize;\n      this._sendAcks(true);\n    } else {\n      this.log(`Not starting message dispatch (fsm ${this._fsmDispatch}, user ${this._userDispatch})`);\n    }\n  }\n\n  transitionToUnbound(eventName, error) {\n    const consumer = this._consumer;\n    const { LOG_TRACE } = this.logger;\n\n    LOG_TRACE('Flow down, user disconnected?', consumer.userDisconnected);\n\n    this._clearPartitionGroupId(); // clear the partitionGroupId\n\n    return this.transitionTo(this.Unbound.AwaitFlowOpen, () =>\n      this._addEventToEmit(eventName, error));\n  }\n\n  transitionToUnboundFromUp(properties, eventName, error) {\n    const consumer = this._consumer;\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Choice point for FLOW_UNBOUND in FlowUp state.');\n    // Always clear duplicate filter state on \"Replay started\"\n    // (no way to maintain it and drop the replayed messages as duplicates)\n    if (error && error instanceof OperationError && error.subcode) {\n      if (error.subcode === ErrorSubcode.REPLAY_STARTED) {\n        // \"this\" is the fsm.\n        this._transportAcks.reset();\n        this._applicationAcks.reset();\n      }\n    }\n\n    this._clearPartitionGroupId(); // clear the partitionGroupId\n\n    if (consumer.endpointErrorId &&\n      this._sessionInterface.isCapable(CapabilityType.MESSAGE_REPLAY)) {\n      LOG_TRACE(`Acking unsolicited unbind with endpointErrorId ${consumer.endpointErrorId}`);\n      const unbindAck = SMFLib.AdProtocolMessage.getUnbindAck(consumer._flowId,\n                                                              consumer.endpointErrorId,\n                                                              this._transportAcks.lastAcked);\n      this._sessionInterface.sendControl(unbindAck); // Must succeed or throw\n    }\n    if (properties.reconnectAttempts === -1 || properties.reconnectAttempts > 0) {\n      if (error && error instanceof OperationError && error.subcode) {\n        if (error.subcode === ErrorSubcode.REPLAY_STARTED ||\n          error.subcode === ErrorSubcode.GM_UNAVAILABLE) {\n          LOG_TRACE(`Saving errorCausingReconnect: ${error}`);\n          this._errorCausingReconnect = error;\n          // Reconnecting state emits the RECONNECTING event.\n          return this.transitionTo(this.Reconnecting);\n        }\n      }\n    } //else: flow reconnect feature disabled, or not applicable.\n    return this.transitionTo(this.Unbound.AwaitFlowOpen, () =>\n      this._addEventToEmit(eventName, error));\n  }\n\n  requestStopDispatchUser() {\n    this._userDispatch = false;\n    this.log(`Stop dispatch user (fsm ${this._fsmDispatch}, user ${this._userDispatch})`);\n    this._messageDispatch.stop();\n  }\n\n  requestStopDispatchFSM() {\n    this._fsmDispatch = false;\n    this.log(`Stop dispatch FSM (fsm ${this._fsmDispatch}, user ${this._userDispatch})`);\n    this._sendAcks(true);\n  }\n\n  _clearTransportAckTimer() {\n    if (!this._transportAckTimer) return;\n\n    clearTimeout(this._transportAckTimer);\n    this._transportAckTimer = null;\n  }\n\n  _dispose() {\n    this._clearTransportAckTimer();\n    this._endpointClear();\n    this._destination = undefined;\n    this._unacked = null;\n    this._messageDispatch = null;\n    this._transportAcks = null;\n    this._consumer = null;\n    this._sessionInterface = null;\n  }\n\n  _endpointClear() {\n    this._endpoint = undefined;\n    this._subscription = undefined;\n  }\n\n  _endpointEnsure() {\n    if (this._endpoint) {\n      // The endpoint, destination and any possible topic subscription are generated\n      // at the same time. Use the presence of the endpoint to determine whether\n      // any of this has already been done.\n      return;\n    }\n\n    const sessionInterface = this._sessionInterface;\n    const properties = this._consumer._properties;\n    const { queueDescriptor } = properties;\n\n    let destination;\n    let endpoint;\n    let subscription;\n    if (queueDescriptor.type === QueueType.QUEUE) {\n      // The publish destination needs a prefix. Create a destination from\n      // the descriptor, then derive the endpoint name from that.\n      destination = sessionInterface.createDestinationFromDescriptor(queueDescriptor);\n\n      // The bind target is the queue name encoded as though a topic -- no prefix\n      // Use the offset information to build a bind target\n      endpoint = new Queue({\n        name:   destination.name,\n        type:   DestinationType.QUEUE,\n        offset: 0,\n        bytes:  destination.bytes.substr(destination.offset),\n      });\n\n      subscription = undefined;\n    } else {\n      // QueueType.TOPIC_ENDPOINT\n      endpoint = queueDescriptor.name\n        ? sessionInterface.createDestinationFromDescriptor(queueDescriptor)\n        : new Topic({ name: '\\0?', offset: 0, bytes: '\\0' });\n      subscription = properties.topicEndpointSubscription ||\n        sessionInterface.createTemporaryDestination(DestinationType.TOPIC);\n      destination = subscription;\n    }\n\n    // Using Object.assign to enforce the invariant that these three properties are set together\n    // or not at all.\n    Object.assign(this, {\n      _destination:  destination,\n      _endpoint:     endpoint,\n      _subscription: subscription,\n    });\n\n    // Update the properties object (if TTMP, we may modify it again)\n    properties.queueDescriptor = new QueueDescriptor({\n      name:    endpoint.name,\n      type:    queueDescriptor.type,\n      durable: queueDescriptor.durable,\n    });\n  }\n\n  _resetLocalConnectionState() {\n    Object.assign(this, {\n      _remoteWindowSize: 0,\n      _active:           undefined,\n      _fsmDispatch:      false,\n      _userDispatch:     true, // User flow is initially started\n    });\n  }\n\n  _clearPartitionGroupId() {\n    const { LOG_TRACE } = this.logger;\n\n    LOG_TRACE('Clear the consumer.partitionGroupId; Set it to undefined');\n    this._consumer.partitionGroupId = undefined;\n  }\n\n  _resetRemoteConnectionState() {\n    const { LOG_TRACE } = this.logger;\n\n    LOG_TRACE('Initializing transport acks');\n    this._transportAcks = new TransportAcks();\n\n    LOG_TRACE('Initializing application acks');\n    this._applicationAcks = new ApplicationAckRingBuffer(RING_BUFFER_SIZE);\n    this._oldUnacked = new Set();\n\n    LOG_TRACE('Initializing endpointErrorId');\n    this._consumer.endpointErrorId = undefined;\n\n    LOG_TRACE('Initializing partitionGroupId');\n    this._consumer.partitionGroupId = undefined;\n  }\n\n  /**\n   * Sends a single ack.\n   *\n   * @param {Map.<Array.<ackpair>>} applicationAcks The application ack ranges to send\n   * @memberof ConsumerFSM\n   * @private\n   */\n  _sendAck(applicationAcks) {\n    const transportAck = SMFLib.AdProtocolMessage.getAck(\n      this._consumer.flowId,\n      this._transportAcks.lastReceived,\n      this.windowSize,\n      applicationAcks);\n    this._sessionInterface.sendControl(transportAck); // Must succeed or throw\n  }\n\n  /**\n   * Adds the current ack ranges to an accumulator. Call this for each applicationAck.\n   * When a range ends (we receive an unacked), or we are explictly flushing\n   * (applicationAck === null), we convert the accumulator to acks, send them, update state,\n   * and reset accumulators.\n   *\n   * This should be called at least once with the last invocation having ackRange = null.\n   * This invokes the flush path, which is necessary if any ranges were in progress,\n   * and this is the only path that repects the forceTransportAck flag.\n   *\n   * @param {Object} acksPendingState State associated with this activity\n   * @param {ApplicationAck} applicationAck The ack to process for ack ranges.\n   *    If `null`, any pending acks are flushed and a transport ack is sent, if\n   *    required.\n   * @private\n   */\n  _addAckToRanges(acksPendingState, applicationAck = null) {\n    // they will hold an Array of Arrays for each supported settlement outcomes (i.e. indexes -> 0,1,2,3)\n    const currentRange = acksPendingState.currentRange;\n    const ackRanges = acksPendingState.ackRanges;\n\n    // All message settlement outcomes\n    const allMessageOutcomes = MessageOutcome.values;\n\n    const currentRangeLength = currentRange.length;\n    if (applicationAck && applicationAck.state !== ApplicationAckState.UNACKED) {\n      // check for the type of settlement outcome and push if same as aggregation group\n      if(\n        currentRangeLength === 0 ||\n        ((currentRangeLength > 0)\n        && currentRange[currentRangeLength - 1].settlementOutcome === applicationAck.settlementOutcome)\n      ) {\n        currentRange.push(applicationAck);\n        return; // Wait for end of range or flush\n      }\n      // if settlement outcomes were flushed and applicationAck still remaining, start another aggregation group\n      else if(\n        ((currentRangeLength > 0)\n        && currentRange[currentRangeLength - 1].settlementOutcome !== applicationAck.settlementOutcome)\n      ) {\n        const rangeOutcome = currentRange[currentRangeLength - 1].settlementOutcome;\n        ackRanges[rangeOutcome].push(currentRange); // flush the range since we detect a change in outcomes\n\n        acksPendingState.currentRange = []; // Clear the accumulators for this range.\n        acksPendingState.currentRange.push(applicationAck); // push the detected change\n        return; // Wait for end of range or flush\n      }\n    }\n\n    // We received an UNACKED or a null ack (flush). Complete this range for each of the settlement outcomes.\n    if (currentRangeLength) {\n      const rangeOutcome = currentRange[currentRangeLength - 1].settlementOutcome;\n      ackRanges[rangeOutcome].push(currentRange);\n    }\n\n    // If we're flushing or we've hit the protocol limit for ranges in a single ack,\n    // we send ack messages, update ack states and clear the accumulator.\n    // This condition will be true at least once (must flush at the end).\n\n    // aggregate the total length of the ack/nack ranges\n    let totalRangeLen  = 0;\n    for(let i = 0; i < allMessageOutcomes.length; i ++) {\n      totalRangeLen += ackRanges[allMessageOutcomes[i]].length;\n    }\n\n    if (applicationAck === null || (totalRangeLen === SMFLib.AdProtocolMessage.MAX_CLIENT_ACK_RANGES)) {\n      // Reduce each range for each of the settlement outcomes to a first and last ID.\n      const bareRanges = new Map(); // ackRanges.map(range => [range[0].id, range[range.length - 1].id]);\n      let hasAnyBareRanges = false;\n\n      for(let i = 0; i < allMessageOutcomes.length; i ++) {\n        // check for value and only put real values into map\n        if(ackRanges[allMessageOutcomes[i]].length > 0) {\n          bareRanges.set(allMessageOutcomes[i], ackRanges[allMessageOutcomes[i]].map(\n            range => [range[0].id, range[range.length - 1].id]\n          ));\n          // we have written at least one outcome ack/nack range into the map\n          hasAnyBareRanges = true;\n        }\n      }\n\n      if (hasAnyBareRanges || acksPendingState.forceTransportAck) {\n        // We send the ranges. This could throw.\n        const { LOG_TRACE } = this.logger;\n\n        this._sendAck(bareRanges); // now contains a Map of Arrays to pass settlement outcomes to Broker\n\n        // expectation is only ONE NACK before we flush the (N)acks in the RingBuffer to the broker\n        const failedBareRanges = bareRanges.get(MessageOutcome.FAILED);\n        const rejectedBareRanges = bareRanges.get(MessageOutcome.REJECTED);\n\n        // Warning: this log statement reduces debug performance by about 25%!\n        LOG_TRACE(\n          'Sent ack: ',\n          `Transport ack: ${this._transportAcks.lastReceived}`,\n          `Application acks(ACCEPTED): ${bareRanges.has(MessageOutcome.ACCEPTED)\n            ? bareRanges.get(MessageOutcome.ACCEPTED).map(g => `[${g[0]}..${g[1]}]`)\n            : '[]'}\\n`,\n          `Application Nacks(FAILED): ${bareRanges.has(MessageOutcome.FAILED)\n            ? `[${failedBareRanges[0][0]}..${failedBareRanges[0][1]}]`\n            : '[]'}\\n`,\n          `Application Nacks(REJECTED): ${bareRanges.has(MessageOutcome.REJECTED)\n            ? `[${rejectedBareRanges[0][0]}..${rejectedBareRanges[0][1]}]`\n            : '[]'}`\n        );\n        // If the intent was to force a transport ack, that condition is fulfilled.\n        this._transportAcks.setAcked();\n        acksPendingState.forceTransportAck = false;\n      }\n\n      // Since the range send succeeded, update the ack states.\n      for(let i = 0; i < allMessageOutcomes.length; i ++) {\n        ackRanges[allMessageOutcomes[i]].forEach((ackRange) => {\n          ackRange.forEach((ack) => {\n            if (ack.state !== ApplicationAckState.ACKED_SENT) {\n              try {\n                this._applicationAcks.updateAckState(ack.id,\n                                                     ApplicationAckState.ACKED_SENT);\n              } catch (e) {\n                const { LOG_ERROR } = this.logger;\n                LOG_ERROR(`Marking ack ${ack.id} as sent failed: ${e}`);\n              }\n            }\n          });\n        });\n      }\n\n      // Clear the main accumulators since it has hit the wire.\n      acksPendingState.ackRanges = [];\n      for(let i = 0; i < allMessageOutcomes.length; i ++) {\n        acksPendingState.ackRanges[allMessageOutcomes[i]] = [];\n      }\n    }\n    // Clear the accumulators for this range.\n    acksPendingState.currentRange = [];\n  }\n\n  /**\n   * Sends acknowledgements, along with a window update for this flow.\n   *\n   * @param {Boolean} forceTransportAck `true` sends transport ack even if no acks pending\n   * @private\n   */\n  _sendAcks(forceTransportAck = false) {\n    this._clearTransportAckTimer();\n\n    const applicationAcks = this._applicationAcks;\n    const transportAcks = this._transportAcks;\n    // All message settlement outcomes\n    const allMessageOutcomes = MessageOutcome.values;\n\n    // This state is temporary and shared with the ack generating function.\n    const acksPendingState = {\n      forceTransportAck: forceTransportAck || (transportAcks.acksPending > 0),\n      ackRanges:         [], // holds an Array of Arrays for each supported settlement outcomes (i.e. indexes -> 0,1,2,3)\n      currentRange:      [], // holds an Array for each supported settlement outcomes per aggregation (i.e. indexes -> 0,1,2,3)\n    };\n\n    // initialize the ackRanges with Array of Arrays\n    for(let i = 0; i < allMessageOutcomes.length; i ++) {\n      acksPendingState.ackRanges[allMessageOutcomes[i]] = [];\n    }\n\n    // If the first ringbuffer ack state is acked and there are no unacked before this,\n    // we can create an ack range that includes zero.\n    // If the first ringbuffer ack state is unacked, we can say nothing about the\n    // range before the first acked ID in the ringbuffer.\n    const front = this._applicationAcks.front();\n    if (this._oldUnacked.size === 0 && front && front.state !== ApplicationAckState.UNACKED) {\n      // State is acked_sent so we don't try to update the ring buffer.\n      this._addAckToRanges(acksPendingState, ZERO_APP_ACK);\n      // We know that front will be added to this range by the iteration.\n    }\n\n    // Build ack ranges using the accumulator\n    applicationAcks.forEach(ack => this._addAckToRanges(acksPendingState, ack));\n    // Flush the last pending ack range.\n    this._addAckToRanges(acksPendingState);\n\n    // On successful exit, we've sent and cleared all accumulators, and we've sent\n    // a transport ack if we were supposed to do that.\n    assert(acksPendingState.forceTransportAck === false);\n    assert(acksPendingState.currentRange.length === 0);\n    for(let i = 0; i < allMessageOutcomes.length; i ++) {\n      assert(acksPendingState.ackRanges[allMessageOutcomes[i]].length === 0);\n    }\n  }\n\n  _setTransportAckTimer() {\n    if (this._transportAckTimer) return;\n    if (this._consumer.disposed) return;\n    this._transportAckTimer = setTimeout(\n      () => this._sendAcks(true),\n      this._acknowledgeTimeoutInMsecs\n    );\n  }\n\n  get maxWindowSize() {\n    return Math.min(this._localMaxWindowSize,\n                    this._remoteWindowSize || Number.POSITIVE_INFINITY);\n  }\n\n  get windowSize() {\n    return this.maxWindowSize - this._messageDispatch.length;\n  }\n\n  get maxPendingAcks() {\n    return this.windowSize * this._acknowledgeThreshold / 100.0;\n  }\n\n  get hasAutoAckSupport() {\n    return this._hasAutoAckSupport;\n  }\n\n}\n\nmodule.exports.ConsumerFSM = ConsumerFSM;\n","const { Enum } = require('solclient-eskit');\n\nconst ConsumerStateNames = {\n  UNBOUND:                       'UNBOUND',\n  UNBOUND_AWAIT_SESSION_UP:      'UNBOUND_AWAIT_SESSION_UP',\n  UNBOUND_AWAIT_FLOWOPEN:        'UNBOUND_AWAIT_FLOWOPEN',\n  UNBOUND_AWAIT_ANY:             'UNBOUND_AWAIT_ANY',\n  BIND_SENT:                     'BIND_SENT',\n  FLOW_UP:                       'FLOW_UP',\n  FLOW_UP_XFER:                  'FLOW_UP_XFER',\n  FLOW_UP_XFER_INACTIVE:         'FLOW_UP_XFER_INACTIVE',\n  UNBIND_SENT:                   'UNBIND_SENT',\n  RECONNECTING:                  'RECONNECTING',\n  RECONNECTING_BIND_SENT:        'RECONNECTING_BIND_SENT',\n  RECONNECTING_AWAIT_SESSION_UP: 'RECONNECTING_AWAIT_SESSION_UP',\n  RECONNECTING_AWAIT_TIMER:      'RECONNECTING_AWAIT_TIMER',\n  CREATE_SENT:                   'CREATE_SENT',\n};\n\nmodule.exports.ConsumerStateNames = Enum.new(ConsumerStateNames);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * An enumeration of consumer acknowledgement modes. The corresponding\n * MessageConsumer property {@link solace.MessageConsumerProperties#acknowledgeMode}\n * configures how acknowledgments are generated for received Guaranteed messages.\n *\n * When received messages are acknowledged they are removed from the Guaranteed\n * Message storage on the Solace Message Router. Message Consumer acknowledgements,\n * <b>only</b> remove messages from the Solace Message Router.\n *\n * In particular, withholding Message Consumer Acknowledgemnts does not stop\n * message delivery. For Message Consumer flow control see\n * {@link solace.MessageConsumer.stop}/{@link solace.MessageConsumer.start}. Message Consumer\n * flow control may also be imlpemented by removing the\n * {@link solace.MessageConsumerEventName#event:MESSAGE} listener.\n *\n * @memberof solace\n * @enum {string}\n * @namespace\n */\nconst MessageConsumerAcknowledgeMode = {\n  /**\n   * The API automatically acknowledges any message that was delivered to all\n   * {@link solace.MessageConsumerEventName#event:MESSAGE} listeners with no exception thrown\n   * on any of them.\n   */\n  AUTO:   'AUTO',\n  /**\n   * The API acknowledges a message only when the application calls\n   * {@link solace.Message#acknowledge}.\n   */\n  CLIENT: 'CLIENT',\n};\n\nmodule.exports.MessageConsumerAcknowledgeMode = Enum.new(MessageConsumerAcknowledgeMode);\n","const { Enum } = require('solclient-eskit');\n/**\n * An enumeration of message consumer event names. A {@link solace.MessageConsumer} will emit\n * these events as part of its lifecycle.  Applications, having created a MessageConsumer can\n * choose to listen to all of the events described here, or any subset of these events. For Example:\n * <pre>\n *   <code>\n *     mc = solace.Session.createMessageConsumer(...);\n *     mc.on(solace.MessageConsumerEventName.CONNECT_FAILED_ERROR,\n *           function connectFailedErrorEventCb(error) {\n *             // error can be used as an OperationError object\n *           });\n *   </code>\n * </pre>\n *\n * @memberof solace\n * @enum {string}\n * @namespace\n */\nconst MessageConsumerEventName = {\n  /**\n   * The message consumer is established.\n   * @event solace.MessageConsumerEventName#UP\n   */\n  UP:                   'MessageConsumerEventName_up',\n  /**\n   * The message consumer is successfully disconnected.\n   * The message consumer is disabled.\n   *\n   * @event solace.MessageConsumerEventName#DOWN\n   */\n  DOWN:                 'MessageConsumerEventName_down',\n /**\n   * The message consumer has become active.\n   *\n   * @event solace.MessageConsumerEventName#ACTIVE\n   */\n  ACTIVE:               'MessageConsumerEventName_active',\n  /**\n   * The message consumer has become inactive.\n   *\n   * @event solace.MessageConsumerEventName#INACTIVE\n   */\n  INACTIVE:             'MessageConsumerEventName_inactive',\n  /**\n   * The message consumer was established and then disconnected by the router,\n   * likely due to operator intervention. The message consumer is disabled.\n   *\n   * @event solace.MessageConsumerEventName#DOWN_ERROR\n   * @param {solace.OperationError} error Details of the error.\n   */\n  DOWN_ERROR:           'MessageConsumerEventName_downError',\n  /**\n   * The message consumer was established and then disconnected by the router,\n   * likely due to operator intervention, but flow auto reconnect is active.\n   * The message consumer is disabled, but actively reconnecting.\n   * Expect a RECONNECTED or DOWN_ERROR on success of failure. respectively.\n   * See also MessageConsumerProperties.reconnectAttempts and reconnectIntervalInMsecs.\n   *\n   * @event solace.MessageConsumerEventName#RECONNECTING\n   * @param {solace.OperationError} error Details of the error that triggered the reconnect.\n   */\n  RECONNECTING:         'MessageConsumerEventName_reconnecting',\n  /**\n   * The message consumer successfully auto-reconnected.\n   *\n   * @event solace.MessageConsumerEventName#RECONNECTED\n   */\n  RECONNECTED:          'MessageConsumerEventName_reconnected',\n  /**\n   * The message consumer attempted to connect but was unsuccessful.\n   * The message consumer is disabled.\n   *\n   * @event solace.MessageConsumerEventName#CONNECT_FAILED_ERROR\n   * @param {solace.OperationError} error Details of the error.\n   */\n  CONNECT_FAILED_ERROR: 'MessageConsumerEventName_connectFailedError',\n  /**\n   * The message consumer will not connect because the current session is incompatible\n   * with Guaranteed Messaging. The message consumer is disabled until a compatible session\n   * is available.\n   *\n   * @event solace.MessageConsumerEventName#GM_DISABLED\n   */\n  GM_DISABLED:          'MessageConsumerEventName_GMDisabled',\n  /**\n   * The message consumer is being disposed. No further events will be emitted.\n   *\n   * @event solace.MessageConsumerEventName#DISPOSED\n   */\n  DISPOSED:             'MessageConsumerEventName_disposed',\n  /**\n   * A message was received on the message consumer.\n   *\n   * If the application throws an exception in this listener, and the consumer was configured\n   * to automatically acknowledge messages\n   * (see {@link solace.MessageConsumerProperties#acknowledgeMode}),\n   * the API will not acknowledge the message, since it\n   * may not have been successfully processed by the application. Such a message must be\n   * acknowledged manually. If the application did not retain a reference to the message, it\n   * may be redelivered by calling {@link solace.MessageConsumer#disconnect} followed by\n   * {@link solace.MessageConsumer#connect} depending on the configuration of the queue.\n   *\n   * When there is no listener for <i>MESSAGE</i> on a MessageConsumer, messages are queued\n   * internally until a listener is added.\n   *\n   * @event solace.MessageConsumerEventName#MESSAGE\n   * @param {solace.Message} message The received message being delivered in this event.\n   */\n  MESSAGE:              'MessageConsumerEventName_message',\n  /**\n   * The subscribe or unsubscribe operation succeeded on the queue.\n   * @event solace.MessageConsumerEventName#SUBSCRIPTION_OK\n   * @param {solace.MessageConsumerEvent} event The details related\n   * to the successful subscription update.\n   */\n  SUBSCRIPTION_OK:      'MessageConsumerEventName_ok',\n  /**\n   * The Solace Message Router rejected a queue subscription (add or remove).\n   * @event solace.MessageConsumerEventName#SUBSCRIPTION_ERROR\n   * @param {solace.MessageConsumerEvent} error The details related\n   * to the failed subscription update.\n   */\n  SUBSCRIPTION_ERROR:   'MessageConsumerEventName_error',\n\n};\n\nmodule.exports.MessageConsumerEventName = Enum.new(MessageConsumerEventName);\n","const { ErrorSubcode } = require('solclient-error');\n\n\n/**\n * Message consumer event objects. A {@link solace.MessageConsumer} will emit\n * these events related to queue subscription management:\n * MessageConsumerEventName.SUBSCRIPTION_OK and\n * MessageConsumerEventName.SUBSCRIPTION_ERROR.\n *\n * Similar to SessionEvent.\n * Also compatible with RequestError.\n *\n * @memberof solace\n */\nclass MessageConsumerEvent {\n  /**\n   * @constructor\n   * @param {String} messageConsumerEventName one of the MessageConsumerEventNames.\n   * @param {String} infoStr Information string\n   * @param {Number} [responseCode] Any associated router response code\n   * @param {solace.ErrorSubcode} [errorSubcode] Any associated error subcode\n   * @param {Object|String|null|undefined} [correlationKey] Any associated correlation key\n   * @param {String} [reason] Any additional information\n   * @private\n   */\n  constructor(\n    messageConsumerEventName,\n    infoStr,\n    responseCode = undefined,\n    errorSubcode = 0,\n    correlationKey = undefined,\n    reason = undefined) {\n    this._messageConsumerEventName = messageConsumerEventName;\n    this._infoStr = infoStr;\n    this._responseCode = responseCode;\n    this._errorSubcode = errorSubcode;\n    this._correlationKey = correlationKey; // optional\n    this._reason = reason; // optional\n  }\n\n  /**\n   * @type {String}\n   * @description the appropriate MessageConsumerEventName\n   *\n   *   MessageConsumerEventName.SUBSCRIPTION_OK or\n   *   MessageConsumerEventName.SUBSCRIPTION_ERROR.\n   */\n  get messageConsumerEventName() {\n    return this._messageConsumerEventName;\n  }\n\n  /**\n   * @type {String}\n   * @description the appropriate MessageConsumerEventName\n   *\n   *   MessageConsumerEventName.SUBSCRIPTION_OK or\n   *   MessageConsumerEventName.SUBSCRIPTION_ERROR.\n   */\n  get name() {\n    return this._messageConsumerEventName;\n  }\n\n  /**\n   * @type {String}\n   * @description if applicable, an information string returned by the Solace Message Router.\n   */\n  get infoStr() {\n    return this._infoStr;\n  }\n\n  /**\n   * @type {?Number}\n   * @description if applicable, a response code returned by the Solace Message Router.\n   */\n  get responseCode() {\n    return this._responseCode;\n  }\n\n  /**\n   * @type {?solace.ErrorSubcode}\n   * @description if applicable, an error subcode. Defined in {@link solace.ErrorSubcode}\n   * same as subcode.\n   */\n  get errorSubcode() {\n    return this._errorSubcode;\n  }\n\n  /**\n   * @type {?solace.ErrorSubcode}\n   * @description if applicable, an error subcode. Defined in {@link solace.ErrorSubcode}\n   * Same as errorSubcode.\n   */\n  get subcode() {\n    return this._errorSubcode;\n  }\n\n  /**\n   * @type {?Object}\n   * @description A user-specified object\n   * made available in the response or confirmation event by including it as a\n   * parameter in the orignal API call.  If the user did not specify a\n   * correlationKey, it will be <code>null</code>.\n   * @default null\n   */\n  get correlationKey() {\n    return this._correlationKey;\n  }\n\n  /**\n   * @type {?String}\n   * @description Additional information if it is applicable.\n   *\n   * In case of subscribe or publish events, it constains the topic.\n   */\n  get reason() {\n    return this._reason;\n  }\n  /**\n   * @param {Object} value The reason info object\n   * @internal\n   */\n  set reason(value) {\n    this._reason = value;\n  }\n\n  /**\n   * @type {?solace.SessionEventCode}\n   * @description Only here for compatibility with the RequestError exception class.\n   * Always returns undefined for a MessageConsumerEvent.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  get requestEventCode() {\n    return undefined;\n  }\n\n  [util_inspect_custom]() {\n    return {\n      'messageConsumerEventName': this.messageConsumerEventName,\n      'infoStr':                  this.infoStr,\n      'responseCode':             this.responseCode,\n      'errorSubcode':             ErrorSubcode.describe(this.errorSubcode),\n      'correlationKey':           this.correlationKey ? this.correlationKey.toString() : null,\n      'reason':                   this.reason ? this.reason : null,\n    };\n  }\n\n  toString() {\n    return util_inspect(this);\n  }\n}\n\nmodule.exports.MessageConsumerEvent = MessageConsumerEvent;\n","const {\n  AbstractQueueDescriptor,\n  QueueDescriptor,\n  QueueDescriptorValidator,\n  QueueProperties,\n  QueuePropertiesValidator,\n  QueueType,\n} = require('solclient-queue');\nconst { APIPropertiesValidators } = require('solclient-util');\nconst { Check } = require('solclient-validate');\nconst { MessageConsumerAcknowledgeMode } = require('./message-consumer-acknowledge-modes');\nconst { OperationError, ErrorSubcode } = require('solclient-error');\nconst { ReplayStartLocation } = require('solclient-replaystart');\n\nconst {\n  validateInstance,\n  valBoolean,\n  valInstance,\n  valIsMember,\n  valNumber,\n  valRange,\n  valTopicStringOrEmpty,\n} = APIPropertiesValidators;\n\nfunction valTopicEndpointSubscription(typeDesc, instance) {\n  if (instance.queueDescriptor.getType() === QueueType.TOPIC_ENDPOINT) {\n    if (instance.queueDescriptor.isDurable() && !instance.createIfMissing) {\n      if (!instance.topicEndpointSubscription) {\n        throw new OperationError('topicEndpointSubscription must be set when queueDescriptor ' +\n                                'refers to a durable topic endpoint and not allowed to create.',\n                                ErrorSubcode.PARAMETER_CONFLICT);\n      }\n    }\n  } else if (instance.topicEndpointSubscription) {\n    // is QueueType.QUEUE\n    throw new OperationError('topicEndpointSubscription is set, but queueDescriptor ' +\n                              'refers to a queue that is not of type QueueType.TOPIC_ENDPOINT',\n                              ErrorSubcode.PARAMETER_CONFLICT);\n  }\n}\n\nconst MessageConsumerPropertiesValidator = {\n  validate(prefix, instance, rawProperties) {\n    if (Object.prototype.hasOwnProperty.call(rawProperties, 'transportAcknowledgeTimeoutInMsecs') &&\n        Object.prototype.hasOwnProperty.call(rawProperties, 'acknowledgeTimeoutInMsecs')) {\n      throw new OperationError(`${prefix} validation: transportAcknowledgeTimeoutInMsecs and acknowledgeTimeoutInMsecs are mutually exclusive`,\n                                ErrorSubcode.PARAMETER_CONFLICT);\n    }\n\n    if (Object.prototype.hasOwnProperty.call(rawProperties, 'transportAcknowledgeThresholdPercentage') &&\n        Object.prototype.hasOwnProperty.call(rawProperties, 'acknowledgeThreshold')) {\n      throw new OperationError(`${prefix} validation: transportAcknowledgeThresholdPercentage and acknowledgeThreshold are mutually exclusive`,\n          ErrorSubcode.PARAMETER_CONFLICT);\n    }\n\n\n    const v = validateInstance.bind(null, prefix, instance);\n    if (!(instance.queueDescriptor instanceof AbstractQueueDescriptor ||\n          instance.queueDescriptor instanceof QueueDescriptor)) {\n      throw new OperationError(`${prefix} validation: queue descriptor must be ` +\n                                'an AbstractQueueDescriptor or a QueueDescriptor',\n                                ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n    QueueDescriptorValidator.validate(instance.queueDescriptor);\n\n    if (instance.queueProperties) {\n      if (instance.queueDescriptor.durable && !instance.createIfMissing) {\n        throw new OperationError(`${prefix} validation: queueProperties cannot be set unless ` +\n          'queueDescriptor refers to a temporary queue, or createIfMissing is set.',\n          ErrorSubcode.PARAMETER_CONFLICT);\n      }\n      v('queueProperties', [valInstance, QueueProperties, 'QueueProperties']);\n      QueuePropertiesValidator.validate(instance.queueProperties);\n      if (!instance.queueDescriptor.durable &&\n        Check.something(instance.queueProperties.accessType)) {\n        throw new OperationError(`${prefix} validation: queueProperties cannot specify accessType ` +\n                                 'in creation of a temporary queue',\n                                 ErrorSubcode.PARAMETER_CONFLICT);\n      }\n    }\n\n    // Validate TE subscription\n\n    if (instance.queueDescriptor.type === QueueType.TOPIC_ENDPOINT) {\n      // QueueType.TOPIC_ENDPOINT\n      if (instance.queueDescriptor.durable &&\n        !instance.createIfMissing &&\n        !instance.topicEndpointSubscription) {\n        throw new OperationError(`${prefix} validation: topicEndpointSubscription must be set for durable ` +\n          'topic endpoints unless creation is allowed.',\n          ErrorSubcode.PARAMETER_CONFLICT);\n      }\n    } else if (instance.topicEndpointSubscription) {\n      throw new OperationError(`${prefix} validation: topicEndpointSubscription cannot be set unless ` +\n        'descriptor.type is TOPIC_ENDPOINT',\n        ErrorSubcode.PARAMETER_CONFLICT);\n    }\n\n    v('connectTimeoutInMsecs', [valNumber], [valRange, 50, Number.MAX_VALUE]);\n    v('connectAttempts', [valNumber], [valRange, 1, Number.MAX_VALUE]);\n    v('topicEndpointSubscription', [valTopicEndpointSubscription], [valTopicStringOrEmpty]);\n\n    v('acknowledgeMode', [valIsMember, MessageConsumerAcknowledgeMode, 'MessageConsumerAcknowledgeMode']);\n    v('transportAcknowledgeTimeoutInMsecs', [valNumber], [valRange, 20, 1500]);\n    v('transportAcknowledgeThresholdPercentage', [valNumber], [valRange, 1, 75]);\n\n    v('activeIndicationEnabled', [valBoolean]);\n    v('noLocal', [valBoolean]);\n    v('windowSize', [valNumber], [valRange, 1, 255]);\n    v('reconnectIntervalInMsecs', [valNumber], [valRange, 50, Number.MAX_VALUE]);\n\n    if (instance.activeIndicationEnabled &&\n      instance.queueDescriptor.type !== QueueType.QUEUE) {\n      throw new OperationError(\n        `${prefix} validation: activeIndicationEnabled may only be true for ` +\n        'QUEUE destinations',\n        ErrorSubcode.PARAMETER_CONFLICT\n      );\n    }\n    if (instance.replayStartLocation &&\n      !(instance.replayStartLocation instanceof ReplayStartLocation)) {\n      throw new OperationError(`${prefix} validation: replayStartLocation must be ` +\n        'an instance of ReplayStartLocation',\n        ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n  },\n};\n\nmodule.exports.MessageConsumerPropertiesValidator = MessageConsumerPropertiesValidator;\n","const QueueLib = require('solclient-queue');\nconst { APIProperties } = require('solclient-util');\nconst { Check } = require('solclient-validate');\nconst { MessageConsumerAcknowledgeMode } = require('./message-consumer-acknowledge-modes');\nconst { Topic } = require('solclient-destination');\n\nconst DEFAULTS = {\n  queueDescriptor:                         undefined,\n  queueProperties:                         undefined,\n  connectTimeoutInMsecs:                   10000,\n  connectAttempts:                         3,\n  topicEndpointSubscription:               undefined,\n  // selector: undefined,\n  acknowledgeMode:                         MessageConsumerAcknowledgeMode.AUTO,\n  requiredSettlementOutcomes:              [], // MessageOutcome.ACCEPTED is not required to be set and always supported\n  transportAcknowledgeTimeoutInMsecs:      1000,\n  transportAcknowledgeThresholdPercentage: 60,\n  activeIndicationEnabled:                 false,\n  noLocal:                                 false,\n  windowSize:                              255,\n  _browser:                                false,\n  replayStartLocation:                     undefined,\n  reconnectAttempts:                       -1,\n  reconnectIntervalInMsecs:                3000,\n  createIfMissing:                         false,\n};\n\n/**\n * @classdesc\n * Defines the properties for a {@link solace.MessageConsumer}.\n *\n * @memberof solace\n */\nclass MessageConsumerProperties extends APIProperties {\n  constructor(options) {\n    super(DEFAULTS, options);\n  }\n\n  /**\n   * Defines the queue from which to consume.\n   *  * For durable queues and durable topic endpoints, this must be a\n   *    {@link solace.QueueDescriptor} unless\n   *    {@link solace.MessageConsumerProperties#createIfMissing} is set.\n   *  * When an {@link solace.AbstractQueueDescriptor} is used, the name is generated when\n   *    the {@link solace.MessageConsumer} is connected. The generated descriptor can be queried\n   *    from the consumer after it has successfully connected by calling\n   *    {@link solace.MessageConsumer#getProperties}.\n   * @type {solace.QueueDescriptor}\n   */\n  get queueDescriptor() {\n    return Check.something(this._queueDescriptor)\n      ? this._queueDescriptor\n      : DEFAULTS.queueDescriptor;\n  }\n  set queueDescriptor(value) {\n    if (value instanceof QueueLib.AbstractQueueDescriptor) {\n      this._queueDescriptor = value;\n    } else if (value) {\n      this._queueDescriptor = value.name\n        ? new QueueLib.QueueDescriptor(value)\n        : new QueueLib.AbstractQueueDescriptor(value);\n    } else {\n      this._queueDescriptor = value;\n    }\n  }\n\n  /**\n   * Gets the properties of the remote queue.\n   *  * For temporary queues and temporary topic endpoints,\n   *    or if {@link solace.MessageConsumerProperties#createIfMissing} is true,\n   *    these properties define the endpoint that is created.\n   *  * For durable queues, these must be unset on consumer creation\n   *    unless {@link solace.MessageConsumerProperties#createIfMissing} is set.\n   *    The values will be populated\n   *    after the queue is connected and can be retrieved by calling\n   *    {@link solace.MessageConsumer#getProperties}.\n   * @type {solace.QueueProperties|null|undefined}\n   * @default undefined\n   */\n  get queueProperties() {\n    return Check.something(this._queueProperties)\n      ? this._queueProperties\n      : DEFAULTS.queueProperties;\n  }\n  set queueProperties(value) {\n    if (value) {\n      this._queueProperties = new QueueLib.QueueProperties(value);\n    } else {\n      this._queueProperties = value;\n    }\n  }\n\n  // ------------ Properties controlling connection of the consumer ----------------\n  /**\n   * The bind timeout in milliseconds when creating a connection to the Solace Message Router.\n   *  * The valid range is >= 50.\n   * @type {Number}\n   * @default 10000\n   */\n  get connectTimeoutInMsecs() {\n    return Check.something(this._bindTimeoutInMsecs)\n      ? this._bindTimeoutInMsecs\n      : DEFAULTS.connectTimeoutInMsecs;\n  }\n  set connectTimeoutInMsecs(value) {\n    this._bindTimeoutInMsecs = value;\n  }\n\n  /**\n   * Gets and sets the maximum number of bind attempts when creating a connection to the\n   * Solace Message Router.\n   *  * The valid range is >= 1.\n   * @type {Number}\n   * @default 3\n   */\n  get connectAttempts() {\n    return Check.something(this._connectAttempts)\n      ? this._connectAttempts\n      : DEFAULTS.connectAttempts;\n  }\n  set connectAttempts(val) {\n    this._connectAttempts = val;\n  }\n\n  // ------------ Properties applied to the queue when connecting ----------------\n\n  /**\n   * This must be undefined if the type of the\n   * {@link solace.MessageConsumerProperties#queueDescriptor} is not\n   * {@link solace.QueueType.TOPIC_ENDPOINT}.\n   *\n   * If {@link solace.MessageConsumerProperties#queueDescriptor} is\n   * not durable, or {@link solace.MessageConsumerProperties#createIfMissing} is true,\n   * this may be left undefined to generate the topic endpoint's\n   * destination. When generated, the destination can be obtained from\n   * the {@link solace.MessageConsumer} after it is connected by calling\n   * {@link solace.MessageConsumer#getDestination}.\n   *\n   * @type {solace.Destination}\n   * @default undefined\n   */\n  get topicEndpointSubscription() {\n    return this._topicEndpointSubscription;\n  }\n  set topicEndpointSubscription(val) {\n    // Avoid instanceof check failing on Node 4?\n    if (typeof val === 'string') {\n      this._topicEndpointSubscription = Topic.createFromName(val);\n    } else {\n      this._topicEndpointSubscription = val;\n    }\n  }\n\n  // ----------- Properties controlling an established connection to a queue --------------\n\n  /**\n   * The Application Acknowledgement mode for the Message Consumer.\n   *\n   * When the acknowledgement mode is {@link solace.MessageConsumerAcknowledgeMode.CLIENT},\n   * a message is Application Acknowledged when the application calls\n   * {@link solace.Message#acknowledge} on that message.\n   *\n   * When the acknowledge mode is {@link solace.MessageConsumerAcknowledgeMode.AUTO}, a message is\n   * Application Acknowledged by the API after all\n   * {@link solace.MessageConsumerEventName#event:MESSAGE}\n   * listeners are called and none throw an exception. If a message handler throws, the message\n   * can still be acknowledged by calling {@link solace.Message#acknowledge}, but this would not be\n   * a recommended practice.\n   *\n   * When received messages are Application Acknowledged they are removed from the Guaranteed\n   * Message storage on the Solace Message Router. Message Consumer Application Acknowledged,\n   * <b>only</b> remove messages from the Solace Message Router.\n   *\n   * In particular, withholding Message Consumer Acknowledgemnts does not stop\n   * message delivery. For Message Consumer flow control (aka transport acknowledgemeent) see\n   * {@link solace.MessageConsumer#stop}/{@link solace.MessageConsumer#start}. Message Consumer\n   * flow control may also be imlpemented by removing the\n   * {@link solace.MessageConsumerEventName#event:MESSAGE} listener.\n   *\n   * Flow control and transport acknowledgements characteristics are defined by\n   * {@link solace.MessageConsumerProperties#transportAcknowledgeThresholdPercentage} and\n   * {@link solace.MessageConsumerProperties#transportAcknowledgeTimeoutInMsecs}\n   *\n   * @type {solace.MessageConsumerAcknowledgeMode}\n   * @default solace.MessageConsumerAcknowledgeMode.AUTO\n   */\n  get acknowledgeMode() {\n    return Check.something(this._acknowledgeMode)\n      ? this._acknowledgeMode\n      : DEFAULTS.acknowledgeMode;\n  }\n  set acknowledgeMode(value) {\n    this._acknowledgeMode = value;\n  }\n\n  /**\n   * The required settlement outcomes for the Message Consumer.\n   *\n   * A session is created with SUPPORTED_MESSAGE_ACK_CLIENT by setting\n   * the requiredSettlementOutcomes property to support negative acknowledgment outcomes.\n   *\n   * The {@link solace.MessageOutcome.ACCEPTED} outcome is not required to be set and is always\n   * supported as a settlement outcome.\n   *\n   * When the requiredSettlementOutcomes include either {@link solace.MessageOutcome.FAILED}\n   * or {@link solace.MessageOutcome.REJECTED}, a message can be settled with any of these outcomes.\n   *\n   * The {@link solace.Message#acknowledge} method internally calls the {@link solace.Message#settle}\n   * with the {@link solace.MessageOutcome.ACCEPTED} passed as the settlement outcome for that message.\n   *\n   * When received messages are Application Acknowledged/Settled with\n   * a {@link solace.MessageOutcome.ACCEPTED} outcome, they are removed from the Guaranteed\n   * Message storage on the Solace Message Router.\n   *\n   * In particular, withholding Message Consumer Acknowledgemnts does not stop\n   * message delivery. For Message Consumer flow control (aka transport acknowledgemeent) see\n   * {@link solace.MessageConsumer#stop}/{@link solace.MessageConsumer#start}. Message Consumer\n   * flow control may also be imlpemented by removing the\n   * {@link solace.MessageConsumerEventName#event:MESSAGE} listener.\n   *\n   * Flow control and transport acknowledgements characteristics are defined by\n   * {@link solace.MessageConsumerProperties#transportAcknowledgeThresholdPercentage} and\n   * {@link solace.MessageConsumerProperties#transportAcknowledgeTimeoutInMsecs}\n   *\n   * @type {Array.<solace.MessageOutcome>}\n   * @default []\n   */\n  get requiredSettlementOutcomes() {\n    return Check.something(this._requiredSettlementOutcomes)\n      && Check.array(this._requiredSettlementOutcomes)\n      ? this._requiredSettlementOutcomes\n      : DEFAULTS.requiredSettlementOutcomes;\n  }\n  set requiredSettlementOutcomes(value) {\n    this._requiredSettlementOutcomes = value;\n  }\n\n  /**\n   * The transport acknowledgement timeout for guaranteed messaging.\n   * When the {@link solace.MessageConsumerProperties#transportAcknowledgeTimeoutInMsecs}\n   * is not exceeded, acknowledgements will be returned to the router at intervals not\n   * less than this value.\n   *   * The valid range is 20 <= transportAcknowledgeTimeoutInMsecs <= 1500.\n   * @type {Number}\n   * @default 1000\n   * @deprecated\n   */\n  get acknowledgeTimeoutInMsecs() {\n    return Check.something(this._transportAcknowledgeTimeoutInMsecs)\n      ? this._transportAcknowledgeTimeoutInMsecs\n      : DEFAULTS.transportAcknowledgeTimeoutInMsecs;\n  }\n  set acknowledgeTimeoutInMsecs(val) {\n    this._transportAcknowledgeTimeoutInMsecs = val;\n  }\n\n  /**\n   * The threshold for sending an acknowledgement, as a percentage.\n   * The API sends a transport acknowledgment every\n   * N messages where N is calculated as this percentage of the transport\n   * window size if the endpoint's max-delivered-unacked-msgs-per-flow\n   * setting at bind time is greater than or equal to the transport\n   * window size. Otherwise, N is calculated as this percentage of the\n   * endpoint's max-delivered-unacked-msgs-per-flow setting at bind time.\n   * * The valid range is 1 <= transportAcknowledgeThresholdPercentage <= 75.\n   * @type {Number}\n   * @default 60\n   * @deprecated\n   */\n  get acknowledgeThreshold() {\n    return Check.something(this._transportAcknowledgeThresholdPercentage)\n      ? this._transportAcknowledgeThresholdPercentage\n      : DEFAULTS.transportAcknowledgeThresholdPercentage;\n  }\n  set acknowledgeThreshold(value) {\n    this._transportAcknowledgeThresholdPercentage = value;\n  }\n\n  /**\n   * The transport acknowledgement timeout for guaranteed messaging.\n   * When the {@link solace.MessageConsumerProperties.transportAcknowledgeTimeoutInMsecs}\n   * is not exceeded, acknowledgements will be returned to the router at intervals not less than\n   * this value.\n   *   * The valid range is 20 <= transportAcknowledgeTimeoutInMsecs <= 1500.\n   * @type {Number}\n   * @default 1000\n   */\n  get transportAcknowledgeTimeoutInMsecs() {\n    return Check.something(this._transportAcknowledgeTimeoutInMsecs)\n      ? this._transportAcknowledgeTimeoutInMsecs\n      : DEFAULTS.transportAcknowledgeTimeoutInMsecs;\n  }\n  set transportAcknowledgeTimeoutInMsecs(val) {\n    this._transportAcknowledgeTimeoutInMsecs = val;\n  }\n\n  /**\n   * The threshold for sending an acknowledgement, as a percentage.\n   * The API sends a transport acknowledgment every\n   * N messages where N is calculated as this percentage of the transport\n   * window size if the endpoint's max-delivered-unacked-msgs-per-flow\n   * setting at bind time is greater than or equal to the transport\n   * window size. Otherwise, N is calculated as this percentage of the\n   * endpoint's max-delivered-unacked-msgs-per-flow setting at bind time.\n   * * The valid range is 1 <= transportAcknowledgeThresholdPercentage <= 75.\n   * @type {Number}\n   * @default 60\n   */\n  get transportAcknowledgeThresholdPercentage() {\n    return Check.something(this._transportAcknowledgeThresholdPercentage)\n      ? this._transportAcknowledgeThresholdPercentage\n      : DEFAULTS.transportAcknowledgeThresholdPercentage;\n  }\n  set transportAcknowledgeThresholdPercentage(value) {\n    this._transportAcknowledgeThresholdPercentage = value;\n  }\n\n  /**\n   * @description When enabled, a Guaranteed Messaging Consumer requests Active and Inactive\n   * events from the router and emits them to interested listeners.\n   * @type {Boolean}\n   * @default false\n   * @see {@link solace.MessageConsumerEventName.ACTIVE}\n   * @see {@link solace.MessageConsumerEventName.INACTIVE}\n   */\n  get activeIndicationEnabled() {\n    return Check.something(this._activeIndicationEnabled)\n      ? this._activeIndicationEnabled\n      : DEFAULTS.activeIndicationEnabled;\n  }\n  set activeIndicationEnabled(newValue) {\n    this._activeIndicationEnabled = newValue;\n  }\n\n  /**\n   * When enabled, a Guaranteed Messaging Consumer does not receive messages published\n   * in the same Session, even if the endpoint contains a subscription that matches the published\n   * message.\n   * @type {Boolean}\n   * @default false\n   */\n  get noLocal() {\n    return Check.something(this._noLocal)\n      ? this._noLocal\n      : DEFAULTS.noLocal;\n  }\n  set noLocal(newValue) {\n    this._noLocal = newValue;\n  }\n\n  /**\n   * The window size for Guaranteed Message delivery.  This is the maximum number of messages that\n   * will be prefetched from the Solace Messaging Router and queued internally by the API while\n   * waiting for the application to accept delivery of the messages.\n   *   * The valid range is 1 <= windowSize <= 255.\n   * @type {Number}\n   * @default 255\n   */\n  get windowSize() {\n    return Check.something(this._windowSize)\n      ? this._windowSize :\n      DEFAULTS.windowSize;\n  }\n  set windowSize(val) {\n    this._windowSize = val;\n  }\n\n  /**\n   * When enabled, a Guaranteed Messaging Consumer will connect as a queue browser\n   * @type {Boolean}\n   * @default false\n   * @private\n   * @internal\n   */\n  get browser() {\n    return Check.something(this._browser)\n      ? this._browser :\n      DEFAULTS._browser;\n  }\n  set browser(newValue) {\n    this._browser = newValue;\n  }\n  /**\n   * When a Flow is created, the application may request replay of messages from the replay log,\n   * even messages that have been previously delivered and removed the from topic endpoint or queue.\n   * The default is undefined, and indicates that no replay is requested.\n   *\n   * When defined the replay start location must be a {@link solace.ReplayStartLocation} object\n   * as returned by\n   * {@link solace.SolClientFactory.createReplayStartLocationBeginning} or\n   * {@link solace.SolClientFactory.createReplayStartLocationDate}.\n   *\n   * The {@link solace.ReplayStartLocation} returned by\n   * {@link solace.SolClientFactory.createReplayStartLocationBeginning}\n   * indicate that all messages available should be replayed.\n   *\n   * The replay start location returned by\n   * {@link solace.SolClientFactory.createReplayStartLocationDate}\n   * indicates that all messages logged since a given date must be retrieved.\n   * @type {solace.ReplayStartLocation}\n   * @default undefined.\n   */\n  get replayStartLocation() {\n    return Check.something(this._replayStartLocation)\n      ? this._replayStartLocation :\n        DEFAULTS.replayStartLocation;\n  }\n  set replayStartLocation(newValue) {\n    this._replayStartLocation = newValue;\n  }\n\n  /**\n   * When a connected flow receives an unsolicited unbind event with subcode\n   * REPLAY_STARTED or GM_UNAVAILABLE, the SDK can reconnect the flow automatically.\n   * This property controls the flow auto reconnect feature:\n   * 0: Disable flow auto reconnect for this consumer flow.\n   * -1: Enable flow auto reconnect for this consumer flow, infiinite retries (default)\n   * <n, positive number>: Enable flow auto reconnect for this consumer flow, n retries.\n   *\n   * When the flow auto rebind is enabled, DOWN_ERRORs with REPLAY_STARTED and GM_UNAVAILABLE\n   * are handled internally, and not (immediately) emitted to the application.\n   * A RECONNECTING event (with the same subcode) is emitted instead,\n   * ideally followed by a RECONNECTED event when the reconnect succeedes.\n   * In case of REPLAY_STARTED, the window of message IDs and acknowledgements are reset\n   * to allow replay packets to be passed to the application without marking them as duplicates.\n   * In case of GM_UNAVAILABLE, flow state is preserved.\n   *\n   * If reconnecting fails after exhausting the number of retries, a DOWN_ERROR is emitted\n   * with the details of the last retry.\n   *\n   *\n   * @type {Number}\n   * @default -1\n   */\n  get reconnectAttempts() {\n    return Check.something(this._reconnectAttempts)\n      ? this._reconnectAttempts :\n        DEFAULTS.reconnectAttempts;\n  }\n  set reconnectAttempts(newValue) {\n    this._reconnectAttempts = newValue;\n  }\n\n  /**\n   * Time to wait between flow auto reconnect attempts, in milliseconds.\n   * See {@link solace.MessageConsumerProperties.reconnectAttempts}\n   * Defaults to 3 seconds (3000)\n   *  * The valid range is >= 50.\n   *\n   * @type {Number}\n   * @default 3000\n   */\n  get reconnectIntervalInMsecs() {\n    return Check.something(this._reconnectIntervalInMsecs)\n      ? this._reconnectIntervalInMsecs :\n        DEFAULTS.reconnectIntervalInMsecs;\n  }\n  set reconnectIntervalInMsecs(newValue) {\n    this._reconnectIntervalInMsecs = newValue;\n  }\n\n  /**\n   * If the endpoint is durable, it won't be auto-created unless this flag is set.\n   * This flag has no effect for temporary endpoints, those are always created if missing.\n   * This flag has no effect for existing endpoints.\n   *\n   * Off by default for backwards compatibility.\n   *\n   * @type {Boolean}\n   * @default false\n   *\n   */\n  get createIfMissing() {\n    return Check.something(this._createIfMissing)\n      ? this._createIfMissing :\n        DEFAULTS.createIfMissing;\n  }\n\n  set createIfMissing(newValue) {\n    this._createIfMissing = newValue;\n  }\n\n}\nmodule.exports.MessageConsumerProperties = MessageConsumerProperties;\n","const SMFLib = require('solclient-smf');\nconst { CapabilityType } = require('solclient-session');\nconst { ConsumerFSM } = require('./consumer-fsm');\nconst { ConsumerFSMEvent } = require('./consumer-fsm-event');\nconst { ConsumerFSMEventNames } = require('./consumer-fsm-event-names');\nconst { ErrorResponseSubcodeMapper,\n  ErrorSubcode,\n  OperationError } = require('solclient-error');\nconst { Flow, FlowOperation } = require('solclient-flow');\nconst { MessageConsumerEvent } = require('./message-consumer-event');\nconst { MessageOutcome } = require('solclient-message');\nconst { MessageConsumerEventName } = require('./message-consumer-event-names');\nconst { MessageConsumerProperties } = require('./message-consumer-properties');\nconst { MessageConsumerPropertiesValidator } = require('./message-consumer-properties-validator');\nconst { Queue, Topic } = require('solclient-destination');\nconst { QueueAccessType, QueuePermissions, QueueDiscardBehavior } = require('solclient-queue');\n\n\nfunction formatEventName(eventName) {\n  return `MessageConsumerEventName.${MessageConsumerEventName.describe(eventName)}`;\n}\n\nlet localCounter = 0;\nfunction getConsumerLocalName() {\n  return `ConsumerFSM ${localCounter++}`;\n}\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users.</b>\n * A Message Consumer is created by calling {@link solace.Session#createMessageConsumer}.\n *\n * A MessageConsumer controls Guaranteed Message delivery to this client.\n *\n * Consumer characteristics and behavior are defined by {@link solace.MessageConsumerProperties}.\n * The properties can also be supplied as a simple key-value {Object}. The queue descriptor,\n * {@link solace.MessageConsumerProperties#queueDescriptor} must be specified to identify the\n * Guaranteed Message Queue or Guaranteed Message Topic Endpoint on the Solace Message Router.\n *\n * The MessageConsumer object is an EventEmitter, and will emit events to which the\n * application may choose to subscribe, such as the connection to the Solace Message Router\n * going up or down.\n *\n * If a registered listener for an emitted event throws an exception, this is caught and emitted as\n * an 'error'.\n *\n * @fires solace.MessageConsumerEventName#ACTIVE\n * @fires solace.MessageConsumerEventName#CONNECT_FAILED_ERROR\n * @fires solace.MessageConsumerEventName#DISPOSED\n * @fires solace.MessageConsumerEventName#DOWN\n * @fires solace.MessageConsumerEventName#DOWN_ERROR\n * @fires solace.MessageConsumerEventName#GM_DISABLED\n * @fires solace.MessageConsumerEventName#INACTIVE\n * @fires solace.MessageConsumerEventName#MESSAGE\n * @fires solace.MessageConsumerEventName#UP\n * @fires solace.MessageConsumerEventName#SUBSCRIPTION_OK\n * @fires solace.MessageConsumerEventName#SUBSCRIPTION_ERROR\n *\n *\n * @hideconstructor\n * @extends solace.Flow\n * @memberof solace\n */\nclass MessageConsumer extends Flow {\n  constructor({ properties, sessionInterfaceFactory } = {}) {\n    const applyProperties = new MessageConsumerProperties(properties);\n    MessageConsumerPropertiesValidator.validate(applyProperties.browser ?\n      'QueueBrowserProperties' : 'MessageConsumerProperties',\n                                                applyProperties, properties);\n    super(applyProperties, sessionInterfaceFactory, {\n      direct: MessageConsumerEventName.MESSAGE,\n      emits:  MessageConsumerEventName.values,\n      formatEventName,\n    });\n\n    const superFormatter = this.logger.formatter;\n    this.logger.formatter = (...args) => superFormatter('[message-consumer]', ...args);\n\n    this._active = undefined;\n    this._fsm = this._makeFSM();\n    this.endpointErrorId = undefined;\n    this.partitionGroupId = undefined; // support Partition Q feature\n\n    this._on(MessageConsumerEventName.ACTIVE, () => this._onFlowActive(true));\n    this._on(MessageConsumerEventName.INACTIVE, () => this._onFlowActive(false));\n    this._on(MessageConsumerEventName.DOWN_ERROR, this._onFlowDisconnected.bind(this));\n    this._on(MessageConsumerEventName.UP, this._onFlowUp.bind(this));\n    this._fsm.start(); // Subscriber flows self-manage, so they start immediately\n  }\n\n  _makeFSM() {\n    const properties = this._properties;\n    const name = `${getConsumerLocalName()}`;\n    return new ConsumerFSM({\n      name,\n      consumer:         this,\n      sessionInterface: this._sessionInterface,\n      properties,\n    });\n  }\n\n  /**\n   * Begins delivery of messages to this consumer. This method opens the protocol window\n   * to the Solace Message Router so further messages can be received.\n   *\n   * A newly created consumer is in started state.\n   *\n   * If the consumer was already started, this method has no effect.\n   *\n   * A consumer is stopped by calling {@link solace.MessageConsumer.stop}\n   *\n   * @throws {solace.OperationError}\n   * * if the Message Consumer is disposed.\n   *   subcode = {@link solace.ErrorSubcode.INVALID_OPERATION}\n   * * if the Message Consumer is disconnected.\n   *   subcode = {@link solace.ErrorSubcode.INVALID_OPERATION}\n   */\n  start() {\n    this._operationCheck(FlowOperation.START);\n    this._fsm.requestStartDispatchUser();\n  }\n\n  /**\n   * Stops messages from being delivered to this consumer from the Solace Message Router.\n   * Messages may continue to be prefetched by the API and queued internally\n   * until {@link solace.MessageConsumer#start} is called.\n   *\n   * If the consumer was already stopped, this method has no effect.\n   *\n   * @throws {solace.OperationError}\n   * * if the Message Consumer is disconnected.\n   *   subcode = {@link solace.ErrorSubcode.INVALID_OPERATION}\n   */\n  stop() {\n    this._operationCheck(FlowOperation.STOP);\n    this._fsm.requestStopDispatchUser();\n  }\n\n  /**\n   * Connects the consumer immediately. The application should add event listeners (see\n   * {@link solace.MessageConsumerEventName}). If there is no listener added for\n   * {@link solace.MessageConsumerEventName#event:MESSAGE} then up to a window\n   * {@link solace.MessageConsumerProperties.windowSize} of messages can be queued internally.\n   * to the {@link solace.MessageConsumer} before calling this method.\n   *\n   * @throws {solace.OperationError}\n   *  * if consumer is not supported by router for this client.\n   *  subcode = {@link solace.ErrorSubcode.INVALID_OPERATION}\n   *\n   */\n  connect() {\n    if ((this._sessionInterface.getCapability(CapabilityType.GUARANTEED_MESSAGE_CONSUME)\n        !== null) &&\n        (!this._sessionInterface.isCapable(CapabilityType.GUARANTEED_MESSAGE_CONSUME))) {\n      throw new OperationError('Consumer is not supported by router for this client',\n              ErrorSubcode.INVALID_OPERATION, null);\n    }\n    super.connect();\n    this.processFSMEvent(new ConsumerFSMEvent({ name: ConsumerFSMEventNames.FLOW_OPEN }));\n  }\n\n  /**\n   * Initiates an orderly disconnection of the Message Consumer. The API will send any pending\n   * client acknowledgements on the Message Consumer, then send an unbind request.\n   * Any messages subsequently\n   * received are discarded silently. When the unbind message is acknowledged, the application\n   * receives a {@link solace.MessageConsumerEventName#event:DOWN} event if it has set a listener\n   * for that event.\n   *\n   * @throws {solace.OperationError}\n   * * if the Message Consumer is disconnected.\n   *   subcode = {@link solace.ErrorSubcode.INVALID_OPERATION}\n   */\n  disconnect() {\n    super.disconnect();\n    this.processFSMEvent(new ConsumerFSMEvent({ name: ConsumerFSMEventNames.FLOW_CLOSE }));\n  }\n\n  /**\n   * Returns the destination that should be used to publish messages that this consumer\n   * will receive.\n   * * For topic endpoints, this is the topic to which the topic endpoint is subscribed.\n   * * For queues, this is the associated queue destination.\n   *\n   * The destination returned can\n   * be used to set the ReplyTo field in a message, or otherwise communicated\n   * to partners that need to send messages to this Message Consumer. This is especially useful\n   * for temporary endpoints (Queues and Topic Endpoints), as the destination\n   * is unknown before the endpoint is created.\n   *\n   * This method will succeed after {@link solace.MessageConsumerEventName#event:UP} for temporaries\n   * with generated destinations.\n   *\n   * @throws {solace.OperationError}\n   * * if the {@link solace.MessageConsumer} is disconnected and the destination is temporary.\n   *\n   * @returns {solace.Destination} The publishing destination that delivers to this consumer.\n   */\n  getDestination() {\n    const destination = this._fsm.getDestination();\n    if (destination instanceof Queue) {\n      return new Queue(destination);\n    }\n    return new Topic(destination);\n  }\n\n  // Application has disconnected the session, we must continue to orderly shut down\n  // unbinding Message Consumers,\n  // but Message Consumers that are up merely treat this as a 'down' event and\n  // transition to awaitingSessionUp\n  _disconnectSession() {\n    super._disconnectSession();\n    this.processFSMEvent(new ConsumerFSMEvent({ name: ConsumerFSMEventNames.SESSION_DISCONNECT }));\n  }\n\n  _operationCheck(operation) {\n    super._operationCheck(operation);\n    switch (operation) {\n      case FlowOperation.GET_DESTINATION:\n        if (this._isDisconnected()) {\n          throw new OperationError('Cannot get destination of a disconnected flow',\n                                   ErrorSubcode.INVALID_OPERATION);\n        }\n        break;\n      default:\n    }\n  }\n\n  // ----\n\n  /**\n   * @param {any} messageId The message ID to ack\n   * @param {any} isAutoAcked whether this is an auto-acked message\n   * @internal\n   */\n  applicationAck(messageId, isAutoAcked = false) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE(`Adding application ack for ${messageId}`);\n    this._fsm.applicationAck(messageId, isAutoAcked);\n  }\n\n  /**\n   * @param {any} messageId The message ID to ack\n   * @param {solace.MessageOutcome} settlementOutcome The message settlement outcome\n   * @internal\n   */\n  applicationSettle(messageId, settlementOutcome) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE(`Adding application settlement for ${\n      messageId\n    } with outcome: solace.MessageOutcome.${MessageOutcome.nameOf(settlementOutcome)}`);\n    this._fsm.applicationSettle(messageId, settlementOutcome);\n  }\n\n  getDisposedEvent() { // eslint-disable-line class-methods-use-this\n    return MessageConsumerEventName.DISPOSED;\n  }\n\n  /**\n   * @param {solace.Message} message The data message to handle\n   * @internal\n   */\n  handleDataMessage(message) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Handling data message');\n    message.setMessageConsumer(this);\n    this._fsm.acceptMessage(message);\n  }\n\n  /**\n   * @override\n   * @param {solace.AdProtocolMessage} message The control message to handle\n   * @internal\n   */\n  handleUncorrelatedControlMessage(message) {\n    const { LOG_INFO, LOG_DEBUG, LOG_TRACE } = this.logger;\n    LOG_INFO('Handling uncorrelated control message');\n    const msgType = message.msgType;\n    const { SMFAdProtocolMessageType } = SMFLib;\n    switch (msgType) {\n      case SMFAdProtocolMessageType.UNBIND: {\n        const responseCode = message.smfHeader.pm_respcode;\n        const description = message.smfHeader.pm_respstr;\n        const errorSubcode = ErrorResponseSubcodeMapper.getADErrorSubcode(responseCode,\n                                                                          description);\n        LOG_TRACE(`Handling uncorrelated UNBIND. endpointErrorId: ${message.getEndpointErrorId()}`);\n        if (message.getEndpointErrorId() !== undefined) {\n          this.endpointErrorId = message.getEndpointErrorId();\n        }\n        this.processFSMEvent(new ConsumerFSMEvent({\n          name: ConsumerFSMEventNames.FLOW_UNBOUND,\n        },\n          new OperationError(description, errorSubcode, responseCode)\n        ));\n      }\n        break;\n      case SMFAdProtocolMessageType.FLOWCHANGEUPDATE:\n        this.processFSMEvent(new ConsumerFSMEvent({\n          name: ConsumerFSMEventNames.FLOW_ACTIVE_IND,\n        }, {\n          active: message.getActiveFlow(),\n        }));\n        break;\n      default:\n        LOG_DEBUG('Dropping unhandled AD control message: ',\n                  SMFAdProtocolMessageType.describe(msgType));\n    }\n  }\n\n  /**\n   * Creates and returns copy of the properties for this MessageConsumer.\n   *\n   * If the object was constructed using an {@link solace.AbstractQueueDescriptor},\n   * and the queue descriptor was subsequently connected to an endpoint, the\n   * `MessageConsumerProperties` returned will include a {@link solace.QueueDescriptor}\n   * that contains the resolved name.\n   *\n   * A new copy of the properties object is returned each time this property is accessed.\n   * The returned object cannot be polled for mutations such as the one described above.\n   *\n   * @returns {solace.MessageConsumerProperties} The properties associated with this object.\n   */\n  getProperties() {\n    return super.getProperties();\n  }\n\n  /**\n   * Resets the router state contained in the consumer, e.g. on VRN change\n   *\n   * @memberof MessageConsumer\n   * @internal\n   */\n  onVRNChanged() {\n    this.processFSMEvent(new ConsumerFSMEvent({\n      name: ConsumerFSMEventNames.VIRTUALROUTER_NAME_CHANGED,\n    }));\n  }\n\n  /**\n   * After the MessageConsumer has connected to an endpoint\n   * ({@link solace.MessageConsumerEventName#UP}), accesstype represents\n   *  the access type for the endpoint to which this Message Consumer is bound.\n   * @name solace.MessageConsumer.accessType\n   * @type {solace.QueueAccessType}\n   */\n  get accessType() {\n    return this._accessType;\n  }\n  /**\n   * @param {solace.QueueAccessType} value The value to set\n   * @internal\n   */\n  set accessType(value) {\n    this._accessType = value;\n  }\n\n  /**\n   * Whether the consumer is active. If active indications for the consumer are not\n   * enabled, this will return undefined.\n   * @type {?Boolean}\n   * @internal\n   */\n  get active() {\n    return this._active;\n  }\n  /**\n   * @param {Boolean} value The value to set\n   * @internal\n   */\n  set active(value) {\n    if (value !== this._active) {\n      this._emit(value ? MessageConsumerEventName.ACTIVE : MessageConsumerEventName.INACTIVE);\n    }\n    this._active = value;\n  }\n\n  /**\n   * After the MessageConsumer has connected as indicated by the event\n   * {@link solace.MessageConsumerEventName#event:UP}, queueDiscardBehavior represents\n   * the discard behavior flags for the endpoint to which this Message Consumer is bound.\n   * @name solace.MessageConsumer.queueDiscardBehaviour\n   * @type {solace.QueueDiscardBehavior}\n   */\n  get queueDiscardBehavior() {\n    return this._queueDiscardBehavior;\n  }\n  /**\n   * @param {solace.QueueDiscardBehavior} value The value to set\n   * @internal\n   */\n  set queueDiscardBehavior(value) {\n    this._queueDiscardBehavior = value;\n  }\n\n  /**\n   * After the MessageConsumer has connected as indicated by the event\n   * {@link solace.MessageConsumerEventName#event:UP}\n   * respectsTTL is `true` when the endpoint respects Time To Live on messages\n   * and 'false' otherwise.\n   * @name solace.MessageConsumer.respectsTTL\n   * @type {Boolean}\n   */\n  get respectsTTL() {\n    return this._respectsTTL;\n  }\n  /**\n   * @param {Boolean} value The value to set\n   * @internal\n   */\n  set respectsTTL(value) {\n    this._respectsTTL = value;\n  }\n\n  /**\n   * Gets the flow ID for this consumer. This number will change between reconnects\n   * and is purely informational.\n   * @type {Long}\n   * @internal\n   */\n  get flowId() {\n    return this._flowId;\n  }\n  /**\n   * @param {Long} value The value to set\n   * @internal\n   */\n  set flowId(value) {\n    this._flowId = value;\n  }\n\n  /**\n   * After the MessageConsumer has connected as indicated by the event\n   * {@link solace.MessageConsumerEventName#event:UP}, this property represents\n   * permissions granted by the router to this user on this Message Consumer\n   * @name solace.MessageConsumer.permissions\n   * @type {solace.QueuePermissions}\n   */\n  get permissions() {\n    return this._permissions || 0;\n  }\n  /**\n   * @param {Number} value The value to set\n   * @internal\n   */\n  set permissions(value) {\n    this._permissions = value;\n  }\n\n  _onFlowActive(isActive) {\n    const { LOG_DEBUG } = this.logger;\n    LOG_DEBUG(`Flow (flowId = ${this._flowId}) became ${isActive ? 'active' : 'inactive'}`);\n    this._active = isActive;\n  }\n\n  _onFlowDisconnected(error) {\n    const { LOG_INFO } = this.logger;\n    LOG_INFO(`${this} disconnected: ${error}.message`);\n  }\n\n  _disposeFSM() {\n    const { LOG_INFO } = this.logger;\n    LOG_INFO('Disposing FSM');\n    this.processFSMEvent(new ConsumerFSMEvent({ name: ConsumerFSMEventNames.DISPOSE }));\n  }\n\n  _onFlowUp() {\n    const { LOG_INFO } = this.logger;\n    LOG_INFO(`Flow is up: flowId = ${this._flowId}`);\n  }\n\n  [util_inspect_custom]() {\n    return Object.assign(super[util_inspect_custom](), {\n      'destination':          this._destination,\n      'accessType':           QueueAccessType.describe(this.accessType),\n      'permissions':          QueuePermissions.describe(this.permissions),\n      'respectsTTL':          this.respectsTTL,\n      'active':               this.wantFlowChangeNotify ? this.active : '(indications disabled)',\n      'wantFlowChangeNotify': this.wantFlowChangeNotify,\n      'queueDiscardBehavior': QueueDiscardBehavior.describe(this.queueDiscardBehavior),\n      'maxWindowSize':        this._fsm.maxWindowSize,\n    });\n  }\n\n  toString() {\n    return util_inspect(this);\n  }\n\n  _isDisconnected() {\n    return this._fsm.isDisconnected();\n  }\n\n  /**\n   * Subscribe the queue to a topic, always requesting confirmation from the router.\n   *\n   * {@link solace.MessageConsumerEventName.SUBSCRIPTION_OK} is generated when subscription is\n   * added successfully; otherwise, session event\n   * {@link solace.MessageConsumerEventName.SUBSCRIPTION_ERROR} is generated.\n   *\n   * When the application receives the event\n   * {@link solace.MessageConsumerEventName.SUBSCRIPTION_ERROR}, it\n   * can obtain the failed topic subscription by calling\n   * {@link solace.MessageConsumerEvent#reason}.\n   * The returned string is in the format of \"Topic: <failed topic subscription>\".\n   *\n   * @param {solace.Destination} topic The topic destination subscription to add.\n   * @param {Object|String|null|undefined} correlationKey If specified, this value is\n   *                                echoed in the messageConsumer event within\n   *                                {@link MessageConsumerEvent}.\n   * @param {Number} requestTimeout The request timeout period (in milliseconds). If specified, this\n   *                                value overwrites readTimeoutInMsecs property in\n   *                                {@link SessionProperties}.\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed or disconnected,\n   *   or the consumer is inactive, down, disconnected, or disposed.\n   *   Or if the consumer is bound to a topic endpoint instead of a queue.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the parameters have an invalid type.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   * * if the parameters have an invalid value.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_OUT_OF_RANGE}.\n   * * if the topic has invalid syntax.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_TOPIC_SYNTAX}.\n   * * if there's no space in the transport to send the request.\n   *   Subcode: {@link solace.ErrorSubcode.INSUFFICIENT_SPACE}.  See:\n   *   {@link solace.SessionEventCode#event:CAN_ACCEPT_DATA}.\n   * * if the topic is a shared subscription and the peer router does not support Shared\n   *   Subscriptions.\n   *   Subcode: {@link solace.ErrorSubcode.SHARED_SUBSCRIPTIONS_NOT_SUPPORTED}.\n   * * if the topic is a shared subscription and the client does not allowed Shared\n   *   Subscriptions.\n   *   Subcode: {@link solace.ErrorSubcode.SHARED_SUBSCRIPTIONS_NOT_ALLOWED}.\n   */\n  addSubscription(topic, correlationKey, requestTimeout) {\n    const callback = (success, subCode, respCode, respText) => {\n      if (success) {\n        const event = new MessageConsumerEvent(\n          MessageConsumerEventName.SUBSCRIPTION_OK,\n          respText,\n          respCode,\n          subCode,\n          correlationKey,\n          `Topic: ${topic.getName()}`\n        );\n        this._emit(MessageConsumerEventName.SUBSCRIPTION_OK, event);\n      } else {\n        const error = new MessageConsumerEvent(\n          MessageConsumerEventName.SUBSCRIPTION_ERROR,\n          respText,\n          respCode,\n          subCode,\n          correlationKey,\n          `Topic: ${topic.getName()}`\n        );\n        this._emit(MessageConsumerEventName.SUBSCRIPTION_ERROR, error);\n      }\n    };\n\n    this._sessionInterface.updateQueueSubscription(\n      topic,\n      this._fsm.getDestination(),\n      true,\n      this,\n      callback,\n      requestTimeout);\n  }\n  /**\n   * Unsubscribe the queue from a topic, requesting confirmation from the router.\n   *\n   * {@link solace.MessageConsumerEventName.SUBSCRIPTION_OK} is generated when subscription is\n   * removed successfully; otherwise, session event\n   * {@link solace.MessageConsumerEventName.SUBSCRIPTION_ERROR} is generated.\n   *\n   * When the application receives the message consumer event\n   * {@link solace.MessageConsumerEventName.SUBSCRIPTION_ERROR}, it\n   * can obtain the failed topic subscription by calling\n   * {@link solace.MessageConsumerEvent#reason}. The returned\n   * string is in the format \"Topic: <failed topic subscription>\".\n   *\n   * @param {solace.Destination} topic The topic destination subscription to remove.\n   * @param {Object|String|null|undefined} correlationKey If <code>null</code> or undefined, a Correlation Key is not set\n   *                                in the confirmation session event.\n   * @param {Number} requestTimeout The request timeout period (in milliseconds). If specified, this\n   *                                value overwrites readTimeoutInMsecs property in\n   *                                {@link SessionProperties}.\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed or disconnected,\n   *   or the consumer is inactive, down, disconnected, or disposed.\n   *   Or if the consumer is bound to a topic endpoint instead of a queue.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the parameters have an invalid type.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   * * if the parameters have an invalid value.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_OUT_OF_RANGE}.\n   * * if the topic has invalid syntax.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_TOPIC_SYNTAX}.\n   * * if there's no space in the transport to send the request.\n   *   Subcode: {@link solace.ErrorSubcode.INSUFFICIENT_SPACE}.  See:\n   *   {@link solace.SessionEventCode#event:CAN_ACCEPT_DATA}.\n   * * if the topic is a shared subscription and the peer router does not support Shared\n   *   Subscriptions.\n   *   Subcode: {@link solace.ErrorSubcode.SHARED_SUBSCRIPTIONS_NOT_SUPPORTED}.\n   * * if the topic is a shared subscription and the client does not allowed Shared\n   *   Subscriptions.\n   *   Subcode: {@link solace.ErrorSubcode.SHARED_SUBSCRIPTIONS_NOT_ALLOWED}.\n   */\n  removeSubscription(topic, correlationKey, requestTimeout) {\n    const callback = (success, subCode, respCode, respText) => {\n      if (success) {\n        const event = new MessageConsumerEvent(\n          MessageConsumerEventName.SUBSCRIPTION_OK,\n          respText,\n          respCode,\n          subCode,\n          correlationKey,\n          `Topic: ${topic.getName()}`\n        );\n        this._emit(MessageConsumerEventName.SUBSCRIPTION_OK, event);\n      } else {\n        const error = new MessageConsumerEvent(\n          MessageConsumerEventName.SUBSCRIPTION_ERROR,\n          respText,\n          respCode,\n          subCode,\n          correlationKey,\n          `Topic: ${topic.getName()}`\n        );\n        this._emit(MessageConsumerEventName.SUBSCRIPTION_ERROR, error);\n      }\n    };\n\n    this._sessionInterface.updateQueueSubscription(\n      topic,\n      this._fsm.getDestination(),\n      false,\n      this,\n      callback,\n      requestTimeout);\n  }\n}\n\nmodule.exports.MessageConsumer = MessageConsumer;\n","const { MessageConsumerEventName } = require('./message-consumer-event-names');\n\nfunction formatEventName(x) {\n  return `MessageConsumerEventName.${MessageConsumerEventName.describe(x)}`;\n}\n\nclass MessageDispatcher {\n  constructor({ emitter, autoAck, logger } = {}) {\n    Object.assign(this, {\n      emitter,\n      queue:    [],\n      dispatch: true,\n      formatEventName,\n      logger,\n    });\n    this._dispatchOne = autoAck ? this._dispatchOneAutoAck : this._dispatchOneBare;\n    this.emitter.setOnFirstDirectListener(this._onFirstMessageListener.bind(this));\n    // Although a listener may not be available, we set it to true so that we detect a transition to\n    // false when we attempt to dispatch the first message, which will generate a log that\n    // dispatching is stopped due to a missing listener.\n    this._availableListener = true;\n  }\n\n  start() {\n    this.dispatch = true;\n    this._flush();\n  }\n\n  stop() {\n    this.dispatch = false;\n  }\n\n  get length() {\n    return this.queue.length;\n  }\n\n  push(message) {\n    const { LOG_TRACE } = this.logger;\n    this.queue.push(message);\n\n    if (this.dispatch) {\n      this._flush();\n    } else {\n      LOG_TRACE(`Dispatch disabled, message ${message.getGuaranteedMessageId()} queued locally`);\n    }\n  }\n\n  _onFirstMessageListener() {\n    const { LOG_DEBUG } = this.logger;\n    if (!this._availableListener) {\n      LOG_DEBUG(`Message listener available for dispatcher, ${this.queue.length} messages queued`);\n      LOG_DEBUG(`Dispatcher started and connected: ${this.dispatch ? 'true' : 'false'}`);\n      this._availableListener = true;\n    }\n    this._flush();\n  }\n\n  _flush() {\n    const { LOG_DEBUG } = this.logger;\n    // Check whether dispatch enabled for every element,\n    // to handle when #stop is called from a message handler\n    while (this.queue.length && this.dispatch && (this.emitter.directListenerCount() > 0)) {\n      this._dispatchOne(this.queue.shift());\n    }\n\n    if (this.queue.length && this.dispatch &&\n        (this.emitter.directListenerCount() === 0) && this._availableListener) {\n      LOG_DEBUG('Message dispatching stopped: No message listener registered');\n      this._availableListener = false;\n    }\n  }\n\n  _dispatchOneAutoAck(message) {\n    const { LOG_WARN } = this.logger;\n    // Set the current outbound message, dispatch it, and clear the current outbound message\n    let caught = null;\n\n    // Auto-ack unless the receiver throws.\n    caught = this._dispatchOneBare(message);\n    // Outside of exception block because we want to throw normally from message.acknowledge()\n    if (caught) {\n      LOG_WARN(`Suppressing message acknowledgement for message ${message.getGuaranteedMessageId()\n               } because client threw exception from listener`, caught);\n    } else {\n      // Did the user manually ack for some reason?\n      if (message.isAcknowledged) {\n        LOG_WARN(`Consumer configured to auto-acknowledge messages, but message ${\n                 message.getGuaranteedMessageId()} was application acknowledged`);\n        return;\n      }\n      message._autoAcknowledge(); // No, so auto ack the message\n    }\n  }\n\n  _dispatchOneBare(message) {\n    const { LOG_WARN } = this.logger;\n    let caught;\n    // Requires the emitter's direct option to be MessageConsumerEventName.MESSAGE\n    if (this.listenerCount === 0) {\n      LOG_WARN(`No listeners to dispatch message ${message.getGuaranteedMessageId()}`);\n    }\n    // Since _dispatchOneBare uses emitDirect, this behaviour is not affected by the presence\n    // of an 'error' handler.\n    try {\n      this.emitter.emitDirect(message);\n    } catch (ex) {\n      // User code threw an exception\n      caught = this.emitter.formatErrorEvent(ex, MessageConsumerEventName.MESSAGE, message);\n      // Also propagating to the common error handler\n      this.emitter.emit('error', caught);\n    }\n    return caught;\n  }\n\n}\n\nmodule.exports = { MessageDispatcher };\n","const { Enum } = require('solclient-eskit');\n/**\n * An enumeration of queue browser event names. A {@link solace.QueueBrowser} will emit\n * these events as part of its lifecycle.  Applications, having created a QueueBrowser can\n * choose to listen to all of the events described here, or any subset of these events. For Example:\n * <pre>\n *   <code>\n *     qb = solace.Session.createQueueBrowser(...);\n *     qb.on(solace.QueueBrowserEventName.CONNECT_FAILED_ERROR,\n *           function connectFailedErrorEventCb(error) {\n *             // details is an OperationError object\n *           });\n *   </code>\n * </pre>\n *\n * @memberof solace\n * @enum {string}\n * @namespace\n */\nconst QueueBrowserEventName = {\n  /**\n   * The queue browser is established.\n   * @event solace.QueueBrowserEventName#UP\n   */\n  UP:                   'QueueBrowserEventName_up',\n  /**\n   * The queue browser is successfully disconnected.\n   * The queue browser is disabled.\n   *\n   * @event solace.QueueBrowserEventName#DOWN\n   */\n  DOWN:                 'QueueBrowserEventName_down',\n /**\n   * The queue browser was established and then disconnected by the router,\n   * likely due to operator intervention. The queue browser is disabled.\n   *\n   * @event solace.QueueBrowserEventName#DOWN_ERROR\n   * @param {solace.OperationError} error Details of the error.\n   */\n  DOWN_ERROR:           'QueueBrowserEventName_downError',\n  /**\n   * The queue browser attempted to connect but was unsuccessful.\n   * The queue browser is disabled.\n   *\n   * @event solace.QueueBrowserEventName#CONNECT_FAILED_ERROR\n   * @param {solace.OperationError} error Details of the error.\n   */\n  CONNECT_FAILED_ERROR: 'QueueBrowserEventName_connectFailedError',\n  /**\n   * The queue browser will not connect because the current session is incompatible\n   * with Guaranteed Messaging. The queue browser is disabled until a compatible session\n   * is available.\n   *\n   * @event solace.QueueBrowserEventName#GM_DISABLED\n   */\n  GM_DISABLED:          'QueueBrowserEventName_GMDisabled',\n  /**\n   * The queue browser is being disposed. No further events will be emitted.\n   *\n   * @event solace.QueueBrowserEventName#DISPOSED\n   */\n  DISPOSED:             'QueueBrowserEventName_disposed',\n  /**\n   * A message was received on the queue browser.\n   *\n   * If the application did not retain a reference to the message, it\n   * may be redelivered by calling {@link solace.QueueBrowser#disconnect} followed by\n   * {@link solace.QueueBrowser#connect} depending on the configuration of the queue.\n   *\n   * When there is no listener for <i>MESSAGE</i> on a QueueBrowser, messages are queued\n   * internally until a listener is added.\n   *\n   * @event solace.QueueBrowserEventName#MESSAGE\n   * @param {solace.Message} message The received message being delivered in this event.\n   */\n  MESSAGE:              'QueueBrowserEventName_message',\n};\n\nmodule.exports.QueueBrowserEventName = Enum.new(QueueBrowserEventName);\n","const QueueLib = require('solclient-queue');\nconst { APIProperties } = require('solclient-util');\nconst { Check } = require('solclient-validate');\n\nconst DEFAULTS = {\n  queueDescriptor:                         undefined,\n  connectTimeoutInMsecs:                   10000,\n  connectAttempts:                         3,\n  windowSize:                              255,\n  transportAcknowledgeTimeoutInMsecs:      1000,\n  transportAcknowledgeThresholdPercentage: 60,\n};\n\n/**\n * @classdesc\n * Defines the properties for a {@link solace.QueueBrowser}.\n *\n * @memberof solace\n */\nclass QueueBrowserProperties extends APIProperties {\n  constructor(options) {\n    super(DEFAULTS, options);\n  }\n\n  /**\n   * Defines the queue from which to consume.\n   *  * For durable queues and durable topic endpoints, this must be a\n   *    {@link solace.QueueDescriptor}.\n   * @type {solace.QueueDescriptor}\n   */\n  get queueDescriptor() {\n    return Check.something(this._queueDescriptor)\n      ? this._queueDescriptor\n      : DEFAULTS.queueDescriptor;\n  }\n  set queueDescriptor(value) {\n    if (value) {\n      this._queueDescriptor = new QueueLib.QueueDescriptor(value);\n    } else {\n      this._queueDescriptor = value;\n    }\n  }\n\n  // ------------ Properties controlling connection of the consumer ----------------\n  /**\n   * The bind timeout in milliseconds when creating a connection to the Solace Message Router.\n   *  * The valid range is >= 50.\n   * @type {Number}\n   * @default 10000\n   */\n  get connectTimeoutInMsecs() {\n    return Check.something(this._bindTimeoutInMsecs)\n      ? this._bindTimeoutInMsecs\n      : DEFAULTS.connectTimeoutInMsecs;\n  }\n  set connectTimeoutInMsecs(value) {\n    this._bindTimeoutInMsecs = value;\n  }\n\n  /**\n   * Gets and sets the maximum number of bind attempts when creating a connection to the\n   * Solace Message Router.\n   *  * The valid range is >= 1.\n   * @type {Number}\n   * @default 3\n   */\n  get connectAttempts() {\n    return Check.something(this._connectAttempts)\n      ? this._connectAttempts\n      : DEFAULTS.connectAttempts;\n  }\n  set connectAttempts(val) {\n    this._connectAttempts = val;\n  }\n\n  // ----------- Properties controlling an established connection to a queue --------------\n  /**\n   * The window size for Guaranteed Message delivery.  This is the maximum number of messages that\n   * will be prefetched from the Solace Messaging Router and queued internally by the API while\n   * waiting for the application to accept delivery of the messages.\n   *   * The valid range is 1 <= windowSize <= 255.\n   * @type {Number}\n   * @default 255\n   */\n  get windowSize() {\n    return Check.something(this._windowSize)\n      ? this._windowSize :\n      DEFAULTS.windowSize;\n  }\n  set windowSize(val) {\n    this._windowSize = val;\n  }\n\n  /**\n   * The transport acknowledgement timeout for guaranteed messaging in milliseconds.\n   * When the {@link solace.QueueBrowserProperties.transportAcknowledgeTimeoutInMsecs} is not\n   * exceeded, acknowledgements will be returned to the router at intervals not less than\n   * this value.\n   *   * The valid range is 20 <= transportAcknowledgeTimeoutInMsecs <= 1500.\n   * @type {Number}\n   * @default 1000\n   */\n  get transportAcknowledgeTimeoutInMsecs() {\n    return Check.something(this._transportAcknowledgeTimeoutInMsecs)\n      ? this._transportAcknowledgeTimeoutInMsecs\n      : DEFAULTS.transportAcknowledgeTimeoutInMsecs;\n  }\n  set transportAcknowledgeTimeoutInMsecs(val) {\n    this._transportAcknowledgeTimeoutInMsecs = val;\n  }\n\n  /**\n   * The threshold for sending an acknowledgement, as a percentage.\n   * The API sends a transport acknowledgment every\n   * N messages where N is calculated as this percentage of the transport\n   * window size if the endpoint's max-delivered-unacked-msgs-per-flow\n   * setting at bind time is greater than or equal to the transport\n   * window size. Otherwise, N is calculated as this percentage of the\n   * endpoint's max-delivered-unacked-msgs-per-flow setting at bind time.\n   * * The valid range is 1 <= transportAcknowledgeThresholdPercentage <= 75.\n   * @type {Number}\n   * @default 60\n   */\n  get transportAcknowledgeThresholdPercentage() {\n    return Check.something(this._transportAcknowledgeThresholdPercentage)\n      ? this._transportAcknowledgeThresholdPercentage\n      : DEFAULTS.transportAcknowledgeThresholdPercentage;\n  }\n  set transportAcknowledgeThresholdPercentage(value) {\n    this._transportAcknowledgeThresholdPercentage = value;\n  }\n\n}\n\nmodule.exports.QueueBrowserProperties = QueueBrowserProperties;\n","const { EventEmitter } = require('solclient-events');\nconst { LogFormatter } = require('solclient-log');\nconst { MessageConsumerEventName } = require('./message-consumer-event-names');\nconst { QueueBrowserEventName } = require('./queue-browser-event-names');\n\nfunction formatEventName(eventName) {\n  return `QueueBrowserEventName.${QueueBrowserEventName.describe(eventName)}`;\n}\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users.</b>\n * A Queue Browser is created by calling {@link solace.Session#createQueueBrowser}.\n *\n * A Queue Browser allows client applications to look at messages spooled on Endpoints\n * without removing them. Messages are browsed from oldest to newest.\n * After being browsed, messages are still available for consumption over normal flows.\n * However, it is possible to selectively remove messages from the persistent store of an Endpoint.\n * In this case, these removed messages will no longer be available for consumption.\n\n * Note: If browsing a queue with an active consumer, no guarantee is made that the browser will\n * receive all messages published to the queue. The consumer can receive and acknowledge messages\n * before they are delivered to the browser.\n *\n * One typical application is to use Browsers to allow message bus administrators to remove stuck\n * Guaranteed messages from an Endpoint without having to modify or disrupt existing applications.\n * A message can get stuck if:\n *\n *  1) It has been received by an application, but for some reason, that application has failed to\n *     acknowledge it.\n *  2) All active message selectors have failed to match this particular message and therefore the\n *     message bus has not delivered it to any client yet. The current release only supports\n *     browsing Endpoints of type Queue.\n *\n * Note that the delivery restrictions imposed by the queues Access type\n * (exclusive or non-exclusive), do not apply when browsing messages with a Browser.\n *\n * Browser characteristics and behavior are defined by {@link solace.QueueBrowserProperties}.\n * The properties can also be supplied as a simple key-value {Object}. The queue descriptor,\n * {@link solace.QueueBrowserProperties#queueDescriptor} must be specified to identify the\n * Guaranteed Message Queue on the Solace Message Router.\n *\n * The Browser is an EventEmitter, and will emit events to which the application may choose to\n * subscribe, such as the connection to the Solace Message Router going up or down.\n *\n * If a registered listener for an emitted event throws an exception, this is caught and emitted as\n * an 'error'.\n *\n * @fires solace.QueueBrowserEventName#CONNECT_FAILED_ERROR\n * @fires solace.QueueBrowserEventName#DISPOSED\n * @fires solace.QueueBrowserEventName#DOWN\n * @fires solace.QueueBrowserEventName#DOWN_ERROR\n * @fires solace.QueueBrowserEventName#GM_DISABLED\n * @fires solace.QueueBrowserEventName#MESSAGE\n * @fires solace.QueueBrowserEventName#UP\n *\n * @hideconstructor\n * @memberof solace\n */\nclass QueueBrowser extends EventEmitter {\n  constructor(messageConsumer) {\n    super({\n      direct: QueueBrowserEventName.MESSAGE,\n      emits:  QueueBrowserEventName.values,\n      formatEventName,\n    });\n\n    this._messageConsumer = messageConsumer;\n    this.logger = new LogFormatter((...args) =>\n      ['[queue-browser]', ...args]);\n\n    this._setupEventListers();\n  }\n\n  _setupEventListers() {\n    // Listen to message consumer events, redispatch as queue browser events\n    this._messageConsumer.on(MessageConsumerEventName.UP, this._onConsumerUp.bind(this));\n\n    this._messageConsumer.on(MessageConsumerEventName.CONNECT_FAILED_ERROR,\n                             this._onConsumerConnectFailed.bind(this));\n\n    this._messageConsumer.on(MessageConsumerEventName.DOWN, this._onConsumerDown.bind(this));\n\n    this._messageConsumer.on(MessageConsumerEventName.DOWN_ERROR,\n                             this._onConsumerDownError.bind(this));\n\n    this._messageConsumer.on(MessageConsumerEventName.MESSAGE, this._onConsumerMessage.bind(this));\n\n    this._messageConsumer.on(MessageConsumerEventName.DISPOSED,\n                             this._onConsumerDisposed.bind(this));\n\n    this._messageConsumer.on(MessageConsumerEventName.GM_DISABLED,\n                             this._onConsumerGMDisabled.bind(this));\n  }\n\n  _onConsumerMessage(event) {\n    this.emit(QueueBrowserEventName.MESSAGE, event);\n  }\n\n  _onConsumerUp(event) {\n    this.emit(QueueBrowserEventName.UP, event);\n  }\n\n  _onConsumerConnectFailed(event) {\n    this.emit(QueueBrowserEventName.CONNECT_FAILED_ERROR, event);\n  }\n\n  _onConsumerDown(event) {\n    this.emit(QueueBrowserEventName.DOWN, event);\n  }\n\n  _onConsumerDownError(event) {\n    this.emit(QueueBrowserEventName.DOWN_ERROR, event);\n  }\n\n  _onConsumerDisposed(event) {\n    this.emit(QueueBrowserEventName.DISPOSED, event);\n  }\n\n  _onConsumerGMDisabled(event) {\n    this.emit(QueueBrowserEventName.GM_DISABLED, event);\n  }\n\n  /**\n   * Connects the queue browser immediately. The application should add event listeners (see\n   * {@link solace.QueueBrowserEventName}). If there is no listener added for\n   * {@link solace.QueueBrowserEventName#event:MESSAGE} then up to a window\n   * {@link solace.QueueBrowserProperties.windowSize} of messages can be queued internally.\n   * before calling this method.\n   *\n   * @throws {solace.OperationError}\n   *  * if consumer is not supported by router for this client.\n   *  subcode = {@link solace.ErrorSubcode.INVALID_OPERATION}\n   *\n   */\n  connect() {\n    const { LOG_DEBUG, LOG_ERROR } = this.logger;\n    try {\n      LOG_DEBUG('Connecting the queue browser\\'s message consumer');\n      this._messageConsumer.connect();\n    } catch (error) {\n      LOG_ERROR(error.toString());\n      throw error;\n    }\n  }\n\n  /**\n   * Initiates an orderly disconnection of the queue browser. The API will send an unbind request.\n   * Any messages subsequently received are discarded silently.\n   * When the unbind message is acknowledged, the application\n   * receives a {@link solace.QueueBrowserEventName#event:DOWN} event if it has set a listener\n   * for that event.\n   *\n   * @throws {solace.OperationError}\n   * * if the Message Consumer is disconnected.\n   *   subcode = {@link solace.ErrorSubcode.INVALID_OPERATION}\n   */\n  disconnect() {\n    const { LOG_DEBUG, LOG_ERROR } = this.logger;\n\n    try {\n      LOG_DEBUG('Disconnecting the queue browser\\'s message consumer');\n      this._messageConsumer.disconnect();\n    } catch (error) {\n      LOG_ERROR(error.toString());\n      throw error;\n    }\n  }\n\n  /**\n   * Begins delivery of messages to this queue browser. This method opens the protocol window\n   * to the Solace Message Router so further messages can be received.\n   *\n   * A newly created queue browser is in started state.\n   *\n   * If the queue browser was already started, this method has no effect.\n   *\n   * A consumer is stopped by calling {@link solace.QueueBrowser.stop}\n   *\n   * @throws {solace.OperationError}\n   * * if the Queue BrowserMessage Consumer is disposed.\n   *   subcode = {@link solace.ErrorSubcode.INVALID_OPERATION}\n   * * if the Message Consumer is disconnected.\n   *   subcode = {@link solace.ErrorSubcode.INVALID_OPERATION}\n   */\n  start() {\n    const { LOG_DEBUG, LOG_ERROR } = this.logger;\n    try {\n      LOG_DEBUG('Starting the queue browser\\'s message consumer');\n      this._messageConsumer.start();\n    } catch (error) {\n      LOG_ERROR(error.toString());\n      throw error;\n    }\n  }\n\n  /**\n   * Stops messages from being delivered to this queue browser from the Solace Message Router.\n   * Messages may continue to be prefetched by the API and queued internally\n   * until {@link solace.QueueBrowser#start} is called.\n   *\n   * If the queue browser was already stopped, this method has no effect.\n   *\n   * @throws {solace.OperationError}\n   * * if the Queue Browser is disconnected.\n   *   subcode = {@link solace.ErrorSubcode.INVALID_OPERATION}\n   */\n  stop() {\n    const { LOG_DEBUG, LOG_ERROR } = this.logger;\n    try {\n      LOG_DEBUG('Stopping the queue browser\\'s message consumer');\n      this._messageConsumer.stop();\n    } catch (error) {\n      LOG_ERROR(error.toString());\n      throw error;\n    }\n  }\n\n  /**\n   * Removes a message from the queue by acknowledging it.\n   *\n   * The {@link solace.QueueBrowser} does not automatically acknowledge messages.\n   * once they have been received.\n   *\n   * The API does not send acknowledgments immediately. It stores the state for\n   * acknowledged messages internally and acknowledges messages, in bulk, when a\n   * threshold or timer is reached.\n   *\n   * @param {Message} message The message to remove\n   */\n  removeMessageFromQueue(message) {\n    // ack the message to delete it\n    this._messageConsumer.applicationAck(message._guaranteedMsgId);\n    message._acked = true;\n  }\n\n}\n\nmodule.exports.QueueBrowser = QueueBrowser;\n","const { Enum } = require('solclient-eskit');\nconst { LOG_TRACE,\n        LOG_DEBUG } = require('solclient-log');\nconst { Long } = require('solclient-convert');\n\nconst TransportAckResult = Enum.new({\n  OK:           0,\n  DUPLICATE:    1,\n  OUT_OF_ORDER: 2,\n});\n\nclass TransportAcks {\n  constructor(id = 0) {\n    const base = typeof id === 'number' ? Long.fromNumber(id, true) : Long.fromValue(id);\n    this.lastAcked = base;\n    this._acksPending = 0;\n  }\n\n  reset() {\n    this._acksPending = 0;\n    this.lastAcked = Long.ZERO;\n  }\n\n  tryReceive(messageID, prevMessageID) {\n    if (this._lastReceived.lt(prevMessageID)) {\n      LOG_DEBUG(`Rejecting out of order message: ${prevMessageID} (last received: ${this._lastReceived})`);\n      return TransportAckResult.OUT_OF_ORDER;\n    }\n    if (this._lastReceived.gte(messageID)) {\n      LOG_DEBUG(`Rejecting duplicate message: ${messageID} (last received: ${this._lastReceived})`);\n      // duplicate messages indicate the router is retransmitting because it expects a transport ack\n      this._acksPending++;\n      return TransportAckResult.DUPLICATE;\n    }\n    LOG_TRACE(`Accepting message: ${messageID}`);\n    this._lastReceived = messageID;\n    this._acksPending++;\n    return TransportAckResult.OK;\n  }\n\n  setAcked() {\n    this._lastAcked = Long.fromValue(this._lastReceived);\n    this._acksPending = 0;\n  }\n\n  get acksPending() {\n    return this._acksPending;\n  }\n\n  get lastAcked() {\n    return this._lastAcked;\n  }\n\n  /**\n   * Resets the beginning of the ack sequence to the given value.\n   * @param {Long} value The value to set as last acknowledged ID.\n   */\n  set lastAcked(value) {\n    LOG_TRACE('Setting last acked:', value.toString());\n    Object.assign(this, {\n      _lastAcked:    Long.fromValue(value),\n      _lastReceived: Long.fromValue(value),\n    });\n  }\n\n  get lastReceived() {\n    return this._lastReceived;\n  }\n\n  toString() {\n    return util_inspect(this);\n  }\n}\n\nmodule.exports = {\n  TransportAcks,\n  TransportAckResult,\n};\n","const { MessagePublisher } = require('./lib/message-publisher');\nconst { MessagePublisherAcknowledgeMode } = require('./lib/message-publisher-acknowledge-modes');\nconst { MessagePublisherEventName } = require('./lib/message-publisher-event-names');\nconst { MessagePublisherProperties } = require('./lib/message-publisher-properties');\nconst { MessagePublisherPropertiesValidator } = require('./lib/message-publisher-properties-validator');\nconst { PublisherFSMEvent } = require('./lib/publisher-fsm-event');\nconst { PublisherFSMEventNames } = require('./lib/publisher-fsm-event-names');\n\nmodule.exports.MessagePublisherAcknowledgeMode = MessagePublisherAcknowledgeMode;\nmodule.exports.MessagePublisher = MessagePublisher;\nmodule.exports.MessagePublisherProperties = MessagePublisherProperties;\nmodule.exports.PublisherFSMEvent = PublisherFSMEvent;\nmodule.exports.PublisherFSMEventNames = PublisherFSMEventNames;\nmodule.exports.MessagePublisherPropertiesValidator = MessagePublisherPropertiesValidator;\nmodule.exports.MessagePublisherEventName = MessagePublisherEventName;\n","const { Long } = require('solclient-convert');\n\nconst DEFAULTS = {\n  _lastAcked: Long.fromNumber(0, true),\n  _lastSent:  Long.fromNumber(0, true),\n  _next:      Long.fromNumber(1, true),\n};\n\nconst longToString = v => v.toString(10);\n\nclass MessageIds {\n  constructor(attrs) {\n    Object.assign(this, DEFAULTS, attrs);\n  }\n\n  get lastAcked() {\n    return this._lastAcked;\n  }\n  set lastAcked(value) {\n    this._lastAcked = Long.fromValue(value);\n  }\n\n  get lastSent() {\n    return this._lastSent;\n  }\n  setLastSent(id) {\n    this._lastSent = Long.fromValue(id);\n    this._next = this._lastSent.add(1);\n  }\n\n  get next() {\n    return this._next;\n  }\n\n  [util_inspect_custom]() {\n    return {\n      'lastAcked': longToString(this.lastAcked),\n      'lastSent':  longToString(this.lastSent),\n      'next':      longToString(this.next),\n    };\n  }\n\n  toString() {\n    return util_inspect(this);\n  }\n}\n\nmodule.exports.MessageIds = MessageIds;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Represents authentication scheme enumeration.\n * @enum {string}\n * @namespace\n * @memberof solace\n */\nconst MessagePublisherAcknowledgeMode = {\n  /**\n   * @description Applications receive an acknowledgement for every\n   * message.\n   * @type {String}\n   */\n  PER_MESSAGE: 'PER_MESSAGE',\n  /**\n   * @description Applications receive a windowed acknowledgement that\n   * acknowledges the returned correlation identifier and every message sent prior.\n   * @type {String}\n   */\n  WINDOWED:    'WINDOWED',\n};\n\nmodule.exports.MessagePublisherAcknowledgeMode = Enum.new(MessagePublisherAcknowledgeMode);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * The publisher currently isn't exposed, and its events are dispatched\n * via the Session. These events are therefore private. They should\n * be moved to MessageConsumerEventName when they are made public.\n * @private\n */\nconst MessagePublisherEventName = Enum.new({\n  ACKNOWLEDGED_MESSAGE:      'MessagePublisherEventName_acknowledgedMessage',\n  CONNECT_FAILED_ERROR:      'MessagePublisherEventName_connectFailedError',\n  CAN_SEND:                  'MessagePublisherEventName_canSend',\n  DISPOSED:                  'MessagePublisherEventName_disposed',\n  DOWN:                      'MessagePublisherEventName_down',\n  FLOW_NAME_CHANGED:         'MessagePublisherEventName_flowNameChanged',\n  GUARANTEED_MESSAGING_DOWN: 'MessagePublisherEventName_guaranteedMessagingDown',\n  REJECTED_MESSAGE:          'MessagePublisherEventName_rejectedMessage',\n  DISCONNECT_FAILED_ERROR:   'MessagePublisherEventName_disconnectFailedError',\n  UP:                        'MessagePublisherEventName_up',\n  TRANSPORT_FULL:            'MessagePublisherEventName_transportFull',\n});\n\nmodule.exports.MessagePublisherEventName = MessagePublisherEventName;\n","const { APIPropertiesValidators } = require('solclient-util');\nconst { MessagePublisherAcknowledgeMode } = require('./message-publisher-acknowledge-modes');\n\nconst {\n  validateInstance,\n  valBoolean,\n  valIsMember,\n  valNumber,\n  valRange,\n} = APIPropertiesValidators;\n\n\nconst MessagePublisherPropertiesValidator = {\n  validate(instance) {\n    const v = validateInstance.bind(null, 'MessagePublisherProperties', instance);\n    v('enabled', [valBoolean]);\n    v('windowSize', [valNumber], [valRange, 1, 255]);\n    v('acknowledgeTimeoutInMsecs', [valNumber], [valRange, 20, 60000]);\n    v('acknowledgeMode', [valIsMember, MessagePublisherAcknowledgeMode, 'MessagePublisherAcknowledgeMode']);\n    v('connectRetryCount', [valNumber], [valRange, 0, Number.MAX_VALUE]);\n    v('connectTimeoutInMsecs', [valNumber], [valRange, 50, Number.MAX_VALUE]);\n  },\n};\n\nmodule.exports.MessagePublisherPropertiesValidator = MessagePublisherPropertiesValidator;\n","const SolclientFactoryLib = require('solclient-factory');\nconst { APIProperties } = require('solclient-util');\nconst { Check } = require('solclient-validate');\nconst { MessagePublisherAcknowledgeMode } = require('./message-publisher-acknowledge-modes');\nconst { TransportCapabilities } = require('solclient-transport');\n\nfunction defaultEnablePublisher() {\n  const { ProfileBinding } = SolclientFactoryLib;\n  const binding = ProfileBinding.value;\n  const globallyEnabled = binding.guaranteedMessagingEnabled;\n  const webSocketAvailable = TransportCapabilities.web.webSocket();\n  return globallyEnabled && webSocketAvailable;\n}\n\nfunction getDefaults() {\n  return {\n    enabled:                   defaultEnablePublisher(),\n    windowSize:                50,\n    acknowledgeTimeoutInMsecs: 2000,\n    acknowledgeMode:           MessagePublisherAcknowledgeMode.PER_MESSAGE,\n    connectRetryCount:         3,\n    connectTimeoutInMsecs:     5000,\n  };\n}\n\n/**\n * @classdesc\n * Properties that define the configuration for a guaranteed message publisher.\n *\n * @memberof solace\n */\nclass MessagePublisherProperties extends APIProperties {\n  /**\n   * @constructor\n   * @param {Object} options Properties to apply to the newly constructed object.\n   */\n  constructor(options) {\n    super(getDefaults(), options || {});\n  }\n  /**\n   * @name solace.MessagePublisherProperties#enabled\n   * @type {Boolean}\n   * @description When enabled, a Guaranteed Messaging Publisher\n   * is automatically created when a session is connected.\n   *\n   * The default value is the same as the value provided to\n   * {@link solace.SolclientFactory.init},\n   * in the profile, {@link solace.SolclientFactoryProperties#profile},\n   * in the field {@link solace.FactoryProfile#guaranteedMessagingEnabled}.\n   */\n  get enabled() {\n    return this._enabled;\n  }\n  set enabled(newValue) {\n    this._enabled = newValue;\n  }\n  /**\n   * @name solace.MessagePublisherProperties#windowSize\n   * @default 50\n   * @type {Number}\n   * @description  Maximum number of messages that can be published\n   * without acknowledgment.\n   *  * The valid range is 1 <= value <= 255\n   */\n  get windowSize() {\n    return Check.defined(this._windowSize)\n      ? this._windowSize\n      : getDefaults().windowSize;\n  }\n  set windowSize(newValue) {\n    this._windowSize = newValue;\n  }\n  /**\n   * @name solace.MessagePublisherProperties#acknowledgeTimeoutInMsecs\n   * @type {Number}\n   * @default 2000\n   * @description  The time to wait for an acknowledgement,\n   * in milliseconds, before retransmitting unacknowledged\n   * messages.\n   *  * The valid range is 20 <= value <= 60000.\n   */\n  get acknowledgeTimeoutInMsecs() {\n    return Check.defined(this._acknowledgeTimeoutInMsecs)\n      ? this._acknowledgeTimeoutInMsecs\n      : getDefaults().acknowledgeTimeoutInMsecs;\n  }\n  set acknowledgeTimeoutInMsecs(newValue) {\n    this._acknowledgeTimeoutInMsecs = newValue;\n  }\n  /**\n   * @name solace.MessagePublisherProperties#acknowledgeMode\n   * @type {solace.MessagePublisherAcknowledgeMode}\n   * @default {@link solace.MessagePublisherAcknowledgeMode.PER_MESSAGE}\n   * @description  The message-router sends windowed acknowledgements\n   * which the API converts to per-message acknowledgement by default. If\n   * acknowledgeMode is Windowed, then the API will simply pass through\n   * the message-router acknowledgements.\n   */\n  get acknowledgeMode() {\n    return this._acknowledgeMode || MessagePublisherAcknowledgeMode.PER_MESSAGE;\n  }\n  set acknowledgeMode(newValue) {\n    this._acknowledgeMode = newValue;\n  }\n  /**\n   * @name solace.MessagePublisherProperties#connectRetryCount\n   * @type {Number}\n   * @default 3\n   * @description The number of times to retry a bind (aka open-flow) request\n   * before deciding the the Guaranteed Message Publisher cannot be started.\n   *  * The valid range 0 <= value.\n   * @private\n   */\n  get connectRetryCount() {\n    return Check.defined(this._connectRetryCount)\n      ? this._connectRetryCount\n      : getDefaults().connectRetryCount;\n  }\n  set connectRetryCount(newValue) {\n    this._connectRetryCount = newValue;\n  }\n  /**\n   * @name solace.MessagePublisherProperties#connectTimeoutInMsecs\n   * @type {Number}\n   * @default 5000\n   * @description  The time to wait for an bind response,\n   * in milliseconds, before retransmitting the bind request.\n   *  * The valid range is 50 <= value</li>\n   * @private\n   */\n  get connectTimeoutInMsecs() {\n    return Check.defined(this._connectTimeoutInMsecs)\n      ? this._connectTimeoutInMsecs\n      : getDefaults().connectTimeoutInMsecs;\n  }\n  set connectTimeoutInMsecs(newValue) {\n    this._connectTimeoutInMsecs = newValue;\n  }\n\n  [util_inspect_custom]() {\n    return {\n      enabled:                   this.enabled,\n      windowSize:                this.windowSize,\n      acknowledgeTimeoutInMsecs: this.acknowledgeTimeoutInMsecs,\n      acknowledgeMode:           MessagePublisherAcknowledgeMode.describe(this.acknowledgeMode),\n      connectRetryCount:         this.connectRetryCount,\n      connectTimeoutInMsecs:     this.connectTimeoutInMsecs,\n    };\n  }\n}\n\nmodule.exports.MessagePublisherProperties = MessagePublisherProperties;\n","const SMFLib = require('solclient-smf');\nconst { Flow, PrivateFlowEventName } = require('solclient-flow');\nconst { LogFormatter } = require('solclient-log');\nconst { MessagePublisherEventName } = require('./message-publisher-event-names');\nconst { MessagePublisherProperties } = require('./message-publisher-properties');\nconst { PublisherFSM } = require('./publisher-fsm');\nconst { PublisherFSMEvent } = require('./publisher-fsm-event');\nconst { PublisherFSMEventNames } = require('./publisher-fsm-event-names');\n\nconst { LOG_WARN } = new LogFormatter();\n\nclass MessagePublisher extends Flow {\n  /**\n   * Represents a Guaranteed Message Publisher.  This object must be used to publish\n   * Guaranteed Messages on a session.\n   *\n   * Publishers are created on sessions.  In this implementation the session functions are provided\n   * by the sessionFSM.  Publishers require the session to provide\n   * basic communications functions:\n   *  * send - send a message to the transport\n   *  * getCorrelationTag - return a unique transport correlation tag\n   *  * enqueueOutstandingCorrelatedReq - enqueue a callback for a received message\n   *    on a correlation tag\n   *\n   * @constructor\n   * @param {Object} properties Expected schema is\n   *  {@link solace.MessagePublisherProperties}\n   * @param {Object} sessionInterfaceFactory The session for the Guaranteed Message Publisher\n   * @private\n   */\n  constructor({ properties, sessionInterfaceFactory } = {}) {\n    const applyProperties = new MessagePublisherProperties(properties);\n    super(applyProperties, sessionInterfaceFactory, {\n      direct: MessagePublisherEventName.ACKNOWLEDGED_MESSAGE,\n      emits:  MessagePublisherEventName.values, // super adds MessageConsumerEventName\n    });\n    this._fsm = this._makeFSM();\n    const logger = new LogFormatter();\n    logger.formatter = function formatter(...args) {\n      return [\n        '[message-publisher]',\n        ...args,\n      ];\n    };\n    this.log = logger.wrap(this.log, this);\n\n    // Doesn't emit anything unless started; won't start unless bindWaiting\n    this._bindWaiting = true;\n\n    this.on(PrivateFlowEventName.BIND_WAITING, this._onBindWaiting.bind(this));\n    this.on(MessagePublisherEventName.CONNECT_FAILED_ERROR, this._onBindFailed.bind(this));\n    this.on(MessagePublisherEventName.DOWN, this._onDown.bind(this));\n    this.on(MessagePublisherEventName.UP, this._onUp.bind(this));\n  }\n\n  _onBindFailed() {\n    this._bindWaiting = false;\n  }\n\n  _onBindWaiting() {\n    this._bindWaiting = true;\n  }\n\n  _onDown() {\n    this._bindWaiting = false;\n  }\n\n  _onUp() {\n    this._bindWaiting = false;\n  }\n\n  /**\n   * @override\n   * @private\n   */\n  _makeFSM() {\n    return new PublisherFSM({\n      publisher:        this,\n      name:             'PublisherFSM',\n      sessionInterface: this._sessionInterface,\n      properties:       this._properties,\n    });\n  }\n\n  /**\n   * @returns {Long} The flow ID of this flow\n   */\n  get flowId() {\n    return this._flowId;\n  }\n  /**\n   * @param {Long} value The flow ID for this flow\n   * @private\n   */\n  set flowId(value) {\n    this._flowId = value;\n  }\n\n  /**\n   * @returns {String} The publisher name set for this flow\n   */\n  get name() {\n    return this._flowName;\n  }\n  /**\n   * @param {String} value The name to set on this flow\n   * @private\n   */\n  set name(value) {\n    this._flowName = value;\n  }\n\n  /**\n   * @returns {Number} The publisher ID set on this flow\n   */\n  get publisherId() {\n    return this._publisherId;\n  }\n  /**\n   * @param {Number} value The publisher ID to set on this flow\n   */\n  set publisherId(value) {\n    this._publisherId = value;\n  }\n\n  /**\n   * @readonly\n   * @returns {solace.MessagePublisherProperties} A clone of the publisher's properties.\n   */\n  get properties() {\n    return this._properties.clone();\n  }\n\n  /**\n   *\n   * @override\n   * @memberof MessagePublisher\n   */\n  connect() {\n    super.connect();\n    if (!this._fsm.getCurrentState()) {\n      this._fsm.start();\n    }\n  }\n\n  /**\n   * Application has disconnected the session, so\n   * disconnects the Guaranteed Message Publisher.\n   * @private\n   */\n  _disconnectSession() {\n    super._disconnectSession();\n    this.processFSMEvent(new PublisherFSMEvent({ name: PublisherFSMEventNames.FLOW_CLOSE }));\n  }\n\n  /**\n   * @returns {solace.MessagePublisherEventName} The name of the disposed event for this flow\n   * @private\n   */\n  getDisposedEvent() { // eslint-disable-line class-methods-use-this\n    return MessagePublisherEventName.DISPOSED;\n  }\n\n  /**\n   * Handles an incoming ACK for the given message ID.\n   * @param {Long} id The message id for acknowledgement.\n   * @private\n   */\n  handleAck(id) {\n    this.processFSMEvent(new PublisherFSMEvent(\n      { name: PublisherFSMEventNames.ACK },\n      { ack: id }\n    ));\n  }\n\n  /**\n   * Handles an incoming NACK for the given message ID.\n   * @param {Long} id The message id for acknowledgement.\n   * @param {AdCtrlMessage} ctrlMessage The NACK message\n   * @private\n   */\n  handleNack(id, ctrlMessage) {\n    this.processFSMEvent(new PublisherFSMEvent(\n      { name: PublisherFSMEventNames.ACK },\n      { nack: id, ctrlMessage }\n    ));\n  }\n\n  /**\n   * @override\n   */\n  handleUncorrelatedControlMessage(message) {\n    const msgType = message.msgType;\n    const { SMFAdProtocolMessageType } = SMFLib;\n    switch (msgType) {\n      case SMFAdProtocolMessageType.CLIENTACK:\n        {\n          const id = message.getLastMsgIdAcked();\n          if (message.smfHeader.pm_respcode > 299) {\n            this.handleNack(id, message);\n          } else {\n            this.handleAck(id);\n          }\n          break;\n        }\n      case SMFAdProtocolMessageType.CLIENTNACK:\n        {\n          const id = message.getLastMsgIdAcked();\n          this.handleNack(id, message);\n          break;\n        }\n      case SMFAdProtocolMessageType.CLOSEPUBFLOW:\n        this.processFSMEvent(new PublisherFSMEvent(\n          { name: PublisherFSMEventNames.FLOW_UNBOUND })\n        );\n        break;\n      default:\n        LOG_WARN(`Dropping unhandled AD control message for ${this}`,\n                 SMFAdProtocolMessageType.describe(msgType));\n    }\n  }\n\n  /**\n   * Prepares an AD message for publishing on this flow.\n   * @param {Message} dataMsg The message to be prepared for publishing.\n   * @returns {TransportReturnCode} transport level returnCode\n   * @private\n   */\n  prepareAdMessageAndSend(dataMsg) {\n    return this._fsm.prepareAdMessageAndSend(dataMsg);\n  }\n\n  isBindWaiting() {\n    return this._bindWaiting;\n  }\n\n  /**\n   * @returns {String} Formatted inspector output\n   * @private\n   */\n  [util_inspect_custom]() {\n    return Object.assign(super[util_inspect_custom](), {\n      'name':        this.name,\n      'publisherId': this.publisherId,\n    });\n  }\n\n  /**\n   * @override\n   */\n  toString() {\n    return util_inspect(this);\n  }\n\n  /**\n   * Disposes the FSM associated with this flow.\n   *\n   * @private\n   */\n  _disposeFSM() {\n    this.processFSMEvent(new PublisherFSMEvent({ name: PublisherFSMEventNames.DISPOSE }));\n  }\n\n  _isDisconnected() {\n    return this._fsm.isDisconnected();\n  }\n\n}\n\nmodule.exports.MessagePublisher = MessagePublisher;\n","const { Enum } = require('solclient-eskit');\n\n/********************************************************************************\n * @private\n * Events on the Publisher FSM\n * @enum {string}\n ********************************************************************************/\nconst PublisherFSMEventNames = {\n  SESSION_UP:       'PublisherSessionUp',\n  SESSION_UP_NO_AD: 'PublisherSessionUpNoAD',\n  SESSION_DOWN:     'PublisherSessionDown',\n  FLOW_FAILED:      'MessagePublisherFailed',\n  FLOW_UP:          'MessagePublisherUp',\n  FLOW_CLOSE:       'MessagePublisherClose',\n  FLOW_UNBOUND:     'MessagePublisherUnbound',\n  TRANSPORT_FULL:   'PublisherTransportFull',\n  ACK:              'PublisherAck',\n  ACK_TIMEOUT:      'PublisherAckTimeout',\n  BIND_TIMEOUT:     'PublisherBindTimeout',\n  UNBIND_TIMEOUT:   'PublisherUnbindTimeout',\n  CAN_SEND:         'PublisherCanSend',\n  TRANSPORT_ERROR:  'PublisherTransportError',\n  RESEND_COMPLETE:  'PublisherResendComplete',\n  DISPOSE:          'PublisherDispose',\n};\n\nmodule.exports.PublisherFSMEventNames = Enum.new(PublisherFSMEventNames);\n","const { FsmEvent } = require('solclient-fsm');\n\n/**\n *\n * PublisherFSMEvent extends {@link FsmEvent}.  This object should be used for all events\n * passed to the SessionFSM.  This extension provides members to carry information specfic to\n * the SessionFSM transitions.\n * @extends {FsmEvent}\n * @private\n */\nclass PublisherFSMEvent extends FsmEvent {\n  /**\n   * @constructor\n   * @param {Object} spec The specification for this event\n   * @param {?Object} details The details to assign to this event object\n   * @param {Message|BaseMessage} smfmessage The message associated with this event\n   */\n  constructor(spec, details, smfmessage) {\n    super(spec);\n    Object.assign(this, details);\n    Object.assign(this, smfmessage);\n  }\n  getEventText() {\n    return this._eventText;\n  }\n}\n\nmodule.exports.PublisherFSMEvent = PublisherFSMEvent;\n","const SMFLib = require('solclient-smf');\n// No idea why the usual import idiom does not work.\n//const { CapabilityType } = require('solclient-session');\nconst SolclientSession = require('solclient-session');\nconst { ErrorResponseSubcodeMapper,\n        ErrorSubcode,\n        OperationError } = require('solclient-error');\nconst { LogFormatter } = require('solclient-log');\nconst { Long } = require('solclient-convert');\nconst { MessageIds } = require('./message-ids');\nconst { MessagePublisherAcknowledgeMode } = require('./message-publisher-acknowledge-modes');\nconst { MessagePublisherEventName } = require('./message-publisher-event-names');\nconst { PrivateFlowEventName } = require('solclient-flow');\nconst { PublisherFSMEvent } = require('./publisher-fsm-event');\nconst { PublisherFSMEventNames } = require('./publisher-fsm-event-names');\nconst { PublisherStateNames } = require('./publisher-state-names');\nconst { State, StateMachine } = require('solclient-fsm');\nconst { StatType } = require('solclient-stats');\nconst { TransportReturnCode } = require('solclient-transport');\n\nconst ConnectReason = {\n  INIT:     0, // never connected: message renumbering required\n  RESUME:   1, // connected before\n  FAILOVER: 2, // after a DR failover: message renumbering and message republish event required\n};\n\nclass PublisherFSM extends StateMachine {\n  constructor({ publisher, name, sessionInterface, properties } = {}) {\n    super({ name });\n    /** @type {MessagePublisher} */\n    const fsm = this;\n    const currentState = () => {\n      const state = fsm.getCurrentState();\n      return state ? state.getName() : '<not running>';\n    };\n    this.logger = new LogFormatter((...args) => [\n      `[session=${sessionInterface.sessionIdHex}]`,\n      `[message-publisher-fsm=${publisher.flowIdDec}]`,\n      `[${currentState()}]`,\n      ...args,\n    ]);\n    this.log = this.logger.wrap(this.log, this);\n    const {\n      LOG_TRACE,\n      LOG_DEBUG,\n      LOG_INFO,\n      LOG_WARN,\n    } = this.logger;\n\n    Object.assign(this, {\n      _publisher:                 publisher,\n      _acknowledgeMode:           properties.acknowledgeMode,\n      _acknowledgeTimeoutInMsecs: properties.acknowledgeTimeoutInMsecs,\n      _sessionInterface:          sessionInterface,\n      _windowSize:                properties.windowSize,\n      _stateEvents:               [],\n    });\n    // The publisher is not even constructed when publisherProperties.enabled is false\n    // so we could just set _guaranteedEnabled to true, but lets be thorough as at\n    // some point we may want to have sendADMessage() be responsible for throwing all\n    // errors. As it is, when publisher properties enabled is false, the session-fsm\n    // throws an error and when the message-spool is shutdown (close-flow received) the\n    // publisher-fsm thtows and error.\n    this._guaranteedEnabled = properties.enabled;\n    this._sendWindow = properties.windowSize;\n    this._resetConnectedInfo();\n    this._notifiedWindowClosed = false;\n    // We need a boolean to track the transport flow\n    // controlled state. prepareAdMessageAndSend is called by the\n    // session to prepare a message for publish and we\n    // need to return whether or not we are flow controlled\n    // without invoking the FSM or calling methods on the\n    // FSM.\n    // We consider all down states and all resending states equal\n    // to flow-controlled as in all states me must queue the message\n    // to the unacked list and not attempt to send directly.\n    // This is strictly a performance issue.\n    this._transportFlowControlled = true;\n\n    this.initial(function onInitial() {\n      return this.transitionTo(fsm.PublisherUnbound,\n                               (context) => {\n                                 LOG_TRACE(`Starting ${context.getStateMachine().getName()}`);\n                               }\n      );\n    });\n\n    fsm.unhandledEventReaction(function onUnhandledEvent(event) {\n      switch (event.getName()) {\n        case PublisherFSMEventNames.FLOW_UNBOUND:\n          // the router has closed the flow, likely due to operator\n          // shutdown on the message spool. Throw on any attempt\n          // to publish\n          this._guaranteedEnabled = false;\n          this._publisher.emit(MessagePublisherEventName.GUARANTEED_MESSAGING_DOWN);\n          return this.transitionTo(\n            fsm.PublisherUnbound,\n            (context) => {\n              LOG_TRACE(`Received close publisher for ${context.getStateMachine().getName()}`);\n            });\n        case PublisherFSMEventNames.DISPOSE:\n          LOG_TRACE('Received dispose request');\n          break;\n        case PublisherFSMEventNames.TRANSPORT_FULL:\n          LOG_TRACE('Received TRANSPORT_FULL');\n          break;\n        case PublisherFSMEventNames.CAN_SEND:\n          // This is ok because the session just sends the publisher CAN_SEND whenever received\n          // from transport, even if the publisher is not in use, or hasn't caused the flow control\n          LOG_TRACE('Received CAN_SEND when not flow controlled');\n          break;\n        default:\n          LOG_TRACE(`Ignoring event ${event.getName()}`);\n      }\n      return this;\n    });\n\n    fsm.PublisherUnbound = new State({\n      name:          PublisherStateNames.UNBOUND,\n      parentContext: fsm,\n    }, {\n      emitDownAndBindWaiting() {\n        LOG_TRACE('Emit down and bind waiting');\n        publisher.emit(MessagePublisherEventName.DOWN);\n        publisher.emit(PrivateFlowEventName.BIND_WAITING);\n      },\n    })\n      .entry(function onEntry() {\n        this.emitDownAndBindWaiting();\n        fsm._connectRetryCount = properties.connectRetryCount;\n      })\n      .reaction(PublisherFSMEventNames.FLOW_UNBOUND, function onFlowUnbind() {\n        return this.internalTransition();\n      })\n      .reaction(PublisherFSMEventNames.SESSION_UP, function onSessionUp() {\n        return this.transitionTo(fsm.PublisherOpenFlowSent);\n      });\n\n    fsm.PublisherOpenFlowSent = new State({\n      name:          PublisherStateNames.OPENFLOWSENT,\n      parentContext: fsm,\n    }, {\n      emitOpenFlowFailedError(details) {\n        publisher.emit(MessagePublisherEventName.CONNECT_FAILED_ERROR, details);\n      },\n      /**\n       * @param {AdProtocolMessage} adpMsg An OPENFLOW response.\n       * @description Handle an incoming Guaranteed Messaging Protocol Message.\n       * @returns {?} The result of processing an event, or null if no event was dispatched.\n       * @private\n       */\n      handleOpenFlowResponse(adpMsg) {\n        const smfRespHeader = adpMsg.smfHeader;\n        const respCode = smfRespHeader.pm_respcode;\n        /*\n         * Assured Control Protocol messages are received on publisher and consumer flows. The\n         * message types for each are unique, so we can determine whether it is a publisher or\n         * consumer by message type.  A specific publisher or consumer is found by the flowId, or\n         * by the correlation tag in the case of OPEN-FLOW (publisher) or BIND (consumer) responses.\n         */\n        if (adpMsg.msgType !== SMFLib.SMFAdProtocolMessageType.OPENPUBFLOW) {\n          return fsm.processEvent(new PublisherFSMEvent(\n              { name: PublisherFSMEventNames.FLOW_FAILED },\n              {\n                returnCode:  respCode,\n                description: `Unexpected response: ${SMFLib.SMFAdProtocolMessageType.describe(adpMsg.msgType)}`,\n              }\n          ));\n        }\n\n        /*\n         * The response code will indicate whether we create a PUB_FLOW_UP (200 OK) event\n         * or a PUB_FLOW_FAIL (any other response) event, or treat this as an invalid\n         * message (received a OPEN-PUB-FLOW request).\n         */\n\n        if (respCode === null) {\n          // Drop message and increment stats\n          publisher.incStat(StatType.RX_DISCARD_SMF_UNKNOWN_ELEMENT);\n          LOG_DEBUG(`Drop Open-Publisher-Flow Request message on sessionId 0x${\n                    sessionInterface.sessionIdHex}`);\n          return null;\n        }\n\n        if (respCode !== 200) {\n          const respStr = smfRespHeader.pm_respstr;\n          const mappedSubcode = ErrorResponseSubcodeMapper.getADErrorSubcode(respCode, respStr);\n          return fsm.processEvent(new PublisherFSMEvent(\n            { name: PublisherFSMEventNames.FLOW_FAILED },\n            {\n              subcode:     mappedSubcode,\n              returnCode:  respCode,\n              description: respStr,\n            })\n          );\n        }\n\n        LOG_TRACE('Handling OPENPUBFLOW message');\n\n        // typical response: { lastmsgidacked window flowid flowname publisher_id }\n\n        const lastMsgIDAcked = adpMsg.getLastMsgIdAcked();\n        const window = adpMsg.getWindow();\n        const flowId = adpMsg.getFlowId();\n        const flowName = adpMsg.getFlowName();\n        const publisherId = adpMsg.getPublisherId();\n\n        LOG_DEBUG(`OPENPUBFLOW response attributes: lastMsgIDAcked=${lastMsgIDAcked} window=${window} flowId=${flowId} flowName=${flowName} publisherId=${publisherId}`);\n\n        LOG_TRACE(`Local before handling response: ${fsm._messageIds}`);\n\n        if (window === undefined) {\n          return fsm.processEvent(\n            new PublisherFSMEvent({ name: PublisherFSMEventNames.FLOW_FAILED },\n                                  { description: 'Window parameter not found' })\n          );\n        }\n        if (window > this._windowSize) {\n          return fsm.processEvent(\n            new PublisherFSMEvent({ name: PublisherFSMEventNames.FLOW_FAILED },\n                                  { description: 'Invalid window negotiation' })\n          );\n        }\n        // reduce sendWindow by the size of unAckedList but do not reduce below zero\n        fsm._sendWindow = window - fsm._unackedList.length;\n        if (fsm._sendWindow < 0) fsm._sendWindow = 0;\n\n        // update publisher info before renumbering\n        Object.assign(fsm._publisher, {\n          name: flowName,\n          flowId,\n          publisherId,\n        });\n        // we may have been disabled by a previous closeFlow messsage, now that\n        // we know hte message spool is enabled again, set _guaranteedEnabled back\n        // to true\n        fsm._guaranteedEnabled = true;\n\n        if ((fsm._connectReason === ConnectReason.INIT) ||\n          (fsm._connectReason === ConnectReason.FAILOVER)) {\n          // reset 'lastSent' before renumbering\n          fsm._messageIds.setLastSent(lastMsgIDAcked);\n\n          LOG_DEBUG(`Renumbering unacked/unsent messages: fsm._messageIds=${fsm._messageIds}, lastMsgIDAcked=${lastMsgIDAcked}, type=${fsm._connectReason}`);\n          if (fsm._connectReason === ConnectReason.FAILOVER) {\n            publisher.emit(MessagePublisherEventName.FLOW_NAME_CHANGED, {\n              messages: [...fsm._unackedList],\n              count:    fsm._unackedList.length,\n            });\n          }\n          fsm._connectReason = ConnectReason.RESUME;\n          fsm._unackedList.forEach((message) => {\n            const oldId = message.getGuaranteedMessageId();\n            fsm._renumber(message);\n            LOG_TRACE(`Renumbering message ID: from ${oldId} to ${message.getGuaranteedMessageId()}`);\n            fsm._messageIds.setLastSent(message.getGuaranteedMessageId());\n          });\n        } else {\n          fsm._unackedList.forEach((message) => {\n            message.setFlowId(flowId);\n            message.setPublisherId(publisher.publisherId);\n            LOG_TRACE(`Set FlowId to ${flowId} in msg# ${message.getGuaranteedMessageId()}`);\n          });\n        }\n        // Either way, make sure none of the messages is above the size limit:\n        const payloadSizeLimit = fsm._sessionInterface.getCapability(SolclientSession.CapabilityType.MAX_GUARANTEED_MSG_SIZE).getValue();\n        fsm._unackedList.forEach((message) => {\n          if (payloadSizeLimit < message._memoized_payload.length) {\n            LOG_WARN(`Message size ${message._memoized_payload.length} above broker limit ${payloadSizeLimit}`);\n          }\n        });\n\n\n        if (fsm._unackedList.length) {\n          fsm._handleAck(lastMsgIDAcked, false, adpMsg, true);\n          // the starting point for retransmitting.  If lastMsgIdAcked doesn't\n          // ack anything this does not get updates, causing us to possible send\n          // messages out of order, or not start sending at all\n          fsm._firstUnackedToSend = fsm._unackedList[0];\n        } else {\n          fsm._messageIds.lastAcked = Long.fromValue(lastMsgIDAcked);\n        }\n        LOG_TRACE(`Local after applying lastMsgIDAcked: ${fsm._messageIds}`);\n\n        return fsm.processEvent(\n          new PublisherFSMEvent({ name: PublisherFSMEventNames.FLOW_UP }));\n      },\n      /**\n       * @returns {?} The result of processing an BIND_TIMEOUT event\n       * @private\n       */\n      handleOpenFlowTimeout() {\n        LOG_INFO('Open publisher connection timeout');\n        return fsm.processEvent(\n          new PublisherFSMEvent({ name: PublisherFSMEventNames.BIND_TIMEOUT }));\n      },\n      handleUnknownFlowName() {\n        LOG_INFO('Flow name unknown, republish required');\n        // Don't send the FLOW_NAME_CHANGED message yet -- it specifically indicates\n        // that duplicate messages should be expected. Wait until the flow is successfully\n        // connected and messages are being renumbered.\n        fsm._resetConnectedInfo(true);\n        return this.externalTransitionTo(fsm.PublisherOpenFlowSent);\n      },\n      /**\n       * Send a Publisher Open Flow Request.\n       * @private\n       */\n      sendOpenFlow() {\n        const correlationTag = sessionInterface.getCorrelationTag();\n        LOG_TRACE(`sendOpenFlow correlationTag: ${correlationTag}`);\n        const openPubFlowMsg = SMFLib.AdProtocolMessage.getOpenMessagePublisher(\n          fsm._messageIds.lastAcked,\n          fsm._messageIds.lastSent,\n          properties.windowSize,\n          fsm._publisher._flowName,\n          correlationTag\n        );\n        LOG_TRACE('sendOpenFlow openPubFlowMsg constituents:');\n        LOG_TRACE(`fsm._messageIds.lastAcked:${fsm._messageIds.lastAcked} fsm._messageIds.lastSent:${fsm._messageIds.lastSent} properties.windowSize:${properties.windowSize} fsm._publisher._flowName:${fsm._publisher._flowName} `);\n        sessionInterface.sendControl(openPubFlowMsg);\n        sessionInterface.enqueueRequest(correlationTag,\n                                        () => this.handleOpenFlowTimeout(),\n                                        properties.connectTimeoutInMsecs,\n                                        null,\n                                        rxMsgObj => this.handleOpenFlowResponse(rxMsgObj));\n        LOG_TRACE('Sent open publisher connection');\n      },\n    })\n      .entry(function onEntry() {\n        try {\n          this.sendOpenFlow();\n        } catch (e) {\n          LOG_WARN(`Exception during bind attempt: ${e}`);\n          fsm.processEvent(new PublisherFSMEvent({ name: PublisherFSMEventNames.SESSION_DOWN }));\n        }\n      })\n      .reaction(PublisherFSMEventNames.FLOW_CLOSE, function onFlowClose() {\n        return this.transitionTo(fsm.PublisherCloseFlowSent);\n      })\n      .reaction(PublisherFSMEventNames.FLOW_UP, function onFlowUp() {\n        return this.transitionTo(fsm.PublisherUp);\n      })\n      .reaction(PublisherFSMEventNames.SESSION_DOWN, function onSessionDown() {\n        return this.transitionTo(fsm.PublisherUnbound);\n      })\n      .reaction(PublisherFSMEventNames.BIND_TIMEOUT, function onOpenFlowTimeout() {\n        if (fsm._connectRetryCount > 0) {\n          fsm._connectRetryCount--;\n          return this.externalTransitionTo(fsm.PublisherOpenFlowSent);\n        }\n        this.emitOpenFlowFailedError({\n          subcode:     ErrorSubcode.TIMEOUT,\n          description: 'Open publisher connection failed due to timeout',\n        });\n        return this.transitionTo(fsm.PublisherUnbound);\n      })\n      .reaction(PublisherFSMEventNames.FLOW_FAILED, function onFlowFailed(pEvent) {\n        const { subcode, returnCode, description } = pEvent;\n        LOG_TRACE(`FLOW_FAILED in PublisherOpenFlowSent state: subcode: ${subcode}, returnCode: ${returnCode}, description: ${description}`);\n        switch (pEvent.subcode) {\n          case ErrorSubcode.UNKNOWN_FLOW_NAME:\n            // DR or long HA failover\n            return this.handleUnknownFlowName();\n          // case ErrorSubcode.GM_NOT_READY: Fail the session\n          default:\n            this.emitOpenFlowFailedError({\n              event: pEvent,\n              subcode,\n              returnCode,\n              description,\n            });\n            // Otherwise, the flow is invalid\n            fsm._resetConnectedInfo();\n        }\n        return this.transitionTo(fsm.PublisherUnbound);\n      });\n\n    fsm.PublisherCloseFlowSent = new State({\n      name:          PublisherStateNames.CLOSEFLOWSENT,\n      parentContext: fsm,\n    }, {\n      handleCloseFlowResponse(response) {\n        const smfRespHeader = response.smfHeader;\n        const respCode = smfRespHeader.pm_respcode;\n\n        if (response.msgType !== SMFLib.SMFAdProtocolMessageType.CLOSEPUBFLOW) {\n          return fsm.processEvent(new PublisherFSMEvent(\n            { name: PublisherFSMEventNames.FLOW_FAILED },\n            {\n              returnCode:  respCode,\n              description: `Unexpected response: ${SMFLib.SMFAdProtocolMessageType.describe(response.msgType)}`,\n            }));\n        }\n\n        if (respCode === null) {\n          // Drop message  and increment stats\n          publisher.incStat(StatType.RX_DISCARD_SMF_UNKNOWN_ELEMENT);\n          LOG_DEBUG(`Drop Close-Publisher-Flow Request message on sessionId 0x${\n                    sessionInterface.sessionIdHex}`);\n          return null;\n        }\n\n        if (respCode !== 200) {\n          fsm.processEvent(\n            new PublisherFSMEvent({ name: PublisherFSMEventNames.FLOW_FAILED },\n                                  {\n                                    returnCode:  respCode,\n                                    description: smfRespHeader.pm_respstr,\n                                  }));\n        }\n\n        return fsm.processEvent(\n          new PublisherFSMEvent({ name: PublisherFSMEventNames.FLOW_UNBOUND }));\n      },\n\n      handleCloseFlowTimeout() {\n        LOG_INFO('Close publisher connection timeout.');\n        return fsm.processEvent(\n          new PublisherFSMEvent({ name: PublisherFSMEventNames.UNBIND_TIMEOUT }));\n      },\n\n      sendCloseFlow() {\n        const correlationTag = sessionInterface.getCorrelationTag();\n        const closePubFlowMsg = SMFLib.AdProtocolMessage.getCloseMessagePublisher(\n          fsm._publisher.flowId,\n          correlationTag\n        );\n        sessionInterface.sendControl(closePubFlowMsg);\n        sessionInterface.enqueueRequest(correlationTag,\n                                        () => this.handleCloseFlowTimeout(),\n                                        properties.connectTimeoutInMsecs,\n                                        null,\n                                        rxMsgObj => this.handleCloseFlowResponse(rxMsgObj));\n        LOG_TRACE('Sent close publisher connection');\n      },\n    })\n      .entry(function onEntry() {\n        this.sendCloseFlow();\n        return this;\n      })\n      .reaction(PublisherFSMEventNames.ACK, function onAck(event) {\n        fsm._handleAckEvent(event);\n        return this.internalTransition();\n      })\n      .reaction(PublisherFSMEventNames.FLOW_UNBOUND, function onFlowUnbound() {\n        return this.transitionTo(fsm.PublisherUnbound);\n      })\n      .reaction(PublisherFSMEventNames.FLOW_FAILED, function onCloseFlowFailed(/*pEvent*/) {\n        this.transitionTo(fsm.PublisherUnbound);\n      })\n      .reaction(PublisherFSMEventNames.UNBIND_TIMEOUT, function onCloseFlowTimeout() {\n        return this.transitionTo(fsm.PublisherCloseFlowSent);\n      });\n\n    fsm.PublisherUp = new State({\n      name:          PublisherStateNames.UP,\n      parentContext: fsm,\n    }, {\n      emitFlowUp() {\n        publisher.emit(MessagePublisherEventName.UP);\n      },\n    })\n      .initial(function initial() {\n        return this.transitionTo(\n          fsm._unackedList.length\n            ? fsm.PublisherRetransmitting\n            : fsm.PublisherDataXfer\n        );\n      })\n      .entry(function onEntry() {\n        // The state isn't changed on entry, so don't emit yet.\n        LOG_DEBUG('Flow is UP');\n        fsm._scheduleStateEvents(fsm.PublisherUp, () => this.emitFlowUp());\n        return this;\n      })\n      .reaction(PublisherFSMEventNames.ACK, function onAck(event) {\n        LOG_DEBUG('Ack received');\n        fsm._handleAckEvent(event);\n        return this.internalTransition();\n      })\n      .reaction(PublisherFSMEventNames.ACK_TIMEOUT, function onAckTimeout() {\n        // the starting point when we get the CAN_SEND\n        fsm._firstUnackedToSend = fsm._unackedList[0];\n        return this.transitionTo(fsm.PublisherRetransmitting);\n      })\n        .reaction(PublisherFSMEventNames.FLOW_CLOSE, function onFlowClose() {\n          return this.transitionTo(fsm.PublisherCloseFlowSent);\n        })\n        .reaction(PublisherFSMEventNames.SESSION_DOWN, function onSessionDown() {\n          return this.transitionTo(fsm.PublisherUnbound);\n        })\n        .reaction(PublisherFSMEventNames.TRANSPORT_FULL, function onWindowClosed() {\n          return this.internalTransition();\n        });\n\n    fsm.PublisherDataXfer = new State({\n      name:          PublisherStateNames.DATA_XFER,\n      parentContext: fsm.PublisherUp,\n    })\n      .entry(() => {\n        // publisher is up and capable of sending GM messages directly from the application\n        fsm._transportFlowControlled = false;\n        fsm._scheduleStateEvents(fsm.PublisherDataXfer, () => fsm._maybeEmitCanSend());\n      })\n      .reaction(PublisherFSMEventNames.TRANSPORT_FULL, function onTransportFull() {\n        return this.transitionTo(fsm.PublisherFlowControlled);\n      })\n      .exit(() => {\n        // publisher cannot send messages to transport and must queue in unAckedList until\n        // re-entering PublisherDataXfer\n        // set a FSM boolean that is checked in prepareADMessageAndSend() we\n        // need to avoid FSM interactions on the fast path so resort to\n        // this boolean.\n        fsm._transportFlowControlled = true;\n      });\n\n    fsm.PublisherFlowControlled = new State({\n      name:          PublisherStateNames.FLOW_CONTROLLED,\n      parentContext: fsm.PublisherUp,\n    })\n      .reaction(PublisherFSMEventNames.TRANSPORT_FULL, function onTransportFull() {\n        // Unusual event, as only the FSM can send messages when we're in flow-controlled state\n        LOG_INFO('Attempt to send while flow controlled');\n        // Fall out and do the action for PublisherUp\n        return this.internalTransition();\n      })\n      .reaction(PublisherFSMEventNames.CAN_SEND, function onCanSend() {\n        //\n        // start sending from tune unAcked list.\n        return this.transitionTo(fsm.PublisherRetransmitting);\n      });\n\n    fsm.PublisherRetransmitting = new State({\n      name:          PublisherStateNames.RETRANSMITTING,\n      parentContext: fsm.PublisherUp,\n    }, {\n      retransmit() {\n        try {\n          fsm._resendFromUnacked();\n        } catch (ex) {\n          // Resend failed:\n          if (ex instanceof OperationError && ex.subcode === ErrorSubcode.INSUFFICIENT_SPACE) {\n            LOG_DEBUG('Publisher resendFromUnacked blocked due to insufficient space, wait for CAN_SEND');\n            fsm.processEvent(\n              new PublisherFSMEvent({ name: PublisherFSMEventNames.TRANSPORT_FULL }));\n          } else {\n            // send failed.  Fail the publisher\n            LOG_INFO(`Publisher resendFromUnacked failed: ${ex}`);\n            fsm.processEvent(\n              new PublisherFSMEvent({ name: PublisherFSMEventNames.FLOW_FAILED }));\n          }\n        }\n      },\n    })\n      .entry(function onEntry() {\n        this.retransmit();\n      })\n      .reaction(PublisherFSMEventNames.RESEND_COMPLETE, function onResendComplete() {\n        return this.transitionTo(fsm.PublisherDataXfer);\n      })\n      .reaction(PublisherFSMEventNames.TRANSPORT_FULL, function onTransportFull() {\n        // Transport flow controlled while resending/recovering from flow control. Go\n        // to flow controlled state and wait for CAN_SEND\n        LOG_DEBUG(`Transport full while retransmitting, unacked remaining: ${fsm._unackedList.length}`);\n        // Fall out and do the action for PublisherUp\n        return this.transitionTo(fsm.PublisherFlowControlled);\n      });\n  }\n\n  isDisconnected() {\n    if (!this.getCurrentState()) return true;\n    return !!this.getActiveState(PublisherStateNames.UNBOUND);\n  }\n\n  /**\n\n   * Prepare and send a Guaranteed Message. This method updates FSM variables including\n   * lastSendMessage.\n   *\n   * @private\n   * @param {Message} dataMsg The message to prepare\n   * @returns {TransportReturnCode} return the status from the transport send\n   */\n  prepareAdMessageAndSend(dataMsg) {\n    if (!this._guaranteedEnabled) {\n      throw new OperationError('Session does not provide Guaranteed Message Publish capability',\n        ErrorSubcode.GM_UNAVAILABLE,\n        'close flow received from message-router');\n    }\n    if (this._sendWindow <= 0) {\n      this._publisher.incStat(StatType.TX_WINDOW_CLOSED);\n      this._notifiedWindowClosed = true;\n      throw new OperationError(\n        'Guaranteed Message Window Closed',\n        ErrorSubcode.INSUFFICIENT_SPACE\n      );\n    }\n\n\n    const unackedList = this._unackedList;\n    const {\n      LOG_TRACE,\n      LOG_DEBUG,\n      LOG_INFO,\n      LOG_WARN,\n    } = this.logger;\n\n    if (dataMsg._payload_is_memoized) {\n      dataMsg._payload_is_memoized = false;\n      dataMsg._memoized_csumm = undefined;\n      dataMsg._memoized_payload = undefined;\n    }\n    const dupMsg = dataMsg.clone();\n    const payloadSize = SMFLib.Codec.Encode.adaptMessageToSmf_payloadMemoize(dupMsg);\n    var payloadSizeLimit = 0;\n    try {\n      payloadSizeLimit = this._sessionInterface.getCapability(SolclientSession.CapabilityType.MAX_GUARANTEED_MSG_SIZE).getValue();\n      LOG_TRACE(`Payload size limit: ${payloadSizeLimit}`);\n    } catch (e) {\n      LOG_INFO('Can\\'t pre-check payload size, broker not connected yet?');\n      LOG_TRACE(e.stack);\n    }\n    if ((0 < payloadSizeLimit) && (payloadSize > payloadSizeLimit)) {\n      throw new OperationError(\n        `Encoded payload size (${payloadSize}) exceeds broker size limit (MAX_GUARANTEED_MSG_SIZE, ${payloadSizeLimit})`,\n        ErrorSubcode.MESSAGE_TOO_LARGE\n      );\n    }\n\n    --this._sendWindow;\n    this._renumber(dupMsg);\n    this._cloneNumbers(dupMsg, dataMsg);\n\n    unackedList.push(dupMsg);\n    // Update the messgeIds, lastSend/next values only on a successful send or enqueue,\n    // from this point on we will return OK from this send method.\n    const msgId = dupMsg.getGuaranteedMessageId();\n    this._messageIds.setLastSent(msgId);\n    LOG_TRACE(`Prepare and send AD message ID = ${msgId}, \n      unackedListSize = ${unackedList.length}, sendWindow = ${this._sendWindow}`);\n    // Note that the transport sender can be flow controlled at the transport\n    // level, which means the message should not be sent. So simply return\n    // We also consider set-up/down-states as _transportFlowControlled. We must be up\n    // and not retransmitting to\n    // send directly from application space.\n    if (this._transportFlowControlled) {\n      // we may receive acknowledgements while transport flow controlled which can\n      // cause our firstUnAckedToSend to become undefined, if this is the first message\n      // queued in that case, set firstUnAckedToSend\n      if (this._firstUnackedToSend === undefined) {\n        this._firstUnackedToSend = dupMsg;\n      }\n      return TransportReturnCode.OK;\n    }\n    // We use the session sendToTransport directly which may throw or  otherwise\n    // return an error. If so, catch the eror and remove the message from the unackedlist\n    // before rethrowing the error.\n    let returnCode;\n    try {\n      returnCode = this._sessionInterface.sendToTransport(dupMsg);\n      if (returnCode !== TransportReturnCode.OK) {\n        if (returnCode === TransportReturnCode.NO_SPACE) {\n          returnCode = TransportReturnCode.OK;\n          this._firstUnackedToSend = dupMsg;  // the starting point when we get the CAN_SEND\n          this.processEvent(new PublisherFSMEvent({ name: PublisherFSMEventNames.TRANSPORT_FULL }));\n        } else {\n          //\n          LOG_DEBUG(`prepareAdMessageAndSend: saw returnCode = ${returnCode}`);\n        }\n      } else {\n        // The message has successfully been sent once. Set the redelivered flag in case we need to\n        // resend it later.\n        dupMsg.setRedelivered(true);\n      }\n      // TBD: Should we start AckTimer when flow controlled?\n      this._startAckTimer();\n    } catch (ex) {\n      if (ex instanceof OperationError) {\n        LOG_DEBUG(`prepareAdMessageAndSend: caught OperationError: ${ErrorSubcode.describe(ex.subcode)} - ${ex.message}`);\n        // OperationErrors are encoding or other errors caused by the field contents the\n        // application has set on the message.  So we throw the error back at the\n        // application after undoing the queueing operations.\n        unackedList.pop();\n        this._messageIds.setLastSent(dupMsg.getGuaranteedPreviousMessageId());\n        ++this._sendWindow;\n        throw (ex);\n      } else {\n        LOG_DEBUG(`prepareAdMessageAndSend: caught ${ex.message}`);\n        throw ex;\n      }\n    }\n    return TransportReturnCode.OK;\n  }\n\n  _handleAckEvent(event) {\n    this._publisher.incStat(StatType.TX_ACKS_RXED);\n    this._handleAck(event.ack || event.nack, !!event.nack, event.ctrlMessage);\n  }\n\n  _handleAck(id, nack, ctrlMessage = undefined, openFlow = false) {\n    const {\n      _messageIds: messageIds,\n      _unackedList: unackedList,\n    } = this;\n    const { LOG_DEBUG, LOG_INFO } = this.logger;\n\n    if (messageIds.lastAcked.gte(id)) {\n      if (openFlow) {\n        LOG_DEBUG(`Implicit acks up to date: remote ack for ${id}, local ids ${this._messageIds}`);\n      } else {\n        LOG_INFO(`Dropping ack: remote ack for ${id}, local ids ${this._messageIds}`);\n      }\n      return;\n    }\n\n    const reportAcked = [];\n\n    // Assumption: the unacked message list is in increasing order of message ID.\n    // The assured message ID should be automatically generated, immutable and\n    // monotonically increasing.\n\n    // While the acked ID is greater than an element at the beginning of the unacked list...\n    while (unackedList.length &&\n           id.gte(unackedList[0].getGuaranteedMessageId())) {\n      // That unacked message is now acked. Shift it off and append to list of acked.\n      reportAcked.push(unackedList.shift());\n    }\n\n    // if we have removed the firstUnacked, reset it to the beginning of the list\n    if (unackedList.indexOf(this._firstUnackedToSend) === -1) {\n      this._firstUnackedToSend = unackedList[0];\n    }\n\n\n    // Recover some window space from the acked IDs.\n    this._sendWindow += reportAcked.length;\n    LOG_DEBUG('Send window size is now', this._sendWindow);\n\n\n    // The last acked ID is now the one we received.\n    // Don't let an exception in event dispatching prevent this from being set -- do it now.\n    messageIds.lastAcked = id;\n\n    // If we're NACKing, it's only the last message.\n    const reportNacked = nack ? reportAcked.pop() : null;\n\n    // Any ACKs?\n    // reportAcked is constant from here on\n    const numAcked = reportAcked.length;\n    if (numAcked) {\n      if (this._acknowledgeMode === MessagePublisherAcknowledgeMode.PER_MESSAGE) {\n        LOG_DEBUG(`Ack received: lastAckedMsgId=${id}, numAckedMsgs=${numAcked}, numUnackedMsgs=${unackedList.length}`);\n        for (let i = 0; i < numAcked; ++i) {\n          this._publisher.emit(MessagePublisherEventName.ACKNOWLEDGED_MESSAGE, reportAcked[i]);\n        }\n      } else {\n        const lastAckedMessage = reportAcked[numAcked - 1];\n        LOG_DEBUG(`Acking single message with ID ${lastAckedMessage.getGuaranteedMessageId()} from router ack on ${id}`);\n        this._publisher.emit(MessagePublisherEventName.ACKNOWLEDGED_MESSAGE, lastAckedMessage);\n      }\n    }\n\n    // Terminating NACK?\n    if (reportNacked) {\n      LOG_DEBUG(`Nacking single message with ID ${reportNacked.getGuaranteedMessageId()} from router ack on ${id}`);\n      this._publisher.emit(MessagePublisherEventName.REJECTED_MESSAGE, reportNacked, ctrlMessage);\n    }\n\n    LOG_DEBUG('Unacked messages remaining: ', unackedList.length);\n\n    if (unackedList.length) {\n      // There are more messages to be acked. Reset the ack timer.\n      this._resetAckTimer();\n    } else {\n      this._clearAckTimer();\n    }\n    //\n    // send can-send to applicatino if necessary.\n    this._maybeEmitCanSend();\n  }\n\n  _maybeEmitCanSend() {\n    const { LOG_TRACE } = this.logger;\n    if (!this._notifiedWindowClosed) return;\n    if (this._sendWindow === 0) {\n      // Should log this since it is called AFTER the state change\n      LOG_TRACE('Suppressing CAN_SEND with zero window available');\n      return;\n    }\n    this._notifiedWindowClosed = false; // Set before emitting in case we re-enter\n    this._publisher.emit(MessagePublisherEventName.CAN_SEND);\n  }\n\n  _resendFromUnacked() {\n    const { LOG_ERROR, LOG_INFO, LOG_DEBUG } = this.logger;\n    // We choose to start the ack timer after the message resend. The resend could\n    // take longer than the ack timeout in poor conditions.\n    //\n    // If any message is successfully resent, we need to restart the ack timer,\n    // even if we are throwing.\n    const list = this._unackedList;\n    let resendIndex = list.indexOf(this._firstUnackedToSend);\n    if (resendIndex === -1) {\n      // first Unacked may be null if all have been resent alreadygrunt -\n      // in which case the list  should be empty\n      if (this._firstUnackedToSend) {\n        LOG_ERROR(`Could not find first Unacked Messages in unacked message list: msgId = ${this._firstUnackedToSend.getGuaranteedMessageId}`);\n      }\n      if (list.length === 0) {\n        // Nothing to resend: return to DataXfer\n        LOG_DEBUG(`Nothing to resend: ${this._messageIds.toString()}`);\n        this.processEvent(\n          new PublisherFSMEvent({ name: PublisherFSMEventNames.RESEND_COMPLETE })\n        );\n      }\n      return;\n    }\n    LOG_DEBUG(`Resending unacked messages from ${resendIndex} to ${list.length - 1}: `,\n              list.map(m => m.getGuaranteedMessageId().toString()));\n    while (resendIndex < list.length) {\n      if (list[resendIndex].getPublisherId() !== this._publisher.publisherId) {\n        LOG_ERROR(`Resending on invalid publisherId '${list[resendIndex].getPublisherId()}'when it should be '${this._publisher.publisherId}'`);\n      }\n      const returnCode = this._sessionInterface.sendData(list[resendIndex]);\n      if (returnCode === TransportReturnCode.NO_SPACE) {\n        // the starting point when we get the CAN_SEND from the transport\n        this._firstUnackedToSend = list[resendIndex];\n        LOG_INFO('Publisher sendMessage blocked due to insufficient space, wait for CAN_SEND');\n        this.processEvent(\n          new PublisherFSMEvent({ name: PublisherFSMEventNames.TRANSPORT_FULL }));\n        return;\n      }\n      if (returnCode !== TransportReturnCode.OK) {\n        // session-FSM is already processing the error\n        return;\n      }\n      // The message has successfullly been sent once. Set the redelivered flag in case we need to\n      // resend it later\n      list[resendIndex].setRedelivered(true);\n      resendIndex++;\n      this._startAckTimer();\n    }\n    // Resend successful: return to DataXfer\n    LOG_DEBUG(`Resend complete: ${this._messageIds.toString()}`);\n    this.processEvent(\n      new PublisherFSMEvent({ name: PublisherFSMEventNames.RESEND_COMPLETE })\n    );\n  }\n\n  _resetConnectedInfo(failover = false) {\n    const { LOG_DEBUG } = this.logger;\n    LOG_DEBUG('Resetting connected flow info');\n\n    if (this._ackTimer) this._clearAckTimer();\n\n    Object.assign(this, {\n      _messageIds: new MessageIds(),\n    });\n\n    Object.assign(this._publisher, {\n      publisherId: undefined,\n      flowId:      undefined,\n      flowName:    null,\n    });\n\n    if (failover) {\n      this._connectReason = ConnectReason.FAILOVER;\n    } else {\n      // Full reset\n      this._unackedList = [];\n      this._connectReason = ConnectReason.INIT;\n    }\n  }\n\n  _clearAckTimer() {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE(`Clear ack timer ${this._ackTimer ? this._ackTimer : 'undefined or null or zero'}`);\n    if (!this._ackTimer) return;\n    clearTimeout(this._ackTimer);\n    this._ackTimer = null;\n  }\n\n  _emitStateEvents() {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Emitting deferred state events');\n    while (this._stateEvents.length) {\n      const pair = this._stateEvents.shift();\n      const state = pair[0];\n      const event = pair[1];\n      // If the state requesting this event is still active...\n      if (this.getActiveState(state.getName())) {\n        // then do its action\n        event.apply(state);\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  _handleAckTimeout() {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Ack Timeout');\n    this._ackTimer = null;\n    this._publisher.incStat(StatType.TX_ACK_TIMEOUT);\n    this.processEvent(new PublisherFSMEvent({ name: PublisherFSMEventNames.ACK_TIMEOUT }));\n  }\n\n  /**\n   * If the remote flow changes, any remote state applied to the unacked messages needs to\n   * be reapplied.\n   *\n   * @param {solace.Message} message The message to renumber.\n   * @private\n   */\n  _renumber(message) {\n    const messageIds = this._messageIds;\n    const current = messageIds.next;\n    message.setGuaranteedPreviousMessageId(messageIds.lastSent);\n    message.setGuaranteedMessageId(current);\n\n    const publisher = this._publisher;\n    message.setFlowId(publisher.flowId);\n    message.setPublisherId(publisher.publisherId);\n  }\n\n  _cloneNumbers(fromMsg, toMsg) {\n    toMsg.setGuaranteedPreviousMessageId(fromMsg.getGuaranteedPreviousMessageId());\n    toMsg.setGuaranteedMessageId(fromMsg.getGuaranteedMessageId());\n    toMsg.setFlowId(fromMsg.getFlowId());\n    toMsg.setPublisherId(fromMsg.getPublisherId());\n  }\n\n  _resetAckTimer() {\n    this._clearAckTimer();\n    this._startAckTimer();\n  }\n\n  _scheduleStateEvents(state, event) {\n    this._stateEvents.push([state, event]);\n    this._setPostEventAction(() => this._emitStateEvents(), 'Emit state events');\n  }\n\n  _setPostEventAction(action, desc = 'No action') {\n    const { LOG_DEBUG, LOG_WARN } = this.logger;\n    if (this._postEventAction && this._postEventAction.desc === desc) {\n      LOG_DEBUG('Keeping same post event action');\n      return;\n    }\n\n    if (this._postEventAction && this._postEventAction.desc) {\n      LOG_WARN(`Replacing post event action ${this._postEventAction.desc} with ${desc}`);\n    }\n    this._postEventAction = { action: action || (() => {}), desc };\n    this.setPostEventAction(() => {\n      this._postEventAction.action();\n      this._postEventAction = null;\n    });\n  }\n\n  /**\n   * @private\n   */\n  _startAckTimer() {\n    // const { LOG_TRACE } = this.logger;\n    // LOG_TRACE(`Start ack timer ${this._ackTimer ? this._ackTimer : 'undefined or null or zero'\n    //           }: ${this._acknowledgeTimeoutInMsecs} ms`);\n    if (this._ackTimer) return;\n    this._ackTimer = setTimeout(() => this._handleAckTimeout(),\n                                this._acknowledgeTimeoutInMsecs);\n  }\n\n}\n\nmodule.exports.PublisherFSM = PublisherFSM;\n","const { Enum } = require('solclient-eskit');\n\n/********************************************************************************\n * @private\n * @enum {string}\n * State names on the Publisher FSM\n ********************************************************************************/\nconst PublisherStateNames = {\n  UNBOUND:         'PublisherUnbound',\n  OPENFLOWSENT:    'PublisherOpenFlowSent',\n  UP:              'PublisherUp',\n  FAILED:          'PublisherFailed',\n  CLOSEFLOWSENT:   'PublisherCloseFlowSent',\n  DATA_XFER:       'PublisherDataXfer',\n  FLOW_CONTROLLED: 'MessagePublisherFlowControlled',\n  RETRANSMITTING:  'PublisherRetransmitting',\n};\n\nmodule.exports.PublisherStateNames = Enum.new(PublisherStateNames);\n","const { Baggage } = require('./lib/baggage');\nconst { TraceContext } = require('./lib/message-trace-context');\nconst { TraceContextSetter } = require('./lib/message-trace-context-setter');\nconst { MessageTracingSupport } = require('./lib/message-tracing-support');\n\nmodule.exports.Baggage = Baggage;\nmodule.exports.TraceContext = TraceContext;\nmodule.exports.TraceContextSetter = TraceContextSetter;\nmodule.exports.MessageTracingSupport = MessageTracingSupport;\n","const { Parameter: { isStringOrNothing } } = require('solclient-validate');\n\n/**\n * @classdesc\n * <b>This class abstracts baggage metadata used for distributed\n * message tracing with Solace messaging APIs types. \n * This class is for internal use only.\n * <p>\n * @hideconstructor\n * @memberof solace\n */\n class Baggage {\n \n    /**\n     * Get the value of the baggage associated with the message.\n     * This method is for internal use only.\n     *\n     * @returns {?String} value of baggage associated with the message\n     * @internal\n     */\n    getBaggage() {\n        return this._baggage || null;\n    }\n \n    /**\n     * Sets the value of the baggage associated with this message\n     * This method is for internal use only.\n     *\n     * @param {?String} value The valid value of baggage associated with this  message\n     * @see {@link https://www.w3.org/TR/2022/WD-baggage-20220928|w3c baggage format specification}  \n     * @internal\n     */\n    setBaggage(value) {\n        this._setBaggage(isStringOrNothing('baggage', value));\n    }\n    _setBaggage(value) {\n        this._baggage = value;\n    }\n \n}\n\nmodule.exports.Baggage = Baggage;\n","const { Parameter } = require('solclient-validate');\nconst { Convert } = require('solclient-convert');\n\n// eslint-disable-next-line global-require\nconst BufferImpl = require('buffer').Buffer;\n\nconst {\n    isNumber,\n    isBoolean,\n    isString,\n    isStringOrNothing,\n} = Parameter;\n\nconst { uint8ArrayToString } = Convert;\n\n/**\n * @classdesc\n * <b>This class abstracts settable metadata used for \n * distributed message tracing with Solace messaging APIs \n * types. This class is for internal use only.\n * <p>\n * @hideconstructor\n * @memberof solace\n */\n class TraceContextSetter {\n\n    /**\n     * Abstract constructor for metadata used \n     * for distributed message tracing.\n     * \n     * @constructor\n     * @hideconstructor\n     * @private\n     */\n    constructor() {\n        this._traceId = null;\n        this._spanId = null;\n        this._isSampled = false;\n        this._traceState = null;\n        this._version = 0x01; // version=0001 (4 bits, version=1);\n    }\n\n    /**\n     * Clone this TraceContextSetter object.\n     * \n     * @returns {TraceContextSetter} the cloned TraceContextSetter instance\n     */\n    clone() {\n        const _clonedContextSetter = new TraceContextSetter();\n        _clonedContextSetter._setSpanId(this._spanId);\n        _clonedContextSetter._setTraceId(this._traceId);\n        _clonedContextSetter._setSampled(this._isSampled);\n        _clonedContextSetter._setTraceState(this._traceState);\n        _clonedContextSetter._setVersion(this._version);\n        return _clonedContextSetter;\n    }\n\n    /**\n     * The length of the traceId bytes in the binary message\n    */\n    static get TRACE_ID_BYTES_LENGTH() {\n        return 16;\n    }\n\n    /**\n     * The length of the spanId bytes in the binary message\n    */\n    static get SPAN_ID_BYTES_LENGTH() {\n        return 8;\n    }\n\n    /**\n     * The version which for now is 1. -> 0001\n    */\n    get version() {\n        return this._version || 0x01; // version=0001 (4 bits, version=1);;\n    }\n    /**\n     * Sets the version\n     * \n     * @param {Number} value The version encoded as Hex value\n     */\n    setVersion(value) {\n        this._setVersion(isNumber('version', value));\n    }\n    _setVersion(value) {\n        this._version = value;\n    }\n\n    /**\n     * @private\n    */\n    get traceId() {\n        return this._traceId;\n    }\n    /**\n     * Sets the value of the trace identifier associated with the message.\n     * \n     * @param {String} value The trace identifier encoded as a 16-length Hex string\n     */\n    setTraceId(value) {\n        this._setTraceId(isString('traceId', value));\n    }\n    _setTraceId(value) {\n        this._traceId = value;\n    }\n \n    /**\n     * @private\n    */\n    get spanId() {\n        return this._spanId;\n    }\n    /**\n     * Sets the value of the span identifier associated with the message.\n     * \n     * @param {String} value The trace identifier encoded as a 8-length Hex string\n     */\n    setSpanId(value) {\n        this._setSpanId(isString('spanId', value));\n    }\n    _setSpanId(value) {\n        this._spanId = value;\n    }\n \n    /**\n     * @private\n    */\n    get isSampled() {\n        return this._isSampled || false;\n    }\n    /**\n     * Turns on or off sampling for the associated message.\n     * \n     * @param {Boolean} value if true sampling is on, off otherwise\n     */\n    setSampled(value) {\n        this._setSampled(isBoolean('isSampled', value));\n    }\n    _setSampled(value) {\n        this._isSampled = value;\n    }\n \n    /**\n     * @private\n    */\n    get traceState() {\n        return this._traceState;\n    }\n    /**\n     * Sets the value of the trace state associated with the message.\n     * \n     * @param {?String} value The value of trace state associated with the message\n     * @see {@link https://www.w3.org/TR/trace-context/#tracestate-header-field-values|w3c trace state format specification}\n     */\n    setTraceState(value) {\n        this._setTraceState(isStringOrNothing('traceState', value));\n    }\n    _setTraceState(value) {\n        this._traceState = value;\n    }\n\n    /**\n     * Gets a new instance of the Message Trace Context Setter \n     * from the values in the SMF header associated with the message.\n     * \n     * @param {Buffer | Uint8Array | String | null} traceContextValue The value of trace context associated with the message\n     * @returns {solace.TraceContextSetter | null} Context setter object\n     */\n    static fromTraceContext(traceContextValue) {\n        // implementation here\n        if (traceContextValue == null) {\n            return null;\n        }\n\n        let traceContextBuffer = null;\n        if (BufferImpl.isBuffer(traceContextValue)) {\n            traceContextBuffer = traceContextValue; // do nothing since it is already a buffer\n        } else if (typeof traceContextValue === 'string') {\n            traceContextBuffer = BufferImpl.from(traceContextValue, 'latin1');\n        }\n\n        // the trace context value is at least 32 bytes (without trace state)\n        if (!traceContextBuffer || traceContextBuffer.length < 32) {\n            return null;\n        }\n\n        try {\n            const traceContextBytes = (new Uint8Array(traceContextBuffer)).buffer;\n            let bytesRead = 0; // to track the byte read offsets\n\n            const traceContextSetter = new TraceContextSetter();\n\n            const firstByte = traceContextBytes.slice(bytesRead, bytesRead + (1));\n            const byte1DataView = new DataView(firstByte, 0, 1);\n            let byte1 = byte1DataView.getUint8(bytesRead);// get the first byte\n\n            const version = byte1 >> 4; // get the version from the four MSB\n            traceContextSetter.setVersion(version); // set the version\n\n            const isSampled = ((byte1 & 0x0F) == 0x04);\n            traceContextSetter.setSampled(isSampled); // set the sampled status\n            bytesRead++;\n\n            const traceId16Bytes = traceContextBytes.slice(bytesRead, bytesRead + (16));\n            const traceId = uint8ArrayToString(traceId16Bytes, 'hex'); // set the traceId\n            traceContextSetter.setTraceId(traceId);\n            bytesRead += TraceContextSetter.TRACE_ID_BYTES_LENGTH;\n\n            const spanId8Bytes = traceContextBytes.slice(bytesRead, bytesRead + (8));\n            const spanId = uint8ArrayToString(spanId8Bytes, 'hex'); // set the spanId\n            traceContextSetter.setSpanId(spanId);\n            bytesRead += TraceContextSetter.SPAN_ID_BYTES_LENGTH;\n\n            bytesRead ++; // Skip InjectionStandard byte\n            bytesRead += 4; // Skip the 4 RFU bytes\n\n            const traceStateLengthBytes = traceContextBytes.slice(bytesRead, bytesRead + (2));\n            const traceStateLengthDataView = new DataView(traceStateLengthBytes, 0, traceStateLengthBytes.byteLength);\n            const traceStateLength = traceStateLengthDataView.getUint16(0, false);// get the trace length\n            bytesRead += 2; // move pointer past length bytes\n\n            // if there is a trace state value, read it\n            if (traceStateLength > 0) {\n                const traceStateBytes = traceContextBytes.slice(bytesRead, bytesRead + (traceStateLength));\n                const traceState = uint8ArrayToString(traceStateBytes); // set the trace state\n                traceContextSetter.setTraceState(traceState);\n            }\n            return traceContextSetter;\n        } catch (ex) {\n            return null;\n        }\n    }\n}\n\nmodule.exports.TraceContextSetter = TraceContextSetter;\n","const { Parameter } = require('solclient-validate');\nconst { Convert } = require('solclient-convert');\nconst { TraceContextSetter } = require('./message-trace-context-setter');\n\nconst {\n    isBoolean,\n    isStringOrNothing,\n} = Parameter;\n\nconst {\n    stringToUint8Array,\n    hexStringToUint8Array,\n} = Convert;\n\n/**\n * @classdesc\n * <b>This class abstracts readonly view on a metadata used for \n * distributed message tracing with Solace messaging APIs\n * types. This class is for internal use only.\n * <p>\n * @hideconstructor\n * @memberof solace\n */\nclass TraceContext {\n\n    /**\n     * Abstract constructor for readonly view on metadata used \n     * for distributed message tracing.\n     * \n     * @param {TraceContextSetter} traceContextSetter {TraceContextSetter}\n     * \n     * @constructor\n     * @hideconstructor\n     * @private\n     */\n    constructor(traceContextSetter) {\n        this._traceId = isStringOrNothing('traceId', traceContextSetter.traceId);\n        this._spanId = isStringOrNothing('spanId', traceContextSetter.spanId);\n        this._isSampled = isBoolean('isSampled', traceContextSetter.isSampled);\n        this._traceState = traceContextSetter.traceState;\n        this._version = traceContextSetter.version;\n    }\n\n    /**\n     * Clone the a TraceContext object used \n     * for distributed message tracing.\n     * \n     * @param {TraceContext} toClone {TraceContext}\n     * @returns {TraceContext} the newly cloned TraceContext instance\n     */\n    static clone(toClone) {\n        const newContextSetter = new TraceContextSetter();\n        newContextSetter._setSpanId(toClone.getSpanId());\n        newContextSetter._setTraceId(toClone.getTraceId());\n        newContextSetter._setSampled(toClone.getIsSampled());\n        newContextSetter._setTraceState(toClone.getTraceState());\n        newContextSetter._setVersion(toClone.getVersion());\n        return new TraceContext(newContextSetter);\n    }\n\n    /**\n     * The version which for now is 1.\n    */\n    get version() {\n        return this._version || 0x01; // version=0001 (4 bits, version=1);\n    }\n    /**\n     * Gets the version associated with the message trace.\n     * \n     * @returns {Number} The version encoded as Hex value\n     */\n    getVersion() {\n        return this.version;\n    }\n\n    /**\n     * The maximum allowed string size of trace state to propagate.\n     * \n     * Refer: https://www.w3.org/TR/trace-context/#tracestate-limits\n    */\n    get MAX_TRACE_STATE_LENGTH() {\n        return 512;\n    }\n \n    /**\n     * The tranceId property as a 16-length string\n    */\n    get traceId() {\n        return this._traceId;\n    }\n    /**\n     * Gets the value of the trace identifier associated with the message.\n     * \n     * @returns {String} value of trace identifier associated with the message as\n     * 16-length string.\n     */\n    getTraceId() {\n        return this._traceId;\n    }\n \n    /**\n     * The spanId property a 8-length string\n    */\n    get spanId() {\n        return this._spanId;\n    }\n    /**\n     * Gets the value of the span identifier associated with the message.\n     * \n     * @returns {String} value of span identifier associated with the message as\n     * 8-length string.\n     */\n    getSpanId() {\n        return this._spanId;\n    }\n\n    /**\n     * The isSampled boolean property\n    */\n    get isSampled() {\n        return this._isSampled;\n    }\n    /**\n     * Returns true if the sampling for the associated message is on,\n     * otherwise false.\n     * \n     * @returns {Boolean} indicates whether the sampling is on or off\n     */\n    getIsSampled() {\n        return this._isSampled || false;\n    }\n\n    /**\n     * The traceState property\n    */\n    get traceState() {\n        return this._traceState;\n    }\n    /**\n     * Gets the value of the trace state associated with the message.\n     * \n     * @returns {?String} The value of trace state associated with the message\n     * @see {@link https://www.w3.org/TR/trace-context/#tracestate-header-field-values|w3c trace state format specification}\n     */\n    getTraceState() {\n        return this._traceState || null;\n    }\n    /**\n     * Gets the value of the trace state associated with the message.\n     * \n     * @returns {?String} The value of trace state associated with the message\n     * @see {@link https://www.w3.org/TR/trace-context/#tracestate-header-field-values|w3c trace state format specification}\n     */\n    getTruncatedTraceState() {\n        return this._standardTraceStateTruncation(this.MAX_TRACE_STATE_LENGTH);\n    }\n\n\n    /**\n     * It returns the encoded bytes that is \n     * passed to the SMF header to be encoded in \n     * SMF for the message.\n     * \n     * @returns {?Uint8Array} The value of encoded trace span context\n     */\n    getEncodedTraceContext() {\n        // format the string payload \n        // and return the correct format as a byte array or null\n        if (this.traceId == null || this.spanId == null) {\n            return null;\n        }\n\n        const traceStateLength = this.traceState == null ? 0 : this.traceState.length;\n\n        // the fixed part of the encoded data is at least 32 bytes\n        const contentBuffer = new ArrayBuffer(32 + traceStateLength);\n        let offsetPos = 0; // start from the beginning of the buffer\n        const contentBufferDataView = new DataView(contentBuffer);\n\n        let byte1 = 0; // headerByte: version 4 bits, sampled 2 bits and RFU=0 2 bits\n        // set the version to the four MSB\n        byte1 |= (this.version << 4); // version=0001 (4 bits, version=1)\n        byte1 |= this.isSampled ? 0x04 : 0x00; //sampled=0100 (2 bits, sampled=1 and 2 bits RFU=0)\n\n        // write the 1 byte header\n        contentBufferDataView.setUint8(offsetPos, byte1, false);\n        offsetPos ++; // move pointer to next free position\n\n        // write the first 16 bytes traceId\n        const traceId16byte = hexStringToUint8Array(this.traceId); // get the 8 byte array\n        for(let i = 0; i < 16; i ++) { // write the first 16 bytes\n            // use BigEndian; litteEndian = false\n            contentBufferDataView.setUint8(offsetPos + i, traceId16byte[i], false); // write the bytes\n        }\n        offsetPos += 16; // move pointer to next free position (plus 16 bytes)\n\n        // write the first 8 bytes spanId\n        const spanId8byte = hexStringToUint8Array(this.spanId) // get the 8 byte array\n        for(let i = 0; i < 8; i ++) { // write the first 8 bytes\n            // use BigEndian; litteEndian = false\n            contentBufferDataView.setUint8(offsetPos + i, spanId8byte[i], false); // write the bytes\n        }\n        offsetPos += 8; // move pointer to next free position (plus 8 bytes)\n\n        // write 1 byte InjectionStandard=1 (W3C)\n        contentBufferDataView.setUint8(offsetPos, 0x01, false);\n        offsetPos ++; // move pointer to next free position\n\n        // write 4 bytes RFU=0\n        // use BigEndian; litteEndian = false\n        contentBufferDataView.setUint16(offsetPos, 0, false); // write first two RFU bytes of zeros\n        contentBufferDataView.setUint16(offsetPos + 2, 0, false); // write last two RFU bytes of zeros\n        offsetPos += 4; // move pointer to next free position\n\n\t    if (this.traceState == null) {\n            // write 2 bytes TraceState length\n            // use BigEndian; litteEndian = false\n            contentBufferDataView.setUint16(offsetPos, 0, false); // write two bytes of zeros\n            offsetPos += 2; // move pointer to next free position\n\t    } else {\n\t      // If required, apply truncation logic on traceState\n\t      const truncatedTraceState = this.getTruncatedTraceState();\n\t      if (truncatedTraceState != null) {\n            // write 2 bytes TraceState length\n            const traceStateLength = truncatedTraceState.length;\n            // convert to two bytes\n            const traceStateLengthBytes = new Uint16Array([traceStateLength]); // get 2 bytes of length\n            // use BigEndian; litteEndian = false\n            contentBufferDataView.setUint16(offsetPos, traceStateLengthBytes, false);\n            offsetPos += 2; // move pointer to next free position\n\n            // set the remaining trace state bytes\n            const traceStateBytes = stringToUint8Array(truncatedTraceState);\n            for(let i = 0; i < traceStateBytes.length; i ++) {\n                // use BigEndian; litteEndian = false\n                contentBufferDataView.setUint8(offsetPos + i, traceStateBytes[i], false); // write the bytes\n            }\n            offsetPos += traceStateBytes.length;\n\t      }\n\t    }\n\n        // get the 8-byte array\n\t    return new Uint8Array(contentBuffer);\n    }\n\n    /**\n     * Truncate long trace states properly\n     * \n     * Refer: https://www.w3.org/TR/trace-context/#tracestate-limits\n     * @private\n     * @param {Number} maxTraceStateLength the maximum length for the trace state\n     * @returns {?String} The truncated trace state\n     */\n    _standardTraceStateTruncation(maxTraceStateLength) {\n        // cover corner cases\n\t    if (!this._traceState || this._traceState == null) {\n\t      return null;\n\t    } else if (this._traceState.length < maxTraceStateLength) {\n\t      return this._traceState; // no need to truncate\n\t    }\n\t\n        const ignoredMembers = new Array();\n\t    const traceStateBuilderArray = new Array();\n        let traceStateBuilderArrayLength = 0;\n\t    const listMembers = this._traceState.split(',');\n\n\t    for (let i = 0; i < listMembers.length; i++) {\n            let listMember = listMembers[i]; // current iteration object\n            if (listMember !== '' && listMember != null) {\n                let currentMemberLength = listMember.length;\n                if (currentMemberLength > 128) {\n                    // first of all, let's ignore members with length > 128 char\n                    ignoredMembers.push(listMember);\n                } else {\n                    let newExpectedLength = (traceStateBuilderArrayLength + currentMemberLength + (\n                        traceStateBuilderArrayLength > 0 ? 1 : 0));\n\n                    if (newExpectedLength <= maxTraceStateLength) {\n                        // the comma seperator is added at the end when building the string\n                        traceStateBuilderArray.push(listMember);\n                        // increment by length of added member + 1 (for the comma)\n                        traceStateBuilderArrayLength += (currentMemberLength + (\n                            traceStateBuilderArrayLength > 0 ? 1 : 0));\n                    } else {\n                        ignoredMembers.push(listMember);\n                    }\n                }\n            }\n\t    }\n\t\n\t    // See if we can add the ignored members now\n\t    for (let i = 0; i < ignoredMembers.length; i++) {\n            let currentMember = ignoredMembers[i];\n            let currentMemberLength = currentMember.length;\n\n            let newExpectedLength = (traceStateBuilderArrayLength + currentMemberLength + (\n                traceStateBuilderArrayLength > 0 ? 1 : 0));\n            if (newExpectedLength <= maxTraceStateLength) {\n                // the comma seperator is added at the end when building the string\n                traceStateBuilderArray.push(currentMember);\n                // increment by length of added member + 1 (for the comma)\n                traceStateBuilderArrayLength += (currentMemberLength + (\n                    traceStateBuilderArrayLength > 0 ? 1 : 0));\n            }\n\t    }\n\t\n        // build the string with comma seperating the members\n\t    return traceStateBuilderArray.join(',');\n\t}\n\n    /**\n     * Returns the string representation of this object\n     * \n     * @override\n     */\n    toString() {\n        return \"{traceId=\" + this.getTraceId()\n            + \", spanId=\" + this.getSpanId()\n            + \", sampled=\" + this.isSampled\n            + \", traceState=\" + ((this.traceState == null) ? \"}\" : \"'\" + this.traceState + \"'}\");\n    }\n}\n\nmodule.exports.TraceContext = TraceContext;\n","\nconst { LogFormatter } = require('solclient-log');\nconst { Baggage } = require('./baggage');\nconst { TraceContext } = require('./message-trace-context');\nconst { TraceContextSetter } = require('./message-trace-context-setter');\n\n/**\n * @classdesc\n * <b>This class is used to enable the distributed tracing \n * support for variety of Solace message types. \n * This class is for internal use only.\n * <p>\n * @hideconstructor\n * @internal\n */\nclass MessageTracingSupport {\n\n  /**\n   * Represents OpenTelementry Support for Solace Messages.\n   * The solace.Message class will extend this class.\n   * \n   * @constructor\n   * @hideconstructor\n   * @private\n   **/\n  constructor() {\n    // empty constructor\n  }\n\n  /**\n   * Retrieves a {@link TraceContextSetter} object that is used to modify \n   * an appropriate TraceContext associated with a message transparently.\n   * When no context is stored in a message it will create and store a creation \n   * context with a message that can be used as an initial\n   * transport context at the same time. \n   * It will never override an existing message creation context. \n   * When creation context is present or only transport context is present, it will\n   * override an existing transport context information with a newly provided one.\n   * \n   * @returns {solace.TraceContextSetter} Transport context setter object associated with this message; never expected to be null\n   */\n  getTraceContextSetter() {\n    if(this._traceContextSetter == null || this._traceContextSetter == undefined) {\n      // create a new context setter object\n      this._traceContextSetter = new TraceContextSetter();\n    }\n    return this._traceContextSetter;\n  }\n\n  /**\n   * Retrieves a {@link solace.TraceContext} object used for carrying over \n   * of the distributed tracing transport context information usable or modifiable \n   * by intermediary instrumentation across service boundaries. \n   * It allows correlating the producer and the consumer with an intermediary.\n   * It also allows correlating multiple intermediaries among each other.\n   *\n   * @returns {?solace.TraceContext} Transport context object associated with this message\n   */\n  getTransportContext() {\n    return this._transportContext;\n  }\n  /**\n   * The transport context setter\n   * \n   * @param {TraceContextSetter} contextSetter \n   */\n  _setTransportContext(contextSetter) {\n    if(contextSetter != null) {\n      this._transportContext = new TraceContext(contextSetter);\n    }\n  }\n\n  /**\n   * Retrieves a {@link solace.TraceContext} object used for carrying over of the distributed tracing\n   * message creation context information usable by intermediary instrumentation across\n   * service boundaries. It allows correlating the producer with the consumers of a message,\n   * regardless of intermediary instrumentation. It must not be altered by intermediaries.\n   *\n   * @returns {?solace.TraceContext} Message creation context object associated with this message;\n   */\n  getCreationContext() {\n    // if there is no creation context, use the context setter to create it\n    return this._creationContext;\n  }\n  /**\n   * It is created only once by the producer/publisher and cannot be\n   * changed by intermediaries\n   * @param {TraceContextSetter} contextSetter \n   */\n  _setCreationContext(contextSetter) {\n    // set the creation context only once\n    if(contextSetter != null) {\n      this._creationContext = new TraceContext(contextSetter);\n    }\n  }\n \n  /**\n   * Retrieves a {@link solace.Baggage} carrier object used for carrying over of the distributed tracing\n   * message baggage information across service boundaries.  It must not be altered by\n   * intermediaries.\n   *\n   * @return {?solace.Baggage} baggage carrier object associated with this message,\n   */\n  getBaggage() {\n    return this._baggage;\n  }\n  /**\n   * The internal setter for the baggage prop.\n   * \n   * @param {Baggage} value \n   */\n  _setBaggage(value) {\n    this._baggage = value;\n  }\n}\n\nmodule.exports.MessageTracingSupport = MessageTracingSupport;\n","const {\n  ReplicationGroupMessageId,\n  RgmidFactory,\n} = require('./lib/replication-group-message-id');\nconst { Message } = require('./lib/message');\nconst { MessageCacheStatus } = require('./lib/message-cache-status');\nconst { MessageDeliveryModeType } = require('./lib/message-delivery-mode-types');\nconst { MessageDumpFlag } = require('./lib/message-dump-flags');\nconst { MessageDumpStandardProvider } = require('./lib/message-dump-standard-provider');\nconst { MessageDumpUtil } = require('./lib/message-dump-util');\nconst { MessageType } = require('./lib/message-types');\nconst { MessageOutcome } = require('./lib/message-outcomes');\nconst { MessageUserCosType } = require('./lib/message-user-cos-types');\nconst { SolclientFactory } = require('solclient-factory');\n\n/**\n * Creates a {@link solace.Message} instance.\n * @returns {solace.Message} a new message instance.\n * @method\n * @name solace.SolclientFactory.createMessage\n */\nSolclientFactory.createMessage = SolclientFactory.createFactory(() => new Message());\n\n/**\n * Creates a {@link solace.ReplicationGroupMessageId} instance from string.\n * A ReplicationGroupMessageId is also a {@link solace.ReplayStartLocation} instance that\n * when set in MessageConsumerProperties indicates that only messages spooled\n * in the replay log since the message after the given ReplicationGroupMesageId\n * should be replayed.\n * @param {string} id a serialized ReplicationGroupMessageId had previously been returned\n *   from {@link solace.ReplicationGroupMessageId.toString}.\n * @returns {solace.ReplicationGroupMessageId} a new ReplicationGroupMessageId instance\n * @method\n * @name solace.SolclientFactory.createReplicationGroupMessageId\n * @throws {solace.OperationError}\n * * if parameter is not a string.\n *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n * * if incorrect format is detected.\n *   Subcode: {@link solace.ErrorSubcode.PARAMETER_OUT_OF_RANGE}.\n */\nSolclientFactory.createReplicationGroupMessageId = SolclientFactory.createFactory(id =>\n  RgmidFactory.fromString(id));\n\nmodule.exports.Message = Message;\nmodule.exports.MessageCacheStatus = MessageCacheStatus;\nmodule.exports.MessageDeliveryModeType = MessageDeliveryModeType;\nmodule.exports.MessageDumpFlag = MessageDumpFlag;\nmodule.exports.MessageDumpStandardProvider = MessageDumpStandardProvider;\nmodule.exports.MessageDumpUtil = MessageDumpUtil;\nmodule.exports.MessageType = MessageType;\nmodule.exports.MessageOutcome = MessageOutcome;\nmodule.exports.MessageUserCosType = MessageUserCosType;\nmodule.exports.ReplicationGroupMessageId = ReplicationGroupMessageId;\nmodule.exports.RgmidFactory = RgmidFactory;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * An attribue of a {@link solace.Message}. Applications receive messages due to subscriptions on\n * topics, or consumers connected to durable objects.  The MessageCacheStatus of such messages is:\n * {@link solace.MessageCacheStatus.LIVE}.\n *\n * Message are also delivered to an application\n * as a result of a cache request (see {@link solace.CacheSession#sendCacheRequest}) which\n * have a MessageCacheStatus that is {@link solace.MessageCacheStatus.CACHED} or\n * {@link solace.MessageCacheStatus.SUSPECT}.\n *\n * The MessageCacheStatus is retrieved with {@link solace.Message#getCacheStatus}.\n *\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst MessageCacheStatus = {\n  /**\n   * The message is live.\n   * @type {Number}\n   */\n  LIVE:    0,\n  /**\n   * The message was retrieveed from a solCache Instance.\n   * @type {Number}\n   */\n  CACHED:  1,\n  /**\n   * The message was retrieved from a suspect solCache Instance.\n   * @type {Number}\n   */\n  SUSPECT: 2,\n\n};\n\nmodule.exports.MessageCacheStatus = Enum.new(MessageCacheStatus);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Represents an enumeration of message delivery modes.\n *\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst MessageDeliveryModeType = {\n  /**\n   * This mode provides at-most-once message delivery. Direct messages have\n   * the following characteristics:\n   *   * They are not retained for clients that are not connected to a Solace Message Router.\n   *   * They can be discarded when congestion or system failures are encountered.\n   *   * They can be reordered in the event of network topology changes.\n   *\n   * Direct messages are most appropriate for messaging applications that require very\n   * high-rate or very low-latency message transmission. Direct Messaging enables\n   * applications to efficiently publish messages to a large number of clients\n   * with matching subscriptions.\n   */\n  DIRECT:         0,\n  /**\n   * A Persistent delivery mode is used for Guaranteed Messaging, and this delivery mode\n   * is most appropriate for applications that require persistent storage of the messages\n   * they send or intend to receive. Persistent messages have the following characteristics:\n   *\n   *  * They cannot be discarded or lost (once they are acknowledged by the Solace Message Router).\n   *  * They cannot be reordered in the event of network topology changes.\n   *  * They cannot be delivered more than once to a single client (unless the redelivered\n   *    message flag is applied).\n   *  * When they match subscriptions on durable endpoints, they are retained for a client\n   *    when that client is not connected.\n   *\n   * Persistent messages are most appropriate for applications that require persistent storage\n   * of the messages they send or intend to receive.\n   */\n  PERSISTENT:     1,\n  /**\n   * This mode is functionally the same as Persistent. It exists to facilitate interaction\n   * with JMS applications. In most situations where you want to use Guaranteed Messaging,\n   * it is recommended that you use {@link solace.MessageDeliveryModeType.PERSISTENT}.\n   */\n  NON_PERSISTENT: 2,\n};\n\nmodule.exports.MessageDeliveryModeType = Enum.new(MessageDeliveryModeType);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Represents an enumeration of message dump formats. It controls\n * the output of {@link solace.Message#dump}.\n *\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst MessageDumpFlag = {\n  /**\n   * Display only the length of the binary attachment, XML content and user property maps.\n   */\n  MSGDUMP_BRIEF: 0,\n  /**\n   * Display the entire message contents.\n   */\n  MSGDUMP_FULL:  1,\n};\n\nmodule.exports.MessageDumpFlag = Enum.new(MessageDumpFlag);\n","const DebugLib = require('solclient-debug');\nconst MessageDumpUtilLib = require('./message-dump-util');\nconst { Destination } = require('solclient-destination');\nconst { LOG_ERROR } = require('solclient-log');\nconst { Long } = require('solclient-convert');\nconst { MessageCacheStatus } = require('./message-cache-status');\nconst { MessageDeliveryModeType } = require('./message-delivery-mode-types');\nconst { MessageDumpFlag } = require('./message-dump-flags');\nconst { MessageUserCosType } = require('./message-user-cos-types');\nconst { SDTMapContainer, SDTFieldType } = require('solclient-sdt');\nconst { StringUtils } = require('solclient-util');\n\n\nconst MessageDumpStandardProvider = {\n\n  fpDestination(message/* , flags*/) {\n    const dest = message.getDestination();\n    if (dest !== null && dest instanceof Destination) {\n      return ['Destination', true, dest.toString(), null];\n    }\n    return ['Destination', false, '', null];\n  },\n\n  fpSenderId(message/* , flags*/) {\n    return ['SenderId', (message.getSenderId() !== undefined && message.getSenderId() !== null), message.getSenderId(), null];\n  },\n\n  fpAppmsgType(message/* , flags*/) {\n    return ['AppMessageType', (message.getApplicationMessageType() !== undefined && message.getApplicationMessageType() !== null),\n      message.getApplicationMessageType(), null];\n  },\n\n  fpAppMsgId(message/* , flags*/) {\n    return ['AppMessageID', (message.getApplicationMessageId() !== undefined && message.getApplicationMessageId() !== null),\n      message.getApplicationMessageId(), null];\n  },\n\n  fpSequenceNumber(message/* , flags*/) {\n    const sequenceNum = message.getSequenceNumber();\n    if (typeof sequenceNum === 'number') {\n      return ['SequenceNumber', true, sequenceNum, null];\n    }\n    return ['SequenceNumber', false, '', null];\n  },\n\n  fpTopicSequenceNumber(message/*, flags */) {\n    const topicSeqNo = message.getTopicSequenceNumber();\n    if (Long.isLong(topicSeqNo)) {\n      return ['TopicSequenceNumber', true, topicSeqNo.toString(), null];\n    }\n    return ['TopicSequenceNumber', false, '', null];\n  },\n\n  fpCorrelationId(message/* , flags*/) {\n    return ['CorrelationId', (message.getCorrelationId() !== undefined && message.getCorrelationId() !== null),\n      message.getCorrelationId(), null];\n  },\n\n  fpHttpContentType(/*message*/ /*, flags*/) {\n    return ['HTTP Content Type', false, undefined, null];\n  },\n\n  fpHttpContentEncoding(/*message*/ /*, flags*/) {\n    return ['HTTP Content Encoding', false, undefined, null];\n  },\n\n  fpSendTimestamp(message/* , flags*/) {\n    const timestamp = message.getSenderTimestamp();\n    if (typeof timestamp === 'number') {\n      const mdu = MessageDumpUtilLib.MessageDumpUtil;\n      return ['SendTimestamp', true,\n        `${timestamp} (${mdu.formatDate(timestamp)})`, null];\n    }\n    return ['SendTimestamp', false, '', null];\n  },\n\n  fpRcvTimestamp(message/* , flags*/) {\n    const timestamp = message.getReceiverTimestamp();\n    if (typeof timestamp === 'number') {\n      const mdu = MessageDumpUtilLib.MessageDumpUtil;\n      return ['RcvTimestamp', true,\n        `${timestamp} (${mdu.formatDate(timestamp)})`, null];\n    }\n    return ['RcvTimestamp', false, '', null];\n  },\n\n  fpClassOfService(message/* , flags*/) {\n    const cos = message.getUserCos();\n    if (typeof cos === 'number') {\n      return ['Class Of Service', true, MessageUserCosType.nameOf(message.getUserCos()), null];\n    }\n    return ['Class Of Service', false, '', null];\n  },\n\n//  fpPriority(message/* , flags*/) {\n//    const prio = message.getPriority() !== undefined ? message.getPriority() : 'undefined';\n//    return ['Message Priority', true, prio, null];\n//  },\n\n  fpDeliveryMode(message/* , flags*/) {\n    const mode = message.getDeliveryMode();\n    if (typeof mode === 'number') {\n      return ['DeliveryMode', true, MessageDeliveryModeType.nameOf(message.getDeliveryMode()), null];\n    }\n    return ['DeliveryMode', false, '', null];\n  },\n\n  fpGuaranteedMsgId(message/*, flags*/) {\n    const msgId = message.getGuaranteedMessageId();\n    if (Long.isLong(msgId)) {\n      return ['Message Id', true, msgId.toString(10), null];\n    }\n    return ['Message Id', false, '', null];\n  },\n\n  fpReplicationGroupMessageId(message/* , flags*/) {\n    const rgmid = message.getReplicationGroupMessageId();\n    if (rgmid === undefined) {\n      return ['Replication Group Message Id', false, '', null];\n    }\n    return ['Replication Group Message Id', true, rgmid.toString(), null];\n  },\n\n  fpTimeToLive(message/* , flags */) {\n    const timeToLive = message.getTimeToLive();\n    if (typeof timeToLive === 'number') {\n      const mdu = MessageDumpUtilLib.MessageDumpUtil;\n      const d = new Date();\n      return ['TimeToLive', true,\n        `${timeToLive} (${mdu.formatDate(d.getTime() + timeToLive)})`, null];\n    }\n    return ['TimeToLive', false, '', null];\n  },\n\n  fpExpiration(message/*, flags*/) {\n    const timestamp = message.getGMExpiration();\n    if (typeof timestamp === 'number') {\n      const mdu = MessageDumpUtilLib.MessageDumpUtil;\n      return ['Expiration', true,\n        `${timestamp} (${mdu.formatDate(timestamp)})`, null];\n    }\n    return ['Expiration', false, '', null];\n  },\n\n  fpMessageDMQEligible(message/* , flags*/) {\n    return ['DMQ Eligible', message.isDMQEligible(), '', null];\n  },\n\n  fpMessageRedelivered(message/* , flags*/) {\n    return ['Message Re-delivered', message.isRedelivered(), '', null];\n  },\n\n  fpMessageDeliveryCount(message/* , flags*/) {\n    //TODO: exception handling!\n    try {\n      return ['Message Delivery Count', true, message.getDeliveryCount(), null];\n    } catch (e) {\n      return ['Message Delivery Count', false, '', null];\n    }\n  },\n\n  fpDiscardIndication(message/* , flags*/) {\n    return ['Discard Indication', message.isDiscardIndication(), '', null];\n  },\n\n  fpAckImmediately(message/* , flags*/) {\n    return ['ACK Immediately', message.isAcknowledgeImmediately(), '', null];\n  },\n\n  fpElidingEligible(message/* , flags*/) {\n    return ['Eliding Eligible', message.isElidingEligible(), '', null];\n  },\n\n  fpReplyMessage(message/* , flags*/) {\n    return ['Reply Message', message.isReplyMessage(), '', null];\n  },\n\n  fpReplyTo(message/* , flags*/) {\n    const replyTo = message.getReplyTo();\n    if (replyTo !== null && replyTo instanceof Destination) {\n      return ['ReplyTo', true, replyTo.toString(), null];\n    }\n    return ['ReplyTo', false, '', null];\n  },\n\n  fpDeliverToOne(message/* , flags*/) {\n    return ['Deliver To One', message.isDeliverToOne(), '', null];\n  },\n\n  fpCacheMessage(message/* , flags*/) {\n    return ['Message from cache', message.getCacheStatus() !== MessageCacheStatus.LIVE, '', null];\n  },\n\n  fpCacheRequestId(message/*, flags */) {\n    const cacheRequestId = message.getCacheRequestId();\n    if (typeof cacheRequestId === 'number') {\n      return ['Cache Request Id', true, cacheRequestId, null];\n    }\n    return ['Cache Request Id', false, '', null];\n  },\n\n  fpUserPropertyMap(message, flags) {\n    const propMap = message.getUserPropertyMap();\n    if (propMap !== null && propMap instanceof SDTMapContainer) {\n      const value = `${propMap.getKeys().length} entries`;\n      let detailValue = null;\n      if (flags === MessageDumpFlag.MSGDUMP_FULL) {\n        try {\n          const mdu = MessageDumpUtilLib.MessageDumpUtil;\n          detailValue = mdu.printMap(propMap, 2);\n        } catch (e) {\n          LOG_ERROR(e.message, e.stack);\n          detailValue = 'Error';\n        }\n      }\n      return ['User Property Map', true, value, detailValue];\n    }\n    return ['User Property Map', false, '', null];\n  },\n\n  fpCorrelationTag(message/*, flags*/) {\n    const strValue = message.getCorrelationKey();\n    return ['Correlation Tag Pointer', (strValue !== undefined && strValue !== null),\n      strValue, null];\n  },\n\n  fpUserData(message/* , flags*/) {\n    if (StringUtils.notEmpty(message.getUserData())) {\n      return ['User Data', true, `len=${message.getUserData().length}`,\n        DebugLib.Debug.formatDumpBytes(message.getUserData(), true, 2)];\n    }\n    return ['User Data', false, '', null];\n  },\n\n  fpSdtStream(message, flags) {\n    const sdtFieldValue = message.getSdtContainer();\n    if (sdtFieldValue !== null && sdtFieldValue.getType() === SDTFieldType.STREAM) {\n      const mdu = MessageDumpUtilLib.MessageDumpUtil;\n      const value = `${mdu.countItems(sdtFieldValue.getValue())} entries`;\n      let detailValue = null;\n      if (flags === MessageDumpFlag.MSGDUMP_FULL) {\n        try {\n          detailValue = mdu.printStream(sdtFieldValue.getValue(), 2);\n        } catch (e) {\n          LOG_ERROR(e.message, e.stack);\n          detailValue = 'Error';\n        }\n      }\n      return ['SDT Stream', true, value, detailValue];\n    }\n    return ['SDT Stream', false, '', null];\n  },\n\n  fpSdtMap(message, flags) {\n    const sdtFieldValue = message.getSdtContainer();\n    if (sdtFieldValue !== null && sdtFieldValue.getType() === SDTFieldType.MAP) {\n      const value = `${sdtFieldValue.getValue().getKeys().length} entries`;\n      let detailValue = null;\n      if (flags === MessageDumpFlag.MSGDUMP_FULL) {\n        try {\n          const mdu = MessageDumpUtilLib.MessageDumpUtil;\n          detailValue = mdu.printMap(sdtFieldValue.getValue(), 2);\n        } catch (e) {\n          LOG_ERROR(e.message, e.stack);\n          detailValue = 'Error';\n        }\n      }\n      return ['SDT Map', true, value, detailValue];\n    }\n    return ['SDT Map', false, '', null];\n  },\n\n  fpBinaryAttachment(message, flags) {\n    if (!message._binaryAttachment || message._binaryAttachment.length < 1) {\n      return ['Binary Attachment', false, '', null];\n    }\n    const att = message._binaryAttachment.toString('latin1');\n    const value = `len=${att.length}`;\n    let detailValue = null;\n    if (flags === MessageDumpFlag.MSGDUMP_FULL) {\n      detailValue = DebugLib.Debug.formatDumpBytes(att, true, 2);\n    }\n    return ['Binary Attachment', true, value, detailValue];\n  },\n\n  fpXmlContent(message, flags) {\n    const xml = message.getXmlContent();\n    if (StringUtils.notEmpty(xml)) {\n      const value = `len=${xml.length}`;\n      let detailValue = null;\n      if (flags === MessageDumpFlag.MSGDUMP_FULL) {\n        detailValue = DebugLib.Debug.formatDumpBytes(xml, true, 2);\n      }\n      return ['XML', true, value, detailValue];\n    }\n    return ['XML', false, '', null];\n  },\n\n  fpXmlMetadata(message, flags) {\n    const xmlMetadata = message.getXmlMetadata();\n    if (StringUtils.notEmpty(xmlMetadata)) {\n      const value = `len=${xmlMetadata.length}`;\n      let detailValue = null;\n      if (flags === MessageDumpFlag.MSGDUMP_FULL) {\n        detailValue = DebugLib.Debug.formatDumpBytes(xmlMetadata, true, 2);\n      }\n      return ['XML Metadata', true, value, detailValue];\n    }\n    return ['XML Metadata', false, '', null];\n  },\n\n  fpTracingCreationContext(message, flags) {\n    const _creationContext = message.getCreationContext();\n\n    const isPresent = (_creationContext != null\n      && _creationContext.getTraceId() != null\n      && _creationContext.getSpanId() != null);\n\n    let detailValue = null;\n    if (flags && flags === MessageDumpFlag.MSGDUMP_FULL) {\n      detailValue = (_creationContext != null) ? _creationContext.toString() : null;\n    }\n    return ['Tracing CreationContext', isPresent, detailValue, null];\n  },\n\n  fpTracingTransportContext(message, flags) {\n    const _transportContext = message.getTransportContext();\n\n    const isPresent = (_transportContext != null\n      && _transportContext.getTraceId() != null\n      && _transportContext.getSpanId() != null);\n\n    let detailValue = null;\n    if (flags && flags === MessageDumpFlag.MSGDUMP_FULL) {\n      detailValue = (_transportContext != null) ? _transportContext.toString() : null;\n    }\n    return ['Trace Context SMF Parameter', isPresent, detailValue, null];\n  },\n\n  fpTracingBaggage(message, flags) {\n    const isPresent = (message.getBaggage() != null\n      && message.getBaggage().getBaggage() != null);\n\n    let detailValue = null;\n    if (flags && flags === MessageDumpFlag.MSGDUMP_FULL) {\n      const _baggage = message.getBaggage();\n      detailValue = (_baggage != null) ? _baggage.getBaggage() : null;\n    }\n    return ['Tracing Baggage', isPresent, detailValue, null];\n  },\n\n};\n\nmodule.exports.MessageDumpStandardProvider = MessageDumpStandardProvider;\n","const DebugLib = require('solclient-debug');\nconst MessageDumpStandardProviderLib = require('./message-dump-standard-provider');\nconst {\n  SDTFieldType,\n  SDTMapContainer,\n  SDTStreamContainer,\n  SDTUnsupportedValueError,\n  SDTValueErrorSubcode,\n} = require('solclient-sdt');\nconst { Check } = require('solclient-validate');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\nconst { MessageDumpFlag } = require('./message-dump-flags');\nconst { StringBuffer, StringUtils } = require('solclient-util');\n\nconst MessageDumpState = {\n  get dumpProviders() {\n    const providers = MessageDumpStandardProviderLib.MessageDumpStandardProvider;\n    return Object.keys(providers).map(k => providers[k]);\n  },\n};\n\nconst MessageDumpUtil = {\n  getOutOfRangeValue(rawData) {\n    if (typeof rawData === 'string') {\n      return `<out of range>\\n${DebugLib.Debug.formatDumpBytes(rawData)}`;\n    }\n    return `<out of range>\\n${DebugLib.Debug.formatDumpBytes(rawData.toString('latin1'))}`;\n  },\n\n  getValue(sdtField) {\n    let value = null;\n    try {\n      value = sdtField.getValue();\n      return value;\n    } catch (e) {\n      if (e instanceof SDTUnsupportedValueError) {\n        if (e.getSubcode() === SDTValueErrorSubcode.VALUE_OUTSIDE_SUPPORTED_RANGE) {\n          return this.getOutOfRangeValue(e.getSourceData());\n        }\n      } else if (e instanceof OperationError && e.subcode === ErrorSubcode.PARAMETER_INVALID_TYPE) {\n        return '<invalid type>';\n      }\n      throw e;\n    }\n  },\n\n  printMap(sdtMap, indent) {\n    if (Check.nothing(sdtMap) || !(sdtMap instanceof SDTMapContainer)) {\n      return null;\n    }\n    const lines = [];\n    const strIndent = StringUtils.padRight('', indent, ' ');\n    const keys = sdtMap.getKeys().sort();\n    keys.forEach((key) => {\n      const sdtFieldValue = sdtMap.getField(key);\n      const type = sdtFieldValue.getType();\n      const value = this.getValue(sdtFieldValue);\n      let strValue;\n      switch (type) {\n        case SDTFieldType.MAP:\n          strValue = `\\n${this.printMap(value, indent + 2)}`;\n          break;\n        case SDTFieldType.STREAM:\n          strValue = `\\n${this.printStream(value, indent + 2)}`;\n          break;\n        case SDTFieldType.BYTEARRAY:\n          strValue = DebugLib.Debug.formatDumpBytes(value.toString('latin1'), false, 0);\n          if (strValue !== null && strValue.substr(-1) === '\\n') {\n            strValue = strValue.substring(0, strValue.length - 1);\n          }\n          break;\n        default:\n          strValue = (value !== null) ? value.toString() : null;\n      }\n      lines.push(`${strIndent}Key '${key}' (${SDTFieldType.nameOf(type)}): ${strValue}`);\n    });\n    return lines.join('\\n');\n  },\n\n  printStream(sdtStream, indent) {\n    if (Check.nothing(sdtStream) || !(sdtStream instanceof SDTStreamContainer)) {\n      return null;\n    }\n    sdtStream.rewind();\n    const lines = [];\n    const strIndent = StringUtils.padRight('', indent, ' ');\n    while (sdtStream.hasNext()) {\n      const sdtFieldValue = sdtStream.getNext();\n      const type = sdtFieldValue.getType();\n      const value = this.getValue(sdtFieldValue);\n\n      let strValue;\n      switch (type) {\n        case SDTFieldType.MAP:\n          strValue = `\\n${this.printMap(value, indent + 2)}`;\n          break;\n        case SDTFieldType.STREAM:\n          strValue = `\\n${this.printStream(value, indent + 2)}`;\n          break;\n        case SDTFieldType.BYTEARRAY:\n          strValue = DebugLib.Debug.formatDumpBytes(value.toString('latin1'), false, 0);\n          if (strValue !== null && strValue.substr(-1) === '\\n') {\n            strValue = strValue.substring(0, strValue.length - 1);\n          }\n          break;\n        case SDTFieldType.DESTINATION:\n          strValue = value.toString();\n          break;\n        default:\n          strValue = (value !== null) ? value.toString() : null;\n      }\n      lines.push(`${strIndent}(${SDTFieldType.nameOf(type)}): ${strValue}`);\n    }\n    sdtStream.rewind();\n    return lines.join('\\n');\n  },\n\n  countItems(sdtStream) {\n    if (Check.nothing(sdtStream) || (!(sdtStream instanceof SDTStreamContainer))) {\n      return 0;\n    }\n    sdtStream.rewind();\n    let count = 0;\n    while (sdtStream.hasNext()) {\n      sdtStream.getNext();\n      count++;\n    }\n    sdtStream.rewind();\n    return count;\n  },\n\n  formatDate(timeStamp) {\n    return new Date(timeStamp).toString();\n  },\n\n  dump(message, flags, separator, colPadding) {\n    const sb = new StringBuffer();\n    let theSeparator = '\\n';\n    let needSeparator = false;\n    let theColPadding = 40;\n    if (separator !== undefined && separator !== null && typeof separator === 'string') {\n      theSeparator = separator;\n    }\n    if (colPadding !== undefined && colPadding !== null && typeof colPadding === 'number') {\n      theColPadding = colPadding;\n    }\n\n    MessageDumpState.dumpProviders.forEach((provider, index) => {\n      const [key, isPresent, value, detailValue] = provider(message, flags);\n      if (!isPresent) {\n        return;\n      }\n      if (needSeparator) {\n        sb.append(theSeparator);\n      }\n\n      if (value === null || value.length === 0) {\n        // If we have no VALUE field, this is probably a boolean flag\n        // and we just end up displaying the key and a newline.\n        sb.append(key);\n      } else {\n        sb.append(StringUtils.padRight(`${key}:`, theColPadding, ' '));\n        sb.append(value);\n      }\n\n      if (detailValue !== null && (flags & MessageDumpFlag.MSGDUMP_FULL)) {\n        sb.append('\\n');\n        if (detailValue.indexOf('  ') !== 0) {\n          sb.append('  ');\n        }\n        sb.append(detailValue);\n        if (detailValue.substr(-1) !== '\\n' && index < (MessageDumpState.dumpProviders.length - 1)) {\n          sb.append('\\n');\n        }\n      }\n      needSeparator = true;\n    });\n    return sb.toString();\n  },\n};\n\nmodule.exports.MessageDumpUtil = MessageDumpUtil;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Represents an enumeration of supported message settlement outcomes.\n *\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst MessageOutcome = {\n  /**\n   * Represents a successful message processing acknowledgement outcome.\n   *\n   * (see {@link solace.Message#acknowledge}) for more details\n   */\n  ACCEPTED:         0,\n  /**\n   * Represents a negative acknowledgement outcome, used to signal that the application failed to process\n   * the message.\n   * \n   * Delivery count for the message is incremented. Redelivery will be attempted. Message may\n   * be moved to DMQ once max-redelivered is reached. Message may be delayed if the endpoint has\n   * delayed redelivery configured.\n   */\n  FAILED:           1,\n  // /**\n  //  * Represents a negative acknowledgement outcome, used to signal that the application failed to process\n  //  * the message.\n  //  * \n  //  * Delivery count for the message is NOT incremented. Redelivery will be attempted. Message may\n  //  * be moved to DMQ once max-redelivered is reached. \n  //  * A released message will always be eligible for redelivery, even if redeliveries are disabled. \n  //  * Message is immediately eligible for redelivery, even if endpoint is configured for delayed redelivery.\n  //  */\n  // RELEASED:           2,\n  /**\n   * Represents a negative acknowledgement outcome, used to signal that the application has rejected the\n   * message such as when application determines the message is invalid.\n   * \n   * Message will NOT be redelivered. Message will be moved to DMQ. If DMQ is not configured,\n   * message is deleted.\n   */\n  REJECTED:         3,\n};\n\nmodule.exports.MessageOutcome = Enum.new(MessageOutcome);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Represents an enumeration of message payload types\n * (see {@link solace.Message#getBinaryAttachment})\n *\n * A message may contain unstructured byte data, or a structured container.\n *\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst MessageType = {\n  /**\n   * Binary message (unstructured bytes stored in the binary attachment message part).\n   * @type {Number}\n   */\n  BINARY: 0,\n  /**\n   * Structured map message.\n   * @type {Number}\n   */\n  MAP:    1,\n  /**\n   * Structured stream message.\n   * @type {Number}\n   */\n  STREAM: 2,\n  /**\n   * Structured text message.\n   * @type {Number}\n   */\n  TEXT:   3,\n};\n\nmodule.exports.MessageType = Enum.new(MessageType);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Represents an enumeration of user Class of Service (COS) levels. The COS is set\n * on a Message with {@link solace.Message#setUserCos}\n * The Class of Service has different semantics for direct and guaranteed messages.\n *\n * For messages published with {@link solace.MessageDeliveryModeType.DIRECT}, the\n * class of service selects the weighted round-robin delivery queue when the\n * message is forwarded to a consumer.  {@link solace.MessageUserCosType.COS1} are the\n * lowest priority messages and will use the Solace Message Router D-1 delivery queues.\n *\n * For messages published as guaranteed messages\n * ({@link solace.MessageDeliveryModeType.PERSISTENT} or\n * {@link solace.MessageDeliveryModeType.NON_PERSISTENT}), messages published\n * with {@link solace.MessageUserCosType.COS1} can be rejected by the Solace Message Router if\n * that message would cause any queue or topic-endpoint to exceed its configured\n * low-priority-max-msg-count.\n *\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst MessageUserCosType = {\n  /**\n   * Direct Messages: Lowest priority, use Solace Message Router client D-1 queues for delivery.\n   *\n   * Guaranteed Messages: Messages can be rejected if the message would cause any\n   * queue or topic-endpoint to exceed its configured <i>low-priority-max-msg-count</i>.\n   * @type {Number}\n   */\n  COS1: 0,\n  /**\n   * Direct Messages: Medium priority, use Solace Message Router client D-2 queues for delivery.\n   *\n   * Guaranteed Messages: N/A (same as COS3)\n   * @type {Number}\n   */\n  COS2: 1,\n  /**\n   * Direct Messages: Highest priority, use Solace Message Router client D-3 queues for delivery.\n   *\n   * Guaranteed Messages: Messages are not rejected for exceeding <i>low-priority-max-msg-count</i>.\n   * Messages may still be rejected for other reasons such as Queue 'Spool Over Quota'.\n   * @type {Number}\n   */\n  COS3: 2,\n};\n\nmodule.exports.MessageUserCosType = Enum.new(MessageUserCosType);\n","const { clone } = require('solclient-util'); // using the modified local clone version\nconst SolclientFactoryLib = require('solclient-factory');\nconst { Codec: SDTCodec } = require('solclient-sdt');\nconst { Convert } = require('solclient-convert');\nconst { Destination } = require('solclient-destination');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\nconst { LOG_DEBUG, LOG_WARN } = require('solclient-log');\nconst { MessageCacheStatus } = require('./message-cache-status');\nconst { MessageDeliveryModeType } = require('./message-delivery-mode-types');\nconst { MessageDumpFlag } = require('./message-dump-flags');\nconst { MessageDumpUtil } = require('./message-dump-util');\nconst { MessageType } = require('./message-types');\nconst { MessageOutcome } = require('./message-outcomes');\nconst { MessageUserCosType } = require('./message-user-cos-types');\nconst { Parameter } = require('solclient-validate');\nconst { RgmidFactory } = require('./replication-group-message-id');\nconst { SDTField, SDTFieldType, SDTMapContainer, SDTUnsupportedValueError } = require('solclient-sdt');\nconst { Baggage, MessageTracingSupport, TraceContext, TraceContextSetter } = require('solclient-message-tracing');\n\nconst { ProfileBinding } = SolclientFactoryLib;\n\nconst {\n  utf8ToUcs2,\n  anythingToBuffer,\n} = Convert;\nconst {\n  isBoolean,\n  isEnumMember,\n  isInstanceOf,\n  isInstanceOfOrNothing,\n  isNumberOrNothing,\n  isStringOrNothing,\n} = Parameter;\n\n// When a message is cloned for sending,\n// * We assume that it may NOT include circular references.\n//   These are also unsupported in the encoder.\n// * We assume that all properties to be cloned are enumerable.\n//   This has significant (~10% AD send rate) performance impact.\n\nconst MESSAGE_CLONE_OPTIONS = { circular: false, includeNonEnumerable: false };\n\n/**\n * Function called on construct/reset. Sets the initial values for fields that have them.\n * @param {Message} message The message to initialize\n * @internal\n */\nfunction initMessage(message) {\n  message._deliveryMode = MessageDeliveryModeType.DIRECT;\n  message._userCos = MessageUserCosType.COS1;\n  message._cacheStatus = MessageCacheStatus.LIVE;\n  message._spoolerUniqueId = undefined;\n  /* message._spoolerMessageId does not to be set to undefined\n   * message._spoolerMessageId should only be set when\n   * message._spoolerUniqueId is set to a value\n   * other than undefined or RgmidFactory.INVALID_SUID\n   */\n  message._priority = undefined;\n  message._deliveryCount = -1; // Makes the accessor throw, never returned to user.\n\n  // for tracing support\n  message._traceContextSetter = null;\n  message._creationContext = null;\n  message._transportContext = null;\n  message._baggage = new Baggage();\n}\n\n/**\n * Function called on reset only. Clears every field in the message. Call #initMessage\n * to set initial values.\n * @param {Message} message The message to clear\n * @internal\n */\nfunction clearMessage(message) {\n  const fields = Object.keys(message);\n  fields.forEach(f => delete message[f]);\n}\n\n/**\n * Function called to clear extended var-len message properties\n * @param {Message} message The message to update\n * @internal\n */\nfunction clearExtendedVarLenParameters(message) {\n  // clear the tracing support params since\n  // they use extended var-len encoding\n  message._transportContext = null;\n}\n\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users. Users should obtain an instance from\n * {@link solace.SolclientFactory.createMessage}</b>\n * <p>\n * A message is a container that can be used to store and send messages to and from the\n * Solace Message Router.\n *\n * Applications manage the lifecycle of a message; a message is created by calling\n * {@link solace.SolclientFactory.createMessage} and is freed by dereferencing it.\n *\n * API operations that cache or mutate messages always take a copy. A message may\n * be created, mutated by the API user, and sent multiple times.\n *\n * The Message Object provides methods to manipulate the common Solace\n * message header fields that are optionally sent in the binary metadata\n * portion of the Solace message.\n *\n * Applications can also use the structured data API {@link solace.Message#setSdtContainer}\n * to add containers (maps or streams) and their fields to the binary payload or\n * to the User Property map contained within the binary metadata.\n *\n * This does not prevent applications from ignoring these\n * methods and sending payload in the binary payload as an opaque binary field for\n * end-to-end communications\n *\n * @memberof solace\n * @extends solace.MessageTracingSupport\n */\nclass Message extends MessageTracingSupport {\n\n  /**\n   * @constructor\n   * @hideconstructor\n   **/\n  constructor() {\n    super(); // call the tracing support constructor\n    initMessage(this);\n  }\n\n  /**\n   * Gets the payload type ({@link solace.MessageType}) of the message. A message has a\n   * structured payload if one was attached via {@link solace.Message#setSdtContainer} otherwise\n   * if the payload is attached via {@link Message@setBinaryAttachment} then it\n   * is unstructured ({@link solace.MessageType#BINARY})\n   *\n   * @returns {solace.MessageType} The structured payload type.\n   * @default {solace.MessageType.BINARY}\n   */\n  getType() {\n    return this._messageType || MessageType.BINARY; // This is OK; BINARY === 0.\n  }\n\n  /**\n   * Sets the application-provided message ID.\n   * @param {?String} value The new value for the application-provided message ID.\n   */\n  setApplicationMessageId(value) {\n    this._applicationMessageId = isStringOrNothing('applicationMessageId', value);\n  }\n\n  /**\n   * Gets the application-provided message ID.\n   * @returns {?String} The application provided message ID.\n   */\n  getApplicationMessageId() {\n    return this._applicationMessageId;\n  }\n\n  /**\n   * Sets the application message type. This value is used by applications\n   * only, and is passed through the API and Solace Message Router untouched.\n   * @param {?String} value The application message type.\n   */\n  setApplicationMessageType(value) {\n    this._applicationMessageType = isStringOrNothing('applicationMessageType', value);\n  }\n\n  /**\n   * Gets the application message type. This value is used by applications\n   * only, and is passed through the API and Solace Message Router untouched.\n   * @returns {?String} The application message type.\n   */\n  getApplicationMessageType() {\n    return this._applicationMessageType;\n  }\n\n  /**\n   * Gets the binary attachment part of the message.\n   *\n   * Backward compatibility note: Using the version10 factory profile or older,\n   * the binary attachment is returned as a 'latin1' String:\n   * Each character has a code in the range * 0-255\n   * representing the value of a single received byte at that position.\n   *\n   * @returns {Uint8Array|String|null} A TypedArray view of the binary attachment.\n   */\n  getBinaryAttachment() {\n    if (this._binaryAttachment && ProfileBinding.value.byteArrayAsString) {\n      return this._binaryAttachment.toString('latin1');\n    }\n    return this._binaryAttachment;\n  }\n\n  /**\n   * Sets the binary attachment part of the message.\n   *\n   * The binary attachment is conceptually an array of bytes.\n   * When this method is used, the message payload type is {@link solace.MessageType#BINARY}\n   * See {@link solace.Message#getType}.\n   *\n   * Applications may set the binary attachment to NULL or undefined to\n   * remove the binary attachment and create a message with no payload.\n   *\n   * The following types are accepted:\n   *   Buffer (the nodeJS native type or equivalent)\n   *   ArrayBuffer,\n   *   Any DataView or TypedArray,\n   *   'latin1' String for backwards compatibility:\n   *     each character has a code in the range 0-255\n   *     representing exactly one byte in the attachment.\n   *\n   * @param {Uint8Array|ArrayBufferLike|DataView|String|null|undefined} value Sets the binary attachment part of the message.\n   */\n  setBinaryAttachment(value) {\n    if (value) {\n      this._messageType = MessageType.BINARY;\n    }\n    this._setBinaryAttachment(anythingToBuffer(value));\n  }\n  _setBinaryAttachment(value) {\n    this._binaryAttachment = value;\n  }\n\n  /**\n   * Given a Message containing a cached message, return the cache Request Id that\n   * the application set in the call to {@link solace.CacheSession#sendCacheRequest}.\n   *\n   * @returns {?Number} The request ID of the cache request associated with this message.\n   */\n  getCacheRequestId() {\n    return this._cacheRequestId;\n  }\n\n  /**\n   * @private\n   * @param {Number} cacheRequestID The cache request ID associated with this message\n   */\n  _setCacheRequestID(cacheRequestID) {\n    this._cacheRequestId = cacheRequestID;\n  }\n\n  /**\n   * Gets the correlation ID.  The message Correlation Id\n   * is carried in the Solace message headers unmodified by the API and\n   * the Solace Message Router. This field may be used for peer-to-peer\n   * message synchronization and is commonly used for correlating\n   * a request to a reply. See {@link solace.Session#sendRequest}.\n   * @returns {?String} The correlation ID associated with the message.\n   */\n  getCorrelationId() {\n    return this._correlationId;\n  }\n\n  /**\n   * Sets the correlation ID. The message Correlation Id\n   * is carried in the Solace message headers unmodified by the API and\n   * the Solace Message Router. This field may be used for peer-to-peer\n   * message synchronization and is commonly used for correlating\n   * a request to a reply. See {@link solace.Session#sendRequest}.\n   * @param {String|null|undefined} value The correlation ID to associate with the message.\n   */\n  setCorrelationId(value) {\n    this._correlationId = isStringOrNothing('correlationId', value);\n  }\n\n  /**\n   * Gets the correlation Key. A correlation key is used to correlate\n   * a message with its acknowledgement or rejection. The correlation key is an object that is\n   * passed back to the client during the router acknowledgement or rejection.\n   *\n   * The correlation key is a local reference\n   * used by applications generating Guaranteed messages. Messages that are\n   * sent in either {@link solace.MessageDeliveryModeType.PERSISTENT} or\n   * {@link solace.MessageDeliveryModeType.NON_PERSISTENT} mode may set the correlation key.\n   * @returns {?Object} The correlation Key associated with the message,\n   * or <code>null</code>, if unset.\n   */\n  getCorrelationKey() {\n    return this._correlationKey || null;\n  }\n\n  /**\n   * Sets the correlation Key. A correlation key is used to correlate\n   * a message with its acknowledgement or rejection. The correlation key is an object that is\n   * passed back to the client during the router acknowledgement or rejection.\n   *\n   * The correlation key is a local reference\n   * used by applications generating Guaranteed Messages. Messages that are\n   * sent in either {@link solace.MessageDeliveryModeType.PERSISTENT} or\n   * {@link solace.MessageDeliveryModeType.NON_PERSISTENT} mode may set the correlation key. If this\n   * method is used, the correlation information is returned\n   * when the {@link solace.SessionEventCode#event:ACKNOWLEDGED_MESSAGE} event\n   * is later received for an acknowledged message or when the\n   * {@link solace.SessionEventCode#event:REJECTED_MESSAGE_ERROR} is received for a rejected\n   * message.\n   *\n   * The API only maintains a reference to the passed object.  If the application requires the\n   * contents are unmodified for proper correlation, then it is the application's responsibility\n   * to ensure the contents of the object are not modified.\n   *\n   * Important: <b>The Correlation Key is not included in the\n   * transmitted message and is only used with the local API</b>\n   * @param {Object|String|null|undefined} value The correlation Key to associate with the message.\n   */\n  setCorrelationKey(value) {\n    this._correlationKey = value;\n  }\n\n  /**\n   * Gets whether the message is configured for delivering to one client only.\n   * @returns {Boolean} indicates whether the message is configured for\n   * delivering to one client only.\n   * @deprecated use Shared Subscriptions instead.\n   */\n  isDeliverToOne() {\n    return this._deliverToOne || false;\n  }\n\n  /**\n   * Sets whether the message is configured for delivering to one client only.\n   * @param {Boolean} value whether the message is configured for delivering to one client only.\n   * @deprecated use Shared Subscriptions instead.\n   */\n  setDeliverToOne(value) {\n    this._setDeliverToOne(this._deliverToOne = isBoolean('deliverToOne', value));\n  }\n  _setDeliverToOne(value) {\n    this._deliverToOne = value;\n  }\n\n  /**\n   * Gets the delivery mode of the message.\n   * @returns {solace.MessageDeliveryModeType} representing the delivery mode of the message.\n   */\n  getDeliveryMode() {\n    return this._deliveryMode;\n  }\n\n  /**\n   * Sets the delivery mode of the message.\n   * @param {solace.MessageDeliveryModeType} value The message delivery mode.\n   */\n  setDeliveryMode(value) {\n    this._setDeliveryMode(isEnumMember('deliveryMode', value, MessageDeliveryModeType));\n  }\n  _setDeliveryMode(value) {\n    this._deliveryMode = value;\n  }\n\n  /**\n   * Gets the destination to which the message was published.\n   * @returns {?Destination} The destination to which a message was published.\n   */\n  getDestination() {\n    return this._destination;\n  }\n\n  /**\n   * Sets the destination ({@link solace.DestinationType#Topic} or\n   * {@link solace.DestinationType#Queue}) to publish the message to.\n   * @param {Destination} value The destination to publish the message to.\n   */\n  setDestination(value) {\n    this._setDestination(isInstanceOf('destination', value, Destination));\n  }\n  _setDestination(value) {\n    this._destination = value;\n  }\n\n  /**\n   * Indicates whether one or more messages have been discarded prior\n   * to the current message. This indicates congestion discards only and\n   * is not affected by message eliding.\n   * @returns {Boolean} Returns true if one or more messages have been\n   * discarded prior to the current message; otherwise, it returns false.\n   */\n  isDiscardIndication() {\n    return this._discardIndication || false;\n  }\n\n  /**\n   * @private\n   * @param {Boolean} value The new value for discard indication\n   */\n  setDiscardIndication(value) {\n    this._setDiscardIndication(isBoolean('discardIndication', value));\n  }\n  _setDiscardIndication(value) {\n    this._discardIndication = value;\n  }\n\n  /**\n   * Returns whether the message is eligible for eliding.\n   * <p>\n   * Message eliding enables filtering of data to avoid transmitting\n   * every single update to a subscribing client.\n   * <p>\n   * This property does not indicate whether the message was elided.\n   *\n   * @returns {Boolean} indicates whether the message is eligible for eliding.\n   */\n  isElidingEligible() {\n    return this._elidingEligible || false;\n  }\n\n  /**\n   * Sets whether the message is eligible for eliding.\n   * <p>\n   * Message eliding enables filtering of data to avoid transmitting\n   * every single update to a subscribing client.\n   * <p>\n   * This property does not indicate whether the message was elided.\n   *\n   * @param {Boolean} value sets whether the message is eligible for eliding.\n   */\n  setElidingEligible(value) {\n    this._setElidingEligible(isBoolean('setElidingEligible', value));\n  }\n  _setElidingEligible(value) {\n    this._elidingEligible = value;\n  }\n\n  /// ---------------------------------------------------------\n  // * Internal use only methods on the message, for fields set by the internal\n  // * publisher\n  /// ---------------------------------------------------------\n\n  /**\n   * @returns {Number} The publisher ID\n   * @private\n   */\n  getPublisherId() {\n    return this._publisherId;\n  }\n  /**\n   * @param {Number} value  The publisher ID to set\n   * @private\n   */\n  setPublisherId(value) {\n    this._publisherId = value;\n  }\n\n  /**\n   * @returns {Number} The publisher message ID\n   * @private\n   */\n  getPublisherMessageId() {\n    return this._publisherMsgId;\n  }\n  /**\n   * @param {Number} value The publisher message ID to set\n   * @private\n   */\n  setPublisherMessageId(value) {\n    this._publisherMsgId = value;\n  }\n\n  /// -------------------------------------------------------------\n  // * User-settable properties for publishing\n  /// -------------------------------------------------------------\n\n  /**\n   * @returns {Number} The Guaranteed Message TTL, in milliseconds.\n   */\n  getTimeToLive() {\n    return this._timeToLive;\n  }\n  /**\n   * @param {Number} value The Guaranteed Message TTL to set, in milliseconds.\n   *\n   * The time to live is the number of milliseconds the message may be stored on the\n   * Solace Message Router before the message is discarded or moved to a Dead Message\n   * Queue. See {@link solace.Message.setDMQEligible}.\n   *\n   * Setting the Time To Live to zero disables TTL for the message.\n   *\n   * This property is only valid for Guaranteed messages (Persistent and Non-Persistent).\n   * It has no effect when used in conjunction with other message types unless the message\n   * is promoted by the appliance to a Guaranteed message.\n   *\n   * The maxium allowed time to live is 3.1536E11 (315360000000) which is\n   * approximately 10 years.\n   */\n  setTimeToLive(value) {\n    const MAX_MESSAGE_TTL_MS = (10 * 365 * 24 * 60 * 60 * 1000); // approximately 10 years\n\n    // Allow parser and initializer to set timeToLive to undefined\n    if (value === null || value === undefined) {\n      this._timeToLive = value;\n      return;\n    }\n    if (typeof value !== 'number' || isNaN(value)) {\n      throw new OperationError('Invalid type for time to live',\n        ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n    if (value < 0 || value > MAX_MESSAGE_TTL_MS) {\n      throw new OperationError('Invalid time to live value',\n        ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n    this._timeToLive = value;\n  }\n\n  /**\n   * @returns {Number|undefined} The Guaranteed Message expiration value.\n   * The expiration time is the UTC time\n   * (that is, the number of milliseconds from midnight January 1, 1970 UTC) when the\n   * message is to expire.\n   */\n  getGMExpiration() {\n    return this._expiration;\n  }\n  /**\n   * Set the expiration time field. The expiration time is the UTC time\n   * (that is, the number of milliseconds from midnight January 1, 1970 UTC) when the\n   * message is to expire. The expiration time is carried in the message when set to\n   * a non-zero value. Expiration time is not included when this value is set to zero or\n   * undefined\n   *\n   * The message expiration time is carried to clients that receive the message\n   * unmodified and does not effect the life cycle of the message. Use\n   * {@link solace.Message#setTimeToLive} to enforce message expiry in the network.\n   *\n   * @param {?Number} value The new Guaranteed Message expiration value\n   */\n  setGMExpiration(value) {\n    this._expiration = isNumberOrNothing('GMExpiration', value);\n  }\n\n  /**\n   * @returns {Boolean} Whether this message is Guaranteed Message DMQ eligible\n   */\n  isDMQEligible() {\n    return this._dmqEligible || false;\n  }\n  /**\n   * @param {Boolean} value The new value for Guaranteed Message DMQ (Dead Message Queue) Eligible.\n   * When this property is set, when the message expires in the network\n   * the message is saved on a appliance dead message queue. Otherwise the expired message is\n   * discarded. See {@link solace.Message#setTimeToLive}.\n   * @default false\n   */\n  setDMQEligible(value) {\n    this._setDMQEligible(isBoolean('DMQEligible', value));\n  }\n  _setDMQEligible(value) {\n    this._dmqEligible = value;\n  }\n\n  /// ---------------------------------------------------------\n  // * Internal use only methods on the message, for fields set by the consumer flow\n  /// ---------------------------------------------------------\n\n  /**\n   * @returns {Long} The ID of the flow that received this message\n   * @private\n   */\n  getFlowId() {\n    return this._flowId;\n  }\n  /**\n   * @param {Long} value The flow ID that received this message\n   * @private\n   */\n  setFlowId(value) {\n    this._flowId = value;\n  }\n\n  /**\n   * @returns {Long} The Guaranteed Message prevMsgId\n   * @private\n   */\n  getGuaranteedPreviousMessageId() {\n    return this._guaranteedPrevMsgId;\n  }\n  /**\n   * @param {Long} value The Guaranteed Message prevMsgId to set\n   * @private\n   */\n  setGuaranteedPreviousMessageId(value) {\n    this._guaranteedPrevMsgId = value;\n  }\n\n  /**\n   * @param {Long} value Spooler unique id value\n   * @private\n   */\n  _setSpoolerUniqueId(value) {\n    this._spoolerUniqueId = value;\n  }\n\n  /**\n   * @returns {?Long} value of Spooler unique id\n   * @private\n   */\n  _getSpoolerUniqueId() {\n    // This can be set via the smf header or by the message consumer\n    // using _setSpoolerUniqueId.\n    // The message consumer check if a data message has a suid set\n    // the updates the consumer stored value for suid from the message value.\n    // If the message does not have a suid the message consumer sets the suid\n    // of the message using _setSpoolerUniqueId.\n    // See consumer-fsm.acceptMessage for details.\n    if (this._spoolerUniqueId === undefined) {\n      return RgmidFactory.INVALID_SUID;\n    }\n    return this._spoolerUniqueId;\n  }\n\n  /// ---------------------------------------------------------\n  // * Properties set by the Message Consumer\n  /// ---------------------------------------------------------\n\n  /**\n   * @returns {?solace.MessageConsumer} The associated Message Consumer, if received by a consumer\n   */\n  getMessageConsumer() {\n    return this._consumer;\n  }\n  /**\n   * @param {solace.MessageConsumer} value The Message Consumer to associate with this message\n   * @private\n   */\n  setMessageConsumer(value) {\n    this._consumer = value;\n  }\n\n  /**\n   * This message ID is NOT a universal unique identifier for the message.\n   * There is no use for this message ID in an application.\n   * Internally this message ID is used when a message is acknowledged\n   * calling Message.acknowledge().\n   * No other meaning should be inferred from the value of this message ID.\n   * @returns {?Long} A field in the message structure intended for internal use.\n   * @deprecated There is no useful purpose for this method. Do not use it.\n   */\n  getGuaranteedMessageId() {\n    return this._guaranteedMsgId;\n  }\n  /**\n   * @param {Long} value The Guaranteed Message msgId to set\n   * @private\n   */\n  setGuaranteedMessageId(value) {\n    this._guaranteedMsgId = value;\n  }\n\n  /**\n   * @param {Long} value Spooler message id value, this can be the mateAckId or the AckId\n   * @private\n   */\n  _setSpoolerMessageId(value) {\n    this._spoolerMessageId = value;\n  }\n\n  /**\n   * Returns the Replication Group Message Id\n   * @returns {?solace.ReplicationGroupMessageId} The replication group message id\n   *  assigned by the router.\n   */\n  getReplicationGroupMessageId() {\n    if (this._spoolerUniqueId === undefined\n       || RgmidFactory.INVALID_SUID.eq(this._spoolerUniqueId)) {\n      return undefined;\n    }\n    /* use this._spoolerMessageId if possible otherwise use this._guaranteedMsgId */\n    const smid = this._spoolerMessageId || this._guaranteedMsgId;\n    /* Note smid as this._guaranteedMsgId must have a value\n     * if this._spoolerUniqueId is not RgmidFactory.INVALID_SUID */\n    return RgmidFactory.from({ suid: this._spoolerUniqueId, msgid: smid });\n  }\n\n  /**\n   * Returns the Topic Sequence Number.  If there is no topic sequence number\n   * undefined is returned.\n   * @returns {?Long} The Topic Sequence number assigned to this message by the Message Router.\n   */\n  getTopicSequenceNumber() {\n    return this._topicSequenceNumber;\n  }\n\n  /**\n   * @param {Long} topicSeqNo The Topic Sequence Number to set\n   * @private\n   */\n  setTopicSequenceNumber(topicSeqNo) {\n    this._topicSequenceNumber = topicSeqNo;\n  }\n\n  /**\n   * Returns the delivery count.\n   *\n   * @returns {Number|undefined} The delivery count reported by the broker.\n   * @throws {solace.OperationError} if endpoint does not report delivery count (message is not persistent).\n   */\n\n  getDeliveryCount() {\n    if (this._deliveryCount === -1) {\n      throw new OperationError('Endpoint does not report delivery count.',\n        ErrorSubcode.INVALID_OPERATION);\n    } // else\n    return this._deliveryCount;\n  }\n\n  /**\n   * @param {Number} deliveryCount on this message.\n   * @private\n   */\n  setDeliveryCount(deliveryCount) {\n    this._deliveryCount = deliveryCount;\n  }\n\n\n  /**\n   * Settles this message in a requested way.\n   *\n   * If the {@link solace.MessageConsumer} on which this message was received is configured to use\n   * {@link solace.MessageConsumerAckMode.CLIENT}, then when a message is received by an\n   * application, the application must call this method to explicitly acknowledge reception of the\n   * message. This frees local and router resources associated with an unacknowledged message.\n   *\n   * The API does not send acknowledgments immediately. It stores the state for\n   * acknowledged messages internally and acknowledges messages, in bulk, when a\n   * threshold or timer is reached.\n   *\n   * @param {solace.MessageOutcome} messageSettlementOutcome type of the settlement outcome, not expected to be {@code null}\n   * @throws {@link solace.OperationError}\n   *  * if broker does not support the specified outcome option;\n   *  * if the flow was created without specifying required {@link MessageOutcome}\n   *    Options within the consumer properties;\n   *  * if the associated {@link solace.Session} is configured\n   *    to use SUPPORTED_MESSAGE_ACK_AUTO (the default behaviour),\n   *    the use of {@link MessageOutcome#REJECTED}\n   *    and {@link MessageOutcome#FAILED} are not supported;\n   *  * if the associated {@link solace.Session} is not connected;\n   *    subcode: {@link solace.ErrorSubcode.SESSION_NOT_CONNECTED}\n   *  * if the associated {@link solace.MessageConsumer} is not connected\n   *    subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}\n   *\n   *    @see {@link solace.MessageOutcome}for detailed explanation of available options\n   */\n  settle(messageSettlementOutcome) {\n    // implementation here\n    // validation checks here\n    if (this._acked) {\n      throw new OperationError('Message can only be settled once',\n        ErrorSubcode.MESSAGE_ALREADY_ACKNOWLEDGED);\n    }\n    if (this._deliveryMode === MessageDeliveryModeType.DIRECT) {\n      throw new OperationError('Cannot settle a DIRECT message',\n        ErrorSubcode.MESSAGE_DELIVERY_MODE_MISMATCH);\n    }\n    if (!this._consumer) {\n      throw new OperationError('Cannot settle a locally-created message',\n        ErrorSubcode.MESSAGE_DELIVERY_MODE_MISMATCH);\n    }\n    if (!this._consumer._sessionInterface.canAck) {\n      throw new OperationError('Cannot settle using associated session',\n        ErrorSubcode.SESSION_NOT_CONNECTED);\n    }\n    if (!this._consumer.canAck) {\n      throw new OperationError('Cannot settle using associated Message Consumer',\n        ErrorSubcode.INVALID_OPERATION);\n    }\n    if (this._consumer.getProperties().browser) {\n      throw new OperationError('Messages delivered to a Queue Browser can only be deleted by calling QueueBrowser.removeMessageFromQueue()',\n        ErrorSubcode.INVALID_OPERATION);\n    }\n    // check to ensure that you cannot manually settle a message with acknowledgeMode = AUTO\n    if (this._consumer._fsm.hasAutoAckSupport) {\n      LOG_WARN(`Consumer configured to auto-acknowledge messages, so message ${\n        this._guaranteedMsgId} cannot be application settled`);\n      return;\n    }\n\n    // validate the settlement outcome and send correct Enum value\n    const settlementOutcome = messageSettlementOutcome;\n    if (MessageOutcome.values.indexOf(settlementOutcome) === -1) {\n      throw new OperationError(`Settlement outcome for message must be valid`,\n        ErrorSubcode.INVALID_OPERATION);\n    }\n\n    // check that the broker consumer session has support for the outcome and \n    const doesConsumerSupportOutcome = this._consumer.getProperties().requiredSettlementOutcomes.some(v => v === settlementOutcome);\n    // that the session was created with support for the outcome\n    if (settlementOutcome != MessageOutcome.ACCEPTED && !doesConsumerSupportOutcome) {\n      throw new OperationError(`solace.MessageOutcome.${MessageOutcome.nameOf(settlementOutcome)} not supported for this Message Consumer`,\n        ErrorSubcode.INVALID_OPERATION);\n    }\n\n    // actual settlement logic\n    this._consumer.applicationSettle(this._guaranteedMsgId, settlementOutcome);\n    this._acked = true; // also set as ACKed/settled\n  }\n\n  /**\n   * Returns whether settle(solace.MessageOutcome) has been called on this message.\n   *\n   * @readonly\n   * @type {Boolean}\n   */\n  get isSettled() {\n    return this._acked || false;\n  }\n\n  /**\n   * Internal validation checks before we attempt to acknowledge this message.\n   * @private\n   */\n  _validateBeforeAcknowledge() {\n    if (this._acked) {\n      throw new OperationError('Message can only be acknowledged once',\n        ErrorSubcode.MESSAGE_ALREADY_ACKNOWLEDGED);\n    }\n    if (this._deliveryMode === MessageDeliveryModeType.DIRECT) {\n      throw new OperationError('Cannot acknowledge a DIRECT message',\n        ErrorSubcode.MESSAGE_DELIVERY_MODE_MISMATCH);\n    }\n    if (!this._consumer) {\n      throw new OperationError('Cannot acknowledge a locally-created message',\n        ErrorSubcode.MESSAGE_DELIVERY_MODE_MISMATCH);\n    }\n    if (!this._consumer._sessionInterface.canAck) {\n      throw new OperationError('Cannot acknowledge using associated session',\n        ErrorSubcode.SESSION_NOT_CONNECTED);\n    }\n    if (!this._consumer.canAck) {\n      throw new OperationError('Cannot acknowledge using associated Message Consumer',\n        ErrorSubcode.INVALID_OPERATION);\n    }\n    if (this._consumer.getProperties().browser) {\n      throw new OperationError('Messages delivered to a Queue Browser can only be deleted by calling QueueBrowser.removeMessageFromQueue()',\n        ErrorSubcode.INVALID_OPERATION);\n    }\n  }\n\n  /**\n   * Acknowledges this message.\n   * This is the same as calling {@link solace.Message#settle(solace.MessageOutcome.ACCEPTED)}.\n   * Internally uses Message.settle() with the ACCEPTED MessageOutcome.\n   *\n   * If the {@link solace.MessageConsumer} on which this message was received is configured to use\n   * {@link solace.MessageConsumerAckMode.CLIENT}, then when a message is received by an\n   * application, the application must call this method to explicitly acknowledge reception of the\n   * message. This frees local and router resources associated with an unacknowledged message.\n   *\n   * The API does not send acknowledgments immediately. It stores the state for\n   * acknowledged messages internally and acknowledges messages, in bulk, when a\n   * threshold or timer is reached.\n   *\n   * @throws {@link solace.OperationError}\n   *  * if this message was not received via Guaranteed Message;\n   *    subcode: {@link solace.ErrorSubcode.MESSAGE_DELIVERY_MODE_MISMATCH}\n   *  * if the associated {@link solace.Session} is not connected;\n   *    subcode: {@link solace.ErrorSubcode.SESSION_NOT_CONNECTED}\n   *  * if the associated {@link solace.MessageConsumer} is not connectedl\n   *    subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}\n   */\n  acknowledge() {\n    // call all the validations before we acknowledge message\n    this._validateBeforeAcknowledge();\n\n    // check to ensure that you cannot manually settle a message with acknowledgeMode = AUTO\n    if (this._consumer._fsm.hasAutoAckSupport) {\n      LOG_WARN(`Consumer configured to auto-acknowledge messages, so message ${\n        this._guaranteedMsgId} cannot be application acknowledge`);\n      return;\n    }\n\n    // use settlement implementation with ACCEPTED outcome\n    this._consumer.applicationAck(this._guaranteedMsgId, false);\n    this._acked = true; // also set message as acked/settled\n  }\n\n  /**\n   * Used by the message-dispatcher to auto-acknowledge this message.\n   * @internal\n   */\n  _autoAcknowledge() {\n    // call all the validations before we acknowledge message\n    this._validateBeforeAcknowledge();\n\n    // use settlement implementation with ACCEPTED outcome\n    this._consumer.applicationAck(this._guaranteedMsgId, true);\n    this._acked = true; // also set message as acked/settled\n  }\n\n  /**\n   * Returns whether acknowledge() has been called on this message.\n   *\n   * @readonly\n   * @type {Boolean}\n   */\n  get isAcknowledged() {\n    return this._acked || false;\n  }\n\n  /**\n   * Test if the Acknowledge Immediately message property is set or not.\n   * When the Acknowledge Immediately property is set to true on an outgoing\n   * Guaranteed Message,\n   * it indicates that the Solace Message Router should Acknowledge this message\n   * immediately upon receipt.\n   *\n   * This property, when set by a publisher, may or may not be removed by the\n   * Solace Message Router prior to delivery to a consumer, so message consumers\n   * must not expect the property value indicates how the message was\n   * originally published\n   * @returns {Boolean} Whether this message was set to acknowledge immediately.\n   */\n  isAcknowledgeImmediately() {\n    return this._ackImmediately || false;\n  }\n  /**\n   * Set the optional Acknoweledge Immediately message property.\n   * When the Acknowledge Immediately property is set to true on an outgoing Guaranteed Message,\n   * it indicates that the Solace Message Router should acknoweledge this message\n   * immediately upon receipt. By default the property is set to false on newly created messages.\n   *\n   * This property, when set by a publisher, may or may not be removed by the appliance\n   * prior to delivery to a consumer, so message consumers must not expect the property value\n   * indicates how the message was originally published. Therefore if a received message\n   * is forwarded by the application, the Acknowledge Immediately property should be\n   * explicitly set to the desired value (true or false).\n   *\n   * Setting this property on an outgoing direct message has no effect.\n   *\n   * @param {Boolean} value Whether to acknowledge this message immediately.\n   */\n  setAcknowledgeImmediately(value) {\n    this._setAcknowledgeImmediately(isBoolean('acknowledgeImmediately', value));\n  }\n  _setAcknowledgeImmediately(value) {\n    this._ackImmediately = value;\n  }\n\n  /**\n   * Gets the cache status of this message.\n   *\n   * @returns {?solace.MessageCacheStatus} The cache status of this message. The status\n   * will be MessageCacheStatus.LIVE unless the message was returned in a\n   * reply to a cache request.\n   */\n  getCacheStatus() {\n    return this._cacheStatus;\n  }\n\n  /**\n   * @param {solace.MessageCacheStatus} cacheStatus The new cache status for this message\n   * @private\n   */\n  _setCacheStatus(cacheStatus) {\n    this._cacheStatus = cacheStatus;\n  }\n\n  /**\n   * Returns whether the message's reply field is set, indicating\n   * that this message is a reply to a previous request. See {@link solace.Session#sendRequest}.\n   * @returns {Boolean} Indicates the state of the reply field.\n   */\n  isReplyMessage() {\n    return this._replyMessage || false;\n  }\n\n  /**\n   * Indicates whether the message has been marked as redelivered by the Solace Message Router.\n   * @returns {Boolean} Indicates whether the redelivered flag is set.\n   */\n  isRedelivered() {\n    return this._redelivered || false;\n  }\n  /**\n   * @param {Boolean} value The redelivered flag\n   * @private\n   */\n  setRedelivered(value) {\n    this._redelivered = value;\n  }\n\n  /**\n   * Sets the <i>reply</i> field of the message.\n   * @param {Boolean} value Sets whether to flag the message as a reply.\n   */\n  setAsReplyMessage(value) {\n    this._replyMessage = isBoolean('asReplyMessage', value);\n  }\n\n  /**\n   * Gets the receive timestamp (in milliseconds, from midnight, January 1, 1970 UTC).\n   * @returns {?Number} The receive timestamp, if set.\n   */\n  getReceiverTimestamp() {\n    return this._receiverTimestamp;\n  }\n\n  /**\n   * Gets the replyTo destination\n   * @returns {?solace.Destination} The value of the replyTo destination, if set.\n   */\n  getReplyTo() {\n    return this._replyTo;\n  }\n\n  /**\n   * Sets the replyTo destination\n   * @param {solace.Destination} value The replyTo destination.\n   */\n  setReplyTo(value) {\n    this._replyTo = isInstanceOfOrNothing('replyTo', value, Destination);\n  }\n\n  /**\n   * Returns the Sender's ID.\n   * @returns {?String} The Sender's ID, if set.\n   */\n  getSenderId() {\n    return this._senderId;\n  }\n\n  /**\n   * Sets the Sender ID for the message\n   * @param {String} value The Sender ID for the message.\n   */\n  setSenderId(value) {\n    this._senderId = isStringOrNothing('senderId', value);\n  }\n\n  /**\n   * Gets the send timestamp (in milliseconds, from midnight, January 1,\n   * 1970 UTC).\n   * @returns {?Number} The send timestamp, if set.\n   */\n  getSenderTimestamp() {\n    return this._senderTimestamp;\n  }\n\n  /**\n   * Sets the send timestamp (in milliseconds, from midnight, January 1,\n   * 1970 UTC). This field can be generated automatically during message\n   * publishing, but it will not be generated if previously set to a non-null value by this method.\n   * See {@link solace.SessionProperties#generateSendTimestamps}.\n   *\n   * An application that publishes the same {@link solace.Messsage} multiple times and\n   * also wants generted timestamps on each messages, should set the sender timestamp\n   * to undefined after each call to {@link solace.Session#send}.\n   * @param {?Number} value The value to set as the send timestamp.\n   */\n  setSenderTimestamp(value) {\n    this._senderTimestamp = isNumberOrNothing('senderTimestamp', value);\n  }\n\n  /**\n   * Gets the sequence number.\n   * <p>\n   * This is an application-defined field,\n   * see <code>{@link solace.Message#setSequenceNumber}()</code>.\n   * @returns {?Number} The sequence number, if set\n   * @throws {@link solace.SDTUnsupportedValueError} in case the sequence number is out of range.\n   */\n  getSequenceNumber() {\n    if (this._sequenceNumberError) {\n      throw this._sequenceNumberError;\n    }\n    return this._sequenceNumber;\n  }\n\n  /**\n   * Sets the application-defined sequence number. If the sequence number\n   * is not set, or set to undefined, and {@link solace.SessionProperties#generateSequenceNumber}\n   * is true, then a sequence number is automatically generated for each sent message.\n   * @param {?Number} value The sequence number.\n   */\n  setSequenceNumber(value) {\n    if (value instanceof SDTUnsupportedValueError) {\n      this._sequenceNumberError = value;\n    } else {\n      this._sequenceNumber = isNumberOrNothing('sequenceNumber', value);\n      this._sequenceNumberError = undefined;\n      //TODO: this is probably wrong. Shouldn't it be cleared if value === undefined?\n      this._autoSequenceNumber = false;\n    }\n  }\n\n  /**\n   * Gets the Class of Service (CoS) value for the message.\n   * The Class of Service has different semantics for direct and guaranteed messages.\n   *\n   * For messages published with {@link solace.MessageDeliveryModeType.DIRECT}, the\n   * class of service selects the weighted round-robin delivery queue when the\n   * message is forwarded to a consumer.  {@link solace.MessageUserCosType.COS1} are the\n   * lowest priority messages and will use the Solace Message Router D-1 delivery queues.\n   *\n   * For messages published as guaranteed messages\n   * ({@link solace.MessageDeliveryModeType.PERSISTENT} or\n   * {@link solace.MessageDeliveryModeType.NON_PERSISTENT}), messages published\n   * with {@link solace.MessageUserCosType.COS1} can be rejected by the Solace Message Router if\n   * that message would cause any queue or topic-endpoint to exceed its configured\n   * low-priority-max-msg-count.\n   *\n   * @returns {solace.MessageUserCosType} The COS value.\n   */\n  getUserCos() {\n    return this._userCos;\n  }\n\n  /**\n   * Gets the Message Priority Parameter (JMS Priority) value for the message.\n   * Numerical values between 0 and 255 are valid return values,\n   * undefined means the parameter is not present.\n   *\n   * If destination queues and topic endpoints for this message\n   * are configured to respect message priority,\n   * the values 0 through 9 can be used to affect the priority\n   * of delivery to consumers of those queues or topic endpoints.\n   * For the purposes of prioritized message delivery,\n   * values larger than 9 are treated the same as 9.\n   *\n   * @returns {Number} The Message Priority Parameter value.\n   */\n  getPriority() {\n    return this._priority;\n  }\n\n  /**\n   * Sets the Class of Service (CoS) value for the message.\n   *\n   * The Class of Service has different semantics for direct and guaranteed messages.\n   *\n   * For messages published with {@link solace.MessageDeliveryModeType.DIRECT}, the\n   * class of service selects the weighted round-robin delivery queue when the\n   * message is forwarded to a consumer.  {@link solace.MessageUserCosType#COS1} are the\n   * lowest priority messages and will use the Solace Message Router D-1 delivery queues.\n   *\n   * For messages published as guaranteed messages\n   * ({@link solace.MessageDeliveryModeType.PERSISTENT} or\n   * {@link solace.MessageDeliveryModeType.NON_PERSISTENT}), messages published\n   * with {@link solace.MessageUserCosType#COS1} can be rejected by the Solace Message Router if\n   * that message would cause any queue or topic-endpoint to exceed its configured\n   * low-priority-max-msg-count.\n   *\n   * @param {solace.MessageUserCosType} value The COS value.\n   * @default {solace.MessageUserCosType#COS1}\n   */\n  setUserCos(value) {\n    this._setUserCos(isEnumMember('userCos', value, MessageUserCosType));\n  }\n  _setUserCos(value) {\n    this._userCos = value;\n  }\n\n  /**\n   * Sets the Message Priority Parameter (JMS Priority) value for the message.\n   * Numerical values between 0 and 255 are accepted,\n   * use undefined to unset.\n   *\n   * If destination queues and topic endpoints for this message\n   * are configured to respect message priority,\n   * the values 0 through 9 can be used to affect the priority\n   * of delivery to consumers of those queues or topic endpoints.\n   * For the purposes of prioritized message delivery, values larger than 9\n   * are treated the same as 9.\n   *\n   * @param {?Number} value The priority value.\n   */\n  setPriority(value) {\n    if (value === undefined || value === null) {\n      this._setPriority(undefined);\n      return;\n    }\n    if (typeof value !== 'number' || isNaN(value)) {\n      throw new OperationError('Invalid type for message priority',\n        ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n    if (value < 0 || value > 255) {\n      throw new OperationError('Invalid priority value',\n        ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n    this._setPriority(value);\n  }\n\n  _setPriority(value) {\n    this._priority = value;\n  }\n\n  /**\n   * Gets the user data part of the message.\n   * @returns {String} The user data part of the message, if set.\n   */\n  getUserData() {\n    return this._userData;\n  }\n\n  /**\n   * Sets the user data part of the message.\n   * @param {String} value The user data part of the message.\n   */\n  setUserData(value) {\n    this._setUserData(isStringOrNothing('userData', value));\n  }\n  _setUserData(value) {\n    this._userData = value;\n  }\n\n  /**\n   * Gets the XML content part of the message.\n   * Notice that the content is encoded as UTF-8 characters,\n   * it needs to be decoded as JavaScript surrogate pair: decodeURIComponent(escape(value))\n   * @returns {?String} The XML content part of the message, if set.\n   */\n  getXmlContent() {\n    return this._xmlContent;\n  }\n\n  /**\n   * Gets the XML content part of the message decoded from UTF-8 encoding of the characters.\n   * @returns {?String} The XML content part of the message. Returns <code>null</code> if not\n   * present.\n   */\n  getXmlContentDecoded() {\n    return this._xmlContent ? utf8ToUcs2(this._xmlContent) : this._xmlContent;\n  }\n\n  /**\n   * Sets the XML content part of the message.\n   * The content is encoded by replacing each instance of certain characters\n   * by one, two, three, or four escape sequences representing the\n   * UTF-8 encoding of the character.\n   * @param {String} value The XML content part of the message.\n   */\n  setXmlContent(value) {\n    const setValue = isStringOrNothing('xmlContent', value);\n    this._xmlContent = setValue ? unescape(encodeURIComponent(setValue)) : setValue;\n  }\n\n  /**\n   * Internal set for the XML content part of the message.\n   * @param {String} value The XML content part of the message.\n   * @private\n   */\n  _setXmlContentInternal(value) {\n    this._xmlContent = isStringOrNothing('xmlContentInternal', value);\n  }\n\n  /**\n   * Sets the message's XML metadata section.\n   * @param {String} value The XML metadata.\n   */\n  setXmlMetadata(value) {\n    this._setXmlMetadata(isStringOrNothing('xmlMetadata', value));\n  }\n  _setXmlMetadata(value) {\n    this._xmlMetadata = value;\n  }\n\n  /**\n   * Gets the message's XML metadata section.\n   * @returns {?String} The XML metadata, if set.\n   */\n  getXmlMetadata() {\n    return this._xmlMetadata;\n  }\n\n  /**\n   * @private\n   */\n  get binaryMetadataChunk() {\n    return this._binaryMetaChunk || null;\n  }\n  /**\n   * @param {?String} meta The meta chunk to set\n   * @private\n   */\n  set binaryMetadataChunk(meta) {\n    this._binaryMetaChunk = meta;\n  }\n\n  /**\n   * @private\n   */\n  get smfHeader() {\n    return this._smfHeader;\n  }\n  /**\n   * @param {SMFHeader} val The SMF header to set\n   * @private\n   */\n  set smfHeader(val) {\n    this._smfHeader = val;\n  }\n\n  /**\n   * @private\n   */\n  get hasAutoSequenceNumber() {\n    return this._autoSequenceNumber || false;\n  }\n  /**\n   * @param {Boolean} value Value to set\n   * @private\n   */\n  set hasAutoSequenceNumber(value) {\n    this._autoSequenceNumber = value;\n  }\n\n  /**\n   * @private\n   */\n  get hasAutoSenderTimestamp() {\n    return this._autoSenderTimestamp || false;\n  }\n  /**\n   * @param {Number} value Value to set\n   * @private\n   */\n  set hasAutoSenderTimestamp(value) {\n    this._autoSenderTimestamp = value;\n  }\n\n  /**\n   * Gets the user property map carried in the message binary metadata.\n   *\n   * @returns {?solace.SDTMapContainer} The user properties map, if set.\n   */\n  getUserPropertyMap() {\n    return this._userPropertyMap;\n  }\n\n  /**\n   * Allows users to specify their own user properties to be carried\n   * in the message binary metadata separate from the payload.\n   * @param {?SDTMapContainer} value The user property map.\n   */\n  setUserPropertyMap(value) {\n    this._userPropertyMap = isInstanceOfOrNothing('userPropertyMap', value, SDTMapContainer);\n  }\n\n  /**\n   * Makes this message a strutured data message by assigning it a\n   * structured data type (SDT) container payload (such as a\n   * {@link solace.SDTMapContainer}, {@link solace.SDTStreamContainer}\n   * or a {@link solace.SDTFieldType.String}, which is transported in the binary attachment field.\n   *\n   * Assigning a SDT container updates the message's Type property to\n   * the appropriate value.\n   *\n   * The container argument must be a {@link solace.SDTField} with a type\n   * of {@link solace.SDTFieldType.MAP}, {@link solace.SDTFieldType.STREAM},\n   * or {@link solace.SDTFieldType.STRING}.\n   *\n   * @param {?solace.SDTField} container The SDTField container to send in this message.\n   */\n  setSdtContainer(container) {\n    const structuredContainer = isInstanceOfOrNothing('sdtContainer', container, SDTField);\n    if (structuredContainer === null || structuredContainer === undefined) {\n      // clear\n      this._structuredContainer = null;\n      this.setBinaryAttachment(null);\n      return;\n    }\n\n    this._setBinaryAttachment(null);\n    const sdtType = structuredContainer.getType();\n    switch (sdtType) {\n      case SDTFieldType.MAP:\n        this._messageType = MessageType.MAP;\n        break;\n      case SDTFieldType.STREAM:\n        this._messageType = MessageType.STREAM;\n        break;\n      case SDTFieldType.STRING:\n        this._messageType = MessageType.TEXT;\n        break;\n      default:\n        throw new OperationError('Invalid parameter: expected SDTField Type of ' +\n          'MAP, STREAM, or STRING.',\n          ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n    this._structuredContainer = structuredContainer;\n  }\n\n  /**\n   * Gets the message's structured data container, if this is a structured data message.\n   *\n   * @returns {SDTField|null} A field with a payload of {String}, {@link SDTMapContainer},\n   * or {@link SDTStreamContainer} if one was set in the message; otherwise, null.\n   */\n  getSdtContainer() {\n    const msgType = this.getType();\n    const binaryAttachment = this._binaryAttachment;\n    const binaryAttachmentLength = binaryAttachment ? binaryAttachment.length : 0;\n\n    if (msgType === MessageType.BINARY) {\n      LOG_DEBUG(`getSdtContainer returned null, reason: msgType=${msgType}`);\n      return null;\n    }\n\n    // MAP, STREAM or TEXT\n    // Use cached structured container if available\n    if (typeof this._structuredContainer !== 'undefined') {\n      return this._structuredContainer;\n    }\n\n    if (binaryAttachmentLength === 0) {\n      LOG_DEBUG(`getSdtContainer returned null, reason: len=${binaryAttachmentLength}`);\n      this._structuredContainer = null;\n    } else {\n      // Last resort: Decode binary attachment.\n      // Cache structured container for later access\n      this._structuredContainer = SDTCodec.parseSingleElement(binaryAttachment, 0);\n    }\n\n\n    return this._structuredContainer;\n  }\n\n  // Message Tracing Section\n\n  /**\n   * Gets the sequence number.\n   * <p>\n   * This is an application-defined field,\n   * see <code>{@link solace.Message#setSequenceNumber}()</code>.\n   * @returns {?Number} The sequence number, if set\n   * @throws {@link solace.SDTUnsupportedValueError} in case the sequence number is out of range.\n   */\n  getSequenceNumber() {\n    if (this._sequenceNumberError) {\n      throw this._sequenceNumberError;\n    }\n    return this._sequenceNumber;\n  }\n\n  /**\n   * Retrieves a {@link solace.TraceContextSetter} object that is used to modify \n   * an appropriate TraceContext associated with a message transparently.\n   * When no context is stored in a message it will create and store a creation \n   * context with a message that can be used as an initial\n   * transport context at the same time. \n   * It will never override an existing message creation context. \n   * When creation context is present or only transport context is present, it will\n   * override an existing transport context information with a newly provided one.\n   * \n   * @returns {solace.TraceContextSetter} Transport context setter object associated with this message; never expected to be null\n   */\n  getTraceContextSetter() {\n    // return the parent method\n    return super.getTraceContextSetter();\n  }\n\n  /**\n   * Retrieves a {@link solace.TraceContext} object used for carrying over of the distributed tracing\n   * message creation context information usable by intermediary instrumentation across\n   * service boundaries. It allows correlating the producer with the consumers of a message,\n   * regardless of intermediary instrumentation. It must not be altered by intermediaries.\n   *\n   * @returns {solace.TraceContext} Message creation context object associated with this message;\n   */\n  getCreationContext() {\n    // call the parent method. Returns a readonly copy\n    return super.getCreationContext();\n  }\n \n  /**\n   * Retrieves a {@link solace.TraceContext} object used for carrying over \n   * of the distributed tracing transport context information usable or modifiable \n   * by intermediary instrumentation across service boundaries. \n   * It allows correlating the producer and the consumer with an intermediary.\n   * It also allows correlating multiple intermediaries among each other.\n   *\n   * @returns {solace.TraceContext} Transport context object associated with this message;\n   */\n  getTransportContext() {\n    // call the parent method. Returns a readonly copy\n    return super.getTransportContext();\n  }\n\n  /**\n   * Set the transport context.\n   * Called when the message is received from broker\n   * \n   * @param {solace.TraceContextSetter} contextSetter \n   */\n  setTransportContext(contextSetter) {\n    // call the parent method.\n    super._setTransportContext(contextSetter);\n  }\n\n  /**\n   * Retrieves a {@link solace.Baggage} carrier object used for carrying over of the distributed tracing\n   * message baggage information across service boundaries.  It must not be altered by\n   * intermediaries.\n   *\n   * @return {solace.Baggage} baggage carrier object associated with this message,\n   */\n  getBaggage() {\n    // returns the parent method baggage instance\n    // used for setting and retriving the baggage value \n    return super.getBaggage();\n  }\n\n  /**\n   * Produces a human-readable dump of the message's properties and\n   * contents. Applications must not parse the output, as its format is\n   * not a defined part of the API and subject to change.\n   *\n   * <p>\n   * Output can be controlled by the <code>flags</code> parameter. The values are:\n   * <ul>\n   * <li>{@link MessageDumpFlag.MSGDUMP_BRIEF} Display only the length of the\n   *                          binary attachment, xml attachment, and user property map\n   * <li>{@link MessageDumpFlag.MSGDUMP_FULL} Display the entire message.\n   * </ul>\n   * </p>\n   *\n   * @param {Number} [flags]  Optional flags controlling the output, such as whether\n   *                          to include verbose (binary dump) information\n   * @returns {String} A string representation of the message.\n   */\n  dump(flags = MessageDumpFlag.MSGDUMP_FULL) {\n    const validFlags = isEnumMember('flags', flags, MessageDumpFlag);\n    return MessageDumpUtil.dump(this, validFlags);\n  }\n\n  /**\n   * Clones the message\n   * @returns {Message} A clone of this message\n   * @private\n   */\n  clone() {\n    return clone(this, MESSAGE_CLONE_OPTIONS);\n  }\n\n  /**\n   * Releases all memory associated with this message. All values are reinitialized\n   * to defaults. The message is no longer associated with any session or consumer.\n   */\n  reset() {\n    clearMessage(this);\n    initMessage(this);\n  }\n\n  /**\n   * Clears all extended var-len message properties on this message.\n   * The message no longer has any extended variable length\n   * properties set.\n   */\n  clearExtendedVarLenParams() {\n    clearExtendedVarLenParameters(this);\n  }\n}\n\n/**\n * A standard property key that clients should use if they want to\n * group messages into different queue partitions.\n * Expected value is UTF-8 encoded up to 255 bytes long string.\n */\nMessage.SOLCLIENT_USER_PROP_QUEUE_PARTITION_KEY = 'JMSXGroupID';\n\nmodule.exports.Message = Message;\n","const { ErrorSubcode, OperationError } = require('solclient-error');\nconst { Long } = require('solclient-convert');\nconst { Parameter } = require('solclient-validate');\nconst { ReplayStartLocation, ReplayStartType } = require('solclient-replaystart');\n// eslint-disable-next-line global-require\nconst BufferImpl = require('buffer').Buffer;\n\nconst RMID_VERSION_1_PREFIX = 'rmid1:';\n/* prefix length + 3 '-' + 16 bytes of hex (32) */\nconst RMID_LEN = RMID_VERSION_1_PREFIX.length + 3 + 16 * 2; // 41\n/* regex for testing if data component of the rmid string parsing is valid */\nconst validRmidHexRegex = /^[0-9a-fA-F]{32}$/g;\nconst INVALID_SUID = Long.UZERO;\n\nconst {\n  isString,\n  isValue,\n  isInstanceOf,\n} = Parameter;\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users. Users should obtain an instance from\n *  {@link solace.SolclientFactory.createReplicationGroupMessageId} or from\n *  {@link solace.Message.getReplicationGroupMessageId}</b>\n * <p>\n * ReplicationGroupMessageId specifies a Replication Group Message ID.\n * Can be used to specify a {@link solace.ReplayStartLocation} for the message after this id.\n * The ReplayStartLocation is set in the corresponding\n * MessageConsumer property {@link solace.MessageConsumerProperties#replayStartLocation}.\n *\n * @extends solace.ReplayStartLocation\n * @memberof solace\n * @hideconstructor\n */\nclass ReplicationGroupMessageId extends ReplayStartLocation {\n  /**\n   *@param {Long} spoolerUniqueId spooler id component of rgmid\n   *@param {Long} effectiveMessageId message id component of rgmid\n   *@private\n   */\n  constructor(spoolerUniqueId, effectiveMessageId) {\n    super({\n      _replayStartValue: {\n        suid:      spoolerUniqueId,\n        messageId: effectiveMessageId,\n      },\n      _type: ReplayStartType.RGMID,\n    });\n    /**\n     * _suid {Long} spoolerUniqueId component of the replication group message id\n     *              this should be unique to the replaication group\n     * @private\n     */\n    this._suid = spoolerUniqueId;\n    /**\n     * _messageId {Long} effectiveMessageId component of the replication group message id\n     *              this should be unique to the message in the replication group\n     * @private\n     */\n    this._messageId = effectiveMessageId;\n  }\n  /**\n   * Compares with other ReplicationGroupMessageId\n   * @param {ReplicationGroupMessageId} otherReplicationGroupMessageId the other id to compare\n   * @returns {Number} 0 if the ReplicationGroupMessageId is equal to the other\n   *   ReplicationGroupMessageId.\n   *   < 0 if the ReplicationGroupMessageId is less than the other ReplicationGroupMessageId.\n   *   \\> 0 if the ReplicationGroupMessageId is greater than the other ReplicationGroupMessageId.\n   * @throws {solace.OperationError}\n   * * if the otherReplicationGroupMessageId is not a ReplicationGroupMessageId type.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   * * if the otherReplicationGroupMessageId is not comparable as it is from different origins\n   *   and can not be compared.\n   *   Subcode: {@link solace.ErrorSubcode.MESSAGE_ID_NOT_COMPARABLE}.\n   */\n  compare(otherReplicationGroupMessageId) {\n    isInstanceOf('otherReplicationGroupMessageId', otherReplicationGroupMessageId, ReplicationGroupMessageId);\n    const oId = otherReplicationGroupMessageId;\n    if (!this._suid.equals(oId._suid)) {\n      const message = 'Unable to compare Replication Group Message ID from different origins';\n      throw new OperationError(`Parameter otherReplicationGroupMessageId[${oId.toString()\n        }] failed validation`,\n        ErrorSubcode.MESSAGE_ID_NOT_COMPARABLE, message);\n    }\n    if (this._messageId.gt(oId._messageId)) {\n      return 1;\n    } else if (this._messageId.lt(oId._messageId)) {\n      return -1;\n    }\n    return 0;\n  }\n  [util_inspect_custom]() {\n    return `[Replication Group Message Id: ${this.toString()}]`;\n  }\n  /**\n   * @override\n   * @description\n   * The ReplicationGroupMessageId toString() method returns a string that can later be passed to\n   * {@link solace.SolclientFactory.createReplicationGroupMessageId} to create a\n   * ReplicationGroupMessageId object.\n   * @returns {String} serialized string of the ReplicationGroupMessageId\n   */\n  toString() {\n    const idBuffer = BufferImpl.from(this._suid.toBytesBE().concat(this._messageId.toBytesBE()));\n    const hexString = idBuffer.toString('hex');\n    const sep = '-';\n    return `${RMID_VERSION_1_PREFIX}${hexString.substring(0, 5)}${sep\n    }${hexString.substring(5, 16)}${sep}${hexString.substring(16, 24)}${sep\n    }${hexString.substring(24, 32)}`;\n  }\n}\n\n/**\n * factory method for creating Replication Group Message Ids\n * @param {Object} spec object specification for building\n * @returns {ReplicationGroupMessageId} id instance for spec.\n * @private\n */\nfunction createReplicationGroupMessageId(spec) {\n  /* later this can be enhanced for other implementations of rgmids */\n  return new ReplicationGroupMessageId(spec.suid, spec.msgid);\n}\n\nfunction fromString(rgmidStr) {\n  /* check parameter type */\n  isString('id', rgmidStr);\n  /* validate rmid string to represent 128 bits of id data\n   * must be of format:\n   * rmid1:ttttt-rrrrrrrrrrr-mmmmmmmm-llllllll\n   *\n   * Where:\n   *\n   * * rmid1: This indicates it is a Replication Group Message ID (allows for some sanity\n   *    checking that the bytes to follow are in fact a Replication Group Message ID).\n   *    The '1' is a version to differentiate from a new type of Replication Group Message ID\n   *    that may be introduced later.\n   * * ttttt: Timestamp portion of SUID, 20 bits.\n   * * rrrrrrrrrrr: Random portion of SUID, 44 bits.\n   * * mmmmmmmm: Most significant 32-bits of ack message ID.\n   * * llllllll: Least significant 32-bits of ack message ID.\n   */\n  isValue('id', rgmidStr.length, RMID_LEN, ErrorSubcode.PARAMETER_OUT_OF_RANGE, `length expected: ${RMID_LEN} but is ${rgmidStr.length}`);\n  if (!rgmidStr.startsWith(RMID_VERSION_1_PREFIX)) {\n    /* raise invalid format error */\n    throw new OperationError('Parameter id has invalid Replication Group Message ID format',\n      ErrorSubcode.PARAMETER_OUT_OF_RANGE,\n      `id: ${rgmidStr}, does not start with ${RMID_VERSION_1_PREFIX}`);\n  }\n  const rmidBufs = rgmidStr.substring(RMID_VERSION_1_PREFIX.length).split('-');\n  if (rmidBufs.length !== 4 ||\n      rmidBufs[0].length !== 5 ||\n      rmidBufs[1].length !== 11 ||\n      rmidBufs[2].length !== 8 ||\n      rmidBufs[3].length !== 8) {\n    /* raise invalid format error */\n    throw new OperationError('Parameter id has invalid Replication Group Message ID format',\n      ErrorSubcode.PARAMETER_OUT_OF_RANGE,\n      `id: ${rgmidStr}, does not have valid separation of components`);\n  }\n  /* convert rmid data string (hex) to bytes\n   * note use Buffer to read hex string to bytes as Long.from(str, 16) uses inaccurate\n   *  calculation and loses precision, while Buffer.from(str, 'hex') does not.\n   * Browser BufferImpl is dependent on parseInt reading the string text 2 characters\n   *  at a time letting a hex string chuck of [0-9][notHex], eg '9G', is parsed as a\n   *  value 9 not NaN leading to a \"valid\" read. This means data integrity is lost\n   *  on browser buffer parsing of hex. An independent string check is required to avoid this.\n   */\n  /* valid rmid component concatenated are hex only string with 32 character length */\n  const rmidHex = rmidBufs.join('').trim();\n  /* validRmidHexRegex uses the global flag and must be reset to advance the global regex\n   * lastIndex.\n   * reset regex\n   */\n  validRmidHexRegex.test('');\n  if (!validRmidHexRegex.test(rmidHex)) {\n    throw new OperationError('Parameter id has invalid Replication Group Message ID format',\n      ErrorSubcode.PARAMETER_OUT_OF_RANGE,\n      `id: ${rgmidStr}, invalid data string value`);\n  }\n  /* convert hex string to bytes */\n  let rmidBuffer;\n  try {\n    rmidBuffer = BufferImpl.from(rmidHex, 'hex');\n  } catch (ex) {\n    /* error parsing hex string into buffer */\n    throw new OperationError('Parameter id has invalid Replication Group Message ID format',\n      ErrorSubcode.PARAMETER_OUT_OF_RANGE,\n      `id: ${rgmidStr}, failed to read data, cause: ${ex.message}`);\n  }\n  /* validate read data len is expected for 128 bits of data */\n  const buflen = rmidBuffer ? rmidBuffer.length : 0;\n  if (buflen !== 16) {\n    /* error occured during read */\n    throw new OperationError('Parameter id has invalid Replication Group Message ID format',\n      ErrorSubcode.PARAMETER_OUT_OF_RANGE,\n      `id: ${rgmidStr}, failed to read data from id expected length of 16 got ${buflen}`);\n  }\n  /* extract components into long storage */\n  const suid = Long.fromBits(rmidBuffer.readUInt32BE(4), rmidBuffer.readUInt32BE(0), true);\n  if (suid.eq(INVALID_SUID)) {\n    /* invalid suid detected raise out of range parameter OperationError */\n    throw new OperationError('Parameter id has invalid Replication Group Message ID format',\n      ErrorSubcode.PARAMETER_OUT_OF_RANGE,\n      `id: ${rgmidStr}, has invalid origin`);\n  }\n  const msgid = Long.fromBits(rmidBuffer.readUInt32BE(12), rmidBuffer.readUInt32BE(8), true);\n  /* return created id object with Long values */\n  return createReplicationGroupMessageId({ suid, msgid });\n}\n\nconst RgmidFactory = {};\nRgmidFactory.fromString = fromString;\nRgmidFactory.from = createReplicationGroupMessageId;\nRgmidFactory.INVALID_SUID = INVALID_SUID;\n\nmodule.exports.ReplicationGroupMessageId = ReplicationGroupMessageId;\nmodule.exports.RgmidFactory = RgmidFactory;\n","const { AbstractQueueDescriptor } = require('./lib/abstract-queue-descriptor');\nconst { QueueAccessType } = require('./lib/queue-access-types');\nconst { QueueDescriptor } = require('./lib/queue-descriptor');\nconst { QueueDescriptorValidator } = require('./lib/queue-descriptor-validator');\nconst { QueueDiscardBehavior } = require('./lib/queue-discard-behaviors');\nconst { QueuePermissions } = require('./lib/queue-permissions');\nconst { QueueProperties } = require('./lib/queue-properties');\nconst { QueuePropertiesValidator } = require('./lib/queue-properties-validator');\nconst { QueueType } = require('./lib/queue-types');\n\nmodule.exports.AbstractQueueDescriptor = AbstractQueueDescriptor;\nmodule.exports.QueueAccessType = QueueAccessType;\nmodule.exports.QueueDescriptor = QueueDescriptor;\nmodule.exports.QueueDescriptorValidator = QueueDescriptorValidator;\nmodule.exports.QueueDiscardBehavior = QueueDiscardBehavior;\nmodule.exports.QueuePermissions = QueuePermissions;\nmodule.exports.QueueProperties = QueueProperties;\nmodule.exports.QueuePropertiesValidator = QueuePropertiesValidator;\nmodule.exports.QueueType = QueueType;\n","const { APIProperties } = require('solclient-util');\nconst { DestinationType } = require('solclient-destination');\nconst { OperationError, ErrorSubcode } = require('solclient-error');\nconst { QueueType } = require('./queue-types');\n\nconst DEFAULTS = {\n  durable: true,\n  type:    undefined,\n};\n\nconst TYPE_DESCRIPTION = {\n  [QueueType.QUEUE]:          'queue',\n  [QueueType.TOPIC_ENDPOINT]: 'topic endpoint',\n};\n\nconst DESINATION_TYPE_TO_DESCRIPTOR_TYPE = {\n  [DestinationType.TOPIC]:           null,\n  [DestinationType.QUEUE]:           QueueType.QUEUE,\n  [DestinationType.TEMPORARY_QUEUE]: QueueType.QUEUE,\n};\n\nfunction maybeAdaptFromDestination(spec) {\n  if (spec && spec.name && spec.type && DestinationType.values.includes(spec.type)) {\n    const targetType = DESINATION_TYPE_TO_DESCRIPTOR_TYPE[spec.type];\n    if (!targetType) {\n      throw new OperationError(`Cannot create a descriptor from a ${\n                               DestinationType.describe(spec.type)} destination`,\n                               ErrorSubcode.PARAMETER_CONFLICT);\n    }\n    return {\n      name:    spec.name,\n      type:    QueueType.QUEUE,\n      durable: spec.type !== DestinationType.TEMPORARY_QUEUE,\n    };\n  }\n  return spec;\n}\n\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users.</b>\n * <p>\n * This is a base class for {@link solace.QueueDescriptor}. API users should access the\n * methods described here through a {@link solace.QueueDescriptor}.\n * @memberof solace\n * @hideconstructor\n */\nclass AbstractQueueDescriptor extends APIProperties {\n  /*\n   * @param {Object|solace.AbstractQueueDescriptor} queueSpec A specification for this descriptor.\n   * @param {solace.QueueType} queueSpec.type The type of queue for this specification.\n   * @param {Boolean} [queueSpec.durable=true] Whether this spec refers to a durable queue.\n   * @constructor\n   */\n  constructor(queueSpec) { // eslint-disable-line no-useless-constructor\n    super(DEFAULTS, maybeAdaptFromDestination(queueSpec));\n  }\n\n  /**\n   * Gets the queue type to which this descriptor refers.\n   * @returns {solace.QueueType} The queue type that this object describes\n   */\n  getType() {\n    return this._type;\n  }\n\n  /**\n   * @type {solace.QueueType}\n   * @description The Queue Type.\n   */\n  get type() {\n    return this.getType();\n  }\n  set type(value) {\n    this._type = value;\n  }\n\n  /**\n   * Gets whether this descriptor refers to a durable queue.\n   *\n   * @returns {Boolean} `true` if this describes a durable queue\n   */\n  isDurable() { // eslint-disable-line class-methods-use-this\n    return this._durable;\n  }\n  /**\n   * @type {Boolean}\n   * @description True if this descriptor refers to a durable queue.\n   */\n  get durable() {\n    return this.isDurable();\n  }\n  set durable(value) {\n    this._durable = value;\n  }\n\n  [util_inspect_custom]() {\n    return {\n      'type':    this.type,\n      'durable': this.durable,\n    };\n  }\n\n  /**\n   * An informational summary of this object, subject to change.\n   * @returns {String} A summary of this object.\n   */\n  toString() {\n    return `${!this.isDurable() ? 'non' : ''}-durable ` +\n           `${TYPE_DESCRIPTION[this.getType()]}`;\n  }\n\n}\n\nmodule.exports.AbstractQueueDescriptor = AbstractQueueDescriptor;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Represents the possible endpoint access types. The corresponding endpoint property is\n * {@link solace.QueueProperties#accessType}.\n *\n * @enum {string}\n * @namespace\n * @memberof solace\n */\nconst QueueAccessType = {\n  /**\n   * @description An exclusive endpoint. The first client to bind\n   * receives the stored messages on the Endpoint.\n   * @type {String}\n   */\n  EXCLUSIVE:    'EXCLUSIVE',\n  /**\n   * @description A non-exclusive (shared) Queue. Each client to bind\n   * receives messages in a round robin fashion.\n   * @type {String}\n   */\n  NONEXCLUSIVE: 'NONEXCLUSIVE',\n};\n\nmodule.exports.QueueAccessType = Enum.new(QueueAccessType);\n","const { APIPropertiesValidators } = require('solclient-util');\nconst { QueueDescriptor } = require('./queue-descriptor');\nconst { QueueType } = require('./queue-types');\n\nconst {\n  validateInstance,\n  valBoolean,\n  valIsMember,\n  valTopicString,\n} = APIPropertiesValidators;\n\n\nconst QueueDescriptorValidator = {\n  validate(instance) {\n    const v = validateInstance.bind(null, 'QueueDescriptor', instance);\n    if (instance instanceof QueueDescriptor) {\n      v('name', [valTopicString]);\n    } // else is abstract; don't check name\n    v('type', [valIsMember, QueueType, 'QueueType']);\n    v('durable', [valBoolean]);\n  },\n};\n\nmodule.exports.QueueDescriptorValidator = QueueDescriptorValidator;\n","const { AbstractQueueDescriptor } = require('./abstract-queue-descriptor');\nconst { Destination } = require('solclient-destination');\n\nconst DEFAULTS = {\n  name:    undefined,\n  durable: true,\n};\n\n/**\n * This class identifies a queue or topic endpoint on the message router.\n *\n * Operations that make use of queue descriptors include\n *  * {@link solace.Session#createMessageConsumer}\n *  * {@link solace.Session#dteUnsubscribe}\n *\n * @classdesc QueueDescriptor\n * @extends {AbstractQueueDescriptor}\n * @memberof solace\n */\nclass QueueDescriptor extends AbstractQueueDescriptor {\n\n  /**\n   * Creates an instance of {@link solace.QueueDescriptor}.\n   *\n   * @param {Object|solace.QueueDescriptor} queueSpec A specification for this descriptor.\n   * @param {String} [queueSpec.name=null] The remote name to which this specification refers.\n   * @param {solace.QueueType} queueSpec.type The type of queue for this specification.\n   * @param {Boolean} [queueSpec.durable=true] `true` if this refers to a durable queue.\n   */\n  constructor(queueSpec) {\n    super(queueSpec instanceof Destination\n            ? { name: queueSpec.name, type: queueSpec.type } // synthesize durable later\n            : Object.assign({ }, DEFAULTS, queueSpec));\n  }\n\n  /**\n   * Gets/sets the remote name to which this descriptor refers.\n   * @returns {String} The name of the queue.\n   */\n  getName() {\n    return this._name;\n  }\n  get name() {\n    return this.getName();\n  }\n  set name(value) {\n    this._name = value;\n  }\n\n  [util_inspect_custom]() {\n    return {\n      'name':    this.name,\n      'type':    this.type,\n      'durable': this.durable,\n    };\n  }\n\n  /**\n   * An informational summary of this object, subject to change.\n   * @returns {String} A summary of this object.\n   */\n  toString() {\n    return `${super.toString()} '${this.getName() || ''}'`;\n  }\n\n  /**\n   * @static\n   * @param {any} spec The descriptor spec\n   * @returns {QueueDescriptor|AbstractQueueDescriptor} A new descriptor for the spec\n   * @private\n   */\n  static createFromSpec(spec) {\n    if (spec.name) return new QueueDescriptor(spec);\n    return AbstractQueueDescriptor(spec);\n  }\n}\n\nmodule.exports.QueueDescriptor = QueueDescriptor;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Enumerates the behavior options when a message cannot be added to an endpoint\n * (for example, the maximum quota {@link solace.QueueProperties#quotaMB} was exceeded).\n *\n * @enum {string}\n * @namespace\n * @memberof solace\n */\nconst QueueDiscardBehavior = {\n  /**\n   * @description Send the publisher a message reject notification.\n   * @type {String}\n   */\n  NOTIFY_SENDER_ON:  'NOTIFY_SENDER_ON',\n  /**\n   * @description Discard the message and acknowledge it.\n   * @type {String}\n   */\n  NOTIFY_SENDER_OFF: 'NOTIFY_SENDER_OFF',\n};\n\nmodule.exports.QueueDiscardBehavior = Enum.new(QueueDiscardBehavior);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Represents the permissions applicable to a queue.\n *\n * The corresponding endpoint property is\n * {@link solace.QueueProperties#permissions}.\n *\n * The access controls:\n *  * the permissions for all other users of the queue, this only applies to\n *  non-durable queues {@link solace.QueueProperties#permissions};\n *  * for the current Message Consumer  on a queue or endpoint,\n *    {@link solace.MessageConsumer.permissions}\n *\n * For example, creating a temporary topic endpoint with MODIFY_TOPIC will allow\n * other users to modify the topic subscribed to that endpoint.\n *\n * @enum {string}\n * @namespace\n * @memberof solace\n */\nconst QueuePermissions = {\n  /**\n   * @description No client other than the queue's owner may access the endpoint.\n   */\n  NONE:         'NONE',\n  /**\n   * @description Client may read messages but not consume them.\n   * @type {String}\n   */\n  READ_ONLY:    'READ_ONLY',\n  /**\n   * @description  Client may read and consume messages.\n   * @type {String}\n   */\n  CONSUME:      'CONSUME',\n  /**\n   * @description Client may read and consume messages, and modify topic(s) associated with the\n   * queue.\n   * @type {String}\n   */\n  MODIFY_TOPIC: 'MODIFY_TOPIC',\n  /**\n   * @description Client may read and consume messages, modify topic(s) associated with the\n   * queue, and delete the queue.\n   * @type {String}\n   */\n  DELETE:       'DELETE',\n};\n\nmodule.exports.QueuePermissions = Enum.new(QueuePermissions);\n","const { APIPropertiesValidators } = require('solclient-util');\nconst { QueueAccessType } = require('./queue-access-types');\nconst { QueueDiscardBehavior } = require('./queue-discard-behaviors');\nconst { QueuePermissions } = require('./queue-permissions');\n\nconst {\n  validateInstance,\n  valBoolean,\n  valIsMember,\n  valNumber,\n  valRange,\n} = APIPropertiesValidators;\n\n\nconst QueuePropertiesValidator = {\n  validate(instance) {\n    const v = validateInstance.bind(null, 'QueueProperties', instance);\n    if (instance.permissions !== undefined && instance.permissions !== null) {\n      v('permissions', [valIsMember, QueuePermissions, 'QueuePermissions']);\n    }\n    if (instance.accessType !== undefined && instance.accessType !== null) {\n      v('accessType', [valIsMember, QueueAccessType, 'QueueAccessType']);\n    }\n    if (instance.quotaMB !== undefined && instance.quotaMB !== null) {\n      v('quotaMB', [valNumber], [valRange, 0, Number.POSITIVE_INFINITY]);\n    }\n    if (instance.maxMessageSize !== undefined && instance.maxMessageSize !== null) {\n      v('maxMessageSize', [valNumber], [valRange, 0, Number.POSITIVE_INFINITY]);\n    }\n    if (instance.respectsTTL !== undefined && instance.respectsTTL !== null) {\n      v('respectsTTL', [valBoolean]);\n    }\n    if (instance.discardBehavior !== undefined && instance.discardBehavior !== null) {\n      v('discardBehavior', [valIsMember, QueueDiscardBehavior, 'QueueDiscardBehavior']);\n    }\n    if (instance.maxMessageRedelivery !== undefined && instance.maxMessageRedelivery !== null) {\n      v('maxMessageRedelivery', [valNumber], [valRange, 0, 255]);\n    }\n  },\n};\n\nmodule.exports.QueuePropertiesValidator = QueuePropertiesValidator;\n","const { APIProperties } = require('solclient-util');\nconst { QueueAccessType } = require('./queue-access-types');\nconst { QueueDiscardBehavior } = require('./queue-discard-behaviors');\nconst { QueuePermissions } = require('./queue-permissions');\n\nconst DEFAULTS = {\n  permissions:          undefined,\n  accessType:           undefined,\n  quotaMB:              undefined,\n  maxMessageSize:       undefined,\n  respectsTTL:          undefined,\n  discardBehavior:      undefined,\n  maxMessageRedelivery: undefined,\n};\n\n/**\n * @classdesc\n * Represents a queue properties object. May be passed in to\n * {@link solace.Session#createMessageConsumer} when creating a\n * {@link solace.MessageConsumer} object.  Upon creation of a queue, undefined queue\n * properties are set to default values chosen by the router.\n *\n * @memberof solace\n */\nclass QueueProperties extends APIProperties {\n\n  constructor(options) {\n    super(DEFAULTS, options);\n  }\n\n  /**\n   * Gets/sets permissions for this queue.\n   *\n   * When creating a temporary queue, these are the permissions that apply\n   * to all other users; the user creating the temporary queue is always\n   * granted DELETE permissions.\n   *\n   * @type {solace.QueuePermissions}\n   * @default undefined\n   */\n  get permissions() {\n    return this._permissions;\n  }\n  set permissions(newValue) {\n    this._permissions = newValue;\n  }\n\n  /**\n   * Gets/sets the access type for this queue.\n   *\n   * This parameter must NOT be set when creating a temporary queue via\n   * {@link solace.Session#createMessageConsumer}. Such a queue has its\n   * access type determined by the remote message router.\n   *\n   * @type {solace.QueueAccessType}\n   * @default undefined\n   */\n  get accessType() {\n    return this._accessType || DEFAULTS.accessType;\n  }\n  set accessType(newValue) {\n    this._accessType = newValue;\n  }\n\n  /**\n   * Gets/sets the quota, in megabytes, for this queue.\n   *  * The allowed values are (0 <= quotaMB) || undefined.\n   *  * A value of 0 configures the queue to act as a Last-Value-Queue (LVQ), where the router\n   *    enforces a Queue depth of one, and only the most current message is spooled by the\n   *    queue. When a new message is received, the current queued message is first\n   *    automatically deleted from the queue, then the new message is spooled.\n   * @type {?Number}\n   * @default undefined\n   */\n  get quotaMB() {\n    return this._quotaMB;\n  }\n  set quotaMB(newValue) {\n    this._quotaMB = newValue;\n  }\n\n  /**\n   * Gets/sets the maximum message size, in bytes, for any single message spooled on this queue.\n   * @type {Number}\n   * @default undefined\n   */\n  get maxMessageSize() {\n    return this._maxMessageSize;\n  }\n  set maxMessageSize(newValue) {\n    this._maxMessageSize = newValue;\n  }\n\n  /**\n   * Gets/sets whether this queue respects Time To Live on messages.\n   * @type {Boolean}\n   * @default false\n   */\n  get respectsTTL() {\n    return this._respectsTTL;\n  }\n  set respectsTTL(newValue) {\n    this._respectsTTL = newValue;\n  }\n\n  /**\n   * Gets/sets the discard behavior for this queue.\n   * @type {solace.QueueDiscardBehavior}\n   * @default {solace.QueueDiscardBehavior.NOTIFY_SENDER_OFF}\n   */\n  get discardBehavior() {\n    return this._discardBehavior;\n  }\n  set discardBehavior(newValue) {\n    this._discardBehavior = newValue;\n  }\n\n  /**\n   * Gets/sets the maximum number of times to attempt message redelivery for this queue.\n   *  * The valid range is 0 <= maxMessageRedelivery <= 255\n   *  * A value of 0 means retry forever.\n   * @type {Number}\n   * @default undefined\n   */\n  get maxMessageRedelivery() {\n    return this._maxMessageRedelivery;\n  }\n  set maxMessageRedelivery(newValue) {\n    this._maxMessageRedelivery = newValue;\n  }\n\n  [util_inspect_custom]() {\n    return {\n      'permissions':     QueuePermissions.describe(this.permissions),\n      'accessType':      QueueAccessType.describe(this.accessType),\n      'quotaMB':         this.quotaMB,\n      'maxMessageSize':  this.maxMessageSize,\n      'respectsTTL':     this.respectsTTL,\n      'discardBehavior': this.discardBehavior\n                            ? QueueDiscardBehavior.describe(this.discardBehavior)\n                            : 'undefined',\n      'maxMessageRedelivery': this.maxMessageRedelivery,\n    };\n  }\n\n  toString() {\n    return util_inspect(this);\n  }\n}\n\nmodule.exports.QueueProperties = QueueProperties;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Specifies the type of remote resource to which an\n * {@link solace.AbstractQueueDescriptor} refers.\n *\n * @enum {string}\n * @namespace\n * @memberof solace\n */\nconst QueueType = {\n  /**\n   * @description The queue descriptor refers to a queue endpoint.\n   * @type {String}\n   */\n  QUEUE:          'QUEUE',\n  /**\n   * @description The queue descriptor refers to a topic endpoint.\n   * @type {String}\n   */\n  TOPIC_ENDPOINT: 'TOPIC_ENDPOINT',\n};\n\nmodule.exports.QueueType = Enum.new(QueueType);\n","const { Parameter } = require('solclient-validate');\nconst { ReplayStartLocation, ReplayStartType } = require('./lib/replayStartLocation');\nconst { ReplayStartLocationBeginning } = require('./lib/replayStartLocationBeginning');\nconst { ReplayStartLocationDate } = require('./lib/replayStartLocationDate');\nconst { SolclientFactory } = require('solclient-factory');\n\n\nmodule.exports.ReplayStartLocation = ReplayStartLocation;\nmodule.exports.ReplayStartLocationBeginning = ReplayStartLocationBeginning;\nmodule.exports.ReplayStartLocationDate = ReplayStartLocationDate;\nmodule.exports.ReplayStartType = ReplayStartType;\n\n/**\n * Creates a ReplayStartLocation {@link solace.ReplayStartLocation} instance that\n * when set in MessageConsumerProperties indicates that all messages available\n * in the replay log should be retrieved.\n *\n *\n * @returns {solace.ReplayStartLocation} The newly created ReplayStartLocation\n * @method\n * @name solace.SolclientFactory.createReplayStartLocationBeginning\n */\nSolclientFactory.createReplayStartLocationBeginning = SolclientFactory.createFactory(() =>\n  new ReplayStartLocationBeginning()\n);\n/**\n * Creates a ReplayStartLocation {@link solace.ReplayStartLocation} instance that\n * when set in MessageConsumerProperties indicates that only messages spooled\n * in the replay log since the given Date should be retrieved.\n *\n * @param {Date} dateTime The Date object the represents the date and time of the replay\n * start location.  dateTime is always converted to UTC time if not already a UTC time.\n * @returns {solace.ReplayStartLocation} The newly created ReplayStartLocation\n * @method\n * @name solace.SolclientFactory.createReplayStartLocationDate\n */\nSolclientFactory.createReplayStartLocationDate = SolclientFactory.createFactory(dateTime =>\n  ReplayStartLocationDate.createReplayStartLocationDate(Parameter.isInstanceOf('date', dateTime, Date))\n);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Enumeration for smf replay start location value type\n * @private\n */\nconst ReplayStartType = Enum.new({\n  // the value of the Enum is the value of the smf type\n  BEGINNING: 0x00,\n  DATE:      0x01,\n  RGMID:     0x02,\n});\n\n/**\n * @classdesc\n *  * <b>This class is not exposed for construction by API users.\n *  Users should obtain an instances from one of the following:</b>\n * * {@link solace.SolclientFactory.createReplayStartLocationBeginning}\n * * {@link solace.SolclientFactory.createReplayStartLocationDate}\n *\n * Defines the ReplayStartLocation class.\n * The ReplayStartLocation is set in the corresponding\n * MessageConsumer property {@link solace.MessageConsumerProperties#replayStartLocation}\n * The single member variable, _replayStartTime is undefined in ReplayStartLocationBeginning and\n * contains the elapsed time in milliseconds since the epoch in ReplayStartLocationDate\n *\n * @hideconstructor\n * @memberof solace\n */\n\nclass ReplayStartLocation {\n  /**\n   * @constructor\n   * @param {SObject} spec The ReplayStartLocation spec\n   * Use the factory methods on {@link solace.SolclientFactory}.\n   * @private\n   */\n  constructor(spec) {\n    Object.assign(this, spec);\n    if (this._type === undefined) {\n      // use default replay start location type when not specified\n      this._type = ReplayStartType.BEGINNING;\n    }\n  }\n  /**\n   * @returns {String} A generic description of the Destination.\n   */\n  toString() {\n    return util_inspect(this);\n  }\n}\n\nmodule.exports.ReplayStartLocation = ReplayStartLocation;\nmodule.exports.ReplayStartType = ReplayStartType;\n","const { ReplayStartLocation, ReplayStartType } = require('./replayStartLocation');\n/**\n * @classdesc\n *  * <b>This class is not exposed for construction by API users.\n *  Users should obtain an instances from the following:</b>\n *  * {@link solace.SolclientFactory.createReplayStartLocationBeginning}\n *\n * Defines the ReplayStartLocation class.\n * The ReplayStartLocation is set in the corresponding\n * MessageConsumer property {@link solace.MessageConsumerProperties#replayStartLocation}\n *\n * @extends {ReplayStartLocation}\n * @hideconstructor\n * @memberof solace\n */\n\nclass ReplayStartLocationBeginning extends ReplayStartLocation {\n  /**\n   * @private\n   */\n  constructor() {\n    super({\n      _type: ReplayStartType.BEGINNING,\n    });\n  }\n  static [util_inspect_custom]() {\n    return 'BEGINNING';\n  }\n}\n\nmodule.exports.ReplayStartLocationBeginning = ReplayStartLocationBeginning;\n","const { ReplayStartLocation, ReplayStartType } = require('./replayStartLocation');\n/**\n * @classdesc\n *  * <b>This class is not exposed for construction by API users.\n *  Users should obtain an instances from the following:</b>\n *  * {@link solace.SolclientFactory.createReplayStartLocationDate}\n *\n * Defines the ReplayStartLocation class.\n * The ReplayStartLocation is set in the corresponding\n * MessageConsumer property {@link solace.MessageConsumerProperties#replayStartLocation}\n *\n * @extends ReplayStartLocation\n * @hideconstructor\n * @memberof solace\n */\n\nclass ReplayStartLocationDate extends ReplayStartLocation {\n  /**\n   * @param {Object} spec The topic spec\n   * @private\n   */\n  constructor(spec) {\n    super({\n      _replayStartValue: spec.getTime(),\n      _type:             ReplayStartType.DATE,\n    });\n  }\n  [util_inspect_custom]() {\n    return `[Epoch Time: ${this._replayStartValue}]`;\n  }\n  /**\n   * @static\n   * @param {Date} dateTime The Date for the replay start location\n   * @returns {ReplayStartLocation} the ReplayStartLocation\n   * @private\n   */\n  static createReplayStartLocationDate(dateTime) {\n    return new ReplayStartLocationDate(dateTime);\n  }\n}\n\nmodule.exports.ReplayStartLocationDate = ReplayStartLocationDate;\n","const { Codec } = require('./lib/codec');\nconst { SDTDestType } = require('./lib/sdt-destination-types');\nconst { SDTField } = require('./lib/sdt-field');\nconst { SDTFieldType } = require('./lib/sdt-field-types');\nconst { SDTMapContainer } = require('./lib/sdt-map-container');\nconst { SDTStreamContainer } = require('./lib/sdt-stream-container');\nconst { SDTUnsupportedValueError } = require('./lib/sdt-unsupported-value-error');\nconst { SDTValueErrorSubcode } = require('./lib/sdt-value-error-subcodes');\n\nmodule.exports.Codec = Codec;\nmodule.exports.SDTDestType = SDTDestType;\nmodule.exports.SDTField = SDTField;\nmodule.exports.SDTFieldType = SDTFieldType;\nmodule.exports.SDTMapContainer = SDTMapContainer;\nmodule.exports.SDTStreamContainer = SDTStreamContainer;\nmodule.exports.SDTUnsupportedValueError = SDTUnsupportedValueError;\nmodule.exports.SDTValueErrorSubcode = SDTValueErrorSubcode;\n","const { EncodeSingleElement } = require('./encode-single-element');\nconst { IEEE754LIB } = require('./ieee754lib');\nconst { ParseSingleElement, StringToBuffer } = require('./parse-single-element');\n\nconst { encodeSingleElement } = EncodeSingleElement;\nconst { parseSingleElement } = ParseSingleElement;\nconst { stringToBuffer } = StringToBuffer;\n\nconst Codec = {\n  encodeSingleElement,\n  parseSingleElement,\n  stringToBuffer,\n  IEEE754LIB,\n};\n\nmodule.exports.Codec = Codec;\n","const { Convert } = require('solclient-convert');\nconst { SDTDataTypes } = require('../sdt-data-types');\n\nconst EncodeHeader = {};\nEncodeHeader.encodeHeader = function encodeHeader(tag, valueLen) {\n  // Tag in first 6 bits, then (lenbytes-1) in 2 bits\n  let byte0 = (tag << 2) & 0xFF;\n  let strSdtLen = null;\n\n  if (tag === SDTDataTypes.Map || tag === SDTDataTypes.Stream) {\n    // force 4 bytes\n    strSdtLen = Convert.int32ToStr(valueLen + 5);\n    byte0 |= 3; // 4 length bytes\n  } else if (valueLen + 2 <= 255) {\n    strSdtLen = Convert.int8ToStr(valueLen + 2);\n    byte0 |= 0; // 1 length byte\n  } else if (valueLen + 3 <= 65535) {\n    strSdtLen = Convert.int16ToStr(valueLen + 3);\n    byte0 |= 1; // 2 length bytes\n  } else {\n    strSdtLen = Convert.int32ToStr(valueLen + 5);\n    byte0 |= 3; // 4 length bytes\n  }\n  const ret = Convert.int8ToStr(byte0) + strSdtLen;\n  return ret;\n};\n\nmodule.exports.EncodeHeader = EncodeHeader;\n","\nconst EncodeInteger = {};\n\nEncodeInteger.int48ToStr = function int48ToStr(vIn) {\n  let v = vIn;\n  const bytes = [];\n  for (let i = 0; i < 6; i++) {\n    const byteI = (v % 256);\n    v = Math.floor(v / 256);\n    bytes.push(String.fromCharCode(byteI));\n  }\n  bytes.reverse();\n  return bytes.join('');\n};\n\nmodule.exports.EncodeInteger = EncodeInteger;\n","const EncodeSingleElementLib = require('./encode-single-element');\nconst UtilLib = require('solclient-util');\nconst { EncodeHeader } = require('./encode-header');\nconst { SDTDataTypes } = require('../sdt-data-types');\nconst { SDTMapContainer } = require('../sdt-map-container');\n\nconst { encodeHeader } = EncodeHeader;\n\nconst EncodeMap = {\n  /**\n   * Encodes an SDT map.\n   * @param  {Object} sdtmap The map to parse\n   * @returns {String}        The map in binary string format\n   */\n  encodeMap(sdtmap) {\n    const buf = [];\n    if (!(sdtmap instanceof SDTMapContainer)) {\n      return null; // skip!\n    }\n    const keys = sdtmap.getKeys();\n    let sdtfield = null;\n    let strKeyField = null;\n    let strKeyName = null;\n    let i;\n    for (i = 0; i < keys.length; i++) {\n      sdtfield = sdtmap.getField(keys[i]);\n      if (sdtfield) {\n        // === KEY ===\n        strKeyName = UtilLib.StringUtils.nullTerminate(keys[i]);\n        strKeyField = encodeHeader(SDTDataTypes.String, strKeyName.length);\n        strKeyField += strKeyName;\n        buf.push(strKeyField);\n\n        // === VALUE ===\n        EncodeSingleElementLib.EncodeSingleElement.encodeSingleElementToBuf(sdtfield, buf);\n      }\n    } // end iter over keys\n    return buf.join('');\n  },\n};\n\nmodule.exports.EncodeMap = EncodeMap;\n","const DestinationLib = require('solclient-destination');\nconst { Convert } = require('solclient-convert');\nconst { EncodeHeader } = require('./encode-header');\nconst { EncodeInteger } = require('./encode-integer');\nconst { EncodeMap } = require('./encode-map');\nconst { EncodeStream } = require('./encode-stream');\nconst { IEEE754LIB } = require('./ieee754lib');\nconst { SDTDataTypes } = require('../sdt-data-types');\nconst { SDTDestType } = require('../sdt-destination-types');\nconst { SDTField } = require('../sdt-field');\nconst { SDTFieldType } = require('../sdt-field-types');\nconst { StringUtils } = require('solclient-util');\n\nconst { encodeHeader } = EncodeHeader;\nconst { int48ToStr } = EncodeInteger;\nconst { encodeMap } = EncodeMap;\nconst { encodeStream } = EncodeStream;\n\nconst { nullTerminate } = StringUtils;\n\nconst C_2_48 = Math.pow(2, 48);\n\n// UCS-2 --> UTF-8 conversion\nfunction strencode(data) {\n  return unescape(encodeURIComponent(data));\n}\n\n// Encode an SDTField into provided buffer buf\nfunction encodeSingleElementToBuf(sdtfield, buf) {\n  if (!(sdtfield instanceof SDTField)) {\n    return false;\n  }\n  // we write the header at the end, once we know the size\n  const value = sdtfield.getValue();\n  let fieldVal = null;\n  let tag = 0; // SMF TAG\n  switch (sdtfield.getType()) {\n    case SDTFieldType.BOOL:\n      tag = SDTDataTypes.Boolean;\n      fieldVal = Convert.int8ToStr(value ? 1 : 0);\n      break;\n    case SDTFieldType.UINT8:\n      tag = SDTDataTypes.UnsignedInteger;\n      fieldVal = Convert.int8ToStr(value);\n      break;\n    case SDTFieldType.INT8:\n      tag = SDTDataTypes.Integer;\n      fieldVal = Convert.int8ToStr(value);\n      break;\n    case SDTFieldType.UINT16:\n      tag = SDTDataTypes.UnsignedInteger;\n      fieldVal = Convert.int16ToStr(value);\n      break;\n    case SDTFieldType.INT16:\n      tag = SDTDataTypes.Integer;\n      fieldVal = Convert.int16ToStr(value);\n      break;\n    case SDTFieldType.UINT32:\n      tag = SDTDataTypes.UnsignedInteger;\n      fieldVal = Convert.int32ToStr(value);\n      break;\n    case SDTFieldType.INT32:\n      tag = SDTDataTypes.Integer;\n      fieldVal = Convert.int32ToStr(value);\n      break;\n    case SDTFieldType.UINT64:\n      tag = SDTDataTypes.UnsignedInteger;\n      fieldVal = String.fromCharCode(0) + String.fromCharCode(0) + int48ToStr(value);\n      break;\n    case SDTFieldType.INT64:\n      tag = SDTDataTypes.Integer;\n      if (value >= 0) {\n        fieldVal = String.fromCharCode(0) + String.fromCharCode(0) + int48ToStr(value);\n      } else {\n        fieldVal = (String.fromCharCode(0xFF) +\n                    String.fromCharCode(0xFF) +\n                    int48ToStr(C_2_48 + value));\n      }\n      break;\n    case SDTFieldType.WCHAR:\n      tag = SDTDataTypes.Char;\n      fieldVal = Convert.int16ToStr(value.charCodeAt(0));\n      break;\n    case SDTFieldType.STRING:\n      tag = SDTDataTypes.String;\n      fieldVal = nullTerminate(strencode(value));\n      break;\n    case SDTFieldType.BYTEARRAY:\n      tag = SDTDataTypes.ByteArray;\n      fieldVal = value.toString('latin1');\n      break;\n    case SDTFieldType.FLOATTYPE:\n      tag = SDTDataTypes.Float;\n      fieldVal = IEEE754LIB.toIEEE754Single(value);\n      break;\n    case SDTFieldType.DOUBLETYPE:\n      tag = SDTDataTypes.Float;\n      fieldVal = IEEE754LIB.toIEEE754Double(value);\n      break;\n    case SDTFieldType.MAP:\n      tag = SDTDataTypes.Map;\n      fieldVal = encodeMap(value);\n      break;\n    case SDTFieldType.STREAM:\n      tag = SDTDataTypes.Stream;\n      fieldVal = encodeStream(value);\n      break;\n    case SDTFieldType.DESTINATION:\n      tag = SDTDataTypes.Destination;\n      if (value instanceof DestinationLib.Destination) {\n        fieldVal = Convert.int8ToStr(SDTDestType[value.getType()])\n          + value.getBytes();\n      }\n      break;\n    case SDTFieldType.NULLTYPE:\n      tag = SDTDataTypes.Null;\n      fieldVal = '';\n      break;\n    case SDTFieldType.UNKNOWN:\n      fieldVal = null;\n      break;\n    default:\n  }\n  if (fieldVal !== null) {\n    const hdr = encodeHeader(tag, fieldVal.length);\n    buf.push(hdr);\n    buf.push(fieldVal);\n    return true;\n  }\n\n  return false;\n}\n\nfunction encodeSingleElement(sdtfield) {\n  const buf = [];\n  encodeSingleElementToBuf(sdtfield, buf);\n  return buf.join('');\n}\n\nconst EncodeSingleElement = {\n  encodeSingleElement,\n  encodeSingleElementToBuf,\n};\n\nmodule.exports.EncodeSingleElement = EncodeSingleElement;\n","const EncodeSingleElementLib = require('./encode-single-element');\nconst { SDTStreamContainer } = require('../sdt-stream-container');\n\nconst EncodeStream = {};\nEncodeStream.encodeStream = function encodeStream(sdtstream) {\n  const buf = [];\n  if (!(sdtstream instanceof SDTStreamContainer)) {\n    return null; // skip!\n  }\n  let sdtfield = null;\n  while (sdtstream.hasNext()) {\n    sdtfield = sdtstream.getNext();\n    if (sdtfield) {\n      EncodeSingleElementLib.EncodeSingleElement.encodeSingleElementToBuf(sdtfield, buf);\n    }\n  } // end iter over stream entries\n  return buf.join('');\n};\n\nmodule.exports.EncodeStream = EncodeStream;\n","const IEEE754LIB = {\n  /**\n   * @preserve\n   * The MIT License\n   *\n   * Copyright (c) 2010 Alan Gutierrez\n   *\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\n   * of this software and associated documentation files (the \"Software\"), to deal\n   * in the Software without restriction, including without limitation the rights\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n   * copies of the Software, and to permit persons to whom the Software is\n   * furnished to do so, subject to the following conditions:\n   *\n   * The above copyright notice and this permission notice shall be included in\n   * all copies or substantial portions of the Software.\n   *\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n   * THE SOFTWARE.\n   */\n\n  toIEEE754(vIn, ebits, fbits) {\n    let v = vIn;\n    const bias = (1 << (ebits - 1)) - 1;\n\n    // Compute sign, exponent, fraction\n    let s;\n    let e;\n    let f;\n    if (isNaN(v)) {\n      e = (1 << bias) - 1;\n      f = 1;\n      s = 0;\n    } else if (v === Infinity || v === -Infinity) {\n      e = (1 << bias) - 1;\n      f = 0;\n      s = (v < 0) ? 1 : 0;\n    } else if (v === 0) {\n      e = 0;\n      f = 0;\n      s = (1 / v === -Infinity) ? 1 : 0;\n    } else {\n      s = v < 0;\n      v = Math.abs(v);\n\n      if (v >= Math.pow(2, 1 - bias)) {\n        const ln = Math.min(Math.floor(Math.log(v) / Math.LN2), bias);\n        e = ln + bias;\n        f = (v * Math.pow(2, fbits - ln)) - Math.pow(2, fbits);\n      } else {\n        e = 0;\n        f = v / Math.pow(2, 1 - bias - fbits);\n      }\n    }\n\n    // Pack sign, exponent, fraction\n    const bits = [];\n    for (let i = fbits; i; i -= 1) {\n      bits.push(f % 2 ? 1 : 0);\n      f = Math.floor(f / 2);\n    }\n    for (let i = ebits; i; i -= 1) {\n      bits.push(e % 2 ? 1 : 0);\n      e = Math.floor(e / 2);\n    }\n    bits.push(s ? 1 : 0);\n    bits.reverse();\n    let str = bits.join('');\n\n    // Bits to bytes\n    const bytes = [];\n    while (str.length) {\n      bytes.push(parseInt(str.substring(0, 8), 2));\n      str = str.substring(8);\n    }\n    return bytes;\n  },\n\n  fromIEEE754(bytes, ebits, fbits) {\n    // Bytes to bits\n    const bits = [];\n    for (let i = bytes.length; i; i -= 1) {\n      let byteI = bytes[i - 1];\n      for (let j = 8; j; j -= 1) {\n        bits.push(byteI % 2 ? 1 : 0);\n        byteI >>= 1;\n      }\n    }\n    bits.reverse();\n    const str = bits.join('');\n\n    // Unpack sign, exponent, fraction\n    const bias = (1 << (ebits - 1)) - 1;\n    const s = parseInt(str.substring(0, 1), 2) ? -1 : 1;\n    const e = parseInt(str.substring(1, 1 + ebits), 2);\n    const f = parseInt(str.substring(1 + ebits), 2);\n\n    // Produce number\n    if (e === (1 << ebits) - 1) {\n      return f !== 0 ? NaN : s * Infinity;\n    }\n    if (e > 0) {\n      return s * Math.pow(2, e - bias) * (1 + f / Math.pow(2, fbits));\n    }\n    if (f !== 0) {\n      return s * Math.pow(2, -(bias - 1)) * (f / Math.pow(2, fbits));\n    }\n    return 0;\n  },\n  strToByteArr(str) {\n    const bytes = [];\n    for (let i = 0; i < str.length; i++) { bytes.push(str.charCodeAt(i) & 0xFF); }\n    return bytes;\n  },\n  byteArrToStr(bytes) {\n    const str = [];\n    for (let i = 0; i < bytes.length; i++) { str.push(String.fromCharCode(bytes[i] & 0xFF)); }\n    return str.join('');\n  },\n  fromIEEE754Double(b) { return this.fromIEEE754(this.strToByteArr(b), 11, 52); },\n  toIEEE754Double(v) { return this.byteArrToStr(this.toIEEE754(v, 11, 52)); },\n  fromIEEE754Single(b) { return this.fromIEEE754(this.strToByteArr(b), 8, 23); },\n  toIEEE754Single(v) { return this.byteArrToStr(this.toIEEE754(v, 8, 23)); },\n};\n\nmodule.exports.IEEE754LIB = IEEE754LIB;\n","const { DestinationFromNetwork, DestinationType, Queue } = require('solclient-destination');\nconst { LOG_DEBUG, LOG_INFO } = require('solclient-log');\nconst { SDTDestType } = require('../sdt-destination-types');\nconst { SDTField } = require('../sdt-field');\nconst { SDTFieldType } = require('../sdt-field-types');\nconst { Topic } = require('solclient-destination');\n\nconst ParseDestination = {};\nParseDestination.parseDestination = function parseDestination(dataBuf, pos, len) {\n  const destType = dataBuf.readUInt8(pos);\n  const destBytes = dataBuf.toString('latin1', pos + 1, pos + len);\n  // first try to create a destination from the string, this handles strings with\n  // the preamble ('#P2P/QUE' or '#P2P/TQUE').\n  let destination = DestinationFromNetwork.createDestinationFromBytes(destBytes);\n  if (SDTDestType[destination.type] !== destType) {\n    // SDT destination type does not match the string format. This means either:\n    //    * that the string contains a queue preamble and the type is topic,\n    //      so just make it a topic\n    //    * that the type is queue and the string does not have the preamble, which means we\n    //      should construct a queue.\n    if (SDTDestType[DestinationType.QUEUE] === destType) {\n      destination = Queue.createFromLocalName(destBytes); //createFromLocal has issue with buffer\n    } else if (SDTDestType[DestinationType.TOPIC] === destType) {\n      LOG_DEBUG(`Found and allowed SDT field with  destination type ${destType} when decoding ${destBytes} to ${destination.type}`);\n      //\n      // override the format and set destType as specified in the SMF (i.e. TOPIC)\n      destination = new Topic(destBytes);\n    } else {\n      LOG_INFO(`Drop SDT field with invalid destination type ${destType} when decoding ${destBytes} to ${destination.type}`);\n      return null;\n    }\n  }\n  return SDTField.create(SDTFieldType.DESTINATION, destination);\n};\n\nmodule.exports.ParseDestination = ParseDestination;\n","const { ParseInteger } = require('./parse-integer');\n\nconst { autoDecodeVarLengthNumber } = ParseInteger;\n\nconst ParseFieldHeader = {};\n// Parse the header part of an SDT field.\n// Returns [TYPE, DECLARED_LENGTH, VALUE_DATA_LENGTH, CONSUMED_BYTES]\nParseFieldHeader.parseFieldHeader = function parseFieldHeader(dataBuf, offset) {\n  let pos = offset;\n  const onebyte = dataBuf.readUInt8(pos);\n  const elemType = (onebyte & 0xFC) >> 2;\n  const lenBytes = (onebyte & 0x03) + 1;\n  pos++;\n  const elemLen = autoDecodeVarLengthNumber(dataBuf, pos, lenBytes);\n  pos += lenBytes;\n  const elemValLen = elemLen - (1 + lenBytes);\n  return [elemType, elemLen, elemValLen, pos - offset];\n};\n\nmodule.exports.ParseFieldHeader = ParseFieldHeader;\n","const { SDTField } = require('../sdt-field');\nconst { SDTFieldType } = require('../sdt-field-types');\n\nconst ParseFloat = {};\nParseFloat.parseFloatField = function parseFloatField(buf, pos, len) {\n  switch (len) {\n    case 4:\n      return SDTField.create(SDTFieldType.FLOATTYPE, buf.readFloatBE(pos));\n    case 8:\n      return SDTField.create(SDTFieldType.DOUBLETYPE, buf.readDoubleBE(pos));\n    default:\n      return SDTField.create(SDTFieldType.UNKNOWN, buf.toString('latin1', pos, pos + len));\n  }\n};\n\nmodule.exports.ParseFloat = ParseFloat;\n","const Long = require('long');\nconst { SDTField } = require('../sdt-field');\nconst { SDTFieldType } = require('../sdt-field-types');\nconst { SDTUnsupportedValueError } = require('../sdt-unsupported-value-error');\nconst { SDTValueErrorSubcode } = require('../sdt-value-error-subcodes');\n\nconst { create: createField } = SDTField;\n\nconst ParseInteger = {};\n\n// Util: decode 1, 2, 3, 4 byte UINT.\nParseInteger.autoDecodeVarLengthNumber = function autoDecodeVarLengthNumber(dataBuf, pos, len) {\n  if ([1, 2, 3, 4].includes(len)) {\n    return dataBuf.readUIntBE(pos, len);\n  }\n  return false;\n};\n\n// Parse an integer SDT Field: [U]INT 8, 16, 32, 64.\nParseInteger.parseIntegerField = function parseIntegerField(isSigned, dataBuf, pos, len) {\n  let val = 0;\n\n  switch (len) {\n    case 1:\n      if (isSigned) {\n        val = dataBuf.readInt8(pos);\n        return createField(SDTFieldType.INT8, val);\n      } // else unsigned:\n      val = dataBuf.readUInt8(pos);\n      return createField(SDTFieldType.UINT8, val);\n\n    case 2:\n      if (isSigned) {\n        val = dataBuf.readInt16BE(pos);\n        return createField(SDTFieldType.INT16, val);\n      } // else signed:\n      val = dataBuf.readUInt16BE(pos);\n      return createField(SDTFieldType.UINT16, val);\n\n    case 4:\n      if (isSigned) {\n        val = dataBuf.readInt32BE(pos);\n        return createField(SDTFieldType.INT32, val);\n      } // else signed:\n      val = dataBuf.readUInt32BE(pos);\n      return createField(SDTFieldType.UINT32, val);\n\n    case 8:\n      {\n        let error = null;\n        const longValue =\n          Long.fromBits(dataBuf.readUInt32BE(pos + 4), dataBuf.readUInt32BE(pos), !isSigned);\n        if (longValue.getNumBitsAbs() > 48) {\n          error = new SDTUnsupportedValueError('Value is not supported',\n            SDTValueErrorSubcode.VALUE_OUTSIDE_SUPPORTED_RANGE,\n            dataBuf.toString('latin1', pos, len));\n        }\n        val = longValue.toNumber();\n        const field = createField(isSigned ? SDTFieldType.INT64 : SDTFieldType.UINT64, val);\n        if (error) {\n          field.setError(error);\n        }\n\n        return field;\n      }\n\n    default:\n      return null;\n  }\n};\n\nmodule.exports.ParseInteger = ParseInteger;\n","const ParseSingleElementLib = require('./parse-single-element');\nconst { LOG_ERROR } = require('solclient-log');\nconst { ParseFieldHeader } = require('./parse-field-header');\nconst { SDTDataTypes } = require('../sdt-data-types');\nconst { SDTField } = require('../sdt-field');\nconst { SDTFieldType } = require('../sdt-field-types');\nconst { SDTMapContainer } = require('../sdt-map-container');\n\nconst ParseMap = {};\nParseMap.parseMapAt = function parseMapAt(dataBuf, offset, datalen) {\n  const mapObj = new SDTMapContainer();\n  let pos = offset;\n  while (pos < offset + datalen) {\n    // === key field ===\n    const keyFieldHeader = ParseFieldHeader.parseFieldHeader(dataBuf, pos);\n    pos += keyFieldHeader[3]; // consumed bytes\n    // pos now points to start of string\n    if (keyFieldHeader[0] !== SDTDataTypes.String) {\n      // Fail!\n      LOG_ERROR(\"Error parsing SDTMAP, expected to find a string field as map key, and didn't\");\n      LOG_ERROR(`Type of key: ${keyFieldHeader[0]}`);\n      return SDTField.create(SDTFieldType.MAP, null);\n    }\n    const keyString = dataBuf.toString('latin1', pos, pos + keyFieldHeader[2] - 1);\n    pos += keyFieldHeader[2];\n\n    // === value field ===\n    // pos now points to start of next value\n    const valueFieldHeader = ParseFieldHeader.parseFieldHeader(dataBuf, pos);\n    const valueField = ParseSingleElementLib.ParseSingleElement.parseSingleElement(dataBuf, pos);\n    pos += valueFieldHeader[1]; // declared field length\n    if (valueField) {\n      mapObj.addField(keyString, valueField);\n    }\n  }\n  return SDTField.create(SDTFieldType.MAP, mapObj);\n};\n\nmodule.exports.ParseMap = ParseMap;\n","const { Convert } = require('solclient-convert');\nconst { LOG_DEBUG } = require('solclient-log');\nconst { ParseDestination } = require('./parse-destination');\nconst { ParseFieldHeader } = require('./parse-field-header');\nconst { ParseFloat } = require('./parse-float');\nconst { ParseInteger } = require('./parse-integer');\nconst { ParseMap } = require('./parse-map');\nconst { ParseStream } = require('./parse-stream');\nconst { SDTDataTypes } = require('../sdt-data-types');\nconst { SDTField } = require('../sdt-field');\nconst { SDTFieldType } = require('../sdt-field-types');\n\nconst {\n  utf8ToUcs2,\n} = Convert;\nconst { parseFieldHeader } = ParseFieldHeader;\nconst { parseFloatField } = ParseFloat;\nconst { parseIntegerField } = ParseInteger;\nconst { parseMapAt } = ParseMap;\nconst { parseStreamAt } = ParseStream;\nconst { parseDestination } = ParseDestination;\n\nconst ParseSingleElement = {\n  // Parse single SDT element, returns SDTField\n  parseSingleElement(dataBuf, offset) {\n    const fieldHeader = parseFieldHeader(dataBuf, offset);\n    if (!fieldHeader) {\n      LOG_DEBUG(`parseSingleElement return false, fieldHeader=${fieldHeader}`);\n      return null;\n    }\n\n    const pos = offset + fieldHeader[3];\n\n    // For use inside switch\n    const elemValLen = fieldHeader[2];\n\n    switch (fieldHeader[0]) {\n      case SDTDataTypes.Null:\n        return SDTField.create(SDTFieldType.NULLTYPE, null);\n      case SDTDataTypes.Boolean:\n        return SDTField.create(SDTFieldType.BOOL, dataBuf.readUInt8(pos) !== 0);\n      case SDTDataTypes.Integer:\n        return parseIntegerField(true, dataBuf, pos, elemValLen);\n      case SDTDataTypes.UnsignedInteger:\n        return parseIntegerField(false, dataBuf, pos, elemValLen);\n      case SDTDataTypes.Float:\n        return parseFloatField(dataBuf, pos, elemValLen);\n      case SDTDataTypes.Char:\n        return SDTField.create(SDTFieldType.WCHAR,\n                               String.fromCharCode(dataBuf.readUInt16BE(pos)));\n      case SDTDataTypes.ByteArray:\n        return SDTField.create(SDTFieldType.BYTEARRAY,\n                               dataBuf.slice(pos, pos + elemValLen));\n      case SDTDataTypes.String:\n        // strip last byte (null-terminator)\n        return SDTField.create(SDTFieldType.STRING,\n                               utf8ToUcs2(dataBuf.toString('latin1', pos, pos + elemValLen - 1)));\n      case SDTDataTypes.Destination:\n        return parseDestination(dataBuf, pos, elemValLen);\n      case SDTDataTypes.SMFMessage:\n        return SDTField.create(SDTFieldType.SMF_MESSAGE, dataBuf.slice(pos, pos + elemValLen));\n      case SDTDataTypes.Map:\n        return parseMapAt(dataBuf, pos, elemValLen);\n      case SDTDataTypes.Stream:\n        return parseStreamAt(dataBuf, pos, elemValLen);\n      default:\n        // removed toString conversion as a test\n        return SDTField.create(SDTFieldType.UNKNOWN,\n                               dataBuf.toString('latin1', pos, pos + elemValLen));\n    }\n  },\n};\n\nconst StringToBuffer = {\n  stringToBuffer(str) {\n    const BufferImpl = require('buffer').Buffer;\n    return BufferImpl.from(str, 'latin1');\n  },\n};\n\nmodule.exports.ParseSingleElement = ParseSingleElement;\nmodule.exports.StringToBuffer = StringToBuffer;\n","const ParseSingleElementLib = require('./parse-single-element');\nconst { ParseFieldHeader } = require('./parse-field-header');\nconst { SDTField } = require('../sdt-field');\nconst { SDTFieldType } = require('../sdt-field-types');\nconst { SDTStreamContainer } = require('../sdt-stream-container');\n\nconst ParseStream = {};\nParseStream.parseStreamAt = function parseStreamAt(dataBuf, offset, datalen) {\n  const streamObj = new SDTStreamContainer();\n  let pos = offset;\n  while (pos < offset + datalen) {\n    const valueFieldHeader = ParseFieldHeader.parseFieldHeader(dataBuf, pos);\n    const valueField = ParseSingleElementLib.ParseSingleElement.parseSingleElement(dataBuf, pos);\n    pos += valueFieldHeader[1]; // declared field length\n    if (valueField) {\n      streamObj.addField(valueField);\n    }\n  }\n  return SDTField.create(SDTFieldType.STREAM, streamObj);\n};\n\nmodule.exports.ParseStream = ParseStream;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SDTDataTypes = {\n  Null:            0x00,\n  Boolean:         0x01,\n  Integer:         0x02,\n  UnsignedInteger: 0x03,\n  Float:           0x04,\n  Char:            0x05,\n  ByteArray:       0x06,\n  String:          0x07,\n  Destination:     0x08,\n  SMFMessage:      0x09,\n  Map:             0x0A,\n  Stream:          0x0B,\n};\n\nmodule.exports.SDTDataTypes = Enum.new(SDTDataTypes);\n","const { DestinationType } = require('solclient-destination');\nconst { Enum } = require('solclient-eskit');\n\n/**\n * An enumeration of all SDT data types.\n * @enum {number}\n * @namespace\n * @memberof solace\n * @private\n */\nconst SDTDestType = {\n  [DestinationType.TOPIC]:           0x00,\n  [DestinationType.QUEUE]:           0x01,\n  [DestinationType.TEMPORARY_QUEUE]: 0x01,\n};\n\nmodule.exports.SDTDestType = Enum.new(SDTDestType);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * An enumeration of all SDT data types.\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst SDTFieldType = {\n  /**\n   * @type {Number}\n   * @description Maps to a boolean.\n   */\n  BOOL:        0,\n  /**\n   * @type {Number}\n   * @description Maps to a number.\n   */\n  UINT8:       1,\n  /**\n   * @type {Number}\n   * @description Maps to a number.\n   */\n  INT8:        2,\n  /**\n   * @type {Number}\n   * @description Maps to a number.\n   */\n  UINT16:      3,\n  /**\n   * @type {Number}\n   * @description Maps to a number.\n   */\n  INT16:       4,\n  /**\n   * @type {Number}\n   * @description Maps to a number.\n   */\n  UINT32:      5,\n  /**\n   *@type {Number}\n   * @description Maps to a number.\n   */\n  INT32:       6,\n  /**\n   * @type {Number}\n   * @description Maps to a number. <br>\n   * <strong>Warning:</strong> Supports 48-bit integers (range: 0 to 2<sup>48</sup>-1).\n   * When decoding, only the lower 48 bits are considered significant.\n   */\n  UINT64:      7,\n  /**\n   * @type {Number}\n   * @description Maps to a number. <br>\n   * <strong>Warning:</strong> Supports 48-bit integers + sign (range: -(2<sup>48</sup>-1) to\n   * 2<sup>48</sup>-1). When decoding, only the lower 48 bits are considered significant.\n   */\n  INT64:       8,\n  /**\n   * @type {Number}\n   * @description A single character; maps to a string.\n   */\n  WCHAR:       9,\n  /**\n   * @type {Number}\n   * @description Maps to a string.\n   */\n  STRING:      10,\n  /**\n   * @type {Number}\n   * @description Maps to a Uint8Array.\n   *\n   * Backward compatibility note:\n   * Using the version_10 factory profile or older, the getValue() method of a BYTEARRAY sdtField\n   * returns the byte array in 'latin1' String representation.\n   * Later profiles return a Uint8Array (in the form of a nodeJS Buffer instance in fact)\n   *\n   * When creating a field of type BYTEARRAY, the following datatypes are all accepted as value:\n   *   Buffer (the nodeJS native type or equivalent)\n   *   ArrayBuffer,\n   *   Any DataView or TypedArray,\n   *   'latin1' String for backwards compatibility:\n   *     each character has a code in the range 0-255\n   *     representing exactly one byte in the attachment.\n   */\n  BYTEARRAY:   11,\n  /**\n   * @type {Number}\n   * @description Single-precision float; maps to a number.\n   */\n  FLOATTYPE:   12,\n  /**\n   * @type {Number}\n   * @description Double-precision float; maps to a number.\n   */\n  DOUBLETYPE:  13,\n  /**\n   * @type {Number}\n   * @description Maps to {@link SDTMapContainer}.\n   */\n  MAP:         14,\n  /**\n   * @type {Number}\n   * @description Maps to {@link SDTStreamContainer}.\n   */\n  STREAM:      15,\n  /**\n   * @type {Number}\n   * @description Maps to {@link Destination}.\n   */\n  DESTINATION: 16,\n  /**\n   * @type {Number}\n   * @description Maps to <code>null</code>.\n   */\n  NULLTYPE:    17,\n  /**\n   * @type {Number}\n   * @description Maps to an unknown type.\n   */\n  UNKNOWN:     18,\n  /**\n   * @type {Number}\n   * @description Maps to an encoded SMF message.\n   */\n  SMF_MESSAGE: 19,\n};\n\nmodule.exports.SDTFieldType = Enum.new(SDTFieldType);\n","const SolclientFactoryLib = require('solclient-factory');\nconst { Convert } = require('solclient-convert');\nconst { SDTFieldType } = require('./sdt-field-types');\nconst { validateSdtField } = require('./validate-sdt-field');\n\nconst { anythingToBuffer } = Convert;\nconst { ProfileBinding } = SolclientFactoryLib;\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users.</b>\n *\n * Represents a SDT (Structured Data Type) field. To create an instance of an <code>SDTField</code>,\n * call {@link solace.SDTField.create}.\n *\n * SDTField objects are used in Solace Containers ({@link solace.SDTMapContainer}\n * and {@link solace.SDTStreamContainer}). The <b>deprecated</b> usage of\n * {@link solace.SDTMapContainer#addField} and {@link solace.SDTStreamContainer#addField}\n * take a SDTField object as an argument. The preferred usage is to pass a\n * {@link solace.SDTFieldType} and value as arguments.\n *\n * SDTField objectts must be used as an argument to {@link solace.Message#setSdtContainer}.\n * The only valid SDTField objects for {@link solace.Message#setSdtContainer} are:\n * * {@link solace.SDTFieldType.STREAM}\n * * {@link solace.SDTFieldType.MAP}\n * * {@link solace.SDTFieldType.STRING}\n * @hideconstructor\n * @memberof solace\n */\nclass SDTField {\n\n  /*\n   * @constructor\n   * @param {SDTFieldType} [type=SDTFieldType.NULLTYPE] The field type to construct\n   * @param {*} value The value to be encapsulated\n   * @throws {solace.OperationError} if value does not match type\n   * @private\n   */\n  constructor(type = SDTFieldType.NULLTYPE, value = null) {\n    const err = validateSdtField(type, value);\n    if (err !== null) {\n      throw (err);\n    }\n    this._type = type;\n    if (type === SDTFieldType.BYTEARRAY) {\n      this._value = anythingToBuffer(value);\n    } else {\n      this._value = value;\n    }\n    this._error = undefined;\n  }\n\n  /**\n   * Gets the type of field represented.\n   * @returns {solace.SDTFieldType} The type of field represented.\n   */\n  getType() {\n    return this._type;\n  }\n\n  /**\n   * Gets the field value.\n   * @returns {*} Field value (as one of the supported data types).\n   * @throws {solace.SDTUnsupportedValueError} if value found in the field\n   * is not in range supported by the platform/runtime.\n   */\n  getValue() {\n    if (this._error !== undefined) {\n      throw (this._error);\n    }\n    return this.getValueNoThrow();\n  }\n\n  /**\n   * Gets the field value or error object.\n   * @returns {*} Field value (as one of the supported data types) or\n   * {solace.SDTUnsupportedValueError} if value found in the field\n   * is not in range supported by the platform/runtime.\n   * @private\n   */\n  getValueNoThrow() {\n    if (this._error !== undefined) {\n      return this._error;\n    }\n    if (this._type === SDTFieldType.BYTEARRAY && ProfileBinding.value.byteArrayAsString) {\n      return this._value.toString('latin1');\n    }\n    return this._value;\n  }\n\n  /**\n   * Sets an error on the object to be thrown on getValue().\n   * Used only by parse-integer, as it is possible to receive\n   * 64 bit integers that cannot be represented in a javaScript number.\n   * JavaScript numbers are floats and can only hold a 48 bit integer.\n   * @private\n   * @param {solace.SDTUnsupportedValueError} err error object.\n   */\n  setError(err) {\n    this._error = err;\n  }\n\n  toString() {\n    return `[SDTField type:${this._type} value:${this._value}]`;\n  }\n\n  /**\n   * Create a new SDTField instance representing a Value of a given Type.\n   *\n   * @param {solace.SDTFieldType} type The type of field represented.\n   * @param {*} value The corresponding value to store in the field.\n   * @returns {solace.SDTField} The new SDT field with the given type and value\n   * @throws {solace.OperationError} if value does not match type\n   * @static\n   */\n  static create(type, value) {\n    return new SDTField(type, value);\n  }\n\n}\n\nmodule.exports.SDTField = SDTField;\n","const { ErrorSubcode, OperationError } = require('solclient-error');\nconst { SDTField } = require('./sdt-field');\n\n/**\n * @classdesc\n * Defines a Structured Data Type (SDT) map container.\n * @memberof solace\n */\nclass SDTMapContainer {\n  /**\n   * @constructor\n   */\n  constructor() {\n    this._map = []; // key-value mappings (keys are strings)\n  }\n\n  /**\n   * Get the list of keys in this map, in unspecified order.\n   * @returns {Array.<String>} Array of defined keys in the map.\n   */\n  getKeys() {\n    return Object.keys(this._map);\n  }\n\n  /**\n   * Return the SDTField with the given key.\n   * @param {String} key The key to look up.\n   * @returns {solace.SDTField} The field referenced by key.\n   */\n  getField(key) {\n    return this._map[key];\n  }\n\n  /**\n   * Delete an SDTField with the given key.\n   * @param {String} key The field key to delete.\n   */\n  deleteField(key) {\n    delete this._map[key];\n  }\n\n  /**\n   * Adds a field to this map. If a key:value mapping already exists for this key, it is replaced.\n   * <p>\n   * <b>Deprecated</b> If <code>typeOrField</code> is a {@link solace.SDTField} instance,\n   * it is added to the map.\n   *\n   * The preferred usage is to pass a {@link solace.SDTFieldType}, then the API will create a\n   * SDTField of this type using <code>value</code> before adding it to the map.\n   *\n   * @param {String} key The key by which to store the given value.\n   * @param {solace.SDTField|solace.SDTFieldType} typeOrField A SDTField instance or SDTFieldType.\n   * @param {*} [value] The value to wrap as an SDTField.\n   * @throws {solace.OperationError} if value does not match type\n   * @throws {solace.SDTUnsupportedValueError} if value is not in range\n   *  supported by the platform/runtime\n   */\n  addField(key, typeOrField, value = undefined) {\n    if (typeOrField instanceof SDTField) {\n      this._map[key] = typeOrField;\n      return;\n    } else if (typeof value !== 'undefined') {\n      this._map[key] = SDTField.create(typeOrField, value);\n      return;\n    }\n    throw new OperationError('Invalid parameters to addField: expected SDTField, or type and value',\n      ErrorSubcode.PARAMETER_CONFLICT);\n  }\n}\n\nmodule.exports.SDTMapContainer = SDTMapContainer;\n","const SDTFieldLib = require('./sdt-field');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\n\n/**\n * @classdesc\n * Defines a Structured Data Type (SDT) stream container. A stream is an iterable collection of\n * {@link solace.SDTField}s.\n * @memberof solace\n */\nclass SDTStreamContainer {\n  /**\n   * @constructor\n   */\n  constructor() {\n    this._stream = [];\n    this._writable = true;\n    this._readPt = 0;\n  }\n\n  /**\n   * Returns true if the stream has at least one more {@link solace.SDTField}\n   * at the current position.\n   * @returns {Boolean} true, if there is an available field at the read pointer; false, otherwise.\n   */\n  hasNext() {\n    return (this._stream.length > this._readPt);\n  }\n\n  /**\n   * Returns the next field in the stream and advances the read pointer.\n   * If the end of the stream is reached, it returns undefined.\n   * @returns {solace.SDTField} The next field in the stream.\n   */\n  getNext() {\n    return (this._readPt < this._stream.length) ? this._stream[this._readPt++] : undefined;\n  }\n\n  /**\n   * Rewinds the read pointer to the beginning of the stream. Normally when {@link hasNext}\n   * returns false, a client application must call rewind() to reiterate over the stream's fields.\n   * @throws {@link solace.OperationError} if the stream cannot be rewound.\n   */\n  rewind() {\n    this._readPt = 0;\n  }\n\n  /**\n   * Appends a SDTField to the stream.\n   * <p>\n   * If <code>field</code> is a {@link solace.SDTField}, this field is appended to the stream.\n   * <br>\n   * If <code>field</code> is a {@link solace.SDTFieldType},\n   * then the API will create a SDTField of this\n   * type with a value of <code>optValue</code> and append this new SDTField to\n   * the stream.\n   *\n   * @param {solace.SDTField|solace.SDTFieldType} field The field to append to the stream.\n   * @param {*} [optValue] The value to wrap as an SDTField.\n   */\n  /**\n   * Appends a field to this stream.\n   * <p>\n   * @deprecated If <code>typeOrField</code> is a {@link solace.SDTField} instance,\n   * it is appended to the stream.\n   *\n   * The preferred usage is to pass a {@link solace.SDTFieldType}, then the API will create a\n   * SDTField of this type using <code>value</code> and append this new SDTField\n   * to the stream.\n   *\n   * @param {solace.SDTField|solace.SDTFieldType} typeOrField A SDTField instance or SDTFieldType.\n   * @param {*} [value] The value to wrap as an SDTField.\n   * @throws {@link solace.OperationError} if value does not match type\n   * @throws {@link solace.SDTUnsupportedValueError} if value is not in range\n   *  supported by the platform/runtime\n   */\n  addField(typeOrField, value = undefined) {\n    if (!this._writable) return;\n\n    if (typeOrField instanceof SDTFieldLib.SDTField) {\n      this._stream.push(typeOrField);\n      return;\n    }\n\n    if (typeof value !== 'undefined') {\n      this._stream.push(SDTFieldLib.SDTField.create(typeOrField, value));\n      return;\n    }\n\n    throw new OperationError('Invalid parameters to addField: expected SDTField, or type and value',\n      ErrorSubcode.PARAMETER_CONFLICT);\n  }\n}\n\nmodule.exports.SDTStreamContainer = SDTStreamContainer;\n","const DebugLib = require('solclient-debug');\nconst { SolaceError } = require('solclient-error');\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users.</b>\n *\n * Represents a SDT unsupported value error.  An SDT field was assigned a value that is within\n * the type range for the given SDT type, but is not supported on this platform/runtime.\n * This occurs when a received {@link solace.SDTContainerMap} or {@link solace.SDTContainerStream}\n * contains a field with a value that can not represented in the local architecture.\n * Possible causes include:\n * * receive 64 bit integer that cannot be represented accurately in a javaScript number. JavaScript\n *   numbers are floats and can only hold a 48 bit integer without loss of precission. Any integer\n *   greater than 281474976710655 or less than -281474976710655 will cause this exception.\n * @hideconstructor\n * @extends solace.SolaceError\n * @memberof solace\n */\nclass SDTUnsupportedValueError extends SolaceError {\n  /*\n   * @constructor\n   * @param {String} message The message associated with this error\n   * @param {SDTValueErrorSubcode} subcode The subcode associated with this error\n   * @param {Object} sourceData The original representation of the value\n   */\n  constructor(message, subcode, sourceData) {\n    /**\n     * The name of the error.\n     * @name solace.SDTUnsupportedValueError#name\n     * @type {String}\n     * @readonly\n     * @description 'SDTUnsupportedValue'\n     */\n    super('SDTUnsupportedValue', message);\n    /**\n     * The subcode for the error. see {@link solace.SDTValueErrorSubcode}\n     * @name solace.SDTUnsupportedValueError#subcode\n     * @type {solace.SDTValueErrorSubcode}\n     */\n    this.subcode = subcode;\n    this.sourceData = sourceData || '';\n  }\n\n  inspect() {\n    return super.inspect({\n      subcode:    null,\n      sourceData: v => DebugLib.Debug.formatDumpBytes(v, false, 0),\n    });\n  }\n\n  getSubcode() {\n    return this.subcode;\n  }\n\n  getSourceData() {\n    return this.sourceData;\n  }\n}\n\n\nmodule.exports.SDTUnsupportedValueError = SDTUnsupportedValueError;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Enumeration of {@link solace.SDTUnsuportedValueError} causes.\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst SDTValueErrorSubcode = {\n  /**\n   * @type {Number}\n   * @description\n   * The value for this field may be valid on other platforms, but is outside the\n   * range that is supported on this platform for the given type.\n   */\n  VALUE_OUTSIDE_SUPPORTED_RANGE: 1,\n};\n\nmodule.exports.SDTValueErrorSubcode = Enum.new(SDTValueErrorSubcode);\n","const DestinationLib = require('solclient-destination');\nconst SDTMapContainerLib = require('./sdt-map-container');\nconst SDTStreamContainerLib = require('./sdt-stream-container');\nconst ValidateLib = require('solclient-validate');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\nconst { SDTFieldType } = require('./sdt-field-types');\n\nconst baseTypes = (() => {\n  const result = [];\n  result[SDTFieldType.BOOL] = 'boolean';\n  result[SDTFieldType.UINT8] = 'number';\n  result[SDTFieldType.INT8] = 'number';\n  result[SDTFieldType.UINT16] = 'number';\n  result[SDTFieldType.INT16] = 'number';\n  result[SDTFieldType.UINT32] = 'number';\n  result[SDTFieldType.INT32] = 'number';\n  result[SDTFieldType.UINT64] = 'number';\n  result[SDTFieldType.INT64] = 'number';\n  result[SDTFieldType.WCHAR] = 'string';\n  result[SDTFieldType.STRING] = 'string';\n  result[SDTFieldType.BYTEARRAY] = 'object'; // Uint8Array\n  result[SDTFieldType.FLOATTYPE] = 'number';\n  result[SDTFieldType.DOUBLETYPE] = 'number';\n  return result;\n})();\n\nfunction failInvalidParameter(valueType) {\n  return new OperationError(\n            `Invalid SDT type:value combination, expected value type ${valueType}`,\n            ErrorSubcode.PARAMETER_INVALID_TYPE);\n}\n\nfunction validateSdtField(type, value) {\n  if (baseTypes[type]) {\n    if ((baseTypes[type] === 'boolean' && typeof value !== 'boolean') ||\n            (baseTypes[type] === 'number' && typeof value !== 'number') ||\n            (baseTypes[type] === 'string' && typeof value !== 'string')) {\n      return failInvalidParameter(baseTypes[type]);\n    }\n  }\n  if (type === SDTFieldType.MAP &&\n      !ValidateLib.Check.instanceOf(value, SDTMapContainerLib.SDTMapContainer)) {\n    return failInvalidParameter('SDTMapContainer');\n  }\n  if (type === SDTFieldType.STREAM &&\n      !ValidateLib.Check.instanceOf(value, SDTStreamContainerLib.SDTStreamContainer)) {\n    return failInvalidParameter('SDTStreamContainer');\n  }\n  if (type === SDTFieldType.DESTINATION &&\n      !ValidateLib.Check.instanceOf(value, DestinationLib.Destination)) {\n    return failInvalidParameter('Destination');\n  }\n  return null;\n}\n\nmodule.exports.validateSdtField = validateSdtField;\n","const { AuthenticationScheme } = require('./lib/authentication-schemes');\nconst { CapabilityType, ClientCapabilityType } = require('./lib/capability-types');\nconst { MessageRxCBInfo } = require('./lib/message-rx-cb-info');\nconst { MutableSessionProperty } = require('./lib/mutable-session-properties');\nconst { Session } = require('./lib/session');\nconst { SessionEvent } = require('./lib/session-event');\nconst { SessionEventCBInfo } = require('./lib/session-event-cb-info');\nconst { SessionEventCode } = require('./lib/session-event-codes');\nconst { SessionEventName } = require('./lib/session-event-names');\nconst { SessionProperties } = require('./lib/session-properties');\nconst { SessionState } = require('./lib/session-states');\n\nconst { SolclientFactory } = require('solclient-factory');\nconst { SslDowngrade } = require('./lib/ssl-downgrades');\n\n/**\n * Creates a session instance.\n * @param {solace.SessionProperties} sessionProperties Properties to configure the session.\n * @param {solace.MessageRxCBInfo} [messageCallbackInfo] <b>Deprecated:</b>\n *    Callback method for messages.  Instead applications should receive message events via\n *    `session.on(solace.SessionEventCode.MESSAGE, (message) => { ... });`\n * @param {solace.SessionEventCBInfo} [eventCallbackInfo] <b>Deprecated:</b> Callback method for\n *    events on the <i>Session</i>. Instaead applications should receive session events via\n *    `session.on(solace.SessionEventCode.<code>, (event) => { ... });`\n * @returns {solace.Session} The newly-created session.\n * @throws {solace.OperationError} if the parameters have an invalid type or value.\n *                          Subcode: {@link ErrorSubcode.PARAMETER_INVALID_TYPE}.\n * @method\n * @name solace.SolclientFactory.createSession\n */\nSolclientFactory.createSession = SolclientFactory.createFactory(\n  (sessionProperties, messageCallbackInfo, eventCallbackInfo) =>\n    new Session(sessionProperties, messageCallbackInfo, eventCallbackInfo));\n\nmodule.exports.AuthenticationScheme = AuthenticationScheme;\nmodule.exports.CapabilityType = CapabilityType;\nmodule.exports.ClientCapabilityType = ClientCapabilityType;\nmodule.exports.MessageRxCBInfo = MessageRxCBInfo;\nmodule.exports.MutableSessionProperty = MutableSessionProperty;\nmodule.exports.Session = Session;\nmodule.exports.SessionEventCBInfo = SessionEventCBInfo;\nmodule.exports.SessionEventCode = SessionEventCode;\nmodule.exports.SessionEvent = SessionEvent;\nmodule.exports.SessionEventName = SessionEventName;\nmodule.exports.SessionProperties = SessionProperties;\nmodule.exports.SessionState = SessionState;\nmodule.exports.SslDowngrade = SslDowngrade;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Represents authentication schemes that can be used. The corresponding session\n * property is {@link solace.SessionProperties#authenticationScheme}.\n *\n * @readonly\n * @enum {String}\n * @memberof solace\n * @namespace\n */\nconst AuthenticationScheme = {\n  /**\n   * @description Username/Password based authentication scheme.\n   * @type {String}\n   */\n  BASIC:                       'AuthenticationScheme_basic',\n  /**\n   * @name solace.AuthenticationScheme.CLIENT_CERTIFICATE\n   * @default AuthenticationScheme_clientCertificate\n   * @description Client-side certificate based authentication scheme.\n   * @see {@link solace.SessionProperties#sslPfx}\n   * @see {@link solace.SessionProperties#sslPfxPassword}\n   * @see {@link solace.SessionProperties#sslPrivateKey}\n   * @see {@link solace.SessionProperties#sslPrivateKeyPassword}\n   * @see {@link solace.SessionProperties#sslCertificate}\n   * @type {String}\n   * @target node\n   */\n  /**\n   * @description Client-side certificate based authentication scheme.  The certificate and\n   *   private key are provided by the browser.\n   * @type {String}\n   * @target browser\n   */\n  CLIENT_CERTIFICATE:          'AuthenticationScheme_clientCertificate',\n  /**\n   * @deprecated Use {@link solace.AuthenticationScheme.BASIC} instead.\n   * @type {String}\n   */\n  AUTHENTICATION_SCHEME_BASIC: 'AuthenticationScheme_basic',\n\n  /**\n   * @deprecated Use {@link solace.AuthenticationScheme.CLIENT_CERTIFICATE} instead.\n   * @type {String}\n   */\n  AUTHENTICATION_SCHEME_CLIENT_CERTIFICATE: 'AuthenticationScheme_clientCertificate',\n\n  /**\n   * @default AuthenticationScheme_oauth2\n   * @description Oauth2 authentication scheme.\n   * @see {@link solace.SessionProperties#accessToken}\n   * @see {@link solace.SessionProperties#idToken}\n   * @see {@link solace.SessionProperties#issuerIdentifier}\n   * @type {String}\n   */\n  OAUTH2: 'AuthenticationScheme_oauth2',\n};\n\nmodule.exports.AuthenticationScheme = Enum.new(AuthenticationScheme);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Represents an enumeration of peer capabilities.\n *\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst CapabilityType = {\n  /**\n   * Peer's software load version. Type: string.\n   */\n  PEER_SOFTWARE_VERSION:        0,\n  /**\n   * Peer's software release date. Type: string.\n   */\n  PEER_SOFTWARE_DATE:           1,\n  /**\n   * Peer's platform. Type: string.\n   */\n  PEER_PLATFORM:                2,\n  /**\n   * Speed (in Mbps) of the port the client connects to. Type: number.\n   */\n  PEER_PORT_SPEED:              3,\n  /**\n   * Type of the port the client has connected to (currently 0: Ethernet). Type: number.\n   */\n  PEER_PORT_TYPE:               4,\n  /**\n   * Maximum size of a Direct message (in bytes), including all optional message headers and data.\n   * Type: number.\n   */\n  MAX_DIRECT_MSG_SIZE:          5,\n  /**\n   * Peer's router name. Type: string.\n   *\n   * This property is useful when sending SEMP requests to a peer's SEMP topic, which may be\n   * constructed as `#P2P/routername/#client/SEMP`.\n   */\n  PEER_ROUTER_NAME:             6,\n  /**\n   * Peer supports message eliding. Type: boolean.\n   */\n  MESSAGE_ELIDING:              7,\n  /**\n   * Peer supports NoLocal option (client may avoid receiving messages published by itself).\n   */\n  NO_LOCAL:                     8,\n  /**\n   * Peer supports Guaranteed Message Consumer connections for receiving guaranteed messages.\n   */\n  GUARANTEED_MESSAGE_CONSUME:   9,\n  /**\n   * Peer supports temporary endpoints.\n   */\n  TEMPORARY_ENDPOINT:           10,\n  /**\n   * Peer supports Guaranteed Message Publisher connections for sedning guaranteed messages.\n   */\n  GUARANTEED_MESSAGE_PUBLISH:   11,\n  /**\n   * Peer supports Guaranteed Messages Browser connections for receiving guaranteed messages\n   */\n  GUARANTEED_MESSAGE_BROWSE:    12,\n  /**\n   * Peer supports creating/modify/disposing endpoints.\n   */\n  ENDPOINT_MGMT:                13,\n  /**\n   * Peer supports selectors on Guaranteed Message Consumers.\n   */\n  SELECTOR:                     14,\n  /**\n   * Maximum size of a Direct message (in bytes), including all optional message headers and data.\n   * Type: number.\n   */\n  MAX_GUARANTEED_MSG_SIZE:      15,\n  /**\n   * Peer supports Guaranteed Messaging Consumer state change updates. Type: boolean\n   */\n  ACTIVE_CONSUMER_INDICATION:   16,\n  /**\n   * Peer accepts compressed (DEFLATE) data. Type: boolean.\n   */\n  COMPRESSION:                  17,\n  /**\n   * Peer supports Guaranteed Messaging cut-through. Type: boolean\n   * @deprecated since broker v9.10.0.12\n   */\n  CUT_THROUGH:                  18,\n  /**\n   * Peer supports provisioned queue and topic-endpoint discard behavior. Type: boolean\n   */\n  ENDPOINT_DISCARD_BEHAVIOR:    19,\n  /**\n   * Peer supports Guaranteed Messaging message TTL and Dead-Message Queues. Type: boolean\n   */\n  ENDPOINT_MESSAGE_TTL:         20,\n  /**\n   * Peer accepts JNDI queries. Type: boolean.\n   */\n  JNDI:                         21,\n  /**\n   * Peer supports per topic sequence numbering for Guaranteed Messaging messages. Type: boolean\n   */\n  PER_TOPIC_SEQUENCE_NUMBERING: 22,\n  /**\n   * Peer supports QueueSubscriptionAdd for managing subscriptions on queue endpoints.\n   * Type: boolean\n   */\n  QUEUE_SUBSCRIPTIONS:          23,\n  /**\n   * Peer supports add/remove subscriptions for a specified clientName. Type: boolean\n   */\n  SUBSCRIPTION_MANAGER:         24,\n  /**\n   * Peer supports transacted sessions. Type: boolean.\n   */\n  TRANSACTED_SESSION:           25,\n  /**\n   * Peer support Message Replay. Type: boolean.\n   */\n  MESSAGE_REPLAY:               26,\n  /**\n   * Peer supports TLS downgrade to compression (encrypted and plaintext) Type: boolean\n   */\n  COMPRESSED_SSL:               27,\n  /**\n   * The peer can support \\#share and \\#noexport subscriptions\n   * Type: Boolean\n   */\n  SHARED_SUBSCRIPTIONS:         28,\n  /**\n   * The EndpointErrorId in replay bind responses can be trusted.\n   */\n  BR_REPLAY_ERRORID:            29,\n  /**\n   * Support for ApplicationAck optional outcomes \"failed\" and \"rejected\".\n   */\n  AD_APP_ACK_FAILED:            30,\n  /**\n   * Broker supports variable-length SMF extended parameters.\n   */\n  VAR_LEN_EXT_PARAM:            31,\n};\n\n/**\n * Represents an enumeration of client capabilities.\n * These are sent in the ClientCtrl login messages.\n *\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst ClientCapabilityType = {\n  /**\n   * Client implements acknowledgements to router unsolicited unbinds.\n   * Always true.\n   */\n  UNBIND_ACK: 0,\n  /**\n   * Indicates whether a client will process an EndpointErrorId in a BindResponse message.\n   * Always true\n   */\n  BR_ERRORID: 1,\n  /**\n   * Indicates whether a client supports Partitioned Queues\n   * and whether a PartitionGroupId will be proccessed in a BindResponse message.\n   * Always true\n   * \n   * @since 10.12.0\n   */\n   PQ: 2,\n};\nmodule.exports.CapabilityType = Enum.new(CapabilityType);\nmodule.exports.ClientCapabilityType = Enum.new(ClientCapabilityType);\n","class CorrelatedRequest {\n  /**\n   * Creates an instance of CorrelatedRequest.\n   * @param {String} correlationTag The associated tag\n   * @param {?} timer The opaque timer handle\n   * @param {String} correlationKey The associated key\n   * @param {function} respRecvdCallback The associated callback\n   * @memberof CorrelatedRequest\n   * @private\n   */\n  constructor(correlationTag, timer, correlationKey, respRecvdCallback) {\n    this.correlationTag = correlationTag;\n    this.timer = timer;\n    this.correlationKey = correlationKey;\n    this.respRecvdCallback = respRecvdCallback;\n  }\n}\n\nmodule.exports.CorrelatedRequest = CorrelatedRequest;\n","const { CapabilityType } = require('./capability-types');\n\nmodule.exports.DefaultCapabilities = {\n  createDefaultCapabilities(sessionProperties) {\n    const defaultCapabilities = {\n      [CapabilityType.GUARANTEED_MESSAGE_CONSUME]: true,\n      [CapabilityType.GUARANTEED_MESSAGE_PUBLISH]: true,\n      [CapabilityType.SHARED_SUBSCRIPTIONS]:       true,\n      // The others are set TRUE by CCSMP, but not relevant for us yet\n      // [CapabilityType.TEMPORARY_ENDPOINT]:   true,\n      // [CapabilityType.GUARANTEED_MESSAGE_BROWSE]:         true,\n      // [CapabilityType.ENDPOINT_MGMT]:        true,\n      // [CapabilityType.SELECTOR]:             true,\n      // [CapabilityType.COMPRESSION]:          true,\n      // [CapabilityType.CUT_THROUGH]:          true,\n      // [CapabilityType.QUEUE_SUBSCRIPTIONS]:  true,\n      // [CapabilityType.SUBSCRIPTION_MANAGER]: true,\n      [CapabilityType.MAX_GUARANTEED_MSG_SIZE]: sessionProperties.assumedMaxAdSize,\n    };\n    return defaultCapabilities;\n  },\n};\n","const { Process } = require('solclient-util');\n\nconst C_2_32 = Math.pow(2, 32);\n\nfunction leftPad(str, len) {\n  if (len > str.length) {\n    return '0'.repeat(len - str.length) + str;\n  }\n  return str;\n}\n\nfunction generateRandomId() {\n  const rand = (Math.random() * C_2_32).toFixed(0);\n  return leftPad(rand.toString(), 10);\n}\n\n/**\n * @private\n */\nconst GlobalContext = {\n\n  sessionCounter: 0,\n  idCounter:      0,\n\n  RandId: generateRandomId(),\n\n  NextSessionCounter() {\n    const count = ++this.sessionCounter;\n    return leftPad(count.toString(), 4);\n  },\n\n  NextId() {\n    return ++this.idCounter;\n  },\n\n  GenerateClientName() {\n    const { product, platform } = Process;\n    const result = `${product}/${platform}/${this.RandId}/${this.NextSessionCounter()}`;\n    return result;\n  },\n\n  GenerateUserIdentification() {\n    const { product, platform } = Process;\n    return `${product}/${platform}/${this.RandId}`;\n  },\n\n  GenerateClientDescription() {\n    return `solclientjs/${Process.description}`.substring(0, 254);\n  },\n};\n\nmodule.exports.GlobalContext = GlobalContext;\n","const { LOG_TRACE } = require('solclient-log');\nconst { parseURL } = require('solclient-util');\n\nlet hostListDNSFilter;\nif (BUILD_ENV.TARGET_NODE) {\n  /* eslint-env node */\n  /* eslint-disable global-require */\n  const dns = require('dns');\n  /* eslint-enable global-require */\n\n  // util.promisify is Node 8. This converts an (err, result) callback to a promise.\n  // The purpose is to allow us to use Promise.all, which deals with waiting until\n  // all promises are resolved, and returning the results in correctly ordered array.\n  const dnsLookupPromise = (url, options) => new Promise((resolve) => {\n    const host = parseURL(url).hostname;\n    LOG_TRACE('looking up', url, '=>', host);\n    dns.lookup(host, options, (error, result) => {\n      LOG_TRACE('DNS result', error, result);\n      return error === null\n        ? resolve({ url, host, address: result, resolved: true })\n        : resolve(\n          { url,\n            host,\n            resolved: true,\n            error:    {\n              code:     error['code'], // eslint-disable-line dot-notation\n              errno:    error['errno'], // eslint-disable-line dot-notation\n              hostname: error['hostname'], // eslint-disable-line dot-notation\n              syscall:  error['syscall'], // eslint-disable-line dot-notation\n            },\n          });\n    });\n  });\n\n  /**\n   * Resolution calls back with an array of the following:\n   * `{ url: 'http://example.com/foo', host: 'example.com', address: '10.0.0.1', resolved: true }`\n   * or, on error\n   * `{ url: 'http://example.com/foo', host: 'example.com', resolved: true, error: {\n   *    code: 'ENOTFOUND', errno: 'ENOTFOUND', syscall: 'getaddrinfo'\n   *  } }`\n   *\n   * If resolution could not be performed, because of platform limitations, the callback receives\n   * the following:\n   * `{ url: 'http://example.com/foo', host: 'example.com', address: 'example.com', resolved: false }`\n   *\n   * Even if no DNS lookup is performed, the function can still fail if an invalid URL is provided.\n   *\n   * The function always calls back asynchronously.\n   *\n   * @param {Array.<String>} urls Array of URLs to resolve\n   * @param {function} cb A function called back with results as described above\n   * @private\n   */\n  hostListDNSFilter = function hostListDNSFilterNode(urls, cb) {\n    const promises = urls.map(url => dnsLookupPromise(\n      url,\n      { 'verbatim': true }\n    ));\n    // Call back (null, [{host:, address:}, ...]) if all successful\n    // Call back (err, undefined) fast if any error\n    Promise.all(promises).then(resolved => cb(null, resolved)).catch(err => cb(err));\n  };\n} else {\n  /* eslint-env browser */\n  // Create an always-async callback that allows all hosts.\n  //hostListDNSFilter = (urls, cb) => setImmediate(() => {\n  hostListDNSFilter = (urls, cb) => setTimeout(() => {\n    try {\n      const result = urls.map((url) => {\n        const host = parseURL(url).host;\n        return { url, host, address: host, resolved: false };\n      });\n      return cb(null, result);\n    } catch (e) {\n      return cb(e);\n    }\n  }, 0);\n}\n\nmodule.exports.hostListDNSFilter = hostListDNSFilter;\n","const { assert } = require('solclient-eskit');\nconst { hostListDNSFilter } = require('./host-list-dns-filter');\nconst { LogFormatter } = require('solclient-log');\nconst { parseURL } = require('solclient-util');\n\nfunction parseURLs(rawURLs) {\n  if (Array.isArray(rawURLs)) {\n    return rawURLs.map(rawURL => parseURL(rawURL));\n  }\n  return parseURLs(rawURLs.split(/[,;]/));\n}\n\n/*\n *   \"When using a host list, each time the API works through the host list without establishing\n *    a connection is considered an connect retry.\"\n *   SESSION_CONNECT_RETRIES: \"When using a host list, this property defines how many times to\n *    try to connect or reconnect to a single host before moving to the next host in the list.\"\n *   Details: http://docs.solace.com/Solace-Messaging-APIs/Configuring-Connection-T.htm\n*/\n\n// In general:\n// * set initial state to invalid so that we begin needing a transition.\n// * preincrement all try counts on transition.\n// Specifics:\n// * Select try count for entire list based on whether we were connected.\n// * Try count per host is the same for both connect and reconnect.\n// * When the host changes, the waitTime is 0.\n// * Overriding the above, when the host pointer wraps to 0, the waitTime is nonzero.\n\nclass HostInfo {\n  constructor(props = { url: null, waitTime: 0 }) {\n    Object.assign(this, props);\n  }\n}\n\n/**\n * @private\n */\nclass HostList {\n  constructor({\n    url,\n    connectRetries,\n    reconnectRetries,\n    connectRetriesPerHost,\n    reconnectRetryWaitInMsecs,\n  } = {}) {\n    Object.assign(this, {\n      hosts: parseURLs(url).map(e => e.href),\n\n      // How many times will we traverse the host list without success?\n      // Try to connect one more than the 'retryCount' because we always try once.\n      connectTryCount: (connectRetries === -1\n        ? Number.POSITIVE_INFINITY\n        : connectRetries + 1\n      ),\n\n      // How many times will we traverse the host list after success?\n      reconnectTryCount: (reconnectRetries === -1\n        ? Number.POSITIVE_INFINITY\n        : reconnectRetries\n      ),\n\n      // A value of 1 in the next assignements means retry forever - \"null\" will mean that\n      // try to connect one more than the 'retryCount' because we always try once.\n      connectTryCountPerHost: (connectRetriesPerHost === -1\n        ? Number.POSITIVE_INFINITY\n        : connectRetriesPerHost + 1\n      ),\n\n      // How long do we wait before reattempting the same host or wrapping around the list?\n      reconnectRetryWaitInMsecs,\n\n      // Mutating operations affect only this.\n      _mutableState: {},\n\n      logger: new LogFormatter('[host-list]'),\n    });\n\n    // call this to initialize the _mutableState property\n    this.reset(); \n\n    assert(this.hosts.length >= 1);\n    assert(this.connectTryCount >= 1);\n    assert(this.reconnectTryCount >= 0);\n    assert(this.connectTryCountPerHost >= 1);\n  }\n\n  /**\n   * Call before first getNextHost() to validate that at least one URL contains a reachable\n   * hostname.\n   * @param {function(Error)} callback The callback to invoke when DNS resolution completes\n   */\n  resolveHosts(callback) {\n    const { LOG_TRACE, LOG_WARN } = this.logger;\n    hostListDNSFilter(this.hosts, (err, resolved) => {\n      // Exit immediately if the filter threw.\n      if (err) return callback(err);\n      assert(resolved.length === this.hosts.length, 'Resolve did not return a result for all hosts');\n\n      LOG_TRACE('Resolve result', resolved);\n      let succeeded = 0;\n      resolved.forEach((result) => {\n        if (result.address) {\n          ++succeeded;\n        }\n        if (!result.resolved) {\n          // Only log if the lookup was actually performed\n          return;\n        }\n        if (result.address) {\n          LOG_TRACE('DNS resolve OK:    ', result.address, 'for', result.url);\n        } else {\n          LOG_WARN('DNS resolve FAILED:', result.error.code,\n                   `${result.error.syscall}('${result.error.hostname}')`, 'for', result.url);\n        }\n      });\n      // finished DNS resolution checks\n      return callback(succeeded === 0 ? 'All hosts failed DNS resolution' : null);\n    });\n  }\n\n  /**\n   * @param {Object} state Properties for host selection logic\n   * @memberof HostList\n   */\n  reset(state = { wasConnected: false, disconnected: false }) {\n    // On reset, we always return to the beginning of the host list.\n    // This facilitates DR recovery by returning to the primary router.\n    // Set an invalid initial state that will trigger our first try.\n    Object.assign(this._mutableState, {\n      wasConnected: state.wasConnected,\n      disconnected: state.disconnected,\n      hostPointer:  0,\n      hostTries:    0,\n      listTries:    1,\n      exhausted:    false,\n      lastHostInfo: new HostInfo(),\n    });\n  }\n\n  /**\n   * !returns {HostInfo} Connection information for the next host.\n   * @returns {String} The URL for the next host\n   * @memberof HostList\n   */\n  getNextHost() {\n    const { LOG_TRACE } = this.logger;\n\n    const state = this._mutableState;\n    const wasConnected = state.wasConnected;\n    const lastHostInfo = state.lastHostInfo;\n\n    assert(lastHostInfo, 'Next host request with no prior host info -- did you call reset()?');\n    // Using a try/finally as a \"goto end\" to always log final state. Exceptions not expected\n    // here, although if an assertion fails, the finally log should be helpful.\n    try {\n      // If this was passed into reset, the session is telling us to enforce no more hosts.\n      if (state.disconnected) {\n        LOG_TRACE('Host list set to disconnected, providing null next host');\n        return null;\n      }\n\n      // If exhausted, this function has returned a null url already.\n      assert(!state.exhausted, 'Next host request after host list exhausted');\n\n      // Pull immutable properties from the instance\n      const properties = Object.assign({\n        hosts:        this.hosts,\n        hostTriesMax: this.connectTryCountPerHost,\n        listTriesMax: wasConnected ? this.reconnectTryCount : this.connectTryCount,\n      });\n\n      LOG_TRACE('Getting next host\\n', 'properties', properties, '\\nstate', state);\n      LOG_TRACE('Last host', lastHostInfo);\n\n      // Initial state was valid. This is a host try. Increment.\n      ++state.hostTries;\n      if (state.hostTries > properties.hostTriesMax) {\n        // Increment host pointer, possibly putting it out of bounds.\n        LOG_TRACE(`Exhausted ${state.hostTries} host tries for host ${lastHostInfo.url}.`);\n        ++state.hostPointer;\n        // If the host pointer is out of bounds, we are beginning a new list try.\n        // It was either set out of bounds deliberately by reset() or it was\n        // incremented out of bounds above.\n        if (state.hostPointer >= properties.hosts.length) {\n          // This is a new list try.\n          ++state.listTries;\n          if (state.listTries > properties.listTriesMax) {\n            // Beginning this list try has exceeded our inclusive max. The host list is\n            // exhausted.\n            LOG_TRACE(`Exhausted host list at ${properties.listTriesMax} traversals.`);\n            state.exhausted = true;\n          } else {\n            // Resetting the host pointer to begin this list try.\n            LOG_TRACE(`Host list try (${state.listTries}/${properties.listTriesMax})`);\n            state.hostPointer = 0;\n            state.hostTries = 1; // this is the first try for this host\n          }\n        } else {\n          state.hostTries = 1; // this is the first try for this host\n        }\n      } else {\n        // Continue with this host.\n        LOG_TRACE(`Host try (${state.hostTries}/${properties.hostTriesMax})`);\n      }\n\n      if (state.exhausted) {\n        LOG_TRACE('All hosts exhausted');\n        return null;\n      }\n\n      // Beyond this point, expect a valid host to be returned.\n\n      const url = properties.hosts[state.hostPointer];\n      assert(url, `No host at the host pointer! ${properties.hosts}[${state.hostPointer}]`);\n\n      // Wait time conditions:\n      // 1. On a new list (invalid lastHostInfo), zero waitTime.\n      const isNewList = lastHostInfo.url === null;\n      // 2a. On a new host, zero waitTime...\n      const isNewHost = lastHostInfo.url !== url;\n      // 2b. ...unless we are just restarting the list.\n      const didJustFinishList = lastHostInfo.url !== url && state.hostPointer === 0;\n      // (2b negates 2a for a new list)\n\n      const waitTime = (isNewList || (isNewHost && !didJustFinishList))\n        ? 0\n        : this.reconnectRetryWaitInMsecs;\n\n      // Session FSM was intended to use all of these, but handles its own events presently\n      // and expects waitTime to be a property of the list that mutates per host, so that is\n      // what is done.\n      const hostInfo = new HostInfo({\n        url,\n        waitTime,\n      });\n\n      // Set last host for next time, and return\n      LOG_TRACE('Returning host from', hostInfo);\n      state.lastHostInfo = hostInfo;\n      return hostInfo.url;\n    } finally {\n      LOG_TRACE('Final list state\\n', state);\n    }\n  }\n\n  get connectWaitTimeInMsecs() {\n    assert(this._mutableState.lastHostInfo.url, 'Getting connectWaitTimeInMsecs having never called getNextHostInfo');\n    return this._mutableState.lastHostInfo.waitTime;\n  }\n\n  currentHostToString() {\n    const state = this._mutableState;\n    const wasConnected = state.wasConnected;\n    // Pull immutable properties from the instance\n    const properties = Object.assign({\n      hosts:        this.hosts,\n      hostTriesMax: this.connectTryCountPerHost,\n      listTriesMax: wasConnected ? this.reconnectTryCount : this.connectTryCount,\n    });\n    // host pointer is zero based index into the host list\n    // so translate it to a human readable index\n    const hostNumber = state.hostPointer + 1;\n    return `host '${state.lastHostInfo.url}' (host ${hostNumber} of ${properties.hosts.length})(host connection attempt ${state.hostTries} of ${properties.hostTriesMax})(total ${wasConnected ? 'reconnection' : 'connection'} attempt ${state.listTries} of ${properties.listTriesMax})`;\n  }\n}\n\nmodule.exports.HostList = HostList;\n","/**\n * @classdesc\n *\n * Encapsulates the session's message receive callback function and\n * an optional user-specified object.\n *\n * This class is passed to {@link solace.SolclientFactory.createSession} when creating a session.\n * @deprecated The {@link solace.Session} is an <b>EventEmitter</b>.\n * Use <tt>sessionObject.on({@link solace.SessionEventCode.MESSAGE})</tt> instead.\n *\n * @memberof solace\n */\nclass MessageRxCBInfo {\n\n  /**\n   * Creates an instance of MessageRxCBInfo.\n   *\n   * @param {function(Session, Message, Object)} messageRxCBFunction\n   *          Invoked by the API when a message is received\n   *          over the session. The prototype of this function is the\n   *          following: ({@link solace.Session},\n   *                      {@link solace.Message},\n   *                      {Object})\n   * @param {Object} userObject\n   *          An optional user-specified object passed on every message receive callback.\n   *\n   * @memberof solace\n   */\n  constructor(messageRxCBFunction, userObject) {\n    /**\n     * @type {function(Session, Message, Object)}\n     * @description The prototype of this function is the\n     * following: ({@link solace.Session}, {@link solace.Message}, userObject {Object})\n     */\n    this.messageRxCBFunction = messageRxCBFunction;\n\n    /**\n     * @type {Object}\n     * @description user-specified object\n     */\n    this.userObject = userObject;\n  }\n}\n\nmodule.exports.MessageRxCBInfo = MessageRxCBInfo;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Represents an enumeration of session properties that can be modified by\n * {@link solace.Session.updateProperty} after the {@link solace.Session} is originally\n * created.\n *\n * These correspond to session properties in {@link solace.SessionProperties}.\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst MutableSessionProperty = {\n  /**\n   * Client name: {@link solace.SessionProperties#clientName}\n   * @type {Number}\n   */\n  CLIENT_NAME:        1,\n  /**\n   * Application description: {@link solace.SessionProperties#applicationDescription}\n   * @type {Number}\n   */\n  CLIENT_DESCRIPTION: 2,\n};\n\nmodule.exports.MutableSessionProperty = Enum.new(MutableSessionProperty);\n","/**\n * @private\n */\nclass OutstandingDataRequest {\n  constructor(correlationId, timer, replyReceivedCBFunction, reqFailedCBFunction, userObject) {\n    this.correlationId = correlationId;\n    this.timer = timer;\n    this.replyReceivedCBFunction = replyReceivedCBFunction;\n    this.reqFailedCBFunction = reqFailedCBFunction;\n    this.userObject = userObject;\n  }\n}\n\nmodule.exports.OutstandingDataRequest = OutstandingDataRequest;\n","const P2PUtil = {\n  getP2PInboxTopic(base) {\n    return (`${base}/_`);\n  },\n  getP2PTopicSubscription(base) {\n    return (`${base}/>`);\n  },\n};\n\nmodule.exports.P2PUtil = P2PUtil;\n","/**\n * @classdesc\n * Encapsulates the session's event callback function and an optional user-specified object.\n *\n * This class is passed to {@link solace.SolclientFactory.createSession} when creating a session.\n * @deprecated The {@link solace.Session} is an <b>EventEmitter</b>.  Register event handlers\n * against {@link solace.SessionEventCode} events instead.\n *\n * @memberof solace\n */\n\nclass SessionEventCBInfo {\n\n  /**\n   * Creates an instance of SessionEventCBInfo.\n   *\n   * @param {function(Session, SessionEvent, Object, Object)} sessionEventCBFunction\n   *  invoked by the Messaging API when a session event occurs. The prototype\n   *  of this function is the following: ({@link solace.Session},\n   *                                      {@link solace.SessionEvent},\n   *                                      {Object}})\n   * @param {Object} userObject An optional user-specified object passed on\n   * every session event callback.\n   */\n  constructor(sessionEventCBFunction, userObject) {\n    /**\n     * @type {Object}\n     * @description user-specified object\n     */\n    this.userObject = userObject;\n\n    /**\n     * @type {function}\n     * @description The prototype of this function is the\n     * following:\n     * ({@link solace.Session}, {@link solace.SessionEvent},\n     * userObject {Object}, RFUObject {Object})\n     */\n    this.sessionEventCBFunction = sessionEventCBFunction;\n  }\n}\n\nmodule.exports.SessionEventCBInfo = SessionEventCBInfo;\n","const { Enum } = require('solclient-eskit');\n\n\n/**\n * @callback solace.SessionEventCodes.sessionEvent\n * @function\n * @this {solace.Session} The message consumer for the event\n * @param {solace.SessionEvent|solace.OperationError} event The event. If the event is an\n *  error, the event will be an instance of {@link solace.OperationError} but will also be\n *  interface-compatible with {@link solace.SessionEvent}.\n */\n\n\n/**\n * An attribute of {@link SessionEvent}. This enumeration represents the\n * different events emitted by {@link Session} through the session event\n * callback.\n *\n * When a session is no longer in a usable state, the API tears down the underlying\n * connection and notifies the application with one of the following session events:\n *  * {@link solace.SessionEventCode#event:DOWN_ERROR}\n *  * {@link solace.SessionEventCode#event:CONNECT_FAILED_ERROR}\n *\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst SessionEventCode = {\n  /**\n   * The Session is ready to send/receive messages and perform control operations.\n   *\n   * At this point the transport session is up, the Session has logged in, and the\n   * P2PInbox subscription is added.\n   *\n   * The session is established.\n   * @event solace.SessionEventCode#UP_NOTICE\n   */\n  UP_NOTICE:                         0,\n  /**\n   * The session was established and then went down.\n   * @event solace.SessionEventCode#DOWN_ERROR\n   * @param {solace.OperationError} error The details related to the session failure.\n   */\n  DOWN_ERROR:                        1,\n  /**\n   * The session attempted to connect but was unsuccessful.\n   * @event solace.SessionEventCode#CONNECT_FAILED_ERROR\n   * @param {solace.OperationError} error The details related to the failed connection attempt.\n   */\n  CONNECT_FAILED_ERROR:              2,\n  /**\n   * The Solace Message Router rejected a published message.\n   * @event solace.SessionEventCode#REJECTED_MESSAGE_ERROR\n   * @param {solace.RequestError} error The details related to the rejected message.\n   */\n  REJECTED_MESSAGE_ERROR:            4,\n  /**\n   * The Solace Message Router rejected a subscription (add or remove).\n   * @event solace.SessionEventCode#SUBSCRIPTION_ERROR\n   * @param {solace.RequestError} error The details related to the failed subscription update.\n   */\n  SUBSCRIPTION_ERROR:                5,\n  /**\n   * The subscribe or unsubscribe operation succeeded.\n   * @event solace.SessionEventCode#SUBSCRIPTION_OK\n   * @param {solace.SessionEvent} event The details related to the successful subscription update.\n   */\n  SUBSCRIPTION_OK:                   6,\n  /**\n   * The Solace Message Router's Virtual Router Name changed during a reconnect operation.\n   * @event solace.SessionEventCode#VIRTUALROUTER_NAME_CHANGED\n   * @param {solace.SessionEvent} event Information related to the event.\n   */\n  VIRTUALROUTER_NAME_CHANGED:        7,\n  /**\n   * @deprecated\n   * A request was aborted because the session is being disconnected.\n   * Use {@link solace.RequestFailEvent} instead.\n   */\n  REQUEST_ABORTED:                   8,\n  /**\n   * @deprecated\n   * The event represents a timed-out request API call.\n   * Use {@link solace.RequestFailEvent} instead.\n   */\n  REQUEST_TIMEOUT:                   9,\n  /**\n   * The event represents a successful update of a mutable session property.\n   * @event solace.SessionEventCode#PROPERTY_UPDATE_OK\n   * @param {solace.SessionEvent} event Information related to the successful property update.\n   */\n  PROPERTY_UPDATE_OK:                10,\n  /**\n   * The event represents a failed update of a mutable session property.\n   * @event solace.SessionEventCode#PROPERTY_UPDATE_ERROR\n   * @param {solace.RequestError} error The details related to the failed property update.\n   */\n  PROPERTY_UPDATE_ERROR:             11,\n  /**\n   * The session transport can accept data again.  This event will occur after an\n   * {@link solace.OperationError} is thrown from an API call with a subcode of\n   * {@link solace.ErrorSubcode.INSUFFICIENT_SPACE} to indicate the operation can be retried.\n   * This event is used both after session-level transport buffer exhaustion,\n   * and Guaranteed Messaging Window exhaustion.\n   * @event solace.SessionEventCode#CAN_ACCEPT_DATA\n   */\n  CAN_ACCEPT_DATA:                   13,\n  /**\n   * The session connect operation failed, or the session that was once up,\n   * is now disconnected.\n   * @event solace.SessionEventCode#DISCONNECTED\n   */\n  DISCONNECTED:                      14,\n  /**\n   * The session has gone down, and an automatic reconnection attempt is in progress.\n   * @event solace.SessionEventCode#RECONNECTING_NOTICE\n   * @param {solace.SessionEvent} event The details related to the cause of the connection\n   *    interruption.\n   */\n  RECONNECTING_NOTICE:               22,\n  /**\n   * The automatic reconnect of the Session was successful, and the session is established again.\n   * @event solace.SessionEventCode#RECONNECTED_NOTICE\n   * @param {solace.SessionEvent} event The details related to the re-establishment of the\n   *    connection.\n   */\n  RECONNECTED_NOTICE:                23,\n  /**\n   * The session has automatically recovered after the Guaranteed Message publisher\n   * failed to reconnect.\n   * Messages sent but not acknowledged are being renumbered and retransmitted.\n   * Some messages may be duplicated in the system.\n   * @event solace.SessionEventCode#REPUBLISHING_UNACKED_MESSAGES\n   * @param {solace.SessionEvent} event The details related to the republishing of messages on the\n   *    session.  {@link solace.SessionEvent#infoStr} will indicate the number of messages being\n   *    republished, which is an upper bound on the number of messages that could be duplicated due\n   *    to this action.\n   */\n  REPUBLISHING_UNACKED_MESSAGES:     24,\n  /**\n   * A message was acknowledged by the router.\n   * @event solace.SessionEventCode#ACKNOWLEDGED_MESSAGE\n   * @param {solace.SessionEvent} event Allows the acknowledgement to be correlated to the sent\n   *    message.\n   */\n  ACKNOWLEDGED_MESSAGE:              25,\n  /**\n   * Unsubscribing the topic from the Durable Topic Endpoint succeeded.\n   * @event solace.SessionEventCode#UNSUBSCRIBE_TE_TOPIC_OK\n   */\n  UNSUBSCRIBE_TE_TOPIC_OK:           26,\n  /**\n   * Unsubscribing the topic from the Durable Topic Endpoint failed.\n   * @event solace.SessionEventCode#UNSUBSCRIBE_TE_TOPIC_ERROR\n   * @param {solace.OperationError} error The details related to the failed attempt to remove the\n   *    subscription from a topic endpoint.\n   */\n  UNSUBSCRIBE_TE_TOPIC_ERROR:        27,\n  /**\n   * A Direct message was received on the session. This event code is only used\n   * on the <b>EventEmitter</b> session interface.  If using the deprecated callback interface,\n   * messages are received via the callback provided in {@link solace.MessageRxCBInfo}.\n   * @event solace.SessionEventCode#MESSAGE\n   * @param {solace.Message} message The message received on the session.\n   */\n  MESSAGE:                           28,\n  /**\n   * Guaranteed Messaging Publisher has been closed by the Solace\n   * message router. This usually indicates an operator has disabled the\n   * message spool.\n   * @event solace.SessionEventCode#GUARANTEED_MESSAGE_PUBLISHER_DOWN\n   * @param {solace.OperationError} error Information related to the error.\n   */\n  GUARANTEED_MESSAGE_PUBLISHER_DOWN: 29,\n};\n\nmodule.exports.SessionEventCode = Enum.new(SessionEventCode);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SessionEventName = {\n  CONNECT:                       'SessionConnect',\n  DISCONNECT:                    'SessionDisconnect',\n  DISPOSE:                       'SessionDispose',\n  CONNECT_TIMEOUT:               'SessionConnectTimeout',\n  CONNECT_WAIT_TIMEOUT:          'SessionConnectWaitTimeout',\n  DOWNGRADE_TIMEOUT:             'SessionDowngradeTimeout',\n  TRANSPORT_UP:                  'SessionTransportUp',\n  TRANSPORT_DESTROYED:           'SessionTransportDestroyed',\n  TRANSPORT_CAN_ACCEPT_DATA:     'SessionTransportCanAcceptData',\n  TRANSPORT_PARSE_ERROR:         'SessionTransportParseError',\n  TRANSPORT_PROTOCOL_SMP:        'SessionSMPMessage',\n  TRANSPORT_PROTOCOL_CLIENTCTRL: 'SessionClientCtrlMessage',\n  EXCEPTION:                     'SessionException',\n  SUBSCRIBE_TIMEOUT:             'SessionSubscribeTimeout',\n  CREATE_SUBSCRIBER:             'SessionCreateSubscriber',\n  FLOW_UP:                       'SessionFlowUp',\n  FLOW_FAILED:                   'SessionFlowFailed',\n  SEND_ERROR:                    'SessionSendError',\n  FLOWS_DISCONNECTED:            'SessionFlowsDisconnected',\n  TRANSPORT_FLUSHED:             'SessionTransportFlushed',\n  DNS_RESOLUTION_COMPLETE:       'SessionDNSResolutionComplete',\n  TRANSPORT_CHANGE_DONE:         'SessionTransportChangeDone',\n};\n\nmodule.exports.SessionEventName = Enum.new(SessionEventName);\n","const { ErrorSubcode,\n        OperationError,\n        RequestError,\n        RequestEventCode } = require('solclient-error');\nconst { SessionEventCode } = require('./session-event-codes');\n\nfunction buildType(Superclass) {\n  /**\n   * @classdesc\n   * Represents a session event; events are passed to the application-provided\n   * event handling callback provided when creating the session.\n   * @memberof solace\n   * @hideconstructor\n   */\n  class SessionEvent extends Superclass {\n    /**\n     * @constructor\n     * @param {Array} superclassArgs Args to pass to super\n     * @param {solace.SessionEventCode} sessionEventCode The event code\n     * @param {String} infoStr Information string\n     * @param {Number} [responseCode] Any associated router response code\n     * @param {solace.ErrorSubcode} [errorSubcode] Any associated error subcode\n     * @param {Object|String|null|undefined} [correlationKey] Any associated correlation key\n     * @param {String} [reason] Any additional information\n     * @private\n     */\n    constructor(superclassArgs,\n                sessionEventCode,\n                infoStr,\n                responseCode = undefined,\n                errorSubcode = 0,\n                correlationKey = undefined,\n                reason = undefined) {\n      super(...superclassArgs);\n      this._sessionEventCode = sessionEventCode;\n      this._infoStr = infoStr;\n      this._responseCode = responseCode;\n      this._errorSubcode = errorSubcode;\n      this._correlationKey = correlationKey; // optional\n      this._reason = reason; // optional\n    }\n\n    /**\n     * @type {solace.SessionEventCode}\n     * @description Further qualifies the session event.\n     */\n    get sessionEventCode() {\n      return this._sessionEventCode;\n    }\n\n    /**\n     * @type {String}\n     * @description if applicable, an information string returned by the Solace Message Router.\n     */\n    get infoStr() {\n      return this._infoStr;\n    }\n\n    /**\n     * @type {?Number}\n     * @description if applicable, a response code returned by the Solace Message Router.\n     */\n    get responseCode() {\n      return this._responseCode;\n    }\n\n    /**\n     * @type {?solace.ErrorSubcode}\n     * @description if applicable, an error subcode. Defined in {@link solace.ErrorSubcode}\n     */\n    get errorSubcode() {\n      // _eslint-disable-next-line quote-property\n      return this.subcode || this._errorSubcode;\n    }\n\n    /**\n     * @deprecated Use {@link solace.SessionEvent#errorSubcode} instead.\n     * @readonly\n     */\n    // coverity[identifier_typo]\n    get errorSubCode() {\n      return this.errorSubcode;\n    }\n\n    /**\n     * @type {?Object}\n     * @description A user-specified object\n     * made available in the response or confirmation event by including it as a\n     * parameter in the orignal API call.  If the user did not specify a\n     * correlationKey, it will be <code>null</code>.\n     * @default null\n     */\n    get correlationKey() {\n      return this._correlationKey;\n    }\n\n    /**\n     * @type {?String}\n     * @description Additional information if it is applicable.\n     * In case of subscribe or publish errors, it constains the topic.\n     */\n    get reason() {\n      return this._reason;\n    }\n    /**\n     * @param {Object} value The reason info object\n     * @internal\n     */\n    set reason(value) {\n      this._reason = value;\n    }\n\n    [util_inspect_custom]() {\n      // Is this supposed to invoke the custom inspect function of the superclass if it exists?\n      return Object.assign(super[util_inspect_custom] || {}, {\n        'sessionEventCode': SessionEventCode.describe(this.sessionEventCode),\n        'infoStr':          this.infoStr,\n        'responseCode':     this.responseCode,\n        'errorSubcode':     ErrorSubcode.describe(this.errorSubcode),\n        'correlationKey':   this.correlationKey ? this.correlationKey.toString() : null,\n        'reason':           this.reason ? this.reason : null,\n      });\n    }\n\n    toString() {\n      return util_inspect(this);\n    }\n  }\n\n  return SessionEvent;\n}\n\nconst SUPERCLASS_FOR_SESSION_EVENT = {\n  [SessionEventCode.CONNECT_FAILED_ERROR]:              OperationError,\n  [SessionEventCode.DOWN_ERROR]:                        OperationError,\n  [SessionEventCode.GUARANTEED_MESSAGE_PUBLISHER_DOWN]: OperationError,\n  [SessionEventCode.PROPERTY_UPDATE_ERROR]:             RequestError,\n  [SessionEventCode.REJECTED_MESSAGE_ERROR]:            RequestError,\n  [SessionEventCode.SUBSCRIPTION_ERROR]:                RequestError,\n  [SessionEventCode.UNSUBSCRIBE_TE_TOPIC_ERROR]:        OperationError,\n  [RequestEventCode.REQUEST_ABORTED]:                   RequestError,\n  [RequestEventCode.REQUEST_TIMEOUT]:                   RequestError,\n};\n\nconst SUPERCLASS_ARGS = new Map()\n  .set(Object, () => [])\n  .set(OperationError, (sec, infoStr, rc, subcode, ck, reason) => [infoStr, subcode, reason])\n  .set(RequestError, (sec, infoStr, rc, subcode, ck, reason) => [infoStr, sec, ck, reason]);\n\nconst TYPE_CACHE = new Map();\n\nfunction build(sessionEventCode,\n               infoStr,\n               responseCode = undefined,\n               errorSubcode = 0,\n               correlationKey = undefined,\n               reason = undefined) {\n  const Superclass = SUPERCLASS_FOR_SESSION_EVENT[sessionEventCode] || Object;\n  const SessionEvent = (() => {\n    let result = TYPE_CACHE.get(Superclass);\n    if (result) return result;\n    result = buildType(Superclass);\n    TYPE_CACHE.set(Superclass, result);\n    return result;\n  })();\n  const superclassArgsBuilder = (SUPERCLASS_ARGS.get(Superclass) || (() => []));\n  const superclassArgs = superclassArgsBuilder(sessionEventCode,\n                                               infoStr,\n                                               responseCode,\n                                               errorSubcode,\n                                               correlationKey,\n                                               reason);\n  return new SessionEvent(superclassArgs,\n                          sessionEventCode,\n                          infoStr,\n                          responseCode,\n                          errorSubcode,\n                          correlationKey,\n                          reason);\n}\n\n// Expose a type\nconst SessionEvent = buildType(Object);\nSessionEvent.build = build;\n\nmodule.exports.SessionEvent = SessionEvent;\n","const { ErrorSubcode } = require('solclient-error');\nconst { FsmEvent } = require('solclient-fsm');\nconst { Hex } = require('solclient-convert');\n\nconst { formatHexString } = Hex;\n/**\n * SessionFSMEvent extends {@link FsmEvent}.  This object should be used for all events\n * passed to the SessionFSM.  This extension provides members to carry information specfic to\n * the SessionFSM transitions.\n * @extends FsmEvent\n * @private\n */\nclass SessionFSMEvent extends FsmEvent {\n  constructor(spec, fields) {\n    super(spec);\n    /**\n     * @type {String}\n     * @description Information String for the {SessionEvent}\n     */\n    this.eventText = null;\n    /**\n     * @type {ErrorSubcode}\n     * @description The Solace ErrorSubcode for any generated {SessionEvent}\n     */\n    this.errorSubcode = null;\n    /**\n     * @type {String}\n     * @description The reason string to be included in any generated {SessionEvent}\n     */\n    this.eventReason = null;\n    /**\n     * @type {TransportSMFMessage}\n     * @description A decoded SMF message received from the transport. May be\n     * either a {ClientCtrlMessage} or a {SMPMessage}\n     */\n    this.smfMsg = null;\n    /**\n     * @type {Object}\n     * @description The Transport SessionId retrieved from a {TransportSessionEvent}\n     */\n    this.sessionId = null;\n    /**\n     * @type {Object}\n     * @description The Publisher or Consumer object associated with a GM event.\n     */\n    this.guaranteedFlowObject = null;\n\n    Object.assign(this, fields);\n  }\n\n  [util_inspect_custom]() {\n    return {\n      'eventText':    this.eventText,\n      'eventReason':  this.eventReason,\n      'errorSubcode': ErrorSubcode.describe(this.errorSubcode),\n      'sessionId':    this.sessionId && formatHexString(this.sessionId) || 'N/A',\n    };\n  }\n\n  getExtraStringInfo() {\n    return util_inspect(this);\n  }\n}\n\nmodule.exports.SessionFSMEvent = SessionFSMEvent;\n","const ConsumerLib = require('solclient-message-consumer');\nconst PublisherLib = require('solclient-message-publisher');\nconst SMFLib = require('solclient-smf');\nconst SolclientFactoryLib = require('solclient-factory');\nconst TransportLib = require('solclient-transport');\n\nconst { assert } = require('solclient-eskit');\nconst { CapabilityType } = require('./capability-types');\nconst { Check } = require('solclient-validate');\nconst { CorrelatedRequest } = require('./correlated-request');\nconst { Destination } = require('solclient-destination');\nconst { ErrorResponseSubcodeMapper,\n        ErrorSubcode,\n        OperationError } = require('solclient-error');\nconst { FsmEvent,\n        State,\n        StateMachine } = require('solclient-fsm');\nconst { Hex } = require('solclient-convert');\nconst { LogFormatter } = require('solclient-log');\nconst { Message,\n        MessageOutcome,\n        MessageDeliveryModeType } = require('solclient-message');\nconst { P2PUtil } = require('./p2p-util');\nconst { SessionEvent } = require('./session-event');\nconst { SessionEventCode } = require('./session-event-codes');\nconst { SessionEventName } = require('./session-event-names');\nconst { SessionFSMEvent } = require('./session-fsm-event');\nconst { SessionRequestType } = require('./session-request-types');\nconst { SessionStateName } = require('./session-state-names');\nconst { SslDowngrade } = require('./ssl-downgrades');\nconst { StatType,\n        StatsByMode } = require('solclient-stats');\nconst { StringUtils } = require('solclient-util');\nconst { SubscriptionUpdateTimeoutMessages } = require('./subscription-update-timeout-messages');\n\nconst { formatHexString } = Hex;\nconst { stripNullTerminate } = StringUtils;\nconst { STAT_TX_BYMODE_BYTES,\n        STAT_TX_BYMODE_MSGS,\n        STAT_RX_BYMODE_BYTES,\n        STAT_RX_BYMODE_MSGS,\n        STAT_TX_BYMODE_REDELIVERED,\n        STAT_TX_BYMODE_BYTES_REDELIVERED } = StatsByMode;\n\n/**\n * @param {SessionProperties} sessionProperties The shared reference to the properties of the\n *  owning session\n * @param {Session} session The session owning this FSM\n * @extends StateMachine\n * @private\n */\nclass SessionFSM extends StateMachine {\n  constructor(sessionProperties, session, stats, hosts) {\n    super({ name: 'SessionFSM' });\n    const fsm = this;\n    const logFormatter = function logFormatter(...args) {\n      return [\n        `[session-fsm=${fsm.sessionIdHex || '(N/A)'}]`,\n        `[${fsm.getCurrentStateName()}]`,\n        ...args,\n      ];\n    };\n    const logger = this.logger = new LogFormatter(logFormatter);\n    const { LOG_TRACE, LOG_DEBUG, LOG_INFO } = logger;\n    this.log = logger.wrap(this.log, this);\n    this._sessionProperties = sessionProperties;\n    this._session = session;\n    this._sessionStatistics = stats;\n    this._hosts = hosts;\n    this._consumers = new ConsumerLib.ConsumerFlows();\n    // This is a function that generates this interface. It takes the flow as a construction\n    // parameter, and for some methods, produces a partial application using that flow.\n\n    this._flowInterfaceFactory = flow => ({\n      getCorrelationTag:               this.getCorrelationTag.bind(this),\n      incStat:                         this.incStat.bind(this),\n      sendData:                        message => this.send(message, flow, false),\n      sendToTransport:                 message => this.sendToTransport(message, flow, false),\n      sendControl:                     message => this.send(message, flow, true),\n      enqueueRequest:                  this.enqueueOutstandingCorrelatedReq.bind(this),\n      createDestinationFromDescriptor: session.createDestinationFromDescriptor.bind(session),\n      createTemporaryDestination:      session.createTemporaryDestination.bind(session),\n      isCapable:                       session.isCapable.bind(session),\n      getCapability:                   session.getCapability.bind(session),\n      getCurrentStateName:             this.getCurrentStateName.bind(this),\n      updateQueueSubscription:         session.updateQueueSubscription.bind(session),\n\n      get sessionIdHex() {\n        return fsm.sessionIdHex;\n      },\n      get canAck() {\n        return session.canAck;\n      },\n    });\n\n    // Keeping track of transport backpressure (but not AD window exhaustion),\n    // so we can relieve it on transport reconnect:\n    this._userBackpressured = false;\n\n    this.clearCurrentError();\n\n    this.initial(function onInitial() {\n      return this.transitionTo(fsm.SessionDisconnected,\n                               context => context.getStateMachine().reset());\n    });\n\n    /**\n     * Handles events in the unhandledEventHandler callback\n     * @param {SessionFSMEvent} sEvent\n     * @private\n     */\n    this.unhandledEventReaction(function onUnhandledEvent(sEvent) {\n      const curState = fsm.getCurrentState();\n      switch (sEvent.getName()) {\n        case SessionEventName.CREATE_SUBSCRIBER:\n          // CREATE_SUBSCRIBER is only handled in CONNECTED state.\n          // In all other states we just add the consumer to our\n          // list of unbound consumers that need to be bound when\n          // the session up occurs.\n          assert(fsm._consumers, 'collection has lifetime of FSM instance');\n          fsm._consumers.add(sEvent.guaranteedFlowObject);\n          return this;\n        case SessionEventName.DISPOSE:\n          LOG_DEBUG('Handling DISPOSE');\n          return curState.terminate(() => fsm.disposeInternal());\n        case SessionEventName.FLOW_UP:\n          LOG_DEBUG(`Ignoring FLOW_UP event from ${sEvent.guaranteedFlowObject}`);\n          return this;\n        default:\n          LOG_TRACE(`Ignoring event ${sEvent.getName()} in state ${fsm.getCurrentStateName()}`);\n          return this;\n      }\n    });\n\n    this.SessionConnecting = new State({\n      name:          SessionStateName.CONNECTING,\n      parentContext: fsm,\n    }, {\n      //\n      //  handleTransportDestroyed is called in response to TRANSPORT_DESTROYED\n      //  event and if transport create throws an exception. In both case there is\n      //  no underlying transport and the FSM must move on to the next host.\n      handleTransportDestroyed() {\n        // clear connectTimer, if it is still running\n        fsm.clearConnectTimer();\n\n        fsm._currentHost = fsm._hosts.getNextHost();\n        if (fsm._currentHost === null) {\n          return this.transitionToExitPoint(fsm.SessionConnecting, 'ErrorExit');\n        }\n\n        const { connectWaitTimeInMsecs } = fsm._hosts;\n        LOG_TRACE(`Wait time for this host is ${connectWaitTimeInMsecs}`);\n        if (connectWaitTimeInMsecs > 0 && !fsm._connectWaitTimer) {\n          fsm._connectWaitTimer = setTimeout(() => {\n            fsm._connectWaitTimer = null;\n            fsm.processEvent(new SessionFSMEvent({ name: SessionEventName.CONNECT_WAIT_TIMEOUT }));\n          }, connectWaitTimeInMsecs);\n          return this.transitionTo(fsm.WaitingForInterConnectTimeout);\n        }\n        return this.transitionTo(fsm.WaitingForTransport);\n      },\n    })\n      .entry(() => {\n        fsm.setConnectTimer();\n      })\n      .entryPoint('DisconnectTransport', function onDisconnectTransport() {\n        fsm._hosts.reset({ wasConnected: undefined, disconnected: true });\n        //\n        // Set the error event, as we have reset the\n        // host list with disconnected:true, we always take the\n        // errorExit path to DISCONNECTED state after this entryPoint.\n        //\n        fsm._connectFailEvent = SessionEventCode.DISCONNECTED;\n        fsm._connectSuccessEvent = SessionEventCode.DISCONNECTED;\n        return this.transitionTo(fsm.DestroyingTransport);\n      })\n      .entryPoint('ReconnectTransport', function onReconnectTransport() {\n        //\n        // Set the error event, this is only used\n        // if we take the errorExit path\n        //\n        fsm._connectFailEvent = SessionEventCode.DOWN_ERROR;\n        fsm._connectSuccessEvent = SessionEventCode.RECONNECTED_NOTICE;\n        // Should we try to reconnect?\n        const disconnected = fsm._sessionProperties._reconnectRetries === 0;\n        fsm._hosts.reset({ wasConnected: true, disconnected });\n        if (!disconnected) {\n          // workaround to make sure session state is changed to connecting when\n          // application gets the session event\n          // positional parameters for SessionEvent constructor\n          // make sure we get the args and err setup now as by the time\n          // the postEventAction runs currentError will be reset.\n          const err = fsm._currentError || {};\n          const args = [err.eventText,    // infoString\n            err.responseCode,             // responseCode\n            err.errorSubcode,             // errorSubcode\n            undefined,                    // correlationKey ... N/A\n            err.eventReason];             // eventReason\n          fsm.setPostEventAction(() => {\n            fsm.setConnectTimer();\n            fsm.emitSessionEvent(SessionEvent.build(SessionEventCode.RECONNECTING_NOTICE, ...args));\n          });\n        }\n        return this.transitionTo(fsm.DestroyingTransport);\n      })\n      .initial(() => {\n        fsm.clearCurrentError();\n        //\n        // Set the error event this is only used\n        // if we take the errorExit path\n        //\n        fsm._connectFailEvent = SessionEventCode.CONNECT_FAILED_ERROR;\n        fsm._connectSuccessEvent = SessionEventCode.UP_NOTICE;\n\n        // Perform host resolution (guaranteed async; replaces a postEventAction)\n        // Do not perform host list operations until this completes (moved to callback)\n        fsm._hosts.resolveHosts((err) => {\n          if (!fsm._hosts) {\n            LOG_TRACE('Ignoring host filter fail because session was disposed');\n            return null;\n          }\n          if (err) {\n            LOG_TRACE('DNS filter failed:', err);\n            fsm.setCurrentError({\n              errorSubcode: ErrorSubcode.UNRESOLVED_HOSTS,\n              eventText:    err,\n            });\n            fsm._hosts.reset({ disconnected: true });\n            return this.processEvent(new SessionFSMEvent({ name: SessionEventName.EXCEPTION }));\n          }\n\n          // Now that the host list has been scanned, we can reset and get next host\n          fsm._hosts.reset({ wasConnected: false });\n          fsm._currentHost = fsm._hosts.getNextHost();\n          return this.processEvent(new SessionFSMEvent(\n            { name: SessionEventName.DNS_RESOLUTION_COMPLETE }\n          ));\n        });\n        return this.transitionTo(fsm.WaitingForDNS);\n      })\n      .reaction(SessionEventName.DNS_RESOLUTION_COMPLETE, function onDNSComplete() {\n        return this.transitionTo(fsm.WaitingForTransport);\n      })\n      .reaction(SessionEventName.DISCONNECT, function onDisconnect(/* event */) {\n        return this.transitionToEntryPoint(fsm.SessionConnecting, 'DisconnectTransport');\n      })\n      .reaction(SessionEventName.CONNECT_TIMEOUT, function onConnectTimeout(/* event */) {\n        fsm.setCurrentError({\n          errorSubcode: ErrorSubcode.TIMEOUT,\n          eventText:    'Connect timeout',\n        });\n        return this.transitionTo(fsm.DestroyingTransport);\n      })\n      .reaction(SessionEventName.SEND_ERROR, function onSendError(sessionEvent) {\n        LOG_INFO(`SEND_ERROR reached SessionConnecting. ${sessionEvent}`);\n        fsm.setCurrentError(sessionEvent);\n        return this.transitionTo(fsm.DestroyingTransport);\n      })\n      .reaction(SessionEventName.EXCEPTION, function onException(errEvent) {\n        fsm.setCurrentError(errEvent);\n        return this.transitionTo(fsm.DestroyingTransport);\n      })\n      .reaction(SessionEventName.TRANSPORT_DESTROYED, function onTransportDestroyed(sessionEvent) {\n        fsm.setCurrentError(sessionEvent);\n        LOG_INFO('TRANSPORT_DESTROYED event');\n        return this.transitionTo(fsm.DestroyingTransport);\n      })\n      .exit(() => {\n        fsm.clearConnectTimer();\n        if (fsm._connectWaitTimer) {\n          clearTimeout(fsm._connectWaitTimer);\n          fsm._connectWaitTimer = null;\n        }\n      })\n      .exitPoint('ConnectedExit', (/* event */) => {\n        // Normal exit to TransportUp.\n        // We need to notify the application they are connected. Use postEventAction to make sure\n        // session state has already changed to TransportUp when application gets the callback.\n        // Use _connectSuccessEvent to send RECONNECTED vs UP depending on entry point.\n        // The text included in the event is currently different for\n        // connect vs reconnect. We should store with as part of _connectSuccessEvent in\n        // the entry point.\n        fsm.setPostEventAction(() => {\n          fsm.emitSessionEvent(SessionEvent.build(fsm._connectSuccessEvent,\n                                                  `'${fsm._hosts.currentHostToString()}'`,\n                                                  200, 0, null, null));\n          if (fsm._userBackpressured) {\n            const sessionEvent = SessionEvent.build(SessionEventCode.CAN_ACCEPT_DATA,\n                                                    '', null, 0, null, '');\n            fsm.emitSessionEvent(sessionEvent);\n            fsm._userBackpressured = false;\n          }\n        });\n        // Clear current error as we have successfully connected or\n        // reconnected.\n        fsm.clearCurrentError();\n        return this.transitionTo(fsm.SessionTransportUp);\n      })\n      .exitPoint('ErrorExit', function onExit(/* event */) {\n        // Notify the application they are disconnected. Use postEventAction to make sure session\n        // state has already changed to disconnected when application gets the callback.\n        fsm.setPostEventAction(() => {\n          const err = fsm._currentError || {};\n          // positional parameters for SessionEvent constructor\n          const args = [err.eventText,    // infoString\n            err.responseCode,             // responseCode\n            err.errorSubcode,             // errorSubcode\n            undefined,                    // correlationKey ... N/A\n            err.eventReason];             // eventReason\n          fsm.emitSessionEvent(SessionEvent.build(fsm._connectFailEvent, ...args));\n        });\n        return this.transitionTo(fsm.SessionDisconnected);\n      });\n\n    this.WaitingForDNS = new State({\n      name:          SessionStateName.WAITING_FOR_DNS,\n      parentContext: fsm.SessionConnecting,\n    });\n\n    this.DestroyingTransport = new State({\n      name:          SessionStateName.DESTROYING_TRANSPORT,\n      parentContext: fsm.SessionConnecting,\n    })\n      .entry(() => {\n        LOG_INFO('Connecting, disposing transport');\n        fsm.clearConnectTimer(); // clear connectTimer, while destroying the transport\n        fsm.destroyTransportSession('Disconnecting session', 0);\n      })\n      .reaction(SessionEventName.TRANSPORT_DESTROYED, function onTransportDestroyed(sessionEvent) {\n        fsm.setCurrentError(sessionEvent);\n        return fsm.SessionConnecting.handleTransportDestroyed.call(this); // this._transport == null at this point \n      });\n\n    this.WaitingForInterConnectTimeout = new State({\n      name:          SessionStateName.WAITING_FOR_INTERCONNECT_TIMEOUT,\n      parentContext: fsm.SessionConnecting,\n    })\n      .reaction(SessionEventName.CONNECT_WAIT_TIMEOUT, function onConnectWaitTimeout(/*event*/) {\n        return this.transitionTo(fsm.WaitingForTransport);\n      });\n\n    this.WaitingForTransport = new State({\n      name:          SessionStateName.WAITING_FOR_TRANSPORT,\n      parentContext: fsm.SessionConnecting,\n    })\n      .initial(() => {\n        const errorMessage = 'Cannot establish transport session: creation failed';\n        fsm.setConnectTimer();\n        fsm.clearCurrentError();\n        try {\n          fsm.initTransport();\n        } catch (e) {\n          this.setCurrentError({\n            eventText:    e.message === errorMessage ? errorMessage : `${errorMessage}: ${e.message}`,\n            errorSubcode: e.subcode || ErrorSubcode.INTERNAL_ERROR,\n            eventReason:  e });\n          return fsm.SessionConnecting.handleTransportDestroyed.call(this);\n        }\n        return this.transitionTo(fsm.WaitingForTransportUp);\n      });\n\n    this.WaitingForTransportUp = new State({\n      name:          SessionStateName.WAITING_FOR_TRANSPORT_UP,\n      parentContext: this.WaitingForTransport,\n    })\n      // This way the code is run only on actual state entry,\n      // not on null transitions (staying in this state)\n      .entry(() => { this._justEntered = true; })\n      .initial(() => {\n        if (!this._justEntered) { return this; }\n        this._justEntered = false;\n        const errorMessage = 'Cannot establish transport session: connection failed';\n        try {\n          const returnCode = fsm._transport.connect();\n          if (returnCode !== TransportLib.TransportReturnCode.OK) {\n            throw new OperationError(\n              errorMessage,\n              ErrorSubcode.CONNECTION_ERROR,\n              TransportLib.TransportReturnCode.describe(returnCode)\n            );\n          }\n          LOG_INFO(`Attempting to connect session '${fsm.sessionId}' to ${fsm._hosts.currentHostToString()}`);\n        } catch (e) {\n          this.setCurrentError({\n            eventText:    e.message === errorMessage ? errorMessage : `${errorMessage}: ${e.message}`,\n            errorSubcode: e.subcode || ErrorSubcode.INTERNAL_ERROR,\n            eventReason:  e });\n          return fsm.SessionConnecting.handleTransportDestroyed.call(this);\n        }\n        return this;\n      })\n      .reaction(SessionEventName.SEND_ERROR, function doNothing(sEvent) {\n        LOG_INFO(`SEND_ERROR while waiting for transport up, doing nothing. ${sEvent}`);\n        return this.internalTransition(null);\n      })\n      .reaction(SessionEventName.TRANSPORT_UP, function onTransportUp(sEvent) {\n        fsm.sessionId = sEvent.sessionId || '';\n        const returnCode = fsm.sendClientCtrlLogin();\n        if (returnCode === TransportLib.TransportReturnCode.OK) {\n          return this.transitionTo(fsm.WaitingForLogin);\n        }\n        const err = {\n          eventText:    'Failed to send Client Control Login',\n          errorSubcode: ErrorSubcode.LOGIN_FAILURE,\n          responseCode: 400,\n        };\n        fsm.setCurrentError(err);\n        return this.transitionTo(fsm.DestroyingTransport);\n      });\n\n    this.WaitingForLogin = new State({\n      name:          SessionStateName.WAITING_FOR_LOGIN,\n      parentContext: fsm.SessionConnecting,\n    })\n      .entry(() => {\n        fsm.setClientCtrlTimer();\n      })\n      .reaction(SessionEventName.TRANSPORT_PROTOCOL_CLIENTCTRL, function onClientCtrl(sEvent) {\n        const clientCtrlMsg = sEvent.smfMsg;\n        const response = clientCtrlMsg.getResponse();\n        const respCode = response.responseCode;\n        const err = {\n          responseCode: respCode,\n        };\n        fsm._responseCode = respCode;\n        if (respCode === 200) {\n          if (!fsm.checkNoLocal(clientCtrlMsg)) {\n            Object.assign(err, {\n              eventText:    'No Local is not supported by the Solace Message Router',\n              errorSubcode: ErrorSubcode.NO_LOCAL_NOT_SUPPORTED,\n            });\n          } else if (!fsm.checkCompressedSsl(clientCtrlMsg)) {\n            Object.assign(err, {\n              eventText:    'Compressed TLS is not supported by the Solace Message Router',\n              errorSubcode: ErrorSubcode.COMPRESSED_TLS_NOT_SUPPORTED,\n            });\n          } else { // Happy path\n            fsm.updateReadonlySessionProps(clientCtrlMsg);\n            return this.transitionTo(fsm.WaitForTransportChange);\n          }\n        } else {\n          const rawSubcode = ErrorResponseSubcodeMapper.getErrorSubcode(respCode,\n                                                                        response.responseString);\n          const subcode = (rawSubcode === ErrorSubcode.UNKNOWN_ERROR) ?\n            ErrorSubcode.LOGIN_FAILURE : rawSubcode;\n          LOG_INFO(`Login failed. Subcode: ${subcode} respCode: ${respCode} ` +\n            `respString: ${response.responseString}`);\n          Object.assign(err, {\n            eventText:    response.responseString,\n            errorSubcode: subcode,\n          });\n        }\n        LOG_TRACE('ClientCtrl error', err);\n        fsm.setCurrentError(err);\n        return this.transitionTo(fsm.DestroyingTransport);\n      })\n      .reaction(SessionEventName.DOWNGRADE_TIMEOUT, function onDowngradeTimeout(/* event */) {\n        if (!fsm._transport.requestDowngrade || fsm._transport.requestDowngrade('ClientCtrl timeout', ErrorSubcode.TIMEOUT) === false) {\n          fsm.setCurrentError({\n            eventText:    'ClientCtrl timeout',\n            errorSubcode: ErrorSubcode.TIMEOUT,\n          });\n          return this.transitionTo(fsm.DestroyingTransport);\n        }\n        // Don't recreate the transport, just try to connect it\n        LOG_TRACE('Downgrade accepted, returning to WaitingForTransportUp');\n        return this.transitionTo(fsm.WaitingForTransportUp);\n      })\n      .exit(() => {\n        fsm.clearClientCtrlTimer();\n      });\n\n    // This is an intermediate state after a successful login.\n    // It gives time to the transport factory (more like a dealership at this point)\n    // to enable compression and/or shut down tls.\n    // The factory may return a new transport immediately,\n    // in which case there is no need to stay in this state.\n    // Or it may return null, and pass the new transport to the callback later.\n    // No messages can be sent while waiting for the callback.\n    this.WaitForTransportChange = new State({\n      name:          SessionStateName.WAITING_FOR_TRANSPORT_CHANGE,\n      parentContext: fsm.SessionConnecting,\n    })\n      .initial(function onInitial() {\n        // Operates on the FSM, must be bound to it.\n        const callback = function onTransportChange(newTransport) {\n          this._transport = newTransport;\n          this.processEvent(new SessionFSMEvent(\n                            { name: SessionEventName.TRANSPORT_CHANGE_DONE }\n          ));\n        };\n        const rc = fsm.updateTransportCompression(callback.bind(fsm));\n        if (rc === null) {\n          // Factory needs time, stay in this state.\n          return this;\n        }\n        fsm._transport = rc;\n        return this.transitionTo(fsm.ReapplyingSubscriptions);\n      })\n      .reaction(SessionEventName.TRANSPORT_CHANGE_DONE, function onTransportChangeDone() {\n        return this.transitionTo(fsm.ReapplyingSubscriptions);\n      });\n\n    this.ReapplyingSubscriptions = new State({\n      name:          SessionStateName.REAPPLYING_SUBSCRIPTIONS,\n      parentContext: fsm.SessionConnecting,\n    })\n      .entry(() => {\n        LOG_INFO('ReapplyingSubscriptions: entry');\n        fsm.copySubscriptionCacheKeys();\n      })\n      .initial(function onInitial() {\n        if (fsm.reapplySubscriptions() === true) {\n          // all subscriptions applied and waiting for a subscription confirm\n          return this.transitionTo(fsm.WaitForSubConfirm);\n        }\n        // flow controlled while reapplying\n        return this.transitionTo(fsm.WaitForCanAcceptData);\n      })\n      .reaction(SessionEventName.SUBSCRIBE_TIMEOUT, function onSubscribeTimeout() {\n        const respText = 'Subscription timeout while reapplying';\n        const subcode = ErrorSubcode.TIMEOUT;\n        fsm.setCurrentError({\n          eventText:    respText,\n          errorSubcode: subcode,\n        });\n        return this.transitionTo(fsm.DestroyingTransport);\n      })\n      .exit(function onExit() {\n        fsm.clearSubscriptionCacheKeys();\n        return this;\n      });\n\n    this.WaitForSubConfirm = new State({\n      name:          SessionStateName.WAITING_FOR_SUBCONFIRM,\n      parentContext: fsm.ReapplyingSubscriptions,\n    })\n      .reaction(SessionEventName.TRANSPORT_PROTOCOL_SMP, function onTransportProtocolSMP(sEvent) {\n        // process rxMsgObj\n        const smfRespHeader = sEvent.smfMsg.smfHeader;\n        const subscriptionStr = stripNullTerminate(sEvent.smfMsg.encodedUtf8Subscription);\n        const respCode = smfRespHeader.pm_respcode;\n        const respText = smfRespHeader.pm_respstr;\n        if (respCode !== 200) {\n          const errorSubcode = ErrorResponseSubcodeMapper.getErrorSubcode(respCode, respText);\n          LOG_INFO(`Waiting for subscription confirmation, got ${respCode} (${errorSubcode}) ` +\n                    `'${respText}' on subscription ${subscriptionStr}`);\n          fsm.setCurrentError({\n            eventText:    respText,\n            responseCode: respCode,\n            errorSubcode,\n          });\n          return this.transitionTo(fsm.DestroyTransport);\n        }\n\n        if (fsm._session.canConnectPublisher &&\n            fsm._defaultPublisher &&\n            fsm._defaultPublisher.isBindWaiting()) {\n          return this.transitionTo(fsm.WaitingForMessagePublisher);\n        }\n        return this.transitionToExitPoint(fsm.SessionConnecting, 'ConnectedExit');\n      });\n\n    this.WaitForCanAcceptData = new State({\n      name:          SessionStateName.WAITING_FOR_CAN_ACCEPT_DATA,\n      parentContext: fsm.ReapplyingSubscriptions,\n    })\n      .reaction(SessionEventName.TRANSPORT_PROTOCOL_SMP, function onTransportProtocolSMP(sEvent) {\n        // process rxMsgObj\n        const smfRespHeader = sEvent.smfMsg.smfHeader;\n        const subscriptionStr = stripNullTerminate(sEvent.smfMsg.encodedUtf8Subscription);\n        const respCode = smfRespHeader.pm_respcode;\n        const respText = smfRespHeader.pm_respstr;\n        // We are not expecting a SMP response as we have not sent a request-confirm\n        // so this is almost assuredly an error response to a subscription add\n        // check respCode anyway.  if its '200 OK' just ignore it.\n        if (respCode !== 200) {\n          const errorSubcode = ErrorResponseSubcodeMapper.getErrorSubcode(respCode, respText);\n          LOG_DEBUG(`Waiting for can accept data, got ${respCode} (subcode ${errorSubcode}) ` +\n            `'${respText}' on subscription ${subscriptionStr}`);\n          fsm.setCurrentError({\n            eventText:    respText,\n            responseCode: respCode,\n            errorSubcode,\n          });\n          return this.transitionTo(fsm.DestroyingTransport);\n        }\n        // unexpected 200 OK repsonse, log it and continue\n        LOG_INFO(`Unexpected 200 OK response to subscription add for ${subscriptionStr}`);\n        return this.internalTransition(null);\n      })\n      .reaction(SessionEventName.TRANSPORT_CAN_ACCEPT_DATA, function onTransportCanAcceptData() {\n        if (fsm.reapplySubscriptions() === true) {\n          // all subscriptions applied and waiting for a subscription confirm\n          return this.transitionTo(fsm.WaitForSubConfirm);\n        }\n        // flow controlled while reapplying\n        return this.internalTransition(null);\n      });\n\n    this.WaitingForMessagePublisher = new State({\n      name:          SessionStateName.WAITING_FOR_PUBFLOW,\n      parentContext: fsm.SessionConnecting,\n    })\n      .entry(() => {\n        // Inform the publisher that the session is up and the flow establishment can begin.\n        fsm._defaultPublisher.connect();\n        fsm.sendPublisherSessionUpEvent(fsm._defaultPublisher);\n      })\n      .reaction(SessionEventName.FLOW_UP, function onEvent() {\n        LOG_TRACE(`Flow up ${this}`);\n        if (!fsm._defaultPublisher.isBindWaiting()) {\n          LOG_TRACE('Publisher up');\n          return this.transitionToExitPoint(fsm.SessionConnecting, 'ConnectedExit');\n        }\n        LOG_TRACE('Waiting for more publishers');\n        return this.internalTransition(null);\n      })\n      .reaction(SessionEventName.FLOW_FAILED, function onEvent(sEvent) {\n        fsm.setCurrentError({\n          eventText:    `Guaranteed Message Publisher Failed: ${sEvent.eventText}`,\n          errorSubcode: ErrorSubcode.LOGIN_FAILURE,\n        });\n        return this.transitionTo(fsm.DestroyingTransport);\n      });\n\n    this.SessionTransportUp = new State({\n      name:          SessionStateName.TRANSPORT_UP,\n      parentContext: fsm,\n    })\n      .entry(function onEntry() {\n        fsm.clearConnectTimer(); // clear connectTimer, once we successfully connect\n        return this;\n      })\n      .initial(function onInitial() {\n        if (fsm._session.canConnectConsumer) {\n          // Inform the subscribers that the session is up and the flow establishment can begin.\n          fsm._consumers.flows.forEach(consumer => fsm.sendConsumerSessionUpEvent(consumer));\n          // Reconnecting flows need session state notification too.\n          fsm._consumers.reconnectingFlows.forEach(\n            consumer => fsm.sendConsumerSessionUpEvent(consumer));\n        }\n        return this.transitionTo(fsm.FullyConnected);\n      })\n      .reaction(SessionEventName.DISCONNECT, function onDisconnect(/* sEvent */) {\n        return this.transitionTo(fsm.SessionDisconnecting);\n      })\n      .reaction(SessionEventName.EXCEPTION, function onException(sEvent) {\n        fsm.setCurrentError(sEvent);\n        fsm.cleanupSession();\n        return this.transitionToEntryPoint(fsm.SessionConnecting, 'ReconnectTransport');\n      })\n      .reaction(SessionEventName.SEND_ERROR, function onSendError(sEvent) {\n        fsm.setCurrentError(sEvent);\n        fsm.cleanupSession();\n        LOG_TRACE('Reconnecting transport after SEND_ERROR (not fully connected)');\n        return this.transitionToEntryPoint(fsm.SessionConnecting, 'ReconnectTransport');\n      })\n      .reaction(SessionEventName.TRANSPORT_DESTROYED, function onTransportDestroyed(sEvent) {\n        fsm.setCurrentError(sEvent);\n        LOG_INFO('Received unsolicited TRANSPORT_DESTROYED event while transport is up');\n        LOG_TRACE(`TRANSPORT_DESTROYED details: ${sEvent}`);\n        fsm.cleanupSession();\n        return this.transitionToEntryPoint(fsm.SessionConnecting, 'ReconnectTransport');\n      })\n      .reaction(SessionEventName.TRANSPORT_PROTOCOL_SMP, function onTransportProtocolSMP(sEvent) {\n        const smfRespHeader = sEvent.smfMsg.smfHeader;\n        const subscriptionStr = stripNullTerminate(sEvent.smfMsg.encodedUtf8Subscription);\n        const respCode = smfRespHeader.pm_respcode;\n        const respText = smfRespHeader.pm_respstr;\n\n        fsm.handleSubscriptionUpdateError(respCode, respText, subscriptionStr, undefined, false);\n        return this.internalTransition(null);\n      })\n      .reaction(SessionEventName.TRANSPORT_CAN_ACCEPT_DATA, function onCanAcceptData(sEvent) {\n        // Notify client for republishing\n        const sessionEvent = SessionEvent.build(SessionEventCode.CAN_ACCEPT_DATA,\n                                                '', null, 0, null, sEvent.toString());\n        fsm.emitSessionEvent(sessionEvent);\n        fsm._userBackpressured = false;\n        return this.internalTransition(null);\n      })\n      .reaction(SessionEventName.CREATE_SUBSCRIBER, function onCreateSubscriber(sEvent) {\n        // Inform the consumer that the session is up and the flow establishment can begin.\n        const consumer = fsm._consumers.add(sEvent.guaranteedFlowObject);\n        fsm.sendConsumerSessionUpEvent(consumer);\n        return this;\n      })\n      .exit(function onExit() {\n        fsm.clearKeepAlive();\n        return this;\n      });\n\n    this.FullyConnected = new State({\n      name:          SessionStateName.FULLY_CONNECTED,\n      parentContext: fsm.SessionTransportUp,\n    })\n      .entry(() => {\n        fsm._connectFailEvent = SessionEventCode.DOWN_ERROR;\n        fsm.scheduleKeepAlive();\n      });\n\n    this.SessionDisconnected = new State({\n      name:          SessionStateName.DISCONNECTED,\n      parentContext: fsm,\n    })\n      .reaction(SessionEventName.DISCONNECT, function onDisconnect(/* sEvent */) {\n        fsm.setPostEventAction(() => {\n          fsm.emitSessionEvent(SessionEvent.build(SessionEventCode.DISCONNECTED));\n        });\n\n        return this.internalTransition(null);\n      })\n      .reaction(SessionEventName.CONNECT, function onConnect(/* sEvent */) {\n        return this.transitionTo(fsm.SessionConnecting);\n      })\n      .reaction(SessionEventName.EXCEPTION, function onException(/* sEvent */) {\n        // do nothing\n        return this.internalTransition(null);\n      });\n    this.SessionDisconnecting = new State({\n      name:          SessionStateName.DISCONNECTING,\n      parentContext: fsm,\n    })\n      .initial(() => {\n        LOG_INFO(`Disconnecting session ${fsm}`);\n        return this.transitionTo(fsm.DisconnectingFlows);\n      })\n      .reaction(SessionEventName.DISCONNECT, function onDisconnect(/* sEvent */) {\n        return this.internalTransition(null);\n      })\n      .reaction(SessionEventName.EXCEPTION, function onException(errEvent) {\n        //\n        // As we are in disconnecting state we have initiated the\n        // disconnect and need to preserve the error subcode that\n        // we set before destroying the transport. The transport, having\n        // no error, will usually return a subcode of zero here.\n        //\n        // This only changes the eventCode, not the subcode. Other properties\n        // are preserved.\n        //\n        fsm.setCurrentError({ errEvent });\n        fsm.cleanupSession();\n        return this.transitionToEntryPoint(fsm.SessionConnecting, 'DisconnectTransport');\n      })\n      .reaction(SessionEventName.TRANSPORT_DESTROYED, function onTransportDestroyed(/* sEvent */) {\n        LOG_INFO('Received unsolicited TRANSPORT_DESTROYED while disconnecting transport');\n        fsm.cleanupSession();\n        return this.transitionToEntryPoint(fsm.SessionConnecting, 'DisconnectTransport');\n      });\n\n    this.DisconnectingFlows = new State({\n      name:          SessionStateName.DISCONNECTING_FLOWS,\n      parentContext: fsm.SessionDisconnecting,\n    }, {\n      // Get all flows to disconnect. This will need to be called at least once.\n      gatherPendingFlows() {\n        const { MessageConsumerEventName } = ConsumerLib;\n\n        // Don't re-enter synchronously to look for new flows.\n        // Flows disconnect synchronously when they are already disconnected.\n        // If this is the case, they throw; they do not emit an event.\n        // If a consumer flow is up, it will immediately emit a BIND_WAITING event and we\n        // handle that.\n        // Since we know that flow#_disconnectSession neither creates a new flow\n        // nor calls a user callback that could do so, we need not look for new\n        // flows that were created.\n        assert(!this.isGathering);\n        this.isGathering = true;\n\n        const adaptedListenForDestroy = (flow, installfn, downEvents) => {\n          assert(flow, 'Trying to listen to undefined flow');\n          // If we already know about this flow, skip it.\n          if (this.known.has(flow)) return;\n          LOG_TRACE(`Adding pending flow ${flow}`);\n          this.known.add(flow);\n          this.pending.add(flow);\n          const onFlowDown = () => {\n            LOG_TRACE(`Removing flow from pending ${flow}`);\n            downEvents.forEach(event => flow._removeListener(event, onFlowDown));\n            this.pending.delete(flow);\n            if (!this.isGathering) this.checkPendingFlows();\n          };\n          downEvents.forEach(event => installfn.call(flow, event, onFlowDown));\n          try {\n            flow._disconnectSession(); // Session has been disconnected by user\n          } catch (ex) {\n             // Synchronously down\n            LOG_TRACE('Flow disconnect threw');\n            LOG_TRACE(ex);\n            onFlowDown();\n          }\n        };\n\n        // See SOL-13556: sending CloseFlow makes it impossible to recover the flow.\n        // This was the code that sent CloseFlow. I'm leaving it here temporarily\n        // in case we want a clean shutdown that waits for acks.\n        /*\n        const { MessagePublisherEventName } = PublisherLib;\n        if (fsm._defaultPublisher) {\n          adaptedListenForDestroy(fsm._defaultPublisher,\n                                  fsm._defaultPublisher.once,\n                                  [MessagePublisherEventName.DOWN]);\n        }\n        */\n        if (fsm._consumers) {\n          fsm._consumers.flows.forEach((flow) => {\n            adaptedListenForDestroy(flow,\n                                    flow._once,\n                                    [\n                                      MessageConsumerEventName.DOWN,\n                                      MessageConsumerEventName.DOWN_ERROR,\n                                    ]);\n          });\n        }\n\n        this.isGathering = false;\n      },\n      // This function is called whenever a flow comes down, whether sync or async.\n      // The body is wrapped in a basic debounce: if we are re-entering (synchronously),\n      // no new flows will be added.\n      checkPendingFlows() {\n        LOG_TRACE('Waiting for disconnects on', this.pending);\n        if (this.pending.size === 0) {\n          // We are out of pending flows, but look for new flows that were just added\n          this.gatherPendingFlows();\n          // Were any flows just added?\n          if (this.pending.size === 0) {\n            this.proceed();\n          }\n        }\n      },\n      proceed() {\n        // All done!\n        // Clear flow sets so they can be disposed\n        this.known = null;\n        this.pending = null;\n        LOG_INFO('All flows disconnected');\n        fsm.processEvent(new FsmEvent({ name: SessionEventName.FLOWS_DISCONNECTED }));\n      },\n    })\n      .entry(function onEntry() {\n        this.known = new Set();\n        this.pending = new Set();\n        this.checkPendingFlows();\n      })\n      .reaction(SessionEventName.FLOWS_DISCONNECTED, function onFlowsDisconnected() {\n        return this.transitionTo(fsm.FlushingTransport);\n      });\n\n    this.FlushingTransport = new State({\n      name:          SessionStateName.FLUSHING_TRANSPORT,\n      parentContext: fsm.SessionDisconnecting,\n    }, {\n      flushTransport() {\n        fsm.cleanupSession();\n        fsm.flushTransportSession(() => this.onTransportFlushed());\n        this.sessionId = null;\n      },\n      onTransportFlushed() {\n        fsm.processEvent(new FsmEvent({ name: SessionEventName.TRANSPORT_FLUSHED }));\n      },\n    })\n      .entry(function onEntry() {\n        LOG_INFO('Flushing transport');\n        this.flushTransport();\n      })\n      .reaction(SessionEventName.TRANSPORT_FLUSHED, function onTransportFlushed() {\n        LOG_INFO('Handle Transport Flushed');\n        return this.transitionToEntryPoint(fsm.SessionConnecting, 'DisconnectTransport');\n      });\n  }\n\n  /**\n   * @param {Destination} destination The topic to add\n   * @private\n   */\n  addToSubscriptionCache(destination) {\n    if (Check.nothing(destination) || !this._subscriptionCache) {\n      return;\n    }\n\n    const { LOG_DEBUG } = this.logger;\n    const key = destination.name;\n    if (this._subscriptionCache[key] === null ||\n        this._subscriptionCache[key] === undefined) {\n      LOG_DEBUG(`Cache subscription ${key}`);\n      this._subscriptionCache[key] = destination;\n      LOG_DEBUG('Increment cache count');\n      this._subscriptionCacheCount++;\n    } else {\n      LOG_DEBUG(`Cache subscription ${key}`);\n      this._subscriptionCache[key] = destination;\n    }\n  }\n\n  /**\n   * @param {String} correlationTag The tag of the request to cancel\n   * @returns {CorrelatedRequest} The cancelled request\n   * @private\n   */\n  cancelOutstandingCorrelatedReq(correlationTag) {\n    if (Check.nothing(correlationTag) || !this._correlatedReqs) {\n      return null;\n    }\n    const req = this._correlatedReqs[correlationTag];\n    if (req === null || req === undefined) {\n      return null;\n    }\n\n    const { LOG_DEBUG, LOG_ERROR } = this.logger;\n    LOG_DEBUG(`Cancel outstanding ctrl request correlationTag=${correlationTag\n      }`);\n    if (req.timer) {\n      clearTimeout(req.timer);\n      req.timer = null;\n    }\n    try {\n      const result = delete this._correlatedReqs[correlationTag];\n      if (!result) {\n        LOG_ERROR(`Cannot delete ctrl request ${correlationTag}`);\n      }\n    } catch (e) {\n      LOG_ERROR(`Cannot delete ctrl request ${correlationTag}`, e);\n    }\n    return req;\n  }\n\n\n  /**\n   * @private\n   */\n  cleanupSession() {\n    const { LOG_INFO } = this.logger;\n    LOG_INFO('Clean up session');\n\n    const {\n      ConsumerFSMEvent,\n      ConsumerFSMEventNames,\n    } = ConsumerLib;\n\n    if (this._correlatedReqs) {\n      Object.keys(this._correlatedReqs).forEach(key =>\n        this.cancelOutstandingCorrelatedReq(key));\n    }\n\n    this.clearConnectTimer();\n    this.clearClientCtrlTimer();\n    this.clearKeepAlive();\n    this._consumers.flows.forEach((consumer) => {\n      consumer.processFSMEvent(\n        new ConsumerFSMEvent({ name: ConsumerFSMEventNames.SESSION_DOWN })\n      );\n    });\n    // Reconnecting flows need session state notification too.\n    this._consumers.reconnectingFlows.forEach((consumer) => {\n      consumer.processFSMEvent(\n        new ConsumerFSMEvent({ name: ConsumerFSMEventNames.SESSION_DOWN })\n      );\n    });\n    if (this._defaultPublisher) {\n      this._defaultPublisher.processFSMEvent(\n        new PublisherLib.PublisherFSMEvent({\n          name: PublisherLib.PublisherFSMEventNames.SESSION_DOWN,\n        })\n      );\n    }\n    this._session.cleanupSession();\n  }\n\n  /**\n   * @private\n   */\n  clearClientCtrlTimer() {\n    if (!this._clientCtrlTimer) {\n      return;\n    }\n\n    clearTimeout(this._clientCtrlTimer);\n    this._clientCtrlTimer = null;\n  }\n\n\n  /**\n   * @private\n   */\n  clearConnectTimer() {\n    if (!this._connectTimer) {\n      return;\n    }\n\n    clearTimeout(this._connectTimer);\n    this._connectTimer = undefined;\n  }\n\n  /**\n   * Cancel keep alive task\n   * @private\n   */\n  clearKeepAlive() {\n    const { LOG_INFO } = this.logger;\n\n    if (this._keepAliveTimer) {\n      LOG_INFO('Cancel keepalive timer');\n      clearInterval(this._keepAliveTimer);\n      this._keepAliveTimer = null;\n    }\n\n    this.resetKeepAliveCounter();\n  }\n\n\n  /**\n   * @param {ClientCtrlMessage} clientCtrlMsg The message to parse\n   * @returns {Boolean} true if No Local is supported by the router\n   * @private\n   */\n  checkNoLocal(clientCtrlMsg) {\n    let noLocalSupported = true;\n    if (this._sessionProperties.noLocal === true) {\n      const caps = clientCtrlMsg.getRouterCapabilities();\n      if (!caps) {\n        noLocalSupported = false;\n      } else {\n        // Guard for undefined OR non-boolean capability\n        noLocalSupported = (typeof caps[CapabilityType.NO_LOCAL] === 'boolean') ? caps[CapabilityType.NO_LOCAL] : false;\n      }\n    }\n    return noLocalSupported;\n  }\n\n  /**\n   * Check against an odd router version which OKs logins with TLS downgrade to compression,\n   * but does not actually support it, and just downgrades to plain text instead.\n   * @param {ClientCtrlMessage} clientCtrlMsg The message to parse\n   * @returns {Boolean} false if router should have rejected login for unsupported compressed TLS.\n   * @private\n   */\n  checkCompressedSsl(clientCtrlMsg) {\n    const { LOG_TRACE } = this.logger;\n    if (this._compressedTLS) {\n      const caps = clientCtrlMsg.getRouterCapabilities();\n      if (!caps || typeof caps[CapabilityType.COMPRESSED_SSL] !== 'boolean') {\n        LOG_TRACE('Compressed SSL capability missing.');\n        return false;\n      }\n      return caps[CapabilityType.COMPRESSED_SSL] === true;\n    }\n    return true;\n  }\n\n  /**\n   * Check destination against router capablilities\n   * @param {Destination} destination to verify\n   * @returns {?solace.OperationError} error for caller to throw otherwise null\n   * @private\n   */\n  checkSessionDestinationCapability(destination) {\n    let error = null;\n    if (destination && destination.getType()) {\n      if (destination.getSubscriptionInfo()\n          && (destination.getSubscriptionInfo().isShare\n              || destination.getSubscriptionInfo().isNoExport)\n          && !this._session.isCapable(CapabilityType.SHARED_SUBSCRIPTIONS)) {\n        error = new OperationError(\n          'Shared subscriptions are not allowed by router for this client',\n          ErrorSubcode.SHARED_SUBSCRIPTIONS_NOT_SUPPORTED,\n          null);\n      }\n    }\n    return error;\n  }\n\n  /**\n   * Clears the current error exit information for the FSM.\n   */\n  clearCurrentError() {\n    this._currentError = null;\n  }\n\n  /**\n   * @private\n   */\n  clearSubscriptionCacheKeys() {\n    this._subscriptionCacheKeys = null;\n  }\n\n  /**\n   * @private\n   */\n  copySubscriptionCacheKeys() {\n    // reapply subscriptions if applicable\n    this.clearSubscriptionCacheKeys();\n    this._subscriptionCacheKeys = Object.keys(this._subscriptionCache || {});\n\n    // Add the P2P Inbox subscription, so the subscriptionCache always has\n    // at least one subscription.\n    const p2pTopic = P2PUtil.getP2PTopicSubscription(this._sessionProperties.p2pInboxBase);\n    this._subscriptionCacheKeys.push(p2pTopic);\n  }\n\n  createMessagePublisher() {\n    const { LOG_DEBUG } = this.logger;\n    if (!this._sessionProperties.publisherProperties.enabled) {\n      LOG_DEBUG('Publisher is disabled');\n      return;\n    }\n\n    const {\n      MessagePublisher,\n      MessagePublisherEventName,\n    } = PublisherLib;\n    const publisher = new MessagePublisher({\n      properties:              this._sessionProperties.publisherProperties,\n      sessionInterfaceFactory: this._flowInterfaceFactory,\n    });\n    publisher.on(\n      MessagePublisherEventName.UP,\n      () => this.processEvent(new SessionFSMEvent(\n        { name: SessionEventName.FLOW_UP },\n        { guaranteedFlowObject: publisher })));\n    publisher.on(\n      MessagePublisherEventName.CONNECT_FAILED_ERROR,\n      event => this.processEvent(\n        new SessionFSMEvent(\n          { name: SessionEventName.FLOW_FAILED },\n          {\n            guaranteedFlowObject: publisher,\n            event,\n            eventText:            event.description,\n          })));\n\n    publisher.on(MessagePublisherEventName.REJECTED_MESSAGE, (message, ctrlMessage) => {\n      const header = ctrlMessage.smfHeader;\n      const respCode = header.pm_respcode;\n      const respText = header.pm_respstr;\n      const errorSubcode = ErrorResponseSubcodeMapper.getADErrorSubcode(respCode, respText);\n      const event = SessionEvent.build(SessionEventCode.REJECTED_MESSAGE_ERROR,\n                                       respText,\n                                       respCode,\n                                       errorSubcode,\n                                       message.getCorrelationKey());\n      event['message'] = message; // eslint-disable-line dot-notation\n      this.emitSessionEvent(event);\n    });\n    publisher.on(MessagePublisherEventName.ACKNOWLEDGED_MESSAGE, (message) => {\n      const event = SessionEvent.build(SessionEventCode.ACKNOWLEDGED_MESSAGE,\n                                       'Message(s) acknowledged',\n                                       undefined,\n                                       0,\n                                       message.getCorrelationKey());\n      event['message'] = message; // eslint-disable-line dot-notation\n      this.emitSessionEvent(event);\n    });\n    publisher.on(MessagePublisherEventName.FLOW_NAME_CHANGED, (data) => {\n      const { messages, count } = data;\n      if (count > 0) {\n        const event = SessionEvent.build(SessionEventCode.REPUBLISHING_UNACKED_MESSAGES,\n                                         `Republishing ${count} messages due to ` +\n          'Guaranteed Message Publisher failed to reconnect');\n        event['messages'] = messages; // eslint-disable-line dot-notation\n        event['count'] = count; // eslint-disable-line dot-notation\n        this.emitSessionEvent(event);\n      }\n    });\n    publisher.on(MessagePublisherEventName.CAN_SEND, () => {\n      this.emitSessionEvent(\n        SessionEvent.build(SessionEventCode.CAN_ACCEPT_DATA,\n                           `${publisher} window is now open and can send`));\n    });\n    publisher.on(MessagePublisherEventName.GUARANTEED_MESSAGING_DOWN, () => {\n      this.emitSessionEvent(\n        SessionEvent.build(\n          SessionEventCode.GUARANTEED_MESSAGE_PUBLISHER_DOWN,\n          'Guaranteed Message Publishing shut down'));\n    });\n    this._defaultPublisher = publisher;\n  }\n\n  sendConsumerSessionUpEvent(consumer) {\n    const {\n      ConsumerFSMEvent,\n      ConsumerFSMEventNames,\n    } = ConsumerLib;\n    const isAD = this._session.canConnectConsumer;\n    const event = new ConsumerFSMEvent({\n      name: isAD\n        ? ConsumerFSMEventNames.SESSION_UP\n        : ConsumerFSMEventNames.SESSION_UP_NO_AD,\n    });\n    event.guaranteedFlowObject = consumer;\n    consumer.processFSMEvent(event);\n  }\n\n  sendPublisherSessionUpEvent(publisher) {\n    const isAD = this._session.canConnectPublisher;\n    const event = new PublisherLib.PublisherFSMEvent({\n      name: isAD\n        ? PublisherLib.PublisherFSMEventNames.SESSION_UP\n        : PublisherLib.PublisherFSMEventNames.SESSION_UP_NO_AD,\n    });\n    event.guaranteedFlowObject = publisher;\n    publisher.processFSMEvent(event);\n  }\n\n  /**\n   * Creates a Guaranteed Messaging Subscriber.\n   *\n   * @param {Object|MessageConsumerProperties} properties Properties for the flow.\n   *  Expected fields: {@link solace.MessageConsumerProperties}\n   * @returns {solace.MessageConsumer} The newly constructed consumer\n   * @private\n   */\n  createMessageConsumer(properties) {\n    const { MessageConsumer } = ConsumerLib;\n    const consumer = new MessageConsumer({\n      properties,\n      sessionInterfaceFactory: this._flowInterfaceFactory,\n    });\n    // use the consumer properties instead of properties to ensure the topicEndpointSubscription\n    // has a Topic object\n    const consumerProperties = consumer.getProperties();\n    if (consumerProperties.topicEndpointSubscription) {\n      //check topic supported\n      const error =\n          this.checkSessionDestinationCapability(consumerProperties.topicEndpointSubscription);\n      if (error) {\n        throw error;\n      }\n    }\n\n    const { LOG_WARN } = this.logger;\n\n    // check for whether the broker session supports the capabilities\n    const settlementOutcomes = consumerProperties.requiredSettlementOutcomes;\n    if (settlementOutcomes && settlementOutcomes.length > 0) {\n      // check the capability bit for settlement outcome (NACK) support or throw OperationError()\n      const isNackRequired = settlementOutcomes.some(v => v === MessageOutcome.FAILED || MessageOutcome.REJECTED);\n      if(isNackRequired && !this._session.isCapable(CapabilityType.AD_APP_ACK_FAILED)) {\n        const outcomeNotSupportedError = `Session.capabilitySettlementOutcomeNotSupported: [ ${\n          settlementOutcomes.map(v => `solace.MessageOutcome.${MessageOutcome.nameOf(v)}`).join(', ')\n        } ]`;\n        // log the operation error as a Warning\n        LOG_WARN(outcomeNotSupportedError);\n        // then throw the error here\n        throw new OperationError(outcomeNotSupportedError, ErrorSubcode.INVALID_OPERATION, null);\n      }\n    }\n    const info = { guaranteedFlowObject: consumer };\n    // Will be added to the guaranteed flow collection by dispatching\n    this.processEvent(\n      new SessionFSMEvent({ name: SessionEventName.CREATE_SUBSCRIBER }, info)\n    );\n    return consumer;\n  }\n\n/**\n   * Creates a Queue Browser.\n   *\n   * @param {Object|QueueBrowserProperties} properties Properties for the queue browser.\n   *  Expected fields: {@link solace.QueueBrowserProperties}\n   * @returns {solace.QueueBrowser} The newly constructed queue browser\n   * @private\n   */\n  createQueueBrowser(properties) {\n    const { MessageConsumerAcknowledgeMode, QueueBrowser } = ConsumerLib;\n    const { LOG_DEBUG } = this.logger;\n\n    LOG_DEBUG(`Creating queue browser with properties:  ${properties}`);\n\n    const consumerProperties = {};\n    consumerProperties.queueDescriptor = properties.queueDescriptor;\n    consumerProperties.acknowledgeMode = MessageConsumerAcknowledgeMode.CLIENT;\n    consumerProperties.browser = true;\n\n    // Optional properties\n    if (Object.prototype.hasOwnProperty.call(properties, 'connectTimeoutInMsecs')) {\n      consumerProperties.connectTimeoutInMsecs = properties.connectTimeoutInMsecs;\n    }\n    if (Object.prototype.hasOwnProperty.call(properties, 'connectAttempts')) {\n      consumerProperties.connectAttempts = properties.connectAttempts;\n    }\n    if (Object.prototype.hasOwnProperty.call(properties, 'windowSize')) {\n      consumerProperties.windowSize = properties.windowSize;\n    }\n    if (Object.prototype.hasOwnProperty.call(properties, 'transportAcknowledgeTimeoutInMsecs')) {\n      consumerProperties.transportAcknowledgeTimeoutInMsecs =\n        properties.transportAcknowledgeTimeoutInMsecs;\n    }\n    if (Object.prototype.hasOwnProperty.call(properties, 'transportAcknowledgeThresholdPercentage')) {\n      consumerProperties.transportAcknowledgeThresholdPercentage =\n        properties.transportAcknowledgeThresholdPercentage;\n    }\n\n    const consumer = this.createMessageConsumer(consumerProperties);\n    const browser = new QueueBrowser(consumer);\n    return browser;\n  }\n\n  /**\n   * @param {String} msg The status message for the operation\n   * @param {Subcode} subcode The subcode reason for the operation\n   * @private\n   */\n  destroyTransportSession(msg, subcode) {\n    if (Check.nothing(this._transport)) {\n      // Just send the event\n      this.processEvent(\n        new SessionFSMEvent({ name: SessionEventName.TRANSPORT_DESTROYED })\n      );\n      return;\n    }\n    const { LOG_INFO, LOG_ERROR } = this.logger;\n    LOG_INFO('Destroy transport session');\n\n    const returnCode = this._transport.destroy(msg, subcode);\n    this._smfClient = null;\n\n    if (returnCode !== TransportLib.TransportReturnCode.OK) {\n      LOG_ERROR(`Failed to destroy transport session, return code: ${\n        TransportLib.TransportReturnCode.describe(returnCode)}`);\n    }\n  }\n\n\n  /**\n   * Release all resources associated with the session.\n   * @private\n   */\n  disposeInternal() {\n    if (this._disposed) {\n      return;\n    }\n\n    const operations = {\n      'transport': () => {\n        this.destroyTransportSession('Disposing', 0);\n        this._transport = null;\n        this._smfClient = null;\n      },\n      'session': () => {\n        this.cleanupSession();\n        this._session = null;\n        this._sessionProperties = null;\n        this._correlatedReqs = null;\n        this._flowInterfaceFactory = null;\n      },\n      'statistics': () => {\n        if (this._sessionStatistics) {\n          this._sessionStatistics.resetStats();\n          this._sessionStatistics = null;\n        }\n        this._kaStats = null;\n      },\n      'subscription cache': () => {\n        if (this._subscriptionCache) {\n          Object.keys(this._subscriptionCache).forEach(\n            key => this.removeFromSubscriptionCache(key)\n          );\n          this._subscriptionCache = null;\n        }\n        this.clearSubscriptionCacheKeys();\n        this._subscriptionCacheCount = 0;\n      },\n      'MessagePublishers': () => {\n        if (this._defaultPublisher) {\n          this._defaultPublisher.dispose();\n          this._defaultPublisher = null;\n        }\n      },\n      'MessageConsumers': () => {\n        this._consumers.disposeAll();\n        this._consumers = null;\n      },\n      'host list': () => {\n        this._currentHost = null;\n        this._hosts = null;\n      },\n    };\n\n    Object.keys(operations).forEach((operationKey) => {\n      const { LOG_TRACE, LOG_INFO } = this.logger;\n      const operation = operations[operationKey];\n      try {\n        LOG_TRACE(`Dispose: ${operationKey}`);\n        operation();\n        LOG_TRACE(`Dispose: ${operationKey} succeeded`);\n      } catch (ex) {\n        LOG_INFO(`Dispose: ${operationKey} failed:`, ex, '...continuing');\n      }\n    });\n    this._disposed = true;\n  }\n\n  emitSessionEvent(event) {\n    // Don't log here; callee does it\n    this._session.sendEvent(event);\n  }\n\n  /**\n   * @param {Number} correlationTag The correlation tag\n   * @param {function} reqTimeoutCb The timeout callback\n   * @param {Number} reqTimeout The timeout in milliseconds\n   * @param {Object} correlationKey The correlation key\n   * @param {function} respRecvCallback The success callback\n   * @private\n   */\n  enqueueOutstandingCorrelatedReq(correlationTag,\n                                  reqTimeoutCb,\n                                  reqTimeout,\n                                  correlationKey,\n                                  respRecvCallback) {\n    if (Check.nothing(correlationTag)) {\n      return;\n    }\n\n    const { LOG_INFO } = this.logger;\n    LOG_INFO(`Enqueue outstanding ctrl request correlationTag=${correlationTag}`);\n    let timer = null;\n    if (reqTimeoutCb) {\n      timer = setTimeout(reqTimeoutCb, reqTimeout || this._sessionProperties.readTimeoutInMsecs);\n    }\n\n    const outstandingReq = new CorrelatedRequest(correlationTag,\n      timer,\n      correlationKey,\n      respRecvCallback);\n    this._correlatedReqs[correlationTag] = outstandingReq;\n  }\n\n  /**\n   * @param {String} errorEventText Description of the error\n   * @param {ErrorSubcode} errorSubcode Subcode for the error\n   * @param {String} [eventReason] The reason for the error\n   * @returns {undefined}\n   * @memberof SessionFSM\n   * @private\n   */\n  errorInFsm(errorEventText, errorSubcode, eventReason = null) {\n    const { LOG_INFO } = this.logger;\n    const sEvent = new SessionFSMEvent({ name: SessionEventName.EXCEPTION });\n    LOG_INFO(`Handling error in FSM: ${errorEventText} ${eventReason && eventReason.stack}`);\n    this.setCurrentError({\n      eventText: errorEventText,\n      errorSubcode,\n      eventReason,\n    });\n    return this.processEvent(sEvent);\n  }\n\n  flushTransportSession(callback) {\n    if (this._transport) {\n      this._transport.flush(callback);\n    } else {\n      callback();\n    }\n  }\n\n  /**\n   * @returns {Number} The next correlation tag\n   * @private\n   */\n  getCorrelationTag() {\n    return this._smfClient.nextCorrelationTag();\n  }\n\n  /**\n   * Get current state name\n   * @returns {String} The name of the current state, or SessionStateName.DISPOSED if the\n   *  FSM is terminated\n   * @private\n   */\n  getCurrentStateName() {\n    const currentState = this.getCurrentState();\n\n    if (!currentState) return null;\n    if (currentState === this.getFinalState()) return SessionStateName.DISPOSED;\n    return this.getCurrentState().getName();\n  }\n\n  /**\n   * Returns the value of a given {@link StatType}.\n   *\n   * @param {StatType} statType The statistic to query.\n   * @returns {?Number} The value for the given stat, if available\n   * @private\n   */\n  getStat(statType) {\n    if (this._sessionStatistics === undefined) {\n      return undefined;\n    }\n    //\n    // TX_TOTAL_DATA_MSGS and TX_TOTAL_DATA_BYTES are summary counters\n    // These stats are calculated as the sum of DIRECT/PERSISTENT/NONPERSISTENT\n    // counters.  This is by design since day one.  As such they do not include\n    // the count of redelivered messages/bytes as TX_PERSISTENT_MSGS and TX_NONPERSISTENT_MSGS\n    // only includes the counts of messages successfully delivered. This is not consistent\n    // with receive stats but it is what it is. This definition is consistent with the other\n    // existing APIs (CCSMP and JCSMP).\n    //\n    if (statType === StatType.TX_TOTAL_DATA_MSGS) {\n      return this._sessionStatistics.getStat(StatType.TX_DIRECT_MSGS) +\n        this._sessionStatistics.getStat(StatType.TX_PERSISTENT_MSGS) +\n        this._sessionStatistics.getStat(StatType.TX_NONPERSISTENT_MSGS);\n    } else if (statType === StatType.TX_TOTAL_DATA_BYTES) {\n      return this._sessionStatistics.getStat(StatType.TX_DIRECT_BYTES) +\n        this._sessionStatistics.getStat(StatType.TX_PERSISTENT_BYTES) +\n        this._sessionStatistics.getStat(StatType.TX_NONPERSISTENT_BYTES);\n    }\n    return this._sessionStatistics.getStat(statType);\n  }\n\n  /**\n   * Gets a transport session information string.\n   * This string is informative only, and applications should not attempt to parse it.\n   *\n   * @returns {String} The current status of the transport\n   */\n  getTransportInfo() {\n    if (Check.nothing(this._transport)) {\n      return 'Not connected.';\n    }\n    return this._transport.getInfoStr();\n  }\n\n  /**\n   * Handle an AD CTRL message given the message, its header, and the previously-identified\n   * candidate flow, which is used if the message has no correlation tag.\n   *\n   * @param {AdProtocolMessage} message The message to handle\n   * @param {SMFHeader} header The header of the message\n   * @returns {SessionFSM} This FSM.\n   * @private\n   */\n  handleADCtrlMessage(message, header) {\n    const flowId = message.getFlowId();\n    const respText = header.pm_respstr;\n    const correlationTag = header.pm_corrtag;\n    const { LOG_INFO, LOG_DEBUG, LOG_WARN } = this.logger;\n\n    if (correlationTag) {\n      // Correlation tag is non-null\n      // Session handles correlated request-reply\n      this.updateRxStats(message);\n\n      LOG_INFO(`Handle SMF response for correlationTag ${correlationTag}`);\n      // find matching correlationTag to cancel timer\n      const cancelledRequest = this.cancelOutstandingCorrelatedReq(correlationTag);\n      if (Check.nothing(cancelledRequest)) {\n        return this.errorInFsm(`Cannot find matching request for response: ${respText}`,\n                               ErrorSubcode.INTERNAL_ERROR);\n      }\n\n      if (cancelledRequest.respRecvdCallback) {\n        // call callback referenced by cancelledRequest\n        // login or update property\n        cancelledRequest.respRecvdCallback(message, cancelledRequest);\n        return this;\n      }\n\n      LOG_DEBUG(`Dropping ADCTRL message due to mismatched correlation tag ${correlationTag}`);\n      this.incStat(StatType.RX_REPLY_MSG_DISCARD);\n      return this;\n    }\n\n    // Unsolicited control message\n    let flow;\n    const msgType = message.msgType;\n    const { SMFAdProtocolMessageType } = SMFLib;\n    switch (msgType) {\n      case SMFAdProtocolMessageType.CLIENTACK:\n      case SMFAdProtocolMessageType.CLIENTNACK:\n      case SMFAdProtocolMessageType.CLOSEPUBFLOW:\n        if (this._defaultPublisher.flowId === flowId) {\n          flow = this._defaultPublisher;\n        } // else drop.\n        break;\n      default:\n        flow = this._consumers.getFlowById(flowId);\n    }\n\n    if (flow && !flow.disposed) {\n      // Found a matching flow\n      this.updateRxStats(message, flow);\n      flow.handleUncorrelatedControlMessage(message);\n      return this;\n    }\n\n    // No matching flow\n    const response = message.getResponse();\n    const rc = response ? `\"${response.responseCode} ${response.responseString}\" ` : '';\n    LOG_WARN(\n      `Dropping ADCTRL.${SMFLib.SMFAdProtocolMessageType.describe(message.msgType)\n      } ${rc}for unknown flow ${flowId}`\n    );\n    this.incStat(StatType.RX_DISCARD_NO_MATCHING_CONSUMER);\n\n    return this;\n  }\n\n  /**\n   * @param {solace.Message} message The AD data message to handle\n   * @param {SMFHeader} header The header for the message\n   * @returns {MessageConsumer} The flow that handled the message, or `null`\n   * @private\n   */\n  handleADTrMessage(message, header) {\n    const { LOG_DEBUG } = this.logger;\n    const flowId = header.pm_ad_flowid;\n    // Get a flow from that ID if possible.\n    const flow = this._consumers.getFlowById(flowId);\n    if (!flow || flow.disposed) {\n      LOG_DEBUG('Dropped incoming AD message for ' +\n                `${flow ? 'disposed' : 'unknown'} flow ID ${flowId}`);\n      this.updateRxStats(message, this._sessionStatistics);\n      this.incStat(StatType.RX_DISCARD_NO_MATCHING_CONSUMER);\n      return null;\n    }\n    this.updateRxStats(message, flow);\n    flow.handleDataMessage(message);\n    return flow;\n  }\n\n  /**\n   * @param {String} correlationTag The correlation tag for the timed out subscription request\n   * @param {String} [timeoutMsg] The reason for the timeout\n   * @private\n   */\n  handleApiSubscriptionTimeout(correlationTag, timeoutMsg) {\n    // remove request from queue\n    if (this._correlatedReqs[correlationTag] === undefined ||\n        this._correlatedReqs[correlationTag] === null) {\n      return;\n    }\n\n    const { LOG_INFO, LOG_ERROR } = this.logger;\n    LOG_INFO(`${timeoutMsg || 'Subscription timeout'} for correlationTag=${correlationTag}`);\n    try {\n      const result = delete this._correlatedReqs[correlationTag];\n      if (!result) {\n        LOG_ERROR(`Cannot delete ctrl request ${correlationTag}`);\n      }\n    } catch (e) {\n      LOG_ERROR(`Cannot delete ctrl request ${correlationTag}, exception: ${e.message}`);\n    }\n  }\n\n  /**\n   * @param {ClientCtrlMessage} message The message to handle\n   * @param {SMFHeader} header The header from the message\n   * @returns {undefined}\n   * @private\n   */\n  handleClientCtrlMessage(message, header) {\n    let correlationTag;\n    const { LOG_INFO } = this.logger;\n    this.updateRxStats(message);\n    if (message.msgType === SMFLib.SMFClientCtrlMessageType.LOGIN) {\n      // Currently, login requests don't use a correlation tag.\n      // Using here a fake internal one to match the request.\n      correlationTag = TransportLib.SMFClient.SMF_CLIENTCTRL_LOGIN_FAKE_CORRELATIONTAG;\n      LOG_INFO('Handle SMF response for ClientCTRL Login');\n    } else {\n      correlationTag = header.pm_corrtag;\n      LOG_INFO(`Handle SMF response for correlationTag ${correlationTag}`);\n    }\n    // find matching correlationTag to cancel timer\n    const cancelledRequest = this.cancelOutstandingCorrelatedReq(correlationTag);\n    if (Check.nothing(cancelledRequest)) {\n      const respText = header.pm_respstr;\n      return this.errorInFsm(`Cannot find matching request for response: ${respText}`,\n                             ErrorSubcode.INTERNAL_ERROR);\n    } else if (cancelledRequest.respRecvdCallback) {\n      // call callback referenced by cancelledRequest\n      // login or update property\n      return cancelledRequest.respRecvdCallback(message);\n    }\n\n    LOG_INFO(`Dropping ClientCtrl message due to mismatched correlation tag ${correlationTag}`);\n    return this.incStat(StatType.RX_REPLY_MSG_DISCARD);\n  }\n\n  /**\n   * @param {ClientCtrlMessage} clientCtrlMsg The message to handle\n   * @private\n   */\n  handleClientCtrlResponse(clientCtrlMsg) {\n    const sEvent = new SessionFSMEvent({ name: SessionEventName.TRANSPORT_PROTOCOL_CLIENTCTRL });\n    sEvent.smfMsg = clientCtrlMsg;\n    this.processEvent(sEvent);\n  }\n\n  /**\n   * @private\n   */\n  handleClientCtrlTimeout() {\n    const { LOG_INFO } = this.logger;\n    LOG_INFO('ClientCtrl timeout for session');\n    const sEvent = new SessionFSMEvent({ name: SessionEventName.DOWNGRADE_TIMEOUT });\n    this.processEvent(sEvent);\n  }\n\n\n  /**\n   * @private\n   */\n  handleConnectTimeout() {\n    const { LOG_INFO } = this.logger;\n    LOG_INFO('Connection timeout. Disconnecting');\n    const sEvent = new SessionFSMEvent({ name: SessionEventName.CONNECT_TIMEOUT });\n    this.processEvent(sEvent);\n  }\n\n  /**\n   * Handle control request timeout\n   * @param {String} correlationTag The correlation tag for the timed out operation\n   * @param {String} timeoutMsg The message associated with the timeout\n   * @private\n   */\n  handleUpdatePropertyTimeout(correlationTag, timeoutMsg) {\n    const { LOG_ERROR } = this.logger;\n    // remove request from queue\n    try {\n      const result = delete this._correlatedReqs[correlationTag];\n      if (!result) {\n        LOG_ERROR(`Cannot delete ctrl request ${correlationTag}`);\n      }\n    } catch (e) {\n      LOG_ERROR(`Cannot delete ctrl request ${correlationTag}, exception: ${e.message}`);\n    }\n\n    // notify client\n    const sessionEvent = SessionEvent.build(SessionEventCode.PROPERTY_UPDATE_ERROR,\n                                            timeoutMsg,\n                                            null,\n                                            ErrorSubcode.TIMEOUT,\n                                            null,\n                                            null);\n    this.sendEvent(sessionEvent);\n  }\n\n  /**\n   * @param {SMFHeader} header The header from the rejected message\n   * @private\n   */\n  handleRejectedTrMessage(header) {\n    // It is trmsg response. For direct message, it must be a failure response\n    const respCode = header.pm_respcode;\n    // Strip a trailing null character.\n    const topicNameRaw = header.pm_tr_topicname_bytes;\n    const topicName = topicNameRaw ? topicNameRaw.replace(/\\0/g, '') : '';\n    const respText = header.pm_respstr;\n    const errorSubcode = ErrorResponseSubcodeMapper.getErrorSubcode(respCode, respText);\n    this.emitSessionEvent(SessionEvent.build(\n      SessionEventCode.REJECTED_MESSAGE_ERROR,\n      respText,\n      respCode,\n      errorSubcode,\n      null, //correlation key\n      `Topic: ${topicName}`)\n    );\n  }\n\n  /**\n   * @param {solace.Message} message The SMF message to handle\n   * @returns {undefined}\n   * @private\n   */\n  handleSMFMessage(message) {\n    try {\n      // Stats for this message might affect both the session and the flow. Need to\n      // determine where the message is handled before handling stats.\n      // Some ADCTRL messages have no flow ID but only a correlation tag.\n      // These are OPENFLOW and we count them as handled by the session.\n\n      const header = message.smfHeader;\n\n      if (header.discardMessage) {\n        // UH==2 on an unknown parameter\n        if (this._sessionStatistics) {\n          this._sessionStatistics.incStat(StatType.RX_DISCARD_SMF_UNKNOWN_ELEMENT);\n        }\n        // do nothing.\n        return null;\n      }\n\n      // Each message type handler must call this.updateRxStats(message, target).\n      // The direct/TRmsg path includes the call here in the switch.\n      switch (header.smf_protocol) {\n        case SMFLib.SMFProtocol.TRMSG:\n          if (header.smf_adf) {\n            return this.handleADTrMessage(message, header);\n          }\n          this.updateRxStats(message, this._sessionStatistics);\n          return header.pm_respcode === 0\n            ? this._session.handleDataMessage(message)\n            : this.handleRejectedTrMessage(header);\n\n        case SMFLib.SMFProtocol.ADCTRL:\n          return this.handleADCtrlMessage(message, header);\n\n        case SMFLib.SMFProtocol.CLIENTCTRL:\n          return this.handleClientCtrlMessage(message, header);\n\n        case SMFLib.SMFProtocol.SMP:\n          return this.handleSMPMessage(message, header);\n\n        case SMFLib.SMFProtocol.KEEPALIVE:\n        case SMFLib.SMFProtocol.KEEPALIVEV2:\n          // do nothing\n          return null;\n\n        default:\n          return this.handleUnknownProtocolMessage(message, header);\n      }\n    } catch (e) {\n      const { LOG_ERROR } = this.logger;\n      LOG_ERROR(`Exception in handleSMFMessage, exception: ${e.stack}`);\n      return this.errorInFsm(`Exception in handleSMFMessage: ${e.message}`,\n                             e.subcode || ErrorSubcode.INTERNAL_ERROR,\n                             e);\n    }\n  }\n\n  /**\n   * @param {TransportError} transportError The SMF parsing error passed from the transport\n   * @returns {undefined}\n   * @private\n   */\n  handleSMFParseError(transportError) {\n    // fatal connection error\n\n    // notify client\n    return this.errorInFsm(transportError,\n                           ErrorSubcode.PROTOCOL_ERROR);\n  }\n\n  handleSMPMessage(message, header) {\n    this.updateRxStats(message);\n\n    // find matching correlationTag to cancel timer\n    const cancelledRequest = this.cancelOutstandingCorrelatedReq(header.pm_corrtag || '');\n    /*\n     * If we find the correlationTag and it has a callback associated with it\n     * then call that callback.  It is likely calling back straight to the application\n     * due to a call to session.subscribe() or session.unsubscribe() or\n     * session.updateProperty().\n     * Otherwise just send a TRANSPORT_PROTOCOL_SMP event to the FSM.\n     */\n    if (Check.nothing(cancelledRequest) || Check.nothing(cancelledRequest.respRecvdCallback)) {\n      /*\n       * correlation tag not found, probably an error response to a subscription\n       * request that did not request-confirm,  or it could be one of the\n       * FSM generated subscriptions and the callback is the anonymous function\n       * in state WaitingForSubConfirmm\n       */\n      const sEvent = new SessionFSMEvent({ name: SessionEventName.TRANSPORT_PROTOCOL_SMP });\n      sEvent.smfMsg = message;\n      return this.processEvent(sEvent);\n    }\n\n    // calling through the callback, this should  be a callback in the _session for\n    // applicated generated subscribe/unsubscribe/updateProperty(clientName)\n    return cancelledRequest.respRecvdCallback(message, cancelledRequest);\n  }\n\n  /**\n   * @param {Number} respCode The router response code\n   * @param {String} respText The router response text\n   * @param {String} subscriptionStr The subscription cache key\n   * @param {CorrelatedRequest} request The associated request\n   * @param {Boolean} confirm Whether the user wanted confirmation for the request\n   * @private\n   */\n  handleSubscriptionUpdateError(respCode, respText, subscriptionStr, request, confirm) {\n    const errorSubcode = ErrorResponseSubcodeMapper.getErrorSubcode(respCode, respText);\n\n    //\n    // if it is a not-found or already-present error, it does not affect our subscription\n    // cache, otherwise remove it from the cache.\n    //\n    if (!(errorSubcode === ErrorSubcode.SUBSCRIPTION_ALREADY_PRESENT ||\n      errorSubcode === ErrorSubcode.SUBSCRIPTION_NOT_FOUND)) {\n      // remove from cache\n      this.removeFromSubscriptionCache(subscriptionStr);\n    }\n\n    //\n    // notify the client\n    //\n    this._session.handleSubscriptionUpdateError(respCode,\n                                                respText,\n                                                subscriptionStr,\n                                                request,\n                                                confirm);\n  }\n\n  /**\n   * @param {String} correlationTag The correlation tag for the timed out request\n   * @private\n   */\n  handleSubscriptionTimeout(correlationTag) {\n    // remove request from queue\n    const { LOG_ERROR } = this.logger;\n    try {\n      let result = false;\n      if(this._correlatedReqs) {\n        result = delete this._correlatedReqs[correlationTag];\n      }\n      if (!result) {\n        LOG_ERROR(`Cannot delete ctrl request ${correlationTag}`);\n      }\n    } catch (e) {\n      LOG_ERROR(`Cannot delete ctrl request ${correlationTag}`, e);\n    }\n    const sEvent = new SessionFSMEvent({ name: SessionEventName.SUBSCRIBE_TIMEOUT });\n    this.processEvent(sEvent);\n  }\n\n  /**\n   * @param {TransportSessionEvent} transportEvent The event to handle\n   * @returns {undefined}\n   * @private\n   */\n  handleTransportEvent(transportEvent) {\n    const { LOG_INFO, LOG_WARN } = this.logger;\n    const infoStr = transportEvent.getInfoStr() || '';\n    LOG_INFO(`Receive transport event: ${transportEvent}`);\n\n    let sEvent;\n\n    switch (transportEvent.getTransportEventCode()) {\n      case TransportLib.TransportSessionEventCode.UP_NOTICE:\n        sEvent = new SessionFSMEvent({ name: SessionEventName.TRANSPORT_UP });\n        sEvent.sessionId = transportEvent.getSessionId();\n        this.processEvent(sEvent);\n        break;\n\n      case TransportLib.TransportSessionEventCode.DESTROYED_NOTICE:\n        sEvent = new SessionFSMEvent({ name: SessionEventName.TRANSPORT_DESTROYED });\n        sEvent.sessionId = transportEvent.getSessionId();\n        sEvent.eventText = infoStr;\n        sEvent.errorSubcode = transportEvent.getSubcode();\n        sEvent.eventReason = transportEvent;\n        this._smfClient = null; // calling reset does nothing useful here\n        this._transport = null; // transport has been destroyed\n        this.processEvent(sEvent);\n        break;\n\n      case TransportLib.TransportSessionEventCode.CAN_ACCEPT_DATA:\n        //\n        // unblock the publisher too\n        this.GuaranteedFlowControlledRelief();\n        sEvent = new SessionFSMEvent({ name: SessionEventName.TRANSPORT_CAN_ACCEPT_DATA });\n        sEvent.sessionId = transportEvent.getSessionId();\n        this.processEvent(sEvent);\n        break;\n\n      case TransportLib.TransportSessionEventCode.SEND_ERROR:\n        sEvent = new SessionFSMEvent({ name: SessionEventName.SEND_ERROR });\n        sEvent.sessionId = transportEvent.getSessionId();\n        sEvent.eventText = transportEvent.getInfoStr();\n        sEvent.errorSubcode = transportEvent.getSubcode();\n        sEvent.eventReason = transportEvent;\n        this.processEvent(sEvent);\n        break;\n\n      case TransportLib.TransportSessionEventCode.DATA_DECODE_ERROR:\n      case TransportLib.TransportSessionEventCode.PARSE_FAILURE:\n        // fatal connection error\n        return this.errorInFsm(transportEvent.getInfoStr(),\n                               transportEvent.getSubcode());\n      default:\n        LOG_WARN('Received unknown transport session event', transportEvent);\n    }\n\n    return true;\n  }\n\n  /**\n   * @param {BaseMessage|Message} message The message to handle\n   * @param {SMFHeader} [header] The SMF header from the message, if available\n   * @returns {undefined}\n   * @private\n   */\n  handleUnknownProtocolMessage(message, header) {\n    const { LOG_INFO, LOG_ERROR } = this.logger;\n    // unknown protocol\n    this.updateRxStats(message);\n    if (header && header.smf_protocol === SMFLib.SMFProtocol.TSESSION) {\n      // change state\n      LOG_ERROR(`Received transport session message instead of SMF message, protocol 0x${\n        formatHexString(header.smf_protocol)}`);\n      LOG_ERROR(`Transport MessageType=${message.messageType}, target sessionId=${\n        formatHexString(message.sessionId)}`);\n      // notify client\n      return this.errorInFsm('Received message with unknown protocol',\n                             ErrorSubcode.PARSE_FAILURE);\n    }\n\n    // Drop message of unknown protocol and increment stats\n    if (this._sessionStatistics) {\n      this._sessionStatistics.incStat(StatType.RX_DISCARD_SMF_UNKNOWN_ELEMENT);\n    }\n    LOG_INFO(`Drop message with unknown protocol 0x${formatHexString(header.smf_protocol)}`);\n    return null;\n  }\n\n\n  /**\n   * Increments a session statistic\n   *\n   * @param {StatType} statType The key to increment\n   * @param {?Number} value The amount to increment the value by\n   * @returns {?Number} The new value for the statistic\n   * @private\n   */\n  incStat(statType, value) {\n    return this._sessionStatistics ? this._sessionStatistics.incStat(statType, value) : undefined;\n  }\n\n  /**\n   * @private\n   */\n  initTransport() {\n    const { LOG_INFO } = this.logger;\n    const host = this._currentHost;\n    LOG_INFO(`Creating transport session ${host}`);\n    this._kaStats = { lastMsgWritten: 0, lastBytesWritten: 0 };\n\n    this._smfClient = new TransportLib.SMFClient(\n      rxData => this.handleSMFMessage(rxData),\n      rxError => this.handleSMFParseError(rxError),\n      this\n    );\n\n    this._transport = TransportLib.TransportFactory.createTransport(\n      host,\n      transportEvent => this.handleTransportEvent(transportEvent),\n      this._smfClient,\n      this._sessionProperties.clone(),\n      () => this.sessionIdHex\n    );\n    this.injectTransportInterceptor(this._transportInterceptor);\n  }\n\n  /**\n   * Installs a transport interceptor for the current and any future transports.\n   *\n   * The object methods .installed(instance) and .removed(instance) will be called if present, with\n   * the transport instance as a parameter.\n   *\n   * To stop using transport interceptors, supply a null interceptor argument.\n   *\n   * @param {Object} interceptor An object given access to the internals of the transport instance.\n   * @private\n   */\n  injectTransportInterceptor(interceptor) {\n    this._transportInterceptor = interceptor;\n    if (this._transport) {\n      this._transport.setInterceptor(interceptor);\n    }\n  }\n\n  /**\n   * Call from keep alive scheduled task\n   * @returns {undefined}\n   * @private\n   */\n  keepAliveTimeout() {\n    const { LOG_TRACE, LOG_DEBUG, LOG_INFO } = this.logger;\n    LOG_TRACE('KeepAlive timeout');\n\n    // session is in connected state but hasn't received keep alive response\n    // Less than or equal to because this is the number of *already sent* KAs\n    if (this._keepAliveCounter >= this._sessionProperties.keepAliveIntervalsLimit) {\n      LOG_INFO(`Exceed maximum keep alive intervals limit ${\n                this._sessionProperties.keepAliveIntervalsLimit}`);\n      // stop timers\n      LOG_DEBUG('Stop keep alive timer');\n      if (this._keepAliveTimer) {\n        clearInterval(this._keepAliveTimer);\n      }\n\n      // change session state\n      return this.errorInFsm('Exceed maximum keep alive intervals limit',\n                             ErrorSubcode.KEEP_ALIVE_FAILURE);\n    }\n\n    LOG_TRACE('About to send keep alive');\n\n    const clientStats = this._transport.getClientStats();\n    const prestatMsgWritten = clientStats.msgWritten;\n    const prestatBytesWritten = clientStats.bytesWritten;\n\n    const kaMsg = new SMFLib.KeepAliveMessage();\n    const returnCode = this.send(kaMsg, null, true);\n    if (returnCode !== TransportLib.TransportReturnCode.OK) {\n      /*\n       * TransportReturnCode.NO_SPACE is not possible.\n       * Send is called with the forceAllowEnqueue parameter.\n       * So whatever error is returned is fatal\n       */\n      return this.errorInFsm('Cannot send keep alive message',\n                             ErrorSubcode.KEEP_ALIVE_FAILURE);\n    }\n\n    // We need to avoid incrementing the KA counter if we're in the process of\n    // sending a huge message and we've had no opportunity to write a KA message.\n    // Detection: last KA's snapshot of messages written is unchanged, but number of bytes\n    // written has gone up.\n    if (this._kaStats.lastMsgWritten === prestatMsgWritten &&\n      this._kaStats.lastBytesWritten < prestatBytesWritten) {\n      LOG_DEBUG('Keep alive sent',\n                'Not incrementing keep alive counter due to large message send',\n                `KA count = ${this._keepAliveCounter}`\n      );\n    } else {\n      this._keepAliveCounter++;\n      LOG_TRACE(`Last message written: ${this._kaStats.lastMsgWritten}`);\n      LOG_TRACE(`Last bytes written: ${this._kaStats.lastBytesWritten}`);\n      LOG_TRACE(`Keep alive sent, increment keep alive counter, keep alive count = ${\n        this._keepAliveCounter}`);\n    }\n    this._kaStats.lastBytesWritten = clientStats.bytesWritten;\n    this._kaStats.lastMsgWritten = clientStats.msgWritten;\n\n    return true;\n  }\n\n  /**\n   * Prepares a message for sending and then invoke the transport\n   * send method. For guaranteed messages, pass the transport send\n   * method to the publisher so it can be invoked from there and errors\n   * handled within the publisher FSM.\n   * @param {BaseMessage} message The message to prepare.\n   * @private\n   */\n  prepareAndSendMessage(message) {\n    if (message instanceof Message) {\n      let returnCode;\n      // Delegate message preparation where appropriate\n      const deliveryMode = message.getDeliveryMode();\n      switch (deliveryMode) {\n\n        case MessageDeliveryModeType.DIRECT:\n          if (!this._transport) return;\n          message._payload_is_memoized = false;\n          message._memoized_csumm = null;\n          message._memoized_payload = null;\n          returnCode = this.sendToTransport(message);\n          break;\n\n        case MessageDeliveryModeType.PERSISTENT:\n        case MessageDeliveryModeType.NON_PERSISTENT:\n          if (!this._defaultPublisher) {\n            const reason = this._session.adLocallyDisabled\n                ? 'locally disabled'\n                : 'remotely unsupported';\n            throw new OperationError('Session does not provide Guaranteed Message Publish capability',\n                                       ErrorSubcode.GM_UNAVAILABLE,\n                                       reason);\n          } else {\n            if (this._gmSendDisallowed) this._gmSendDisallowed(); // throws if present\n            returnCode = this._defaultPublisher.prepareAdMessageAndSend(message);\n          }\n          break;\n\n        default: {\n          const { LOG_ERROR } = this.logger;\n          LOG_ERROR('Unhandled message delivery mode', MessageDeliveryModeType.describe(deliveryMode));\n        }\n      }\n\n      if (returnCode !== TransportLib.TransportReturnCode.OK) {\n        if (returnCode === TransportLib.TransportReturnCode.NO_SPACE) {\n          // Must be DIRECT message because the Publisher handles NO_SPACE returnCode\n          // internally\n          this._userBackpressured = true;\n          throw new OperationError('Cannot send message - no space in transport',\n            ErrorSubcode.INSUFFICIENT_SPACE,\n            TransportLib.TransportReturnCode.describe(returnCode));\n        }\n\n        // This is a fatal session error\n        this.setCurrentError(new OperationError('Cannot send message',\n            ErrorSubcode.INVALID_OPERATION,\n            TransportLib.TransportReturnCode.describe(returnCode)));\n        this.processEvent(new SessionFSMEvent({ name: SessionEventName.EXCEPTION }));\n      }\n    }\n  }\n\n  GuaranteedFlowControlledRelief() {\n    if (this._defaultPublisher) {\n      this._defaultPublisher.processFSMEvent(\n        new PublisherLib.PublisherFSMEvent({\n          name: PublisherLib.PublisherFSMEventNames.CAN_SEND }));\n    }\n  }\n  /**\n   * Reapply subscriptions.\n   * @returns {Boolean} True if all subscriptions were reapplied. False if WOULD_BLOCK.\n   * @private\n   */\n  reapplySubscriptions() {\n    const { LOG_INFO, LOG_DEBUG } = this.logger;\n    const { SolclientFactory: { createTopicDestination } } = SolclientFactoryLib;\n    LOG_INFO(`Reapplying subscriptions, count=${this._subscriptionCacheKeys.length}`);\n    // add subscriptions and ask for confirm on last one\n\n    if (!this._subscriptionCacheKeys) {\n      // Nothing to do\n      return true;\n    }\n\n    try {\n      while (this._subscriptionCacheKeys.length) {\n        //\n        // The key is the topic string (topic.getName()).\n        // sendSubscribe() requires a destination, so we encode it here.\n        //\n        // on entry to reapplySubscriptions we added the P2P topic to\n        // subscriptionCacheKeys but there is no corresponding entry in\n        // _subscriptionCache so we no longer use the key to index that actual\n        // cache.\n        // If it becomes necesary to pass the Topic object to sendSubscribe in a\n        // a future enhancement (perhaps to remember flags like request-confirm) then\n        // this logic here needs to be revisited.\n        const key = this._subscriptionCacheKeys.shift();\n        const requestConfirmation = this._subscriptionCacheKeys.length === 0;\n        const topicDestination = createTopicDestination(key);\n        const rc = this.sendSubscribe(topicDestination,\n                                      requestConfirmation,\n                                      null,\n                                      this._sessionProperties.readTimeoutInMsecs,\n                                      null);\n        if (rc !== TransportLib.TransportReturnCode.OK) {\n          this.errorInFsm(\n            `Error occurred sending subscription: ${TransportLib.TransportReturnCode.describe(rc)}`,\n            ErrorSubcode.INTERNAL_ERROR\n          );\n        }\n      }\n    } catch (e) {\n      if (e instanceof OperationError && e.subcode === ErrorSubcode.INSUFFICIENT_SPACE) {\n        LOG_DEBUG('Apply subscriptions blocked due to insufficient space, wait for can accept data event');\n        return false;\n      }\n      this.errorInFsm(`Unexpected expection occurred while reapplying subscriptions: ${e}`,\n                      e.subcode || ErrorSubcode.INTERNAL_ERROR,\n                      e);\n    }\n    return true;    // sent all subscriptions\n  }\n\n\n  /**\n   * @param {Destination} topic The topic to remove from the subscription cache\n   * @returns {?Destination} The value in the subscription cache at that key\n   * @private\n   */\n  removeFromSubscriptionCache(topic) {\n    if (Check.nothing(topic) || !this._subscriptionCache) {\n      return null;\n    }\n\n    const { LOG_DEBUG, LOG_ERROR } = this.logger;\n    const key = (topic instanceof Destination) ? topic.name : topic;\n    LOG_DEBUG(`Remove subscription ${key}`);\n    const sub = this._subscriptionCache[key];\n    if (sub === undefined || sub === null) {\n      return null;\n    }\n\n    try {\n      const result = delete this._subscriptionCache[key];\n      if (!result) {\n        LOG_ERROR(`Cannot remove subscription ${key}`);\n      } else {\n        this._subscriptionCacheCount--;\n      }\n    } catch (e) {\n      LOG_ERROR(`Cannot remove subscription ${key}`, e);\n    }\n    return sub;\n  }\n\n\n  /**\n   * Reset the FSM state and release all objects. This method is called once from\n   * SessionFSM.onInitial\n   * @private\n   */\n  reset() {\n    this.resetStats();\n\n    /**\n     * The following fields are disposed when disconnect is called\n     * and recreated when connect is called again.\n     */\n    this.sessionId = null;\n\n    // Need to reschedule keepAliveTimer when some other write operation happens\n    this._keepAliveTimer = null;\n    this.resetKeepAliveCounter();\n    this._correlatedReqs = {};\n\n    this._disposed = false;\n\n    this._smfClient = null;\n    this._kaStats = { lastMsgWritten: 0, lastBytesWritten: 0 };\n\n    /**\n     * The following fields are destroyed when dispose is called\n     * and cannot be reinitialized.\n     */\n    this._subscriptionCache = null;\n    this._subscriptionCacheKeys = null;\n    this._subscriptionCacheCount = 0;\n    if (this._sessionProperties.reapplySubscriptions) {\n      this._subscriptionCache = {};\n    }\n\n    // When negotiating the initial transport, we can fail and transparently reconnect.\n    // this.resetTransportProtocolHandler();\n    // this._lastKnownGoodTransport = null;\n\n    // event and error information\n    this._eventCode = null;\n    this._responseCode = null;\n    this.eventText = null;\n    this.errorSubcode = null;\n    this.eventReason = null;\n  }\n\n  /**\n   * @private\n   */\n  resetKeepAliveCounter() {\n    // Reset the KA counter. Called by the SMFClient on each SMF chunk received (whether full\n    // message or not).\n    this._keepAliveCounter = 0;\n  }\n\n  /**\n   * @returns {?} The result of calling resetStats().\n   * @private\n   */\n  resetStats() {\n    return this._sessionStatistics ? this._sessionStatistics.resetStats() : undefined;\n  }\n\n\n  /**\n   * Schedule keep alive task\n   * @private\n   */\n  scheduleKeepAlive() {\n    const { LOG_DEBUG, LOG_ERROR } = this.logger;\n    const { keepAliveIntervalInMsecs } = this._sessionProperties;\n    if (keepAliveIntervalInMsecs === 0) {\n      // Keepalives disabled\n      return;\n    }\n\n    if (this._keepAliveTimer) {\n      clearInterval(this._keepAliveTimer);\n    }\n\n    this._keepAliveTimer = setInterval(() => {\n      try {\n        this.keepAliveTimeout();\n      } catch (e) {\n        LOG_ERROR('Error occurred in keepAliveTimeout', e);\n      }\n    }, keepAliveIntervalInMsecs);\n\n    LOG_DEBUG(`Create Keepalive timer with interval: ${keepAliveIntervalInMsecs}ms`);\n  }\n\n  /**\n   * Provide a method for the session object to use to send\n   * messages to the transport.  This method is only used internally by\n   * the FSM.  The session send() API should invoke sendToTransport() directly\n   * so errors are thrown back to the application.\n   *\n   * @param {solace.Message} message The message to send\n   * @param {Object} [statTarget=this._sessionStatistics] The sender of this message, for stats.\n   * @param {Boolean} [forceAllowEnqueue=false] Set to true to force enqueueing of control messages\n   *\n   * @returns {TransportReturnCode} The RC from the transport\n   * @private\n   */\n  send(message, statTarget = this._sessionStatistics, forceAllowEnqueue = false) {\n    try {\n      return this.sendToTransport(message, statTarget, forceAllowEnqueue);\n    } catch (ex) {\n      const { LOG_TRACE } = this.logger;\n      // The send operation threw (or we threw locally), which is always a SessionException.\n      LOG_TRACE(`Error sending message: ${ex.message}: ${ex.stack}`);\n      this.errorInFsm(`Send operation failed: ${ex.message}`,\n                      ex.subcode || ErrorSubcode.CONNECTION_ERROR);\n    }\n    return TransportLib.TransportReturnCode.CONNECTION_ERROR;\n  }\n\n  /**\n   * Provide a method for the session object to use to send\n   * messages to the transport.\n   *\n   * @param {solace.Message} message The message to send\n   * @param {Object} [statTarget=this._sessionStatistics] The sender of this message, for stats.\n   * @param {Boolean} [forceAllowEnqueue=false] Set to true to force enqueueing of control messages\n   *\n   * @returns {TransportReturnCode} The RC from the transport\n   * @private\n   */\n  sendToTransport(message, statTarget = this._sessionStatistics, forceAllowEnqueue = false) {\n    let returnCode = TransportLib.TransportReturnCode.CONNECTION_ERROR;\n\n    if (!this._transport) {\n      throw new OperationError('Transport has been destroyed', ErrorSubcode.INTERNAL_ERROR);\n    }\n    const content = SMFLib.Codec.Encode.encodeCompoundMessage(message);\n    returnCode = this._transport.send(content, forceAllowEnqueue);\n    switch (returnCode) {\n      case TransportLib.TransportReturnCode.OK:\n        this.updateTxStats(message, statTarget);\n        break;\n      case TransportLib.TransportReturnCode.NO_SPACE:\n        if (!forceAllowEnqueue) {\n          // This is allowed.\n          break;\n        }\n      // Else fall through\n      default:\n        throw new OperationError(`Transport returned ${TransportLib.TransportReturnCode.describe(returnCode)}`,\n          ErrorSubcode.INTERNAL_ERROR);\n    }\n\n    return returnCode;\n  }\n\n\n  /**\n   * Initiates the ClientCtrl handshake, called from transportSessionEvent callback\n   * @returns {TransportReturnCode} The RC from the transport\n   * @private\n   */\n  sendClientCtrlLogin() {\n    const { LOG_INFO, LOG_DEBUG, LOG_TRACE } = this.logger;\n\n    this._compressedTLS =\n      ((this._sessionProperties.compressionLevel > 0) &&\n        (this._currentHost.match(/tcps:/i) !== null));\n    this._plaintextTLS =\n      ((this._currentHost.match(/tcps:/i) !== null) &&\n        (this._sessionProperties.sslConnectionDowngradeTo === SslDowngrade.PLAINTEXT));\n    LOG_TRACE(`sendClientLogin plaintextTLS: ${this._plaintextTLS} _compressedTLS: ${this._compressedTLS}`);\n\n    // Don't use the correlation tag. For Login only, the router won't return it.\n    const clientCtrlMsg = SMFLib.ClientCtrlMessage.getLogin(this._sessionProperties,\n                                                            this._compressedTLS,\n                                                            this._plaintextTLS);\n    const returnCode = this.send(clientCtrlMsg);\n    if (returnCode !== TransportLib.TransportReturnCode.OK) {\n      this._responseCode = null;\n      this.eventReason = null;\n      // notify client\n      if (returnCode === TransportLib.TransportReturnCode.NO_SPACE) {\n        this.eventText = 'Cannot send client control - no space in transport';\n        this.errorSubcode = ErrorSubcode.INSUFFICIENT_SPACE;\n      } else {\n        LOG_INFO(`Cannot send client ctrl, return code\n          ${TransportLib.TransportReturnCode.describe(returnCode)}`);\n        this.eventText = 'Cannot send client ctrl';\n        this.errorSubcode = ErrorSubcode.INVALID_OPERATION;\n      }\n    } else {\n      // enqueue outstanding request, use a fake correlation tag for Login only\n      const correlationTag = TransportLib.SMFClient.SMF_CLIENTCTRL_LOGIN_FAKE_CORRELATIONTAG;\n      LOG_INFO(`Using internally correlationTag=${correlationTag} for tracking ClientCTRL Login`);\n      this.enqueueOutstandingCorrelatedReq(correlationTag,\n                                           null,\n                                           null,\n                                           null,\n                                           rxMsgObj => this.handleClientCtrlResponse(rxMsgObj));\n\n      LOG_DEBUG('Sent client ctrl');\n    }\n    return returnCode;\n  }\n\n  /**\n   *\n   * Internal method for sending subscriptions from SessionConnecting state (reapply or P2P-inbox)\n   *\n   * @param {Destination} topic The topic to subscribe\n   * @param {Boolean} requestConfirmation If true, expect a reply on success also\n   * @param {String} correlationKey The correlation key for the request\n   * @param {Number} requestTimeout The timeout for the request\n   * @param {function} respRecvdCallback The callback on reply received\n   * @returns {TransportReturnCode} The RC from the transport\n   * @private\n   */\n  sendSubscribe(topic, requestConfirmation, correlationKey, requestTimeout, respRecvdCallback) {\n    const { LOG_INFO, LOG_DEBUG } = this.logger;\n    assert(topic instanceof Destination, 'sendSubscribe requires a Destination, not a string');\n    LOG_DEBUG('Sending subscribe: ', topic, requestConfirmation, correlationKey);\n    const correlationTag = this.getCorrelationTag();\n    const smpMsg = SMFLib.SMPMessage.getSubscriptionMessage(correlationTag,\n                                                            topic,\n                                                            true, // set add == true\n                                                            requestConfirmation);\n    assert(smpMsg.encodedUtf8Subscription, 'Encoded SMP message was invalid');\n    const returnCode = this.send(smpMsg);\n    if (returnCode !== TransportLib.TransportReturnCode.OK) {\n      LOG_INFO('Subscribe failed', TransportLib.TransportReturnCode.describe(returnCode));\n      return returnCode;\n    }\n    if (requestConfirmation) {\n      this.enqueueOutstandingCorrelatedReq(\n        correlationTag,\n        () => this.handleSubscriptionTimeout(correlationTag),\n        requestTimeout || this._sessionProperties.readTimeoutInMsecs,\n        correlationKey,\n        respRecvdCallback);\n    }\n    return returnCode;\n  }\n\n  /**\n   *\n   * @param {MutableSessionProperty} mutableSessionProperty The property key to change\n   * @param {?} newValue The new value for the property\n   * @param {String} correlationKey The correlation key for the request\n   * @param {Number} requestTimeout The timeout for the request\n   * @param {function} respRecvdCallback The callback on response\n   * @returns {TransportReturnCode} The RC from the transport\n   * @private\n   */\n  sendUpdateProperty(mutableSessionProperty,\n                     newValue,\n                     correlationKey,\n                     requestTimeout,\n                     respRecvdCallback) {\n    const correlationTag = this._smfClient.nextCorrelationTag();\n    const smpMsg = SMFLib.ClientCtrlMessage.getUpdate(mutableSessionProperty,\n                                                      newValue,\n                                                      correlationTag);\n\n    const returnCode = this.send(smpMsg);\n    if (returnCode !== TransportLib.TransportReturnCode.OK) {\n      return returnCode;\n    }\n\n    this.enqueueOutstandingCorrelatedReq(\n      correlationTag,\n      () => this.handleUpdatePropertyTimeout(correlationTag),\n      requestTimeout || this._sessionProperties.readTimeoutInMsecs,\n      correlationKey,\n      respRecvdCallback);\n    return returnCode;\n  }\n\n  /**\n   * @private\n   */\n  setClientCtrlTimer() {\n    this.clearClientCtrlTimer();\n\n    this._clientCtrlTimer = setTimeout(() => this.handleClientCtrlTimeout(),\n                                       this._sessionProperties.transportDowngradeTimeoutInMsecs);\n  }\n\n  /**\n   * @private\n   */\n  setConnectTimer() {\n    this.clearConnectTimer();\n    // The hosts lists provides the wait time for inter-host timeouts.\n    // This timeout is for the entire list.\n    this._connectTimer = setTimeout(() => this.handleConnectTimeout(),\n                                    this._sessionProperties.connectTimeoutInMsecs);\n  }\n\n  /**\n   * Sets the error exit information for the FSM.\n   *\n   * This applies key-value pairs from properties to the current error object,\n   * but does not allow overwriting and does not allow assignment of null or undefined values.\n   *\n   * Only the following fields are relevant, any other fields transferred to currentError by this\n   * method are eventually ignored:\n   *    * eventText\n   *    * responseCode\n   *    * errorSubcode\n   *    * eventReason\n   *\n   * See SessionConnecting exitPoint 'errorExit'. This is the only place the information in\n   * currentError is extracted.\n   *\n   * Could be implemented as `\n   * this._currentError = Object.assign({}, filter(properties), this._currentError)\n   * `\n   * where `filter` is a key-value filter that works as described above.\n   *\n   * @param {Object} source An object with properties to be applied\n   */\n  setCurrentError(source) {\n    const target = this._currentError || {};\n    const { LOG_TRACE } = this.logger;\n    Object.keys(source).forEach((key) => {\n      if (source[key] === null || source[key] === undefined) return false;\n      if (target[key] !== null && target[key] !== undefined) {\n        LOG_TRACE(`Attempt to overwrite property {key=${key}, current value=${target[key]}, incoming value=${source[key]}}`);\n        return false;\n      }\n      target[key] = source[key];\n      return true;\n    });\n    this._currentError = target;\n  }\n\n\n  /**\n   * Send a subscribe or unsubscribe request on behalf of the API.\n   * @param {Destination} subject The target for the update\n   * @param {Boolean} requestConfirmation Request a success message if true\n   * @param {String} correlationKey The correlation key for the request\n   * @param {Number} requestTimeout The timeout in milliseconds\n   * @param {SessionRequestType} requestType The request type\n   * @param {function} respRecvdCallback The callback on response\n   * @returns {TransportReturnCode} The RC from the transport\n   * @private\n   */\n  subscriptionUpdate(subject,\n                     requestConfirmation,\n                     correlationKey,\n                     requestTimeout,\n                     requestType,\n                     respRecvdCallback) {\n    //check topic supported\n    const error = this.checkSessionDestinationCapability(subject);\n    if (error) {\n      throw error;\n    }\n    const timeoutMsg =\n      SubscriptionUpdateTimeoutMessages[requestType] ||\n      SubscriptionUpdateTimeoutMessages.default;\n    const isSMP = (requestType !== SessionRequestType.REMOVE_DTE_SUBSCRIPTION);\n    const add = (requestType === SessionRequestType.ADD_SUBSCRIPTION ||\n      requestType === SessionRequestType.ADD_P2PINBOX);\n    const correlationTag = this.getCorrelationTag();\n\n    const generateMessage = isSMP\n      ? SMFLib.SMPMessage.getSubscriptionMessage\n      : SMFLib.AdProtocolMessage.getDTEUnsubscribeMessage;\n    const msg = generateMessage(correlationTag,\n                                subject,\n                                add,\n                                requestConfirmation);\n    const returnCode = this.send(msg);\n    if (returnCode !== TransportLib.TransportReturnCode.OK) {\n      return returnCode;\n    }\n\n    if (requestConfirmation) {\n      this.enqueueOutstandingCorrelatedReq(\n        correlationTag,\n        () => this.handleApiSubscriptionTimeout(correlationTag,\n                                                timeoutMsg),\n        requestTimeout || this._sessionProperties.readTimeoutInMsecs,\n        correlationKey,\n        respRecvdCallback);\n    }\n    if (requestType === SessionRequestType.ADD_SUBSCRIPTION &&\n      this._sessionProperties.reapplySubscriptions) {\n      this.addToSubscriptionCache(subject);\n    } else if (requestType === SessionRequestType.REMOVE_SUBSCRIPTION &&\n      this._sessionProperties.reapplySubscriptions) {\n      this.removeFromSubscriptionCache(subject);\n    }\n    return returnCode;\n  }\n\n  /**\n   * Send a queue subscribe or unsubscribe request.\n   * @param {Destination} subject The target for the update\n   * @param {Destination} queue The queue where the subscription is added/removed\n   * @param {Number} requestTimeout The timeout in milliseconds\n   * @param {Boolean} add (if true) or remove (if false).\n   * @param {function} respRecvdCallback The callback on response\n   * @returns {TransportReturnCode} The RC from the transport\n   * @private\n   */\n  queueSubscriptionUpdate(subject,\n                          queue,\n                          requestTimeout,\n                          add,\n                          respRecvdCallback) {\n    const timeoutMsg =\n      add ? SubscriptionUpdateTimeoutMessages[SessionRequestType.ADD_SUBSCRIPTION] :\n      SubscriptionUpdateTimeoutMessages[SessionRequestType.REMOVE_SUBSCRIPTION];\n    const correlationTag = this.getCorrelationTag();\n\n    const msg = SMFLib.SMPMessage.getQueueSubscriptionMessage(\n      correlationTag,\n      subject,\n      queue,\n      add);\n    const returnCode = this.send(msg);\n    if (returnCode !== TransportLib.TransportReturnCode.OK) {\n      //TODO: act on this.\n      // (throw.)\n      return returnCode;\n    }\n\n    this.enqueueOutstandingCorrelatedReq(\n      correlationTag,\n      () => {\n        const origReq = this._correlatedReqs[correlationTag];\n        //TODO maybe just use the cancel method instead (which returns the original request)\n        this.handleApiSubscriptionTimeout(correlationTag,\n                                          timeoutMsg);\n        respRecvdCallback(null, origReq);\n      },\n      requestTimeout || this._sessionProperties.readTimeoutInMsecs,\n      null, // no need for session machinery to track flow correlationKey.\n      respRecvdCallback);\n    return returnCode;\n  }\n\n  /**\n   * @param {BaseMessage|Message} smfMessage The message received\n   * @param {Stats} [target] The statistics target to update, default is session stats\n   * @private\n   */\n  updateRxStats(smfMessage, target = this._sessionStatistics) {\n    if (!target) {\n      return;\n    }\n    const smfHeader = smfMessage.smfHeader;\n    if (!smfHeader) {\n      return;\n    }\n    const deliveryMode = smfHeader.pm_deliverymode || 0;\n    const msgStatKey = STAT_RX_BYMODE_MSGS[deliveryMode];\n    const bytesStatKey = STAT_RX_BYMODE_BYTES[deliveryMode];\n    const msgLength = smfHeader.messageLength;\n\n    switch (smfHeader.smf_protocol) {\n      case SMFLib.SMFProtocol.TRMSG:\n        if (smfHeader.pm_respcode === 0) {\n          target.incStat(StatType.RX_TOTAL_DATA_MSGS);\n          target.incStat(msgStatKey);\n          target.incStat(StatType.RX_TOTAL_DATA_BYTES, msgLength);\n          target.incStat(bytesStatKey, msgLength);\n          if (smfHeader.smf_di) {\n            target.incStat(StatType.RX_DISCARD_MSG_INDICATION);\n          }\n        }\n        break;\n      case SMFLib.SMFProtocol.CLIENTCTRL:\n      case SMFLib.SMFProtocol.SMP:\n      case SMFLib.SMFProtocol.KEEPALIVE:\n      case SMFLib.SMFProtocol.KEEPALIVEV2:\n      case SMFLib.SMFProtocol.ADCTRL:\n        target.incStat(StatType.RX_CONTROL_MSGS);\n        target.incStat(StatType.RX_CONTROL_BYTES, msgLength);\n        break;\n      default:\n    }\n  }\n\n  /**\n  * @param {BaseMessage|Message} smfMessage The message sent\n  * @param {Stats} [target] The statistics target to update, default is session stats\n  * @private\n  */\n  updateTxStats(smfMessage, target = this._sessionStatistics) {\n    if (!target) {\n      return;\n    }\n    if (smfMessage.getReplyTo !== undefined && smfMessage.getReplyTo()) {\n      // update stats\n      target.incStat(StatType.TX_REQUEST_SENT);\n    }\n    const smfHeader = smfMessage.smfHeader;\n    if (!smfHeader) {\n      return;\n    }\n\n    const deliveryMode = smfHeader.pm_deliverymode || 0;\n    let msgStatKey = STAT_TX_BYMODE_MSGS[deliveryMode];\n    let bytesStatKey = STAT_TX_BYMODE_BYTES[deliveryMode];\n    //\n    // If this is a Guaranteed Message we may need to further refine the stats by the redelivered\n    // status\n    if (deliveryMode !== MessageDeliveryModeType.DIRECT) {\n      if (smfMessage.isRedelivered()) {\n        msgStatKey = STAT_TX_BYMODE_REDELIVERED[deliveryMode];\n        bytesStatKey = STAT_TX_BYMODE_BYTES_REDELIVERED[deliveryMode];\n      }\n    }\n    const msgLength = smfHeader.messageLength;\n\n    switch (smfHeader.smf_protocol) {\n      case SMFLib.SMFProtocol.TRMSG:\n        target.incStat(msgStatKey);\n        target.incStat(bytesStatKey, msgLength);\n        break;\n      case SMFLib.SMFProtocol.CLIENTCTRL:\n      case SMFLib.SMFProtocol.SMP:\n      case SMFLib.SMFProtocol.KEEPALIVE:\n      case SMFLib.SMFProtocol.KEEPALIVEV2:\n      case SMFLib.SMFProtocol.ADCTRL:\n        target.incStat(StatType.TX_CONTROL_MSGS);\n        target.incStat(StatType.TX_CONTROL_BYTES, msgLength);\n        break;\n      default:\n    }\n  }\n\n  /**\n   * @param {ClientCtrlMessage} clientCtrlRespMsg The client control message with props\n   * @private\n   */\n  updateReadonlySessionProps(clientCtrlRespMsg) {\n    const props = this._sessionProperties; // Modify session properties in place\n\n    props._setVpnNameInUse(clientCtrlRespMsg.getVpnNameInUseValue() || '');\n    const oldVirtualRouterName = props.virtualRouterName;\n    const newVirtualRouterName = clientCtrlRespMsg.getVridInUseValue() || '';\n    props._setVirtualRouterName(newVirtualRouterName);\n    if (oldVirtualRouterName !== '' && oldVirtualRouterName !== newVirtualRouterName) {\n      this.handleVirtualRouterNameChange(oldVirtualRouterName, newVirtualRouterName);\n    }\n\n    // The Solace Message Router login response should always contain a P2P topic for this client\n    // name. If it doesn't that's an error (and we store \"\").\n    props._setP2pInboxBase(clientCtrlRespMsg.getP2PTopicValue() || '');\n    props._setP2pInboxInUse(P2PUtil.getP2PInboxTopic(props.p2pInboxBase));\n    this._session.updateCapabilities(clientCtrlRespMsg.getRouterCapabilities());\n\n    // Create and cache a guard for GM sending.\n    const gmCap = this._session._getCapability(CapabilityType.GUARANTEED_MESSAGE_PUBLISH);\n    this._gmSendDisallowed = (typeof gmCap === 'boolean' && !gmCap)\n      ? () => {\n        throw new OperationError(\n        'Sending guaranteed message is not allowed by router for this client',\n        ErrorSubcode.INVALID_OPERATION,\n        null);\n      }\n      : null;\n  }\n\n  handleVirtualRouterNameChange(oldName, newName) {\n    if (this._consumers) {\n      this._consumers.flows.forEach(consumer => consumer.onVRNChanged());\n      this._consumers.reconnectingFlows.forEach(consumer => consumer.onVRNChanged());\n    }\n    this.emitSessionEvent(\n      SessionEvent.build(SessionEventCode.VIRTUALROUTER_NAME_CHANGED,\n                         `Virtual router name is changed from ${oldName} to ${newName}`,\n                         null,\n                         0,\n                         null,\n                         null));\n  }\n\n  /**\n   * @returns {String} The session's ID in hexadecimal format\n   * @private\n   */\n  get sessionIdHex() {\n    return this.sessionId && formatHexString(this.sessionId) || 'N/A';\n  }\n\n  updateTransportCompression(callback) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('updateTransportCompression called. ' +\n      `plaintextTLS: ${this._plaintextTLS} _compressedTLS: ${this._compressedTLS}`);\n    if (this._plaintextTLS) {\n      TransportLib.TransportFactory.severTls(this._transport, this._compressedTLS, callback);\n      return null;\n    }\n    if (this._compressedTLS) {\n      const newTransport = TransportLib.TransportFactory.startCompression(this._transport);\n      return newTransport;\n    }\n    // nothing to do.\n    return this._transport;\n  }\n}\n\nmodule.exports.SessionFSM = SessionFSM;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SessionOperation = {\n  CONNECT:         'CONNECT',\n  DISCONNECT:      'DISCONNECT',\n  CTRL:            'CTRL',\n  SEND:            'SEND',\n  QUERY_OPERATION: 'QUERY_OPERATION',\n};\n\nmodule.exports.SessionOperation = Enum.new(SessionOperation);\n","const PublisherLib = require('solclient-message-publisher');\nconst SessionPropertiesLib = require('./session-properties');\nconst SMFLib = require('solclient-smf');\nconst { APIPropertiesValidators, parseURL } = require('solclient-util');\nconst { AuthenticationScheme } = require('./authentication-schemes');\nconst { Check } = require('solclient-validate');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\nconst { LOG_WARN, LOG_INFO } = require('solclient-log');\nconst { SslDowngrade } = require('./ssl-downgrades');\nconst { TransportProtocol } = require('solclient-transport');\n\nconst {\n  validateInstance,\n  valArrayIsMember,\n  valArrayOfString,\n  valBoolean,\n  valLength,\n  valNotEmpty,\n  valNumber,\n  valRange,\n  valString,\n  valStringOrArray,\n} = APIPropertiesValidators;\n\nconst ALLOWED_PROTOCOLS = ['http:', 'https:', 'ws:', 'wss:', 'tcp:', 'tcps:'];\n\nfunction valClientName(typeDesc, instance, name) {\n  // valString and valLength(160) have already been called.\n  const error =\n    SMFLib.ClientCtrlMessage.validateClientName(\n      instance[name],\n      errorMessage =>\n        new OperationError(`${typeDesc} validation: Property '${name}': ${errorMessage}`,\n                           ErrorSubcode.PARAMETER_OUT_OF_RANGE));\n  if (error) {\n    throw error;\n  }\n}\n\nfunction valIsMember(typeDesc, instance, key, enumInstance, enumName, allowNull) {\n  const val = instance[key];\n  if (allowNull && val === null) return;\n  if (typeof (val) !== 'undefined' && !enumInstance.values.some(v => v === val)) {\n    throw new OperationError(`${typeDesc} validation: Property '${key\n                             }' must be a member of ${enumName}`,\n                             ErrorSubcode.PARAMETER_INVALID_TYPE);\n  }\n}\n\nfunction valSslExcludedProtocols(typeDesc, instance, name) {\n  const val = instance[name];\n  if (Check.array(val)) {\n    if (val.length > 0) {\n      const supported = SessionPropertiesLib.SessionProperties.SUPPORTED_SSL_PROTOCOLS;\n      val.forEach((protocol) => {\n        const prtcl = protocol.toLowerCase();\n        if (supported.indexOf(prtcl) < 0) {\n          throw new OperationError(`${typeDesc} validation: Property '${name\n                                   }' contains unsupported protocol: ${protocol}`,\n                                    ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n        }\n      });\n    }\n  }\n}\n\nfunction valSslCipherSuites(typeDesc, instance, name) {\n  const val = instance[name];\n  if (val && Check.string(val) && !Check.empty(val)) {\n    const ciphers = val.split(',');\n    const supported = SessionPropertiesLib.SessionProperties.SUPPORTED_CIPHER_SUITES;\n    ciphers.forEach((cipher) => {\n      if (supported.indexOf(cipher.trim()) < 0) {\n        throw new OperationError(`${typeDesc} validation: Property '${name\n                        }' contains unsupported cipher suite: '${cipher}'`,\n                        ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n      }\n    });\n  }\n}\n\n// maximum number of common names is 16\nfunction valSslTrustedCommonNameList(typeDesc, instance, name) {\n  const val = instance[name];\n  if (Check.something(val) && Check.array(val) && val.length > 16) {\n    throw new OperationError(`${typeDesc} validation: Property '${name\n                }' length exceeds limit of 16`,\n                ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n  }\n}\n\nfunction valUrlList(typeDesc, instance, name) {\n  const val = instance[name];\n  const valArray = typeof val === 'string' ? val.split(',') : val;\n  if (!Check.array(valArray)) {\n    throw new OperationError(`${typeDesc} validation: Property '${name\n                              }' not an array or comma-delimited string`,\n                              ErrorSubcode.PARAMETER_INVALID_TYPE);\n  }\n  valArray.forEach((el) => {\n    let url = null;\n    try {\n      url = parseURL(el);\n    } catch (ex) {\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                                }' contained an invalid URL: ${el}`,\n                                ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n    if (!Check.included(url.protocol, ALLOWED_PROTOCOLS)) {\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                                }' contained a URL'${url.href\n                                }' with an invalid protocol: '${url.protocol}'`,\n                                ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n  });\n}\n\nfunction isHttpTransport(transportProtocol) {\n  return (transportProtocol && (\n          transportProtocol === TransportProtocol.HTTP_BINARY_STREAMING ||\n          transportProtocol === TransportProtocol.HTTP_BINARY ||\n          transportProtocol === TransportProtocol.HTTP_BASE64));\n}\n\nfunction validatePropsSupportedByTransport(transportProtocol, nonHttpPropsSet) {\n  if (nonHttpPropsSet.length > 0 && isHttpTransport(transportProtocol)) {\n    const propNames = nonHttpPropsSet.length <= 5 ? nonHttpPropsSet : nonHttpPropsSet.slice(0, 5);\n    throw new OperationError(`SessionProperties validation: properties that are not supported by transport protocol ${\n                    transportProtocol} have been set: ${propNames}`, ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n  }\n}\n\nfunction matchUrl(instance, name, regex, all) {\n  const val = instance[name];\n  if (val instanceof Array) {\n    // host list is used, iterate to find at least one entry\n    const arrayLength = val.length;\n    for (let i = 0; i < arrayLength; i++) {\n      const currententry = val[i];\n      if (!all) {\n        if (Check.string(currententry) && currententry.match(regex)) {\n          return true;\n        }\n      } else if (all) {\n        if (!Check.string(currententry) || !currententry.match(regex)) {\n          return false;\n        }\n      }\n    }\n    if (!all) {\n      return false;\n    } else if (all) {\n      return true;\n    }\n  }\n  return (Check.string(val) && val.match(regex));\n}\n\nfunction useSsl(instance, name, all) {\n  return matchUrl(instance, name, /^(https|wss|tcps):/i, all);\n}\n\nconst SessionPropertiesValidator = {\n  validate(props) {\n    // Validation rules: same as JCSMP\n    const v = validateInstance.bind(null, 'SessionProperties', props);\n    v('url', [valNotEmpty], [valStringOrArray], [valUrlList]);\n    v('userName', [valString], [valLength, 189]);\n    v('password', [valString], [valLength, 128]);\n    v('clientName', [valString], [valLength, 160], [valClientName]);\n    v('applicationDescription', [valString], [valLength, 254]);\n    v('vpnName', [valString], [valLength, 32]);\n    v('connectTimeoutInMsecs', [valNumber], [valRange, 1, Number.MAX_VALUE]);\n    v('connectRetriesPerHost', [valNumber], [valRange, -1, Number.MAX_VALUE]);\n    v('connectRetries', [valNumber], [valRange, -1, Number.MAX_VALUE]);\n    v('reconnectRetries', [valNumber], [valRange, -1, Number.MAX_VALUE]);\n    v('reconnectRetryWaitInMsecs', [valNumber], [valRange, 0, 60000]);\n    v('readTimeoutInMsecs', [valNumber], [valRange, 1, Number.MAX_VALUE]);\n    v('sendBufferMaxSize', [valNumber], [valRange, 1, Number.MAX_VALUE]);\n    v('maxWebPayload', [valNumber], [valRange, 100, Number.MAX_VALUE]);\n    if (BUILD_ENV.TARGET_BROWSER) {\n      v('bufferedAmountQueryIntervalInMsecs', [valNumber], [valRange, 4, Number.MAX_VALUE]);\n    }\n    v('generateSendTimestamps', [valBoolean]);\n    v('generateReceiveTimestamps', [valBoolean]);\n    v('includeSenderId', [valBoolean]);\n    v('keepAliveIntervalInMsecs', [valNumber], [valRange, 0, Number.MAX_VALUE]);\n    v('keepAliveIntervalsLimit', [valNumber], [valRange, 3, Number.MAX_VALUE]);\n    v('generateSequenceNumber', [valBoolean]);\n    v('subscriberLocalPriority', [valNumber], [valRange, 1, 4]);\n    v('subscriberNetworkPriority', [valNumber], [valRange, 1, 4]);\n    v('ignoreDuplicateSubscriptionError', [valBoolean]);\n    v('ignoreSubscriptionNotFoundError', [valBoolean]);\n    v('reapplySubscriptions', [valBoolean]);\n    v('noLocal', [valBoolean]);\n    v('transportDowngradeTimeoutInMsecs', [valNumber], [valRange, 1, Number.MAX_VALUE]);\n    v('idToken', [valString]);\n    v('accessToken', [valString]);\n\n    if (props.transportProtocol && props.webTransportProtocolList) {\n      throw new OperationError(\"SessionProperties validation: Property 'transportProtocol' and \" +\n                               \"'webTransportProtocolList' cannot be set at the same time\",\n                               ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n    if (props.webTransportProtocolList !== null && props.webTransportProtocolList !== undefined) {\n      if (!Array.isArray(props.webTransportProtocolList)) {\n        throw new OperationError(\"Property 'webTransportProtocolList' must be an array if set\",\n                                 ErrorSubcode.PARAMETER_INVALID_TYPE);\n      }\n      if (props.webTransportProtocolList.length === 0) {\n        throw new OperationError(\"Property 'webTransportProtocolList' must be non-empty if set\",\n                                 ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n      }\n    }\n\n    v('authenticationScheme', [valIsMember, AuthenticationScheme, 'AuthenticationScheme', false]);\n    const useClientCert = props.authenticationScheme === AuthenticationScheme.CLIENT_CERTIFICATE;\n    if (!useSsl(props, 'url', true) && useClientCert) {\n      throw new OperationError(\"SessionProperties validation: Property 'authenticationScheme' cannot be set to client certificate \" +\n                               'for unsecured sessions', ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n    if (Check.equal(props.authenticationScheme, AuthenticationScheme.OAUTH2)) {\n      if (!useSsl(props, 'url', true)) {\n        throw new OperationError(`SessionProperties validation: Property 'authenticationScheme' ${''\n                                 }cannot be set to '${AuthenticationScheme.OAUTH2}' unless the ${''\n                                 }session property 'url' is written to use a secure ${''\n                                 }communication protocol like tcps or https.`,\n                                 ErrorSubcode.PARAMETER_CONFLICT);\n      }\n      if (Check.empty(props.idToken) && Check.empty(props.accessToken)) {\n        throw new OperationError(`SessionProperties validation: Property 'authenticationScheme' ${''\n                                 }can be set to ${''\n                                 }'${AuthenticationScheme.OAUTH2}' only if there ${''\n                                 }is an accompanying token set as a session property. The ${''\n                                 }token types that are ${''\n                                 }supported for OAuth authentication are OAuth2.0 Access ${''\n                                 }Tokens and OpenID Connect ID Tokens. To set an access token ${''\n                                 }you can use the accessToken session property. To set an id ${''\n                                 }you can use the idToken session property.`,\n                                 ErrorSubcode.PARAMETER_CONFLICT);\n      }\n    } else if (!Check.empty(props.idToken) || !Check.empty(props.accessToken)) {\n      LOG_INFO(`SessionProperties validation: Property ${''\n               }'authenticationScheme' must be set to ${''\n               }'${AuthenticationScheme.OAUTH2}'in order to use either ${''\n               } an OAUTH2 access token or an OpenID Connect ID token.`);\n    }\n\n\n    if (BUILD_ENV.TARGET_NODE) {\n      // should not happen since transportProtocol and webTransportProtocolList are not public\n      if (Check.something(props.transportProtocol) &&\n          props.transportProtocol !== TransportProtocol.WS_BINARY) {\n        throw new OperationError(\"SessionProperties validation: properties 'transportProtocol' \" +\n                                 'can only be WS_BINARY',\n                                 ErrorSubcode.PARAMETER_INVALID_TYPE);\n      }\n      if (Check.something(props.webTransportProtocolList)) {\n        if (!Check.array(props.webTransportProtocolList)) {\n          throw new OperationError('SessionProperties validation: Property ' +\n                                   \"'webTransportProtocolList' should be type Array\",\n                                   ErrorSubcode.PARAMETER_INVALID_TYPE);\n        }\n        if (props.webTransportProtocolList.length !== 1 ||\n            props.webTransportProtocolList[0] !== TransportProtocol.WS_BINARY) {\n          throw new OperationError('SessionProperties validation: properties ' +\n                                   \"'webTransportProtocolList' can only contain element WS_BINARY\",\n                                   ErrorSubcode.PARAMETER_INVALID_TYPE);\n        }\n      }\n\n      v('sslExcludedProtocols', [valArrayOfString], [valSslExcludedProtocols]);\n      v('sslCipherSuites', [valString], [valSslCipherSuites]);\n      v('sslValidateCertificate', [valBoolean]);\n\n      if (props.sslValidateCertificate || useClientCert) {\n        v('sslTrustStores', [valArrayOfString]);\n        v('sslTrustedCommonNameList', [valArrayOfString], [valSslTrustedCommonNameList]);\n      }\n\n      if (useClientCert) {\n        v('sslPfx', [valString]);\n        v('sslPfxPassword', [valString]);\n        v('sslPrivateKey', [valString]);\n        v('sslPrivateKeyPassword', [valString]);\n        v('sslCertificate', [valString]);\n        // either sslPfx or sslPrivateKey and sslCertificate must be specified,\n        // but not at the same time\n        const sslPfxSet = Check.something(props.sslPfx) && props.sslPfx.length;\n        const sslPrivateKeySet = (\n          Check.something(props.sslPrivateKey) &&\n          props.sslPrivateKey.length\n        );\n        const sslCertSet = (\n          Check.something(props.sslCertificate) &&\n          props.sslCertificate.length\n        );\n        if (!sslPfxSet && !sslPrivateKeySet && !sslCertSet) {\n          throw new OperationError('SessionProperties validation: ' +\n                                   \"Either property 'sslPfx', or 'sslPrivateKey' and 'sslCertificate' \" +\n                                   'must be set when authenticationScheme is client certificate',\n                                   ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n        }\n        if (sslPfxSet && (sslPrivateKeySet || sslCertSet)) {\n          throw new OperationError('SessionProperties validation: ' +\n                                   \"Property 'sslPfx' can only be set when 'sslPrivateKey' and 'sslCertificate' \" +\n                                   'are not set',\n                                   ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n        }\n        if ((sslPrivateKeySet && !sslCertSet) || (!sslPrivateKeySet && sslCertSet)) {\n          throw new OperationError('SessionProperties validation: ' +\n                                   \"Property 'sslPrivateKey' and 'sslCertificate' \" +\n                                   'must be set at the same time',\n                                   ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n        }\n      }\n\n      v('compressionLevel', [valNumber], [valRange, 0, 9]);\n      // Compression and web protocols do not mix.\n      if (props.compressionLevel > 0) {\n        if (props.url instanceof Array) {\n          const allTcp = props.url.every(url => Check.string(url) && url.match(/tcps?:/i));\n          if (!allTcp) {\n            throw new OperationError('SessionProperties validation: Property ' +\n                                     \"'compressionLevel' is non-zero, \" +\n                                     'but not all URLs in the host list ' +\n                                     'support compression. (tcp:// or tcps:// expected)',\n                                     ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n          }\n        } else if (Check.string(props.url)) {\n          if (!props.url.match(/tcps?:/i)) {\n            throw new OperationError('SessionProperties validation: Property ' +\n                                     \"'compressionLevel' is non-zero, \" +\n                                     'but the url does not ' +\n                                     'support compression. (tcp:// or tcps:// expected)',\n                                     ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n          }\n        } else {\n          throw new OperationError('SessionProperties validation: Property' +\n                                   \"'url' must be string or array of strings.\" +\n                                   ` instead got ${props.url} ` +\n                                   `of type ${typeof props.url}`,\n                                    ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n        }\n      }\n\n      v('sslConnectionDowngradeTo', [valIsMember, SslDowngrade, 'SslDowngrade', false]);\n    }\n    v('transportProtocol', [valIsMember, TransportProtocol, 'TransportProtocol', true]);\n    v('webTransportProtocolList',\n      [valArrayIsMember, TransportProtocol, 'TransportProtocol',\n        true, false, false]);\n\n    validatePropsSupportedByTransport(props.transportProtocol,\n                                      props.nonHTTPTransportPropsSet);\n\n    if (props.publisherProperties) {\n      PublisherLib.MessagePublisherPropertiesValidator.validate(props.publisherProperties);\n    }\n\n    // Non-errors\n\n    const recommendedMin = props.defaultConnectTimeoutInMsecs;\n    const connectTimeout = props.connectTimeoutInMsecs;\n    const transportCount = props.webTransportProtocolList\n      ? props.webTransportProtocolList.length\n      : 1;\n    if (transportCount > 1 && connectTimeout < recommendedMin) {\n      LOG_WARN(\n        `Connect timeout of ${connectTimeout} msecs is less than default and recommended ` +\n        `minimum of ${recommendedMin} msecs for current transport selection. Transport ` +\n        'downgrades may not complete.');\n    }\n  },\n};\n\nmodule.exports.SessionPropertiesValidator = SessionPropertiesValidator;\n\n","const NodeSslConstants = require('constants');\nconst PublisherLib = require('solclient-message-publisher');\nconst { APIProperties } = require('solclient-util');\nconst { AuthenticationScheme } = require('./authentication-schemes');\nconst { Check } = require('solclient-validate');\nconst { LOG_WARN } = require('solclient-log');\nconst { SslDowngrade } = require('./ssl-downgrades');\n\nfunction makeDefaults() {\n  // Defer binding. Publisher constructor may rely on profile.\n  const { MessagePublisherProperties } = PublisherLib;\n  return {\n    _vpnNameInUse:        '',\n    _virtualRouterName:   '',\n    _p2pInboxInUse:       '',\n    _p2pInboxBase:        '',\n    _userIdentification:  '',\n    _tpProtocolInUse:     null,\n    _tpContentType:       'text/plain',\n    _publisherProperties: new MessagePublisherProperties(),\n  };\n}\n\nconst DEFAULT_CIPHER_SUITES = BUILD_ENV.TARGET_NODE ? [\n  'ECDHE-RSA-AES256-GCM-SHA384',\n  'ECDHE-RSA-AES256-SHA384',\n  'ECDHE-RSA-AES256-SHA',\n  'AES256-GCM-SHA384',\n  'AES256-SHA256',\n  'AES256-SHA',\n  'ECDHE-RSA-DES-CBC3-SHA',\n  'DES-CBC3-SHA',\n  'ECDHE-RSA-AES128-GCM-SHA256',\n  'ECDHE-RSA-AES128-SHA256',\n  'ECDHE-RSA-AES128-SHA',\n  'AES128-GCM-SHA256',\n  'AES128-SHA256',\n  'AES128-SHA',\n].join(',') : null;\n\nconst SUPPORTED_CIPHER_SUITES = BUILD_ENV.TARGET_NODE ? [\n  'AES128-GCM-SHA256',\n  'AES128-SHA',\n  'AES128-SHA256',\n  'AES256-GCM-SHA384',\n  'AES256-SHA',\n  'AES256-SHA256',\n  'DES-CBC3-SHA',\n  'ECDHE-RSA-AES128-GCM-SHA256',\n  'ECDHE-RSA-AES128-SHA',\n  'ECDHE-RSA-AES128-SHA256',\n  'ECDHE-RSA-AES256-GCM-SHA384',\n  'ECDHE-RSA-AES256-SHA',\n  'ECDHE-RSA-AES256-SHA384',\n  'ECDHE-RSA-DES-CBC3-SHA',\n] : null;\n\nconst SUPPORTED_SSL_PROTOCOLS = BUILD_ENV.TARGET_NODE\n? [\n  'tlsv1',\n  'tlsv1.1',\n  'tlsv1.2',\n]\n: null;\n\n/**\n * @lends SessionProperties\n *\n */\nclass SessionPropertiesBrowser extends APIProperties {\n  /**\n   * This property is deprecated.  It is recommended to use\n   * {@link solace.SessionProperties#webTransportProtocolList} instead, which explicitly lists all\n   * web transport protocols that may be used when establishing a session.\n   *\n   * This property specifies the web transport protocol that will initially be selected by the\n   * session for its connection attempt. If this protocol fails, the session will attempt other\n   * protocols in accordance with its transport protocol connect policy.\n   *\n   * If {@link solace.FactoryProfile#cometEnabled} is `true`, the selection of\n   * any {@link solace.TransportProtocol} will result in the inclusion of\n   * fallback protocols in {@link solace.SessionProperties#webTransportProtocolList}.\n   * This makes the session incompatible with Guaranteed Messaging.\n   *\n   * To create a Guaranteed Messaging compatible session with\n   * {@link solace.FactoryProfile#cometEnabled} set to `true`, ensure the session's\n   * {@link solace.SessionProperties#webTransportProtocoList} is set to only\n   * {@link solace.TransportProtocol.WS_BINARY}.\n   *\n   *  * Mutually exclusive to property webTransportProtocolList\n   *\n   * @name solace.SessionProperties#transportProtocol\n   * @type {solace.TransportProtocol}\n   * @default null\n   * @deprecated\n   * @target browser\n   */\n  get transportProtocol() {\n    return Check.nothing(this._tpProtocol) ? null : this._tpProtocol;\n  }\n  set transportProtocol(newValue) {\n    this._tpProtocol = newValue;\n  }\n\n\n  /**\n   * @name solace.SessionProperties#transportDowngradeTimeoutInMsecs\n   * @type {Number}\n   * @description The timeout, in milliseconds, that must elapse before the session will abandon a\n   * connection attempt with the current transport protocol if no response is received, and begin\n   * a new connection attempt with a downgraded transport protocol. If no remaining downgrades\n   * exist, the session will continue the current connection attempt until the connection timeout\n   * expires. Note that the WS_BINARY transport will also attempt a downgrade if the underlying\n   * WebSocket fails to connect before this period elapses.\n   *  * The valid range is > 0.\n   * @default 3000\n   * @target browser\n   */\n  get transportDowngradeTimeoutInMsecs() {\n    return Check.nothing(this._tpDowngradeTimeout) ? 3000 : this._tpDowngradeTimeout;\n  }\n  set transportDowngradeTimeoutInMsecs(newValue) {\n    this._tpDowngradeTimeout = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#webTransportProtocolList\n   * @type {Array.<solace.TransportProtocol>}\n   * @description The user provided web transport protocol list indicating the initial protocol\n   * to be used by the session for its connection attempt, and the protocols to try\n   * subsequently if the attempt fails.\n   *  * Mutually exclusive to property transportProtocol\n   * @default null\n   * @target browser\n   */\n  get webTransportProtocolList() {\n    return Check.nothing(this._transportProtocolList)\n             ? null\n             : this._transportProtocolList;\n  }\n  set webTransportProtocolList(newValue) {\n    this._transportProtocolList = newValue;\n  }\n\n  /**\n   * @private\n   * @name SessionProperties#bufferedAmountQueryIntervalInMsecs\n   * @type {Number}\n   * @description When WebSocket transport protocol is used, SolClient uses this property\n   * and {@link solace.SessionProperties.maxWebPayload} to throttle the publishing rate in order to\n   * avoid network saturation.\n   *  * The valid range is >=4.\n   * @default 100\n   */\n  get bufferedAmountQueryIntervalInMsecs() {\n    return Check.nothing(this._bufferedAmountQueryInterval)\n    ? 100\n    : this._bufferedAmountQueryInterval;\n  }\n  set bufferedAmountQueryIntervalInMsecs(newValue) {\n    this._bufferedAmountQueryInterval = newValue;\n  }\n\n\n  /**\n   *\n   * @name solace.SessionProperties#transportProtocolInUse\n   * @type {String}\n   * @description This property is deprecated.\n   * Use {@link solace.SessionProperties#webTransportProtocolInUse} instead.\n   * @default null\n   * @readonly\n   * @target browser\n   * @deprecated\n   */\n  get transportProtocolInUse() {\n    return this._tpProtocolInUse || null;\n  }\n  _setTransportProtocolInUse(value) {\n    this._tpProtocolInUse = value;\n  }\n\n  /**\n   *\n   * @name solace.SessionProperties#webTransportProtocolInUse\n   * @type {String}\n   * @description A read-only property about the web transport protocol that is currently being\n   * used by the session for its current connection or connection attempt. To determine which\n   * web transport protocol was successfully used by the API, interrogate this property after the\n   * session event UP_NOTICE is dispatched.\n   * @default null\n   * @readonly\n   * @target browser\n   */\n  get webTransportProtocolInUse() {\n    return this._tpProtocolInUse || null;\n  }\n  _setWebTransportProtocolInUse(value) {\n    this._tpProtocolInUse = value;\n  }\n\n  /**\n   *\n   * @name solace.SessionProperties#transportContentType\n   * @type {String}\n   * @description Transport content-type override for HTTP transports\n   * @default 'text/plain'\n   * @internal\n   */\n  get transportContentType() {\n    return this._tpContentType || 'text/plain';\n  }\n  set transportContentType(newValue) {\n    this._tpContentType = newValue;\n  }\n\n  _lendsInspect() {\n    return {\n      'bufferedAmountQueryIntervalInMsecs': this.bufferedAmountQueryIntervalInMsecs,\n      'transportContentType':               this.transportContentType,\n      'transportDowngradeTimeoutInMsecs':   this.transportDowngradeTimeoutInMsecs,\n      'transportProtocol':                  this.transportProtocol,\n      'transportProtocolInUse':             this.transportProtocolInUse,\n      'webTransportProtocolList':           this.webTransportProtocolList,\n    };\n  }\n}\n\nclass SessionPropertiesNode extends APIProperties {\n  /**\n   * @internal\n   */\n  get transportProtocol() {\n    return this._tpProtocol;\n  }\n  set transportProtocol(value) {\n    this._tpProtocol = value;\n  }\n\n  /**\n   * @internal\n   */\n  get webTransportProtocolList() {\n    return this._transportProtocolList;\n  }\n  set webTransportProtocolList(value) {\n    this._transportProtocolList = value;\n  }\n\n  /**\n   * @internal\n   */\n  get transportDowngradeTimeoutInMsecs() {\n    return this._tpDowngradeTimeout || 86400000; // All day\n  }\n  set transportDowngradeTimeoutInMsecs(value) {\n    this._tpDowngradeTimeout = value;\n  }\n\n  /**\n   * @internal\n   * @deprecated\n   */\n  get transportProtocolInUse() {\n    return this._tpProtocolInUse;\n  }\n  _setTransportProtocolInUse(value) {\n    this._tpProtocolInUse = value;\n  }\n\n  /**\n   * @internal\n   */\n  get webTransportProtocolInUse() {\n    return this._tpProtocolInUse;\n  }\n  _setWebTransportProtocolInUse(value) {\n    this._tpProtocolInUse = value;\n  }\n\n  /**\n   * @internal\n   */\n  get transportContentType() {\n    return this._tpContentType;\n  }\n  set transportContentType(value) {\n    this._tpContentType = value;\n  }\n\n  // TLS connection options\n\n  /**\n   * @name solace.SessionProperties#sslExcludedProtocols\n   * @type {Array.<String>}\n   * @description An array of TLS protocols to be excluded when negotiating which protocol\n   * to use.\n   *  * Allowed values are: TLSv1, TLSv1.1, TLSv1.2\n   *  * Note: when a protocol version is excluded without excluding all of its\n   *    previous protocol versions, the effect is to also exclude all subsequent\n   *    protocol versions.\n   * @default null\n   * @target node\n   */\n  get sslExcludedProtocols() {\n    return Check.nothing(this._sslExcludedProtocols)\n      ? null\n      : this._sslExcludedProtocols;\n  }\n  set sslExcludedProtocols(newValue) {\n    this._sslExcludedProtocols = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#sslCipherSuites\n   * @type {String}\n   * @description A comma separated list of cipher suites in order of preference used for TLS\n   * connections.\n   *  * Allowed values:\n   *     * AES128-GCM-SHA256\n   *     * AES128-SHA\n   *     * AES128-SHA256\n   *     * AES256-GCM-SHA384\n   *     * AES256-SHA\n   *     * AES256-SHA256\n   *     * DES-CBC3-SHA\n   *     * ECDHE-RSA-AES128-GCM-SHA256\n   *     * ECDHE-RSA-AES128-SHA\n   *     * ECDHE-RSA-AES128-SHA256\n   *     * ECDHE-RSA-AES256-GCM-SHA384\n   *     * ECDHE-RSA-AES256-SHA\n   *     * ECDHE-RSA-AES256-SHA384\n   *     * ECDHE-RSA-DES-CBC3-SHA\n   *     * RC4-SHA\n   *     * RC4-MD5\n   * @default {@link solace.SessionProperties.DEFAULT_CIPHER_SUITES}\n   * @target node\n   */\n  get sslCipherSuites() {\n    return Check.nothing(this._sslCipherSuites)\n      ? DEFAULT_CIPHER_SUITES\n      : this._sslCipherSuites;\n  }\n  set sslCipherSuites(newValue) {\n    this._sslCipherSuites = newValue;\n  }\n\n  /**\n   *\n   * @name solace.SessionProperties#sslValidateCertificate\n   * @type {Boolean}\n   * @description Whether the server certificate shall be verified against the list of\n   * certificates in the trust stores. If set to false, all certificate validation is disabled,\n   * including date, hostname and common name validation.\n   * @default true\n   * @target node\n   */\n  get sslValidateCertificate() {\n    // if the value is undefined, then use environment variable\n    if (this._sslValidateCert === undefined) return (process.env.NODE_TLS_REJECT_UNAUTHORIZED !== '0');\n    if (this._sslValidateCert === null) return true;\n    return this._sslValidateCert;\n  }\n  set sslValidateCertificate(newValue) {\n    this._sslValidateCert = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#sslTrustStores\n   * @type {Array.<String>}\n   * @description An array of file names of trusted certificates in PEM format.\n   * If not set, and {@link solace.SessionProperties#sslValidateCertificate} is set to true,\n   * the server certificate will be validated against well known \"root\" CAs.\n   *    * Mutually exclusive to sslPfx property when\n   *      {@link solace.SessionProperties#sslValidateCertificate} is set\n   * @default null\n   * @target node\n   */\n  get sslTrustStores() {\n    return Check.nothing(this._sslTrustStores)\n      ? null\n      : this._sslTrustStores;\n  }\n  set sslTrustStores(newValue) {\n    this._sslTrustStores = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#sslTrustedCommonNameList\n   * @type {Array.<String>}\n   * @description An array of acceptable common names for matching with the server certificate.\n   * If set to a non-empty array, the API will override the default hostname validation logic\n   * provided by Node.js with its own implemenation; if set to empty array, no hostname\n   * validation will be performed.\n   *    * Only relevant when {@link solace.SessionProperties#sslValidateCertificate} is set\n   *      to true\n   *    * Note that leading and trailing whitespaces are considered to be part of the common\n   *      names and are not ignored\n   * @default null\n   * @target node\n   */\n  get sslTrustedCommonNameList() {\n    return Check.nothing(this._sslTrustedCNList)\n      ? null\n      : this._sslTrustedCNList;\n  }\n  set sslTrustedCommonNameList(newValue) {\n    this._sslTrustedCNList = newValue;\n  }\n\n  // Client certificates related\n\n  /**\n   * @name solace.SessionProperties#sslPfx\n   * @type {String}\n   * @description The file name of a file containing private key, certificate and optional\n   * CA certificates of the client in PFX or PKCS12 format.\n   *    * Only relevant when\n   *      {@link solace.AuthenticationScheme.CLIENT_CERTIFICATE} is used\n   *    * Mutually exclusive to sslPrivateKey, sslCertificate and sslTrustStores properties\n   * @default \"\"\n   * @target node\n   */\n  get sslPfx() {\n    return Check.nothing(this._sslPfx)\n      ? ''\n      : this._sslPfx;\n  }\n  set sslPfx(newValue) {\n    this._sslPfx = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#sslPfxPassword\n   * @type {String}\n   * @description A string containing password for the client pfx file.\n   *    * Only relevant when\n   *      {@link solace.AuthenticationScheme.CLIENT_CERTIFICATE} is used\n   * @default empty string\n   * @target node\n   */\n  get sslPfxPassword() {\n    return Check.nothing(this._sslPfxPasswd) ? '' : this._sslPfxPasswd;\n  }\n  set sslPfxPassword(newValue) {\n    this._sslPfxPasswd = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#sslPrivateKey\n   * @type {String}\n   * @description The file name of a file containing private key of the client in PEM format.\n   *    * Only relevant when\n   *      {@link solace.AuthenticationScheme.CLIENT_CERTIFICATE} is used\n   *    * Mutually exclusive to sslPfx property\n   * @default empty string\n   * @target node\n   */\n  get sslPrivateKey() {\n    return Check.nothing(this._sslPrivateKey) ? '' : this._sslPrivateKey;\n  }\n  set sslPrivateKey(newValue) {\n    this._sslPrivateKey = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#sslPrivateKeyPassword\n   * @type {String}\n   * @description A string containg password for the client private key.\n   *    * Only relevant when\n   *      {@link solace.AuthenticationScheme.CLIENT_CERTIFICATE} is used\n   * @default empty string\n   * @target node\n   */\n  get sslPrivateKeyPassword() {\n    return Check.nothing(this._sslPrivateKeyPasswd) ? '' : this._sslPrivateKeyPasswd;\n  }\n  set sslPrivateKeyPassword(newValue) {\n    this._sslPrivateKeyPasswd = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#sslCertificate\n   * @type {String}\n   * @description The file name of a file containing certificate key of the client in PEM\n   * format.\n   *    * Only relevant when\n   *      {@link solace.AuthenticationScheme.CLIENT_CERTIFICATE} is used\n   *    * Mutually exclusive to sslPfx property\n   * @default empty string\n   * @target node\n   */\n  get sslCertificate() {\n    return Check.nothing(this._sslCertificate) ? '' : this._sslCertificate;\n  }\n  set sslCertificate(newValue) {\n    this._sslCertificate = newValue;\n  }\n\n  // TLS connection options\n\n  /**\n   * @name SessionProperties#sslProtocol\n   * @type {String}\n   * @description The SSL protocols to use.\n   *    * Allowed values are: SSLv3, TLSv1, TLSv1.1, TLSv1.2\n   * @target node\n   */\n  get sslProtocol() {\n    return this._sslProtocol;\n  }\n  set sslProtocol(newValue) {\n    this._sslProtocol = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#compressionLevel\n   * @type {Number}\n   * @description zlib compression level (1-9) or no compression (0)\n   *\n   * When this property is set to a valid, non-zero value (1-9):\n   *\n   * * tcp:// connections are established compressed.\n   * This usually requires connecting to a different tcp port on the router,\n   * 55003 by default.\n   *\n   * * tcps:// connections are established uncompressed,\n   * but then negotiate compression on login.\n   * Compression before encryption allows inference of similarities between messages\n   * from observing packet sizes on the network.\n   * This could lead to chosen Plaintext attacks.\n   * Can be combined with sslDowngradeConnectionTo for no encryption beyond authentication.\n   *\n   * * ws(s):// and http(s):// transports do not support compression and are considered invalid.\n   *\n   * @default 0\n   * @target node\n   */\n\n  get compressionLevel() {\n    return Check.nothing(this._compressionLevel) ? 0 : this._compressionLevel;\n  }\n  set compressionLevel(newValue) {\n    this._compressionLevel = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#sslConnectionDowngradeTo\n   * @type {solace.SslDowngrade}\n   * @description Disable encryption after authentication\n   *\n   * When set to {@link solace.SslDowngrade.PLAINTEXT},\n   * all message traffic beyond the initial login is unencrypted.\n   * A TLS connection is negotiated on the regular TLS port (55443 by default),\n   * TLS authentication schemes can be used, same as without this option.\n   * After a successful login however, a TLS shutdown is performed,\n   * and the same socket is then used for unencrypted message traffic.\n   *\n   * Please note this way plain text traffic passes on a port\n   * usually associated with encryption (55443 by default)\n   *\n   * This downgrade is only supported for tcps:// connections,\n   * all other URL schemes ignore this option.\n   *\n   * Can be combined with compressionLevel for\n   * non-encrypted, compressed message transfer after login.\n   *\n   * @default {@link solace.SslDowngrade.NONE}\n   * @target node\n   */\n  get sslConnectionDowngradeTo() {\n    return Check.nothing(this._sslConnectionDowngradeTo) ?\n      SslDowngrade.NONE : this._sslConnectionDowngradeTo;\n  }\n\n  set sslConnectionDowngradeTo(newValue) {\n    this._sslConnectionDowngradeTo = newValue;\n  }\n\n  _lendsInspect() {\n    return {\n      'sslExcludedProtocols':     this.sslExcludedProtocols,\n      'sslCipherSuites':          this.sslCipherSuites,\n      'sslValidateCertificate':   this.sslValidateCertificate,\n      'sslTrustStores':           this.sslTrustStores,\n      'sslTrustedCommonNameList': this.sslTrustedCommonNameList,\n      'sslPfx':                   this.sslPfx,\n      'sslPfxPassword':           this.sslPfxPassword ? '*****' : this.sslPfxPassword,\n      'sslPrivateKey':            this.sslPrivateKey,\n      'sslPrivateKeyPassword':    this.sslPrivateKeyPassword ? '*****' : this.sslPrivateKeyPassword,\n      'sslCertificate':           this.sslCertificate,\n      'sslProtocol':              this.sslProtocol,\n      'compressionLevel':         this.compressionLevel,\n      'sslConnectionDowngradeTo': this.sslConnectionDowngradeTo,\n    };\n  }\n}\n\nconst SessionPropertiesBase = BUILD_ENV.TARGET_NODE\n  ? SessionPropertiesNode\n  : SessionPropertiesBrowser;\n\n/**\n * @classdesc\n * Represents a session properties object. Passed in to\n * {@link solace.SolclientFactory.createSession} when creating a {@link solace.Session} instance.\n * @memberof solace\n * @extends APIProperties\n */\nclass SessionProperties extends SessionPropertiesBase {\n\n  /**\n   * @constructor\n   * @param {Object} options Properties to apply to the newly constructed object.\n   */\n  constructor(options) {\n    super(makeDefaults(), options);\n  }\n\n  /**\n   * The authentication scheme used when establishing the session.\n   * @name solace.SessionProperties#authenticationScheme\n   * @type {solace.AuthenticationScheme}\n   * @default {@link solace.AuthenticationScheme.BASIC}\n   */\n  get authenticationScheme() {\n    return Check.nothing(this._authScheme)\n        ? AuthenticationScheme.BASIC\n        : this._authScheme;\n  }\n  set authenticationScheme(newValue) {\n    this._authScheme = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#accessToken\n   * @type {String}\n   * @description The access token required for OAUTH2 authentication.\n   *    * This is only relevant if the\n   *    {@link solace.AuthenticationScheme.OAUTH2}\n   *    authentication scheme is being used.\n   * @default \"\"\n   */\n  get accessToken() {\n    return Check.empty(this._accessToken)\n        ? ''\n        : this._accessToken;\n  }\n\n  set accessToken(newValue) {\n    this._accessToken = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#idToken\n   * @type {String}\n   * @description The ID token required for OIDC authentication.\n   *    * This is only relevant if the\n   *    {@link solace.AuthenticationScheme.OAUTH2}\n   *    authentication scheme is being used.\n   * @default \"\"\n   */\n  get idToken() {\n    return Check.empty(this._idToken)\n        ? ''\n        : this._idToken;\n  }\n\n  set idToken(newValue) {\n    this._idToken = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#issuerIdentifier\n   * @type {String}\n   * @description The issuer identifier is optional for OAUTH2 authentication.\n   *    * This is only relevant if the\n   *    {@link solace.AuthenticationScheme.OAUTH2}\n   *    authentication scheme is being used.\n   * @default \"\"\n   */\n  get issuerIdentifier() {\n    return Check.empty(this._issuerIdentifier)\n        ? ''\n        : this._issuerIdentifier;\n  }\n\n  set issuerIdentifier(newValue) {\n    if (!Check.type(newValue, 'string')) {\n      LOG_WARN(`Failed to set issuer identifier because the pased value ${''\n                }was not of type String. The passed issuer identifier ${''\n                }must be of type String. Setting issuer identifier to ${''\n                }default value empty string.`);\n      this._issuerIdentifier = '';\n    } else if (Check.empty(newValue)) {\n      LOG_WARN(`Failed to set the issuer identifier because the passed string was empty ${''\n                }or null. The passed issuer identifier must not be empty or null. Setting ${''\n                }issuer identifier to default value empty string.`);\n    } else {\n      this._issuerIdentifier = newValue;\n    }\n  }\n\n  /**\n   * The URL or URLs of the messaging service to connect to.  The URL is typically of the form\n   * `<protocol>://<host[:port]>`, where:\n   *  * `protocol` is one of `ws`, `wss`, `http`, `https`, `tcp` or `tcps`.\n   *  (Note to developers who also use the browser variant of this SDK:\n   *  Browsers do not support the `tcp` and `tcps` protocols.)\n   *  * `host` is a hostname or IP address of the router to connect to.\n   *  * `port` is the port on which the messaging service is listening. The default is the\n   *    well-known port for the service associated with the given protocol, if any.\n   *\n   * Additionally, note:\n   *  * When an Array is provided, each element is expected to be a string of the above format.\n   *    The API will attempt to connect to these URLs in the specified order.\n   *  * Numerical IPv6 addresses must be enclosed in square brackets, e.g. tcp://[2001:db8::1]\n   * @name solace.SessionProperties#url\n   * @type {String|Array.<String>}\n   * @default \"\"\n   * @target node\n   */\n  /**\n   * The URL or URLs of the messaging service to connect to.  The URL is typically of the form\n   * `<protocol>://<host[:port]>`, where:\n   *  * `protocol` is one of `ws`, `wss`, `http`, `https'.\n   *  (Note to developers who also ise the NodeJS variant of this SDK:\n   *  NodeJS also supports the 'tcp' and 'tcps' protocols, but browsers do not.)\n   *  * `host` is a hostname or IP address of the router to connect to.\n   *  * `port` is the port on which the messaging service is listening. The default is the\n   *    well-known port for the service associated with the given protocol, if any.\n   *\n   * Additionally, note:\n   *  * When an Array is provided, each element is expected to be a string of the above format.\n   *    The API will attempt to connect to these URLs in the specified order.\n   *  * Cross-domain restrictions should be taken into consideration when deploying web\n   *    applications with messaging capabilities. See the API User Guide for more\n   *    information.\n   *  * Numerical IPv6 addresses must be enclosed in square brackets, e.g. ws://[2001:db8::1]\n   * @name solace.SessionProperties#url\n   * @type {String|Array.<String>}\n   * @default \"\"\n   * @target browser\n   */\n  get url() {\n    return Check.nothing(this._url) ? '' : this._url;\n  }\n\n  set url(newValue) {\n    this._url = newValue;\n  }\n\n  //  ======================== Credentials  ========================\n\n  /**\n   * @name solace.SessionProperties#password\n   * @type {String}\n   * @description The password required for authentication.\n   * @default \"\"\n   */\n  get password() {\n    return Check.nothing(this._password) ? '' : this._password;\n  }\n\n  set password(newValue) {\n    this._password = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#userName\n   * @type {String}\n   * @description  The client username required for authentication.\n   * @default \"\"\n   */\n  get userName() {\n    return Check.nothing(this._userName) ? '' : this._userName;\n  }\n\n  set userName(newValue) {\n    this._userName = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#clientName\n   * @type {String}\n   * @default '' (automatically generated)\n   * @description The client name that is used during login as a unique identifier for the session\n   * on the Solace Message Router.\n   *  * An empty string causes a unique client name to be generated\n   *     automatically.\n   *  * If specified, it must be a valid Topic name, and a maximum of 160 bytes in length.\n   *  * This property is also used to uniquely identify the sender in\n   *    a message's senderId field if {@link solace.SessionProperties.includeSenderId}\n   *    is set.\n   * @default \"\"\n   */\n  get clientName() {\n    return Check.nothing(this._clientName) ? '' : this._clientName;\n  }\n\n  set clientName(newValue) {\n    this._clientName = newValue;\n  }\n\n  /**\n   * A string that uniquely describes the application instance.\n   *  * If left blank, the API will generate a description string\n   *    using the current user-agent string.\n   * @default \"\"\n   * @name solace.SessionProperties#applicationDescription\n   * @type {String}\n   */\n  get applicationDescription() {\n    return Check.nothing(this._appDesc) ? '' : this._appDesc;\n  }\n  set applicationDescription(newValue) {\n    this._appDesc = newValue;\n  }\n\n  /**\n   * The Message VPN name that the client is requesting for this session.\n   * @default \"\"\n   * @name solace.SessionProperties#vpnName\n   * @type {String}\n   */\n  get vpnName() {\n    return Check.nothing(this._vpnName) ? '' : this._vpnName;\n  }\n  set vpnName(newValue) {\n    this._vpnName = newValue;\n  }\n\n  /**\n   * A read-only session property that indicates which Message\n   * VPN the session is connected to. When not connected, or when not in client mode,\n   * an empty string is returned.\n   * @default \"\"\n   * @name solace.SessionProperties#vpnNameInUse\n   * @type {String}\n   * @readonly\n   */\n  get vpnNameInUse() {\n    return Check.nothing(this._vpnNameInUse) ? '' : this._vpnNameInUse;\n  }\n  /**\n   * @private\n   * @param {String} value The vpn name currently being used.\n   */\n  _setVpnNameInUse(value) {\n    this._vpnNameInUse = value;\n  }\n\n  /**\n   * @name solace.SessionProperties#virtualRouterName\n   * @type {String}\n   * @description A read-only property that indicates the connected Solace Message Router's\n   * virtual router name.\n   * @default \"\"\n   * @readonly\n   */\n  get virtualRouterName() {\n    return Check.nothing(this._virtualRouterName) ? '' : this._virtualRouterName;\n  }\n  /**\n   * @private\n   * @param {String} value The current virtual router name.\n   */\n  _setVirtualRouterName(value) {\n    this._virtualRouterName = value;\n  }\n\n  //  ======================== Connection Strategies ========================\n  /**\n   * @name solace.SessionProperties#connectTimeoutInMsecs\n   * @type {Number}\n   * @description The timeout period (in milliseconds) for a connect operation to a given host.\n   *  If no value is provided, the default is 8000.\n   *   * The valid range is > 0.\n   * @default 8000\n   * @target node\n   */\n  /**\n   * @name solace.SessionProperties#connectTimeoutInMsecs\n   * @type {Number}\n   * @description The timeout period (in milliseconds) for a connect operation to a given host.\n   *  If no value is provided, the default is calculated as shown below.\n   *   * The valid range is > 0.\n   * @default max(8000, 1000 + webTransportProtocolList.length * transportDowngradeTimeoutInMsecs)\n   * @target browser\n   */\n  get connectTimeoutInMsecs() {\n    if (Check.nothing(this._connectTimeout)) {\n      return this.defaultConnectTimeoutInMsecs;\n    }\n    return this._connectTimeout;\n  }\n  set connectTimeoutInMsecs(newValue) {\n    this._connectTimeout = newValue;\n  }\n\n  /**\n   * @internal\n   */\n  get defaultConnectTimeoutInMsecs() {\n    const minTimeout = 8000;\n    const { webTransportProtocolList, transportDowngradeTimeoutInMsecs } = this;\n    const transportCount = webTransportProtocolList ? webTransportProtocolList.length : 1;\n    const margin = transportCount > 1 ? 1000 : 0;\n    const connectDowngradeDefault = transportCount * transportDowngradeTimeoutInMsecs + margin;\n    return Math.max(minTimeout, connectDowngradeDefault);\n  }\n\n  /**\n   * @name solace.SessionProperties#connectRetries\n   * @type {Number}\n   * @description The number of times to retry connecting during initial connection setup.\n   *\n   * When using a host list, each traversal of the list is considered a try; therefore, if\n   * `connectRetries === 2`, the host list will be traversed up to three times: once\n   * for the initial try, and twice more for the retries. Each retry begins with the first host\n   * listed. After each unsuccessful attempt to connect to a host, the API waits for the amount\n   * of time set for {@link solace.SessionProperties#reconnectRetryWaitInMsecs} before attempting\n   * another connection. The next connection attempt may be to the same host,\n   * see {@link solace.SessionProperties#connectRetriesPerHost}.\n   *\n   * If an established connection fails, the reconnection is attempted with\n   * {@link solace.SessionProperties#reconnectRetries} retries instead.\n   *\n   *  * The valid range is connectRetries >= -1.\n   *  * -1 means try to connect forever.\n   *  * 0 means no automatic connection retries; the API will try once and then give up.\n   *  * connectRetries >= 1 means reattempt connection n times.\n   * @default 20\n   */\n  get connectRetries() {\n    return Check.nothing(this._connectRetries) ? 20 : this._connectRetries;\n  }\n  set connectRetries(newValue) {\n    this._connectRetries = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#connectRetriesPerHost\n   * @type {Number}\n   * @description When using a host list, this property defines how many times to\n   * try to connect to a single host before moving to the next host in the list.\n   *\n   *  * The valid range is connectRetriesPerHost >= -1.\n   *  * -1 means attempt an infinite number of connection retries. The API will only\n   *    attempt to connect to the first host in the list.\n   *  * 0 means make a single connection attempt per host, with no retries.\n   * @default 0\n   */\n  get connectRetriesPerHost() {\n    return Check.nothing(this._connectRetriesPerHost) ? 0 : this._connectRetriesPerHost;\n  }\n  set connectRetriesPerHost(newValue) {\n    this._connectRetriesPerHost = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#reconnectRetryWaitInMsecs\n   * @type {Number}\n   * @description How much time to wait (in ms) between each attempt to connect to\n   * a host.\n   * If a connect attempt is not successful, the API waits for the amount of time\n   * specified, and then makes another attempt to connect.\n   * {@link solace.SessionProperties#connectRetriesPerHost} sets how many connection\n   * attempts will be made before moving on to the next host in the list.\n   * The valid range is >= 0 and <= 60000.\n   * @default 3000\n   */\n  get reconnectRetryWaitInMsecs() {\n    return Check.nothing(this._reconnectRetryWaitInMsecs) ? 3000 : this._reconnectRetryWaitInMsecs;\n  }\n  set reconnectRetryWaitInMsecs(newValue) {\n    this._reconnectRetryWaitInMsecs = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#reconnectRetries\n   * @type {Number}\n   * @description The number of times to retry connecting after a connected session goes down.\n   *\n   * When using a host list, each traversal of the list is considered a try; therefore, if\n   * `reconnectRetries === 2`, the host list will be traversed up to three times: once\n   * for the initial try, and twice more for the retries. Each retry begins with the first host\n   * listed. After each unsuccessful attempt to connect to a host, the API waits for the amount\n   * of time set for {@link solace.SessionProperties#reconnectRetryWaitInMsecs} before attempting\n   * another connection. The next reconnect attempt may be to the same host,\n   * see {@link solace.SessionProperties#connectRetriesPerHost}.\n   *\n   *  * The valid range is reconnectRetries >= -1.\n   *  * -1 means try to reconnect forever.\n   *  * 0 means no automatic reconnect retries; the API will try once and then give up.\n   *  * reconnectRetries >= 1 means reattempt reconnect n times.\n   * @default 20\n   */\n  get reconnectRetries() {\n    return Check.nothing(this._reconnectRetries) ? 20 : this._reconnectRetries;\n  }\n  set reconnectRetries(newValue) {\n    this._reconnectRetries = newValue;\n  }\n\n  //  ======================== message properties ========================\n  /**\n   * @name solace.SessionProperties#generateSendTimestamps\n   * @type {Boolean}\n   * @description When enabled, a send timestamp is automatically included\n   * (if not already present) in the Solace-defined fields for\n   * each message sent.\n   * @default  false\n   */\n  get generateSendTimestamps() {\n    return Check.nothing(this._genSendTimestamps) ? false : this._genSendTimestamps;\n  }\n  set generateSendTimestamps(newValue) {\n    this._genSendTimestamps = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#generateReceiveTimestamps\n   * @type {Boolean}\n   * @description When enabled, a receive timestamp is recorded for\n   * each message and passed to the session's message callback receive handler.\n   * @default  false\n   */\n  get generateReceiveTimestamps() {\n    return Check.nothing(this._genReceiveTimestamps) ? false : this._genReceiveTimestamps;\n  }\n  set generateReceiveTimestamps(newValue) {\n    this._genReceiveTimestamps = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#includeSenderId\n   * @type {Boolean}\n   * @description When enabled, a sender ID is automatically included\n   * (if not already present) in the Solace-defined fields for each message\n   * sent.\n   * @default  false\n   */\n  get includeSenderId() {\n    return Check.nothing(this._includeSenderId) ? false : this._includeSenderId;\n  }\n  set includeSenderId(newValue) {\n    this._includeSenderId = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#generateSequenceNumber\n   * @type {Boolean}\n   * @description When enabled, a sequence number is automatically\n   * included (if not already present) in the Solace-defined fields\n   * for each message sent.\n   * @default  false\n   */\n  get generateSequenceNumber() {\n    return Check.nothing(this._genSequenceNumber) ? false : this._genSequenceNumber;\n  }\n  set generateSequenceNumber(newValue) {\n    this._genSequenceNumber = newValue;\n  }\n\n  //  ======================== Keep Alive ========================\n  /**\n   * @name solace.SessionProperties#keepAliveIntervalInMsecs\n   * @type {Number}\n   * @description The amount of time (in milliseconds) to wait between sending\n   * out keep-alive messages to the Solace Message Router.\n   *  * The valid range is > 0.\n   * @default  3000\n   */\n  get keepAliveIntervalInMsecs() {\n    return Check.nothing(this._kaInterval) ? 3000 : this._kaInterval;\n  }\n  set keepAliveIntervalInMsecs(newValue) {\n    this._kaInterval = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#keepAliveIntervalsLimit\n   * @type {Number}\n   * @description The maximum number of consecutive Keep-Alive messages that\n   * can be sent without receiving a response before the session is declared down\n   * and the connection is closed by the API.\n   *  * The valid range is >= 3.\n   * @default 3\n   */\n  get keepAliveIntervalsLimit() {\n    return Check.nothing(this._kaIntervalsLimit) ? 3 : this._kaIntervalsLimit;\n  }\n  set keepAliveIntervalsLimit(newValue) {\n    this._kaIntervalsLimit = newValue;\n  }\n\n  // ======================== P2P Inbox ========================\n\n  /**\n   * @name solace.SessionProperties#p2pInboxInUse\n   * @type {String}\n   * @description A read-only string that indicates the default\n   * reply-to destination used for any request messages sent from this session.\n   * See {@link solace.Session#sendRequest}.\n   * This parameter is only valid when the session is connected.\n   * @default \"\"\n   * @readonly\n   */\n  get p2pInboxInUse() {\n    return Check.nothing(this._p2pInboxInUse) ? '' : this._p2pInboxInUse;\n  }\n  /**\n   * @private\n   * @param {String} value The current P2P subscription.\n   */\n  _setP2pInboxInUse(value) {\n    this._p2pInboxInUse = value;\n  }\n\n  /**\n   * @private\n   *\n   * @name solace.SessionProperties#p2pInboxBase\n   * @description A read-only information string that stores the P2P topic subscription\n   * obtained from the Solace Message Router.\n   * This parameter is only valid when the session is connected.\n   * @default  \"\"\n   * @readonly\n   */\n  get p2pInboxBase() {\n    return Check.nothing(this._p2pInboxBase) ? '' : this._p2pInboxBase;\n  }\n  /**\n   * @private\n   * @param {String} value The current P2P inbox root subscription. The subscription on the router\n   *   additionally contains '/>', so extra topic levels can be added to this root and messages to\n   *   those topics will be attracted with the subscription.\n   */\n  _setP2pInboxBase(value) {\n    this._p2pInboxBase = value;\n  }\n\n  /**\n   * @name solace.SessionProperties#userIdentification\n   * @type {String}\n   * @description A read-only string providing information\n   * about the application, such as the name of operating system\n   * that is running the application.\n   * @default  \"\"\n   * @readonly\n   */\n  get userIdentification() {\n    return Check.nothing(this._userIdentification) ? '' : this._userIdentification;\n  }\n  /**\n   * @private\n   * @param {String} value The current userId\n   */\n  _setUserIdentification(value) {\n    this._userIdentification = value;\n  }\n\n  // ================== Subscriptions ========================\n  /**\n   *\n   * @name solace.SessionProperties#subscriberLocalPriority\n   * @type {Number}\n   * @description Subscriber priorities are used by the Solace Message Router to distribute messages\n   * that have the {@link solace.Message#setDeliverToOne} flag set to true. These messages are sent\n   * to the subscriber with the highest priority. Subscribers have two priorities; this\n   * priority is for messages published locally.\n   *  * The valid range is 1..4\n   * @default 1\n   * @deprecated Use Shared Subscriptions instead\n   */\n  get subscriberLocalPriority() {\n    return Check.nothing(this._subLocalPriority) ? 1 : this._subLocalPriority;\n  }\n  set subscriberLocalPriority(newValue) {\n    this._subLocalPriority = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#subscriberNetworkPriority\n   * @type {Number}\n   * @description Subscriber priorities are used by the Solace Message Router to distribute messages\n   * that have the {@link solace.Message#setDeliverToOne} flag set to true. These messages are sent\n   * to the subscriber with the highest priority.\n   *\n   * Subscribers have two priorities; this priority is for messages published on Solace Message\n   * Routers other than the one that the client is connected to.\n   *  * The valid range is 1..4\n   * @default  1\n   * @deprecated Use Shared Subscriptions instead\n   */\n  get subscriberNetworkPriority() {\n    return Check.nothing(this._subNetworkPriority) ? 1 : this._subNetworkPriority;\n  }\n  set subscriberNetworkPriority(newValue) {\n    this._subNetworkPriority = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#ignoreDuplicateSubscriptionError\n   * @type {Boolean}\n   * @description Used to ignore duplicate subscription errors on subscribe.\n   * @default  true\n   */\n  get ignoreDuplicateSubscriptionError() {\n    return Check.nothing(this._ignoreDupSubError) ? true : this._ignoreDupSubError;\n  }\n  set ignoreDuplicateSubscriptionError(newValue) {\n    this._ignoreDupSubError = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#ignoreSubscriptionNotFoundError\n   * @type {Boolean}\n   * @description Used to ignore subscription not found errors on unsubscribe.\n   * @default  true\n   */\n  get ignoreSubscriptionNotFoundError() {\n    return Check.nothing(this._ignoreSubNotFoundError) ? true : this._ignoreSubNotFoundError;\n  }\n  set ignoreSubscriptionNotFoundError(newValue) {\n    this._ignoreSubNotFoundError = newValue;\n  }\n\n  /**\n   *\n   * @name solace.SessionProperties#reapplySubscriptions\n   * @type {Boolean}\n   * @description Set to 'true' to have the API remember subscriptions and reapply them upon\n   * calling {@link solace.Session#connect} on a disconnected session.\n   * @default  false\n   */\n  get reapplySubscriptions() {\n    return Check.nothing(this._reapplySubcriptions) ? false : this._reapplySubcriptions;\n  }\n  set reapplySubscriptions(newValue) {\n    this._reapplySubcriptions = newValue;\n  }\n\n  // ================== AD configuration ========================\n  /**\n   * Sets the guaranteed messaging publisher properties for the session.\n   * If the supplied value is not a {@link solace.MessagePublisherProperties},\n   * one will be constructed using the supplied value as an argument.\n   *\n   * @name solace.SessionProperties#publisherProperties\n   * @type {solace.MessagePublisherProperties|null|undefined}\n   * @default undefined\n   */\n  get publisherProperties() {\n    return this._publisherProperties;\n  }\n  set publisherProperties(val) {\n    const { MessagePublisherProperties } = PublisherLib;\n    this._publisherProperties = val instanceof MessagePublisherProperties\n      ? val\n      : new MessagePublisherProperties(val);\n  }\n\n  // ================== Transport configuration ========================\n\n  /**\n   *\n   * @name solace.SessionProperties#noLocal\n   * @type {Boolean}\n   * @description Set to 'true' to signal the Solace Message Router that messages published on the\n   * session should not be received on the same session even if the client has a subscription that\n   * matches the published topic. If this restriction is requested, and the Solace Message Router\n   * does not have No Local support, the session connect will fail.\n   * @default  false\n   */\n  get noLocal() {\n    return Check.nothing(this._noLocal) ? false : this._noLocal;\n  }\n  set noLocal(newValue) {\n    this._noLocal = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#readTimeoutInMsecs\n   * @type {Number}\n   * @description The timeout period (in milliseconds) for a reply to\n   * come back from the Solace Message Router. This timeout serves as the default\n   * request timeout for {@link solace.Session#subscribe},\n   * {@link solace.Session#unsubscribe}, {@link solace.Session#updateProperty}.\n   *  * The valid range is >= 0.\n   * @default 10000\n   */\n  get readTimeoutInMsecs() {\n    return Check.nothing(this._readTimeout) ? 10000 : this._readTimeout;\n  }\n  set readTimeoutInMsecs(newValue) {\n    this._readTimeout = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#sendBufferMaxSize\n   * @type {Number}\n   * @description The maximum buffer size for the transport session. This size must be bigger\n   * than the largest message an application intends to send on the session.\n   *\n   * The session buffer size configured using the sendBufferMaxSize\n   * session property controls SolClient buffering of transmit messages. When\n   * sending small messages, the session buffer size should be set to multiple times\n   * the typical message size to improve the performance. Regardless of the buffer\n   * size, SolClient always accepts at least one message to transmit. So even if a\n   * single message exceeds sendBufferMaxSize, it is accepted and\n   * transmitted as long as the current buffered data is zero. However, no more\n   * messages are accepted until the amount of data buffered is reduced\n   * enough to allow room below sendBufferMaxSize.\n   *  * The valid range is > 0.\n   *\n   * @default 65536 (64KB)\n   */\n  get sendBufferMaxSize() {\n    return Check.nothing(this._sendBufferMaxSize) ? (64 * 1024) : this._sendBufferMaxSize;\n  }\n  set sendBufferMaxSize(newValue) {\n    this._sendBufferMaxSize = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#assumedMaxAdSize\n   * @type {Number}\n   * @description The assumed maximum AD message payload size before the session is established.\n   * This value is irrelevant after session connection establishment,\n   * because at that point the broker-reported AD size limit takes precedence.\n   *\n   * Before the session is connected, messages with payloads larger than this number\n   * are rejected upon send().\n   * The default value of 30000000 is appropriate for appliances, whereas for VMRs it should be set to 10000000.\n   *\n   *  * The valid range is > 0.\n   *\n   * @default 30000000 \n   */\n  get assumedMaxAdSize() {\n    return Check.nothing(this._assumedMaxAdSize) ? 30000000 : this._assumedMaxAdSize;\n  }\n\n  set assumedMaxAdSize(newValue) {\n    this._assumedMaxAdSize = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#maxWebPayload\n   * @type {Number}\n   * @description The maximum payload size (in bytes) when sending data using the Web transport\n   * protocol.  Large messages may fail to be sent to the Solace Message Router when the maximum web\n   * payload is set to a small value. To avoid this, use a large maximum web payload.\n   *  * The valid range is >= 100.\n   * @default 1048576 (1MB)\n   */\n  get maxWebPayload() {\n    return Check.nothing(this._maxWebPayload) ? (1024 * 1024) : this._maxWebPayload;\n  }\n  set maxWebPayload(newValue) {\n    this._maxWebPayload = newValue;\n  }\n\n  /**\n   * @private\n   */\n  get nonHTTPTransportPropsSet() {\n      // Calculate on demand based on presence of properties.\n      // Currently not tracking this so no property names listed.\n    return [].filter(k => Check.something(this[k]));\n  }\n\n  /**\n   * @returns {String} A brief description of this object\n   * @private\n   */\n  [util_inspect_custom]() {\n    return Object.assign(this._lendsInspect(), {\n      'authenticationScheme':             AuthenticationScheme.describe(this.authenticationScheme),\n      'accessToken':                      this.accessToken ? '*****' : 'Not Set',\n      'idToken':                          this.idToken ? '*****' : 'Not Set',\n      'issuerIdentifier':                 this.issuerIdentifier ? '*****' : 'Not Set',\n      'url':                              this.url,\n      'password':                         this.password ? '*****' : this.password,\n      'userName':                         this.userName,\n      'clientName':                       this.clientName,\n      'applicationDescription':           this.applicationDescription,\n      'vpnName':                          this.vpnName,\n      'vpnNameInUse':                     this.vpnNameInUse,\n      'virtualRouterName':                this.virtualRouterName,\n      'connectTimeoutInMsecs':            this.connectTimeoutInMsecs,\n      'connectRetries':                   this.connectRetries,\n      'connectRetriesPerHost':            this.connectRetriesPerHost,\n      'reconnectRetryWaitInMsecs':        this.reconnectRetryWaitInMsecs,\n      'reconnectRetries':                 this.reconnectRetries,\n      'generateSendTimestamps':           this.generateSendTimestamps,\n      'generateReceiveTimestamps':        this.generateReceiveTimestamps,\n      'includeSenderId':                  this.includeSenderId,\n      'generateSequenceNumber':           this.generateSequenceNumber,\n      'keepAliveIntervalInMsecs':         this.keepAliveIntervalInMsecs,\n      'keepAliveIntervalsLimit':          this.keepAliveIntervalsLimit,\n      'p2pInboxInUse':                    this.p2pInboxInUse,\n      'p2pInboxBase':                     this.p2pInboxBase,\n      'userIdentification':               this.userIdentification,\n      'subscriberLocalPriority':          this.subscriberLocalPriority,\n      'subscriberNetworkPriority':        this.subscriberNetworkPriority,\n      'ignoreDuplicateSubscriptionError': this.ignoreDuplicateSubscriptionError,\n      'reapplySubscriptions':             this.reapplySubscriptions,\n      'publisherProperties':              this.publisherProperties,\n      'noLocal':                          this.noLocal,\n      'readTimeoutInMsecs':               this.readTimeoutInMsecs,\n      'sendBufferMaxSize':                this.sendBufferMaxSize,\n      'maxWebPayload':                    this.maxWebPayload,\n    });\n  }\n\n  /**\n   * @name solace.SessionProperties#toString\n   * @method\n   * @description Returns a human-readable representation of this Session, subject to change.\n   * @returns {String} A brief description of this object\n   */\n  toString() {\n    return super.toString(); // only here for the docs\n  }\n\n}\n\n// Don't try to evaluate these constants in browser mode\nif (BUILD_ENV.TARGET_NODE) {\n  /**\n   * @description The default comma separated list of cipher suites in\n   * order of preference used for SSL connections.\n   * @constant\n   * @type {String}\n   */\n  SessionProperties.DEFAULT_CIPHER_SUITES = DEFAULT_CIPHER_SUITES;\n\n  /**\n   * A list of cipher suites supported by the API when using SSL connections\n   * @constant\n   * @type {string[]}\n   * @private\n   */\n  SessionProperties.SUPPORTED_CIPHER_SUITES = SUPPORTED_CIPHER_SUITES;\n\n  /**\n   * SSL protocols supported by the API when using SSL connections\n   * @type {string[]}\n   * @private\n   */\n  SessionProperties.SUPPORTED_SSL_PROTOCOLS = SUPPORTED_SSL_PROTOCOLS;\n\n  /* eslint-disable */ // don't mangle import\n  SessionProperties.SslProtocolExcludeConstantMap = {\n    ['sslv2']:   NodeSslConstants['SSL_OP_NO_SSLv2'] || 0,\n    ['sslv3']:   NodeSslConstants['SSL_OP_NO_SSLv3'] || 0,\n    ['tlsv1']:   NodeSslConstants['SSL_OP_NO_TLSv1'] || 0,\n    ['tlsv1.1']: NodeSslConstants['SSL_OP_NO_TLSv1_1'] || 0,\n    ['tlsv1.2']: NodeSslConstants['SSL_OP_NO_TLSv1_2'] || 0,\n  };\n  /* eslint-enable */ // don't mangle import\n}\n\n\nmodule.exports.SessionProperties = SessionProperties;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SessionRequestType = {\n  ADD_SUBSCRIPTION:        0,\n  REMOVE_SUBSCRIPTION:     1,\n  ADD_P2PINBOX:            2,\n  REMOVE_P2PINBOX:         3,\n  REMOVE_DTE_SUBSCRIPTION: 100,\n};\n\nmodule.exports.SessionRequestType = Enum.new(SessionRequestType);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Internal session state\n * @enum {string}\n * @memberof solace\n * @private\n */\nconst SessionStateName = {\n  DISCONNECTED:                     'SessionDisconnected',\n  CONNECTING:                       'SessionConnecting',\n  WAITING_FOR_TRANSPORT:            'WaitingForTransport',\n  WAITING_FOR_TRANSPORT_UP:         'WaitingForTransportUp',\n  WAITING_FOR_LOGIN:                'WaitingForLogin',\n  TRANSPORT_UP:                     'SessionTransportUp',\n  FULLY_CONNECTED:                  'SessionFullyConnected',\n  SESSION_ERROR:                    'SessionError',\n  DISCONNECTING:                    'SessionDisconnecting',\n  REAPPLYING_SUBSCRIPTIONS:         'ReapplyingSubscriptions',\n  WAITING_FOR_PUBFLOW:              'WaitingForMessagePublisher',\n  DISPOSED:                         'SessionDisposed',\n  WAITING_FOR_SUBCONFIRM:           'WaitForSubConfirm',\n  WAITING_FOR_CAN_ACCEPT_DATA:      'WaitForCanAcceptData',\n  DISCONNECTING_FLOWS:              'DisconnectingFlows',\n  FLUSHING_TRANSPORT:               'FlushingTransport',\n  DESTROYING_TRANSPORT:             'DestroyingTransport',\n  RECONNECTING:                     'Reconnecting',\n  TRANSPORT_FAIL:                   'TransportFail',\n  WAITING_FOR_INTERCONNECT_TIMEOUT: 'WaitingForInterconnectTimeout',\n  WAITING_FOR_DNS:                  'WaitingForDNS',\n  WAITING_FOR_TRANSPORT_CHANGE:     'WaitingForTransportChange',\n};\n\nmodule.exports.SessionStateName = Enum.new(SessionStateName);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SessionState = {\n  /**\n   * The session is connecting.\n   */\n  CONNECTING:    1,\n  /**\n   * The session is connected.\n   */\n  CONNECTED:     2,\n  /**\n   * The session experienced an error.\n   */\n  SESSION_ERROR: 3,\n  /**\n   * The session is disconnecting.\n   */\n  DISCONNECTING: 4,\n  /**\n   * The session is disconnected.\n   */\n  DISCONNECTED:  5,\n\n};\n\nmodule.exports.SessionState = Enum.new(SessionState);\n","const DestinationLib = require('solclient-destination');\nconst MessageLib = require('solclient-message');\nconst SolclientFactoryLib = require('solclient-factory');\nconst { assert } = require('solclient-eskit');\nconst { CacheSession,\n        CACHE_REQUEST_PREFIX } = require('solclient-solcache-session');\nconst { CapabilityType } = require('./capability-types');\nconst { Check,\n        Parameter } = require('solclient-validate');\nconst { DefaultCapabilities } = require('./default-capabilities');\nconst { ErrorResponseSubcodeMapper,\n        ErrorSubcode,\n        OperationError,\n        RequestEventCode } = require('solclient-error');\nconst { EventEmitter } = require('solclient-events');\nconst { GlobalContext } = require('./global-context');\nconst { HostList } = require('./host-list');\nconst { LogFormatter } = require('solclient-log');\nconst { MessageRxCBInfo } = require('./message-rx-cb-info');\nconst { MutableSessionProperty } = require('./mutable-session-properties');\nconst { OutstandingDataRequest } = require('./outstanding-data-request');\nconst { P2PUtil } = require('./p2p-util');\nconst { QueueDescriptor,\n        QueueType } = require('solclient-queue');\nconst { SDTField,\n        SDTFieldType } = require('solclient-sdt');\nconst { SessionEvent } = require('./session-event');\nconst { SessionEventCBInfo } = require('./session-event-cb-info');\nconst { SessionEventCode } = require('./session-event-codes');\nconst { SessionEventName } = require('./session-event-names');\nconst { SessionFSM } = require('./session-fsm');\nconst { SessionFSMEvent } = require('./session-fsm-event');\nconst { SessionOperation } = require('./session-operations');\nconst { SessionProperties } = require('./session-properties');\nconst { SessionPropertiesValidator } = require('./session-properties-validator');\nconst { SessionRequestType } = require('./session-request-types');\nconst { SessionState } = require('./session-states');\nconst { SessionStateName } = require('./session-state-names');\nconst { Stats,\n        StatType } = require('solclient-stats');\nconst { StringUtils } = require('solclient-util');\nconst { TransportCapabilities,\n        TransportProtocol,\n        TransportReturnCode } = require('solclient-transport');\n\nfunction transportProtocolDefaultList() {\n  const { ProfileBinding } = SolclientFactoryLib;\n\n  if (BUILD_ENV.TARGET_NODE) {\n    return [TransportProtocol.WS_BINARY];\n  }\n\n  const result = [];\n  if (TransportCapabilities.web.webSocket()) {\n    result.push(TransportProtocol.WS_BINARY);\n  }\n  const profile = ProfileBinding.value;\n  if (profile.cometEnabled) {\n    if (TransportCapabilities.web.xhrBinary()) {\n      if (TransportCapabilities.web.streaming()) {\n        result.push(TransportProtocol.HTTP_BINARY_STREAMING);\n      }\n      result.push(TransportProtocol.HTTP_BINARY);\n    }\n    result.push(TransportProtocol.HTTP_BASE64);\n  }\n  return result;\n}\n\nfunction isValidADTransport(transportProtocol) {\n  return (transportProtocol && (\n          transportProtocol !== TransportProtocol.HTTP_BINARY_STREAMING &&\n          transportProtocol !== TransportProtocol.HTTP_BINARY &&\n          transportProtocol !== TransportProtocol.HTTP_BASE64));\n}\n\nfunction formatEventName(eventName) {\n  return `SessionEventCode.${SessionEventCode.describe(eventName)}`;\n}\n\n/**\n * @private\n */\nconst SOLCLIENT_REQUEST_PREFIX = '#REQ';\n\n/**\n * A callback that returns replies to requests sent via {@link solace.Session#sendRequest}.\n * The replyReceivedCallback <b>must</b> be provided to the API as the third argument of\n * {@link solace.Session#sendRequest}.\n * @callback\n * @function\n * @name solace.Session.replyReceivedCallback\n * @param {solace.Session} session The session object that received the reply.\n * @param {solace.Message} message The reply message received.\n * @param {Object} userObject The user object associated with the callback. 'undefined' when\n * not provided to <i>sendRequest</i>\n */\n\n/**\n * A callback that returns errors associated with requests sent via\n * {@link solace.Session#sendRequest}. The requestFailedCallback <b>must</b> be\n * provided to the API as the fourth argument of\n * {@link solace.Session#sendRequest}\n * @callback\n * @function\n * @name solace.Session.requestFailedCallback\n * @param {solace.Session} session The session object associated with the event.\n * @param {solace.RequestError} error The event associated with the failure.\n * @param {Object} userObject The user object associated with the callback. 'undefined' when\n * not provided to <i>sendRequest</i>\n */\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users.</b>\n * Applications must use {@link solace.SolclientFactory.createSession} to create a session.\n *\n * Represents a client Session.\n *\n * Session provides these major functions:\n *  * Subscriber control, such as updating subscriptions;\n *  * Publishes both Direct and Guaranteed Messages to the router;\n *  * Receives direct messages from the router.\n *\n * The Session object is an\n * {@link https://nodejs.org/api/events.html#events_class_eventemitter|EventEmitter}, and will emit\n * events with event names from {@link solace.SessionEventCode} when Session events occur.\n * Each session event can be subscribed using {@link solace.Session#on} with the corresponding\n * {@link solace.SessionEventCode}. If any of the registered event listeners throw an exception,\n * the exception will be emitted on the 'error' event.\n *\n * @fires solace.SessionEventCode#ACKNOWLEDGED_MESSAGE\n * @fires solace.SessionEventCode#CAN_ACCEPT_DATA\n * @fires solace.SessionEventCode#CONNECT_FAILED_ERROR\n * @fires solace.SessionEventCode#DISCONNECTED\n * @fires solace.SessionEventCode#DOWN_ERROR\n * @fires solace.SessionEventCode#GUARANTEED_MESSAGE_PUBLISHER_DOWN\n * @fires solace.SessionEventCode#MESSAGE\n * @fires solace.SessionEventCode#PROPERTY_UPDATE_ERROR\n * @fires solace.SessionEventCode#PROPERTY_UPDATE_OK\n * @fires solace.SessionEventCode#RECONNECTED_NOTICE\n * @fires solace.SessionEventCode#RECONNECTING_NOTICE\n * @fires solace.SessionEventCode#REJECTED_MESSAGE_ERROR\n * @fires solace.SessionEventCode#REPUBLISHING_UNACKED_MESSAGES\n * @fires solace.SessionEventCode#SUBSCRIPTION_ERROR\n * @fires solace.SessionEventCode#SUBSCRIPTION_OK\n * @fires solace.SessionEventCode#UNSUBSCRIBE_TE_TOPIC_ERROR\n * @fires solace.SessionEventCode#UNSUBSCRIBE_TE_TOPIC_OK\n * @fires solace.SessionEventCode#UP_NOTICE\n * @fires solace.SessionEventCode#VIRTUALROUTER_NAME_CHANGED\n *\n * @hideconstructor\n * @memberof solace\n */\nclass Session extends EventEmitter {\n\n  /*\n   * Applications must use {@link solace.SolclientFactory.createSession} to create a session.\n   *\n   * @param {solace.SessionProperties} properties Properties to use for constructing\n   *        the session.\n   * @param {solace.MessageRxCBInfo} [messageCallback] Message callback info. The application can\n   *    also receive message events via\n   *    `session.on(solace.SessionEventCode.MESSAGE, (message) => { ... });`\n   * @param {solace.SessionEventCBInfo} [eventCallback] Event callback info. The application can\n   *    also receive session events via\n   *    `session.on(solace.SessionEventCode.<code>, (event) => { ... });`\n   *\n   * @throws {solace.OperationError} if the parameters have an invalid type or value.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   * @private\n   * @constructor\n   */\n  constructor(properties, messageCallback, eventCallback) {\n    super({\n      emits:  SessionEventCode.values,\n      direct: SessionEventCode.MESSAGE,\n      formatEventName,\n    });\n    const self = this;\n    this.logger = new LogFormatter();\n    this.logger.formatter = function formatter(...args) {\n      return [`[session=${self._sessionFSM ? self._sessionFSM.sessionIdHex : '(N/A)'}]`, ...args];\n    };\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session constructor called.');\n    if ((properties !== undefined) && (properties !== null)) {\n      const { LOG_DEBUG } = this.logger;\n      LOG_DEBUG('Incoming session properties:\\n', properties);\n    }\n\n    // Default error handler prints the exception:\n    this.on('error', (error) => {\n      const { LOG_ERROR } = self.logger;\n      LOG_ERROR(error.info.error);\n    });\n\n    const sessionProperties = new SessionProperties(properties);\n    {\n      const { LOG_DEBUG } = this.logger;\n      LOG_DEBUG('Eventual session properties:\\n', sessionProperties);\n    }\n    // Callbacks to client application.\n    // Get/set for these is private, so they can only be changed in-API (e.g. by CacheSession)\n    // The user-supplied one cannot be changed.\n    // The configuration of the exceptions generated by these needs to match EventEmitter, so that\n    // the handleGenericErrorEvent above can behave consistently\n    this._messageCallbackInfo = this.wrapMessageCallback(messageCallback);\n    this._eventCallbackInfo = this.wrapEventCallback(eventCallback);\n\n    // client name generation is applicable\n    if (Check.empty(sessionProperties.clientName)) {\n      // Auto-gen clientName\n      sessionProperties.clientName = GlobalContext.GenerateClientName();\n    }\n\n    // generate userIdentification\n    sessionProperties._setUserIdentification(GlobalContext.GenerateUserIdentification());\n\n    // client description generation is applicable\n    if (Check.empty(sessionProperties.applicationDescription)) {\n      // Auto-gen applicationDescription\n      sessionProperties.applicationDescription = GlobalContext.GenerateClientDescription();\n    }\n\n    // Set webTransportProtocolList after validation so we're not basing it on an\n    // invalid transport selection...so we're not checking transportProtocol/\n    // webTransportProtocolList except for parameter conflict.\n\n    // Now that we have touched up the properties as much as possible, validate\n    // This also validates the subordinate MessagePublisherProperties\n    SessionPropertiesValidator.validate(sessionProperties);\n\n    // We want a protocol list, but historically we also accept a single protocol.\n    // Create a web transport protocol list from the transport protocol\n    // option if that is all that was set. (If both were set, we failed validation)\n    if (Check.nothing(sessionProperties.webTransportProtocolList)) {\n      // Create a fallback list that starts with the selected protocol.\n      // If the selected protocol is not in the fallback list, it is not\n      // a valid protocol for the platform so return an empty list.\n      const selectedProtocol = sessionProperties.transportProtocol;\n      const defaultList = transportProtocolDefaultList();\n      const sliceIndex = selectedProtocol ? defaultList.indexOf(selectedProtocol) : 0;\n      if (sliceIndex < 0) {\n        // The user explicitly selected a protocol that wasn't valid\n        throw new OperationError(`Selected transport protocol ${\n                                 TransportProtocol.describe(selectedProtocol)\n                                 } is disabled or invalid for this platform`,\n                                 ErrorSubcode.PARAMETER_CONFLICT);\n      }\n      // Slice index is valid\n      sessionProperties.webTransportProtocolList = defaultList.slice(sliceIndex);\n\n      if (sessionProperties.webTransportProtocolList.length === 0) {\n        // Even before AD restrictions, no valid protocols.\n        // User error.\n        throw new OperationError(`No usable transport protocol or fallback from ${\n          TransportProtocol.describe(selectedProtocol)}`,\n          ErrorSubcode.PARAMETER_CONFLICT);\n      }\n\n      // Check that the generated list is compatible with AD.\n      const validForAD = sessionProperties.webTransportProtocolList.filter(x =>\n        isValidADTransport(x));\n      if (validForAD.length === 0) {\n        this._adDisabledReason = 'Guaranteed messaging not compatible with any available ' +\n          `transport protocol: ${\n            sessionProperties.webTransportProtocolList.map(k =>\n              TransportProtocol.describe(k)).join(', ')}`;\n      }\n\n      // Don't fold this into the check below -- for that one, every\n      // protocol must be valid because the user explicitly requested all of them.\n      // In this case, we ensure that at least one of our generated list is valid.\n      if (sessionProperties.publisherProperties.enabled) {\n        if (this._adDisabledReason) {\n          throw new OperationError(\n            'Invalid transport protocol(s) for session with Guaranteed Messaging Publisher',\n            ErrorSubcode.PARAMETER_CONFLICT,\n            this._adDisabledReason\n          );\n        }\n        // AD was not disabled by having no protocols available\n        sessionProperties.webTransportProtocolList = validForAD;\n      }\n      // A valid protocol list is ready to use.\n    } else {\n      // User provided transport protocol list\n      // Check for parameter conflict between session and publisher\n      // Already checked these for parameter conflict; only one will be set\n      // Already checked that user list was not empty\n      const transportProtocols = sessionProperties.webTransportProtocolList;\n      const validForAD = transportProtocols.every(isValidADTransport);\n      if (!validForAD) {\n        const invalid = transportProtocols.filter(x => !isValidADTransport(x));\n        this._adDisabledReason = `Guaranteed messaging incompatible with selected transport protocols: ${\n          invalid.map(k => TransportProtocol.describe(k)).join(', ')}`;\n        if (sessionProperties.publisherProperties.enabled) {\n          throw new OperationError(\n            'Invalid transport protocol(s) for session with Guaranteed Messaging Publisher',\n            ErrorSubcode.PARAMETER_CONFLICT,\n            this._adDisabledReason\n          );\n        }\n      }\n    }\n\n\n    // Assign the final properties and start the state machine.\n    this._sessionProperties = sessionProperties;\n    this._sessionStats = new Stats();\n    this._hosts = new HostList(sessionProperties);\n    this._sessionFSM = new SessionFSM(\n      this._sessionProperties,\n      this,\n      this._sessionStats,\n      this._hosts\n    );\n    this._sessionFSM.start();\n    this._sessionFSM.createMessagePublisher();\n\n    /**\n     * The following fields are destroyed when disconnect is called\n     * and recreated when connect is called again.\n     * @private\n     */\n    this._outstandingDataReqs = {};\n    this._capabilities = DefaultCapabilities.createDefaultCapabilities(sessionProperties);\n    this._seqNum = 1;\n  }\n\n  /**\n   * Connects the session to the Solace Message Router as configured in\n   * the {@link solace.SessionProperties#url}.\n   *\n   * When the session is successfully connected to the Solace Message Router, the\n   * {@link solace.SessionEventCode#UP_NOTICE} event is emitted if a listener has been registered.\n   *\n   * If {@link solace.SessionProperties#reapplySubscriptions} is set to true, this operation\n   * re-registers previously registered subscriptions. The connected session event\n   * ({@link solace.SessionEventCode#event:UP_NOTICE}) is emitted only when all the subscriptions\n   * are successfully added to the router.\n   *\n   * If the API is unable to connect within {@link solace.SessionProperties#connectTimeoutInMsecs}\n   * or due to login failures, the session's state transitions back to 'disconnected' and an event\n   * is generated.\n   *\n   * **Note:** Before the session's state transitions to 'connected', a client\n   * application cannot use the session; any attempt to call functions will throw\n   * {@link solace.OperationError}.\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed, already connected or connecting.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the underlying transport cannot be established.\n   *   Subcode: {@link solace.ErrorSubcode.CONNECTION_ERROR}.\n   */\n  connect() {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session connect called.');\n    const result = this.allowOperation(SessionOperation.CONNECT);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n    const sEvent = new SessionFSMEvent({ name: SessionEventName.CONNECT });\n    this._sessionFSM.processEvent(sEvent);\n  }\n\n  /**\n   * @returns {Boolean} True if the session can be used to acknolwedge a message\n   * @readonly\n   * @private\n   */\n  get canAck() {\n    /*\n     * If the user wants to ack a message, it was received on a session (else ack will throw),\n     * and so we know that the session was connected at some point.\n     *\n     * If the session is in any of the following states, we know it is either connecting or\n     * connected.\n     *\n     * Since we know the session was previously connected, this implies the session is either\n     * RECONNECTING or connected.\n     *\n     * We allow acks when the session is reconnecting or connected.\n     */\n    const statesCanAck = [\n      SessionStateName.CONNECTING,\n      SessionStateName.TRANSPORT_UP,\n      SessionStateName.DISCONNECTING,\n    ];\n    // Allow ack if there is some acceptable state name such that getActiveState returns the state.\n    return statesCanAck.some(stateName => !!this._sessionFSM.getActiveState(stateName));\n  }\n\n  /**\n   * Disconnects the session. The session attempts to disconnect cleanly, concluding all operations\n   * in progress. The disconnected session event {@link solace.SessionEventCode#event:DISCONNECTED}\n   * is emitted when these operations complete and the session has completely disconnected.\n   *\n   * @throws {solace.OperationError} if the session is disposed, or has never been connected.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   */\n  disconnect() {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session disconnect called.');\n    const result = this.allowOperation(SessionOperation.DISCONNECT);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n    const sEvent = new SessionFSMEvent({ name: SessionEventName.DISCONNECT });\n    this._sessionFSM.processEvent(sEvent);\n  }\n\n  /**\n   * Release all resources associated with the session.\n   * It is recommended to call disconnect() first for proper handshake with the message-router.\n   */\n  dispose() {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session dispose called.');\n    if (this._disposed) return;\n\n    //setImmediate(() => {\n    setTimeout(() => {\n      this._sessionFSM.processEvent(\n        new SessionFSMEvent({ name: SessionEventName.DISPOSE })\n      ); // yield for disconnect if any\n      this._sessionFSM.terminateFsm();\n      this.disableEmitter();\n      this._disposed = true;\n    }, 0);\n  }\n\n  /**\n   * Subscribe to a topic, optionally requesting a confirmation from the router.\n   *\n   * If requestConfirmation is set to true:\n   * {@link solace.SessionEventCode.SUBSCRIPTION_OK} is generated when subscription is\n   * added successfully; otherwise, session event\n   * {@link solace.SessionEventCode.SUBSCRIPTION_ERROR} is generated.\n   *\n   * If requestConfirmation is set to false, only session event\n   * {@link solace.SessionEventCode.SUBSCRIPTION_ERROR} is generated upon failure.\n   *\n   * When the application receives session event\n   * {@link solace.SessionEventCode.SUBSCRIPTION_ERROR}, it\n   * can obtain the failed topic subscription by calling\n   * {@link solace.SessionEvent#reason}.\n   * The returned string is in the format of \"Topic: <failed topic subscription>\".\n   *\n   * @param {solace.Destination} topic The topic destination subscription to add.\n   * @param {Boolean} requestConfirmation true, to request a confirmation; false otherwise.\n   * @param {Object|String|null|undefined} correlationKey If specified, and if requestConfirmation is true, this value is\n   *                                echoed in the session event within {@link SessionEvent}.\n   * @param {Number|null|undefined} requestTimeout The request timeout period (in milliseconds). If specified, this\n   *                                value overwrites readTimeoutInMsecs property in\n   *                                {@link SessionProperties}.\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed or disconnected.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the parameters have an invalid type.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   * * if the parameters have an invalid value.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_OUT_OF_RANGE}.\n   * * if the topic has invalid syntax.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_TOPIC_SYNTAX}.\n   * * if there's no space in the transport to send the request.\n   *   Subcode: {@link solace.ErrorSubcode.INSUFFICIENT_SPACE}.  See:\n   *   {@link solace.SessionEventCode#event:CAN_ACCEPT_DATA}.\n   * * if the topic is a shared subscription and the peer router does not support Shared\n   *   Subscriptions.\n   *   Subcode: {@link solace.ErrorSubcode.SHARED_SUBSCRIPTIONS_NOT_SUPPORTED}.\n   * * if the topic is a shared subscription and the client does not allowed Shared\n   *   Subscriptions.\n   *   Subcode: {@link solace.ErrorSubcode.SHARED_SUBSCRIPTIONS_NOT_ALLOWED}.\n   */\n  subscribe(topic, requestConfirmation, correlationKey, requestTimeout) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session subscribe called for topic ', (topic && topic.toString && topic.toString()));\n    const result = this.allowOperation(SessionOperation.CTRL);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n    Parameter.isInstanceOf('topic', topic, DestinationLib.Destination);\n    topic.validate();\n    if (topic.getType() !== DestinationLib.DestinationType.TOPIC) {\n      throw new OperationError(`Topic is required for subscribe; ${\n                               DestinationLib.DestinationType.describe(topic.getType())}`,\n                               ErrorSubcode.INVALID_TOPIC_SYNTAX);\n    }\n\n    Parameter.isBooleanOrNothing('requestConfirmation', requestConfirmation);\n    Parameter.isNumberOrNothing('requestTimeout', requestTimeout);\n    Parameter.isRangeCompareOrNothing('requestTimeout', requestTimeout, '>', 0);\n\n    this._sessionFSM.subscriptionUpdate(\n      topic,\n      !!requestConfirmation,\n      correlationKey,\n      requestTimeout,\n      SessionRequestType.ADD_SUBSCRIPTION,\n      (rxMsgObj, cancelledRequest) =>\n        this.handleSubscriptionUpdateResponse(rxMsgObj,\n                                              cancelledRequest,\n                                              requestConfirmation));\n  }\n\n  updateQueueSubscription(topic, queue, add, messageConsumer, callback, requestTimeout) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE(\n      'Queue subscribe called for topic ', (topic && topic.toString && topic.toString()),\n      ' for queue ', (queue && queue.toString && queue.toString()));\n\n    LOG_TRACE('queue: ', queue);\n\n    const result = this.allowOperation(SessionOperation.CTRL);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n    Parameter.isInstanceOf('topic', topic, DestinationLib.Destination);\n    topic.validate();\n    if (topic.getType() !== DestinationLib.DestinationType.TOPIC) {\n      throw new OperationError(`Topic is required for queue subscribe; ${\n                               DestinationLib.DestinationType.describe(topic.getType())}`,\n                               ErrorSubcode.INVALID_TOPIC_SYNTAX);\n    }\n    Parameter.isInstanceOf('queue', queue, DestinationLib.Destination);\n    queue.validate();\n    if ((queue.getType() !== DestinationLib.DestinationType.QUEUE) &&\n    (queue.getType() !== DestinationLib.DestinationType.TEMPORARY_QUEUE)) {\n      throw new OperationError(`Queue is required for queue subscribe; ${\n                               DestinationLib.DestinationType.describe(queue.getType())}`,\n                               ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n\n    Parameter.isNumberOrNothing('requestTimeout', requestTimeout);\n    Parameter.isRangeCompareOrNothing('requestTimeout', requestTimeout, '>', 0);\n\n    this._sessionFSM.queueSubscriptionUpdate(\n      topic,\n      queue,\n      requestTimeout,\n      add,\n      (rxMsgObj, cancelledRequest) =>\n        this.handleQueueSubscriptionUpdateResponse(\n          rxMsgObj,\n          cancelledRequest,\n          callback));\n  }\n\n  /**\n   * Unsubscribe from a topic, and optionally request a confirmation from the router.\n   *\n   * If requestConfirmation is set to true, session event\n   * {@link solace.SessionEventCode.SUBSCRIPTION_OK} is generated when subscription is removed\n   * successfully; otherwise, session event\n   * {@link solace.SessionEventCode.SUBSCRIPTION_ERROR} is generated.\n   *\n   * If requestConfirmation is set to false, only session event\n   * {@link solace.SessionEventCode.SUBSCRIPTION_ERROR} is generated upon failure.\n   *\n   * When the application receives session event\n   * {@link solace.SessionEventCode.SUBSCRIPTION_ERROR}, it\n   * can obtain the failed topic subscription by calling\n   * {@link solace.SessionEvent#reason}. The returned\n   * string is in the format \"Topic: <failed topic subscription>\".\n   *\n   * @param {solace.Destination} topic The topic destination subscription to remove.\n   * @param {Boolean} requestConfirmation true, to request a confirmation; false otherwise.\n   * @param {Object|String|null|undefined} correlationKey If <code>null</code> or undefined, a Correlation Key is not set\n   *                                in the confirmation session event.\n   * @param {Number|null|undefined} requestTimeout The request timeout period (in milliseconds). If specified, this\n   *                                value overwrites readTimeoutInMsecs property in\n   *                                {@link SessionProperties}.\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed or disconnected.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the parameters have an invalid type.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   * * if the parameters have an invalid value.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_OUT_OF_RANGE}.\n   * * if the topic has invalid syntax.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_TOPIC_SYNTAX}.\n   * * if there's no space in the transport to send the request.\n   *   Subcode: {@link solace.ErrorSubcode.INSUFFICIENT_SPACE}.  See:\n   *   {@link solace.SessionEventCode#event:CAN_ACCEPT_DATA}.\n   * * if the topic is a shared subscription and the peer router does not support Shared\n   *   Subscriptions.\n   *   Subcode: {@link solace.ErrorSubcode.SHARED_SUBSCRIPTIONS_NOT_SUPPORTED}.\n   * * if the topic is a shared subscription and the client does not allowed Shared\n   *   Subscriptions.\n   *   Subcode: {@link solace.ErrorSubcode.SHARED_SUBSCRIPTIONS_NOT_ALLOWED}.\n   */\n  unsubscribe(topic, requestConfirmation, correlationKey, requestTimeout) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session unsubscribe called for topic ', (topic && topic.toString && topic.toString()));\n    const result = this.allowOperation(SessionOperation.CTRL);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n    Parameter.isInstanceOf('topic', topic, DestinationLib.Destination);\n    topic.validate();\n    if (topic.getType() !== DestinationLib.DestinationType.TOPIC) {\n      throw new OperationError(`Topic is required for unsubscribe; ${\n                               DestinationLib.DestinationType.describe(topic.getType())}`,\n                               ErrorSubcode.INVALID_TOPIC_SYNTAX);\n    }\n\n    Parameter.isBooleanOrNothing('requestConfirmation', requestConfirmation);\n    Parameter.isNumberOrNothing('requestTimeout', requestTimeout);\n    Parameter.isRangeCompareOrNothing('requestTimeout', requestTimeout, '>', 0);\n\n    this._sessionFSM.subscriptionUpdate(\n      topic,\n      !!requestConfirmation,\n      correlationKey,\n      requestTimeout,\n      SessionRequestType.REMOVE_SUBSCRIPTION,\n      (rxMsgObj, cancelledRequest) =>\n        this.handleSubscriptionUpdateResponse(rxMsgObj,\n                                              cancelledRequest,\n                                              requestConfirmation));\n  }\n\n  /**\n   * Request that a Durable Topic Endpoint stop receiving data on a topic. Unsubscribe\n   * requests are only allowed by the router when no clients are bound to the DTE.\n   * If the unubscribe request is successful, the DTE will stop attracting messages,\n   * and all messages spooled to the DTE will be deleted.\n   *\n   * {@link solace.SessionEventCode.UNSUBSCRIBE_TE_TOPIC_OK} is generated when the\n   * subscription is removed successfully; otherwise,\n   * {@link solace.SessionEventCode.UNSUBSCRIBE_TE_TOPIC_ERROR} is generated.\n   *\n   * When the application receives session event\n   * {@link solace.SessionEventCode.UNSUBSCRIBE_TE_TOPIC_ERROR}, it\n   * can obtain the failed topic subscription by calling\n   * {@link solace.SessionEvent#reason}.\n   *\n   * @param {solace.AbstractQueueDescriptor|solace.QueueDescriptor} queueDescriptor A description\n   *  of the queue to which the topic is subscribed.\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed or disconnected.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the parameters have an invalid type.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   * * if the parameters have an invalid value.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_OUT_OF_RANGE}.\n   * * if there's no space in the transport to send the request.\n   *   Subcode: {@link solace.ErrorSubcode.INSUFFICIENT_SPACE}.  See:\n   *   {@link solace.SessionEventCode#event:CAN_ACCEPT_DATA}.\n   */\n  unsubscribeDurableTopicEndpoint(queueDescriptor) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session unsubscribeDurableTopicEndpoint called for queue descriptor ', (queueDescriptor && queueDescriptor.toString && queueDescriptor.toString()));\n    const result = this.allowOperation(SessionOperation.CTRL);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n    // emulate subscription\n    const destination = this.createDestinationFromDescriptor(\n      QueueDescriptor.createFromSpec(queueDescriptor));\n    const requestConfirmation = true;\n    this._sessionFSM.subscriptionUpdate(\n      destination,\n      requestConfirmation,\n      undefined,\n      undefined,\n      SessionRequestType.REMOVE_DTE_SUBSCRIPTION,\n      (rxMsgObj, cancelledRequest) =>\n        this.handleDTEUnsubscribeResponse(rxMsgObj,\n                                          cancelledRequest));\n  }\n\n\n  /**\n   * Modify a session property after creation of the session.\n   *\n   * This method only works for a select few properties,\n   * and updates their value on the live broker session.\n   *\n   * @param {MutableSessionProperty} mutableSessionProperty The property key to modify.\n   * @param {Object} newValue The new property value.\n   * @param {Number} requestTimeout The request timeout period (in milliseconds). If specified, it\n   *                                overwrites readTimeoutInMsecs\n   * @param {Object|String|null|undefined} correlationKey If specified, this value is echoed in the session event within\n   *                                {@link SessionEvent} property in {@link SessionProperties}\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed or disconnected.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the parameters have an invalid type.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   * * if the parameters have an invalid value.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_OUT_OF_RANGE}.\n   * * if there's no space in the transport to send the request.\n   *   Subcode: {@link solace.ErrorSubcode.INSUFFICIENT_SPACE}.  See:\n   *   {@link solace.SessionEventCode#event:CAN_ACCEPT_DATA}.\n   */\n  updateProperty(mutableSessionProperty, newValue, requestTimeout, correlationKey) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session updateProperty called: ', mutableSessionProperty, newValue);\n    const result = this.allowOperation(SessionOperation.CTRL);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n\n    const { Topic } = DestinationLib;\n\n    LOG_TRACE('Updating property ', mutableSessionProperty, newValue);\n\n    Parameter.isEnumMember('mutableSessionProperty', mutableSessionProperty, MutableSessionProperty);\n\n    Parameter.isNumberOrNothing('requestTimeout', requestTimeout);\n    Parameter.isRangeCompareOrNothing('requestTimeout', requestTimeout, '>', 0);\n\n    let sessionEvent;\n    /*\n     Response CB to the CLIENTCTRL UPDATE response\n\n     This is pretty complicated: we define the whole process in here\n     using callbacks to preserve state such as the correlationKey of the user\n     request.\n     That is, this entire multi-step process executes under the context of that one call to\n     updateProperty with a single correlationKey value.\n     */\n    const responseCallback = (respMsg) => {\n      const response = respMsg.getResponse();\n      if (response.responseCode === 200) {\n        if (mutableSessionProperty === MutableSessionProperty.CLIENT_DESCRIPTION) {\n          // update property and notify client\n          this._sessionProperties.applicationDescription = newValue;\n          sessionEvent = SessionEvent.build(SessionEventCode.PROPERTY_UPDATE_OK,\n                                            response.responseString,\n                                            response.responseCode,\n                                            0,\n                                            correlationKey,\n                                            null);\n          this.sendEvent(sessionEvent);\n        } else if (mutableSessionProperty === MutableSessionProperty.CLIENT_NAME) {\n          // replace P2P subscription: REM and ADD\n          const oldP2pTopicName = P2PUtil.getP2PTopicSubscription(\n            this._sessionProperties.p2pInboxBase);\n          const oldP2pTopic = Topic.createFromName(oldP2pTopicName);\n\n          const newP2pTopicName = P2PUtil.getP2PTopicSubscription(\n            respMsg.getP2PTopicValue());\n          const newP2pTopic = Topic.createFromName(newP2pTopicName);\n\n          const afterAddCallback = (smpResp) => {\n            const resp = smpResp.getResponse();\n            if (resp.responseCode === 200) {\n              // notify client\n              this._sessionProperties._setP2pInboxBase(respMsg.getP2PTopicValue() || '');\n              this._sessionProperties._setP2pInboxInUse(\n                P2PUtil.getP2PInboxTopic(this._sessionProperties.p2pInboxBase));\n              this._sessionProperties.clientName = newValue;\n              sessionEvent = SessionEvent.build(SessionEventCode.PROPERTY_UPDATE_OK,\n                                                resp.responseString,\n                                                resp.responseCode,\n                                                0,\n                                                correlationKey,\n                                                null);\n              this.sendEvent(sessionEvent);\n            } else {\n              const errorSubcode = ErrorResponseSubcodeMapper.getErrorSubcode(resp.responseCode,\n                                                                              resp.responseString);\n              if (errorSubcode === ErrorSubcode.SUBSCRIPTION_ALREADY_PRESENT &&\n                              this._sessionProperties.ignoreDuplicateSubscriptionError) {\n                // notify client\n                sessionEvent = SessionEvent.build(SessionEventCode.PROPERTY_UPDATE_OK,\n                                                  resp.responseString,\n                                                  resp.responseCode,\n                                                  0,\n                                                  correlationKey,\n                                                  null);\n                this.sendEvent(sessionEvent);\n              } else if (errorSubcode === ErrorSubcode.SUBSCRIPTION_ALREADY_PRESENT ||\n                         errorSubcode === ErrorSubcode.SUBSCRIPTION_ATTRIBUTES_CONFLICT ||\n                         errorSubcode === ErrorSubcode.SUBSCRIPTION_INVALID ||\n                         errorSubcode === ErrorSubcode.SUBSCRIPTION_ACL_DENIED ||\n                         errorSubcode === ErrorSubcode.SUBSCRIPTION_TOO_MANY) {\n                // notify client\n                sessionEvent = SessionEvent.build(SessionEventCode.PROPERTY_UPDATE_ERROR,\n                                                  resp.responseString,\n                                                  resp.responseCode,\n                                                  errorSubcode,\n                                                  correlationKey,\n                                                  null);\n                this.sendEvent(sessionEvent);\n              } else {\n                // notify client\n                sessionEvent = SessionEvent.build(SessionEventCode.PROPERTY_UPDATE_ERROR,\n                                                  resp.responseString,\n                                                  resp.responseCode,\n                                                  ErrorSubcode.SUBSCRIPTION_ERROR_OTHER,\n                                                  correlationKey,\n                                                  null);\n                this.sendEvent(sessionEvent);\n              }\n            }\n          };\n\n          const afterRemoveCallback = (smpResp) => {\n            const resp = smpResp.getResponse();\n            if (resp.responseCode === 200) {\n              // second add new P2P\n              this._sessionFSM.subscriptionUpdate(newP2pTopic,\n                                                  true,       // request confirm\n                                                  correlationKey,\n                                                  this._sessionProperties.readTimeoutInMsecs,\n                                                  SessionRequestType.ADD_P2PINBOX,\n                                                  afterAddCallback);\n            } else {\n              const errorSubcode = ErrorResponseSubcodeMapper.getErrorSubcode(resp.responseCode,\n                                                                              resp.responseString);\n              if (errorSubcode === ErrorSubcode.SUBSCRIPTION_NOT_FOUND &&\n                  this._sessionProperties.ignoreSubscriptionNotFoundError) {\n                // add new P2P anyway: the error is simply the old P2P\n                // was not found on remove.  It's notable though.\n                this._sessionFSM.subscriptionUpdate(newP2pTopic,\n                                                    true,       // request confirm\n                                                    correlationKey,\n                                                    this._sessionProperties.readTimeoutInMsecs,\n                                                    SessionRequestType.ADD_P2PINBOX,\n                                                    afterAddCallback);\n              } else if (errorSubcode === ErrorSubcode.SUBSCRIPTION_ATTRIBUTES_CONFLICT ||\n                         errorSubcode === ErrorSubcode.SUBSCRIPTION_INVALID ||\n                         errorSubcode === ErrorSubcode.SUBSCRIPTION_NOT_FOUND ||\n                         errorSubcode === ErrorSubcode.SUBSCRIPTION_ACL_DENIED) {\n                // notify client\n                sessionEvent = SessionEvent.build(SessionEventCode.PROPERTY_UPDATE_ERROR,\n                                                  resp.responseString,\n                                                  resp.responseCode,\n                                                  errorSubcode,\n                                                  null,\n                                                  null);\n                this.sendEvent(sessionEvent);\n              } else {\n                // notify client\n                sessionEvent = SessionEvent.build(SessionEventCode.PROPERTY_UPDATE_ERROR,\n                                                  resp.responseString,\n                                                  resp.responseCode,\n                                                  ErrorSubcode.SUBSCRIPTION_ERROR_OTHER,\n                                                  null,\n                                                  null);\n                this.sendEvent(sessionEvent);\n              }\n            }\n          };\n\n          // first remove old P2P\n          this._sessionFSM.subscriptionUpdate(oldP2pTopic,\n                                              true,       // request confirm\n                                              correlationKey,\n                                              this._sessionProperties.readTimeoutInMsecs,\n                                              SessionRequestType.REMOVE_P2PINBOX,\n                                              afterRemoveCallback);\n        }\n      } else {\n        // notify client error\n        const errorSubcode = ErrorResponseSubcodeMapper.getErrorSubcode(response.responseCode,\n                                                                        response.responseString);\n        sessionEvent = SessionEvent.build(SessionEventCode.PROPERTY_UPDATE_ERROR,\n                                          response.responseString,\n                                          response.responseCode,\n                                          errorSubcode,\n                                          correlationKey,\n                                          null);\n        this.sendEvent(sessionEvent);\n      }\n    }; // end CB (response to UPDATE request)\n\n    const returnCode = this._sessionFSM.sendUpdateProperty(mutableSessionProperty,\n                                                           newValue,\n                                                           correlationKey,\n                                                           requestTimeout,\n                                                           responseCallback);\n    if (returnCode !== TransportReturnCode.OK) {\n          // do not change session state\n\n      if (returnCode === TransportReturnCode.NO_SPACE) {\n        sessionEvent = SessionEvent.build(SessionEventCode.PROPERTY_UPDATE_ERROR,\n                                          'Property update failed - no space in transport',\n                                          null,\n                                          ErrorSubcode.INSUFFICIENT_SPACE,\n                                          null,\n                                          null);\n      } else {\n        sessionEvent = SessionEvent.build(SessionEventCode.PROPERTY_UPDATE_ERROR,\n                                          'Property update failed',\n                                          null,\n                                          ErrorSubcode.INVALID_OPERATION,\n                                          null,\n                                          null);\n      }\n      this.sendEvent(sessionEvent);\n    }\n  }\n  /**\n   * Modify (some) authentication-related session properties.\n   * The modifications take effect the next time the session connects or reconnects to the broker.\n   * There is no change to the active connection.\n   * Calling this method does not in itself trigger any kind of reconnection, reauthentication or renegotiation.\n   *\n   * **Note:** the update of \"accessToken\" and \"idToken\" properties is currently supported.\n   * Authentication Properties\n   * - accessToken to update previously set access token required for OAUTH2 authentication.\n   * - idToken to update previously set ID token required for OIDC authentication\n   * Example: updateAuthenticationOnReconnect({accessToken : my_new_token});\n   *\n   *\n   * @param {Object} authenticationProperties to be set\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed or disconnected.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the parameters have an invalid type.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   * * if the parameters have an invalid value.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_OUT_OF_RANGE}.\n   * * if unsupported properties attempted to be set.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_CONFLICT}.\n   */\n  updateAuthenticationOnReconnect(authenticationProperties) {\n    const { LOG_TRACE } = this.logger;\n    const allowedProperties = ['accessToken', 'idToken'];\n    const result = this.allowOperation(SessionOperation.QUERY_OPERATION);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n    if (!authenticationProperties || typeof authenticationProperties !== 'object') {\n      throw new OperationError('updateAuthenticationOnReconnect parameter must be a non-empty object.', ErrorSubcode.PARAMETER_INVALID_TYPE, null);\n    }\n    var key;\n    for (key in authenticationProperties) {\n      if (!allowedProperties.includes(key)) {\n        throw new OperationError('Invalid property in updateAuthenticationOnReconnect parameter.', ErrorSubcode.PARAMETER_CONFLICT, null);\n      }\n    }\n    const newProps = this.getSessionProperties();\n    Object.assign(newProps, authenticationProperties);\n    SessionPropertiesValidator.validate(newProps);\n    this._sessionProperties = newProps;\n    Object.assign(this._sessionFSM._sessionProperties, authenticationProperties);\n    LOG_TRACE('updateAuthenticationOnReconnect applied new token(s).');\n  }\n\n  /**\n   * Publish (send) a message over the session. The message is sent to its set destination.\n   *\n   * This method is used for sending both direct and Guaranteed Messages.  If the message's\n   * {@link solace.MessageDeliveryModeType} is {@link solace.MessageDeliveryModeType.DIRECT}, the\n   * message is a direct message; otherwise, it is a guaranteed message.\n   *\n   * @param {solace.Message} message The message to send. It must have a destination set.\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed or disconnected.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the parameters have an invalid type.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   * * if the message does not have a topic.\n   *   Subcode: {@link solace.ErrorSubcode.TOPIC_MISSING}.\n   * * if there's no space in the transport to send the request.\n   *   Subcode: {@link solace.ErrorSubcode.INSUFFICIENT_SPACE}.  See:\n   *   {@link solace.SessionEventCode#event:CAN_ACCEPT_DATA}.\n   * * if no Guaranteed Message Publisher is available and the message deliveryMode is\n   *   {@link solace.MessageDeliveryModeType.PERSISTENT} or\n   *   {@link solace.MessageDeliveryModeType.NON_PERSISTENT}.\n   *   Subcode: {@link solace.ErrorSubcode.GM_UNAVAILABLE}.\n   * * if the message deliveryMode is\n   *   {@link solace.MessageDeliveryModeType.PERSISTENT} or\n   *   {@link solace.MessageDeliveryModeType.NON_PERSISTENT},\n   *   and the message payload size is above the broker's limit.\n   *   Subcode: {@link solace.ErrorSubcode.MESSAGE_TOO_LARGE}.\n   * \n   */\n  send(message) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session send() called.');\n    const result = this.allowOperation(SessionOperation.SEND, message);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n    Parameter.isInstanceOf('message', message, MessageLib.Message);\n\n    // check to see if we can send variable length params to the broker\n    if (!this.isCapable(CapabilityType.VAR_LEN_EXT_PARAM)) {\n      LOG_TRACE('Broker session does not support VAR LEN SMF extended parameters');\n      // clear these message properties since var-len extended\n      // properties not supported on broker\n      message.clearExtendedVarLenParams();\n\n      // throw error if these extended var-length message properties are set\n      if(this._failOnExtendedVariableLengthProperties(message)) {\n        throw new OperationError(\n          'Broker does not support variable length SMF extended parameters',\n          ErrorSubcode.INVALID_OPERATION);\n      }\n    }\n    this.validateAndSendMessage(message);\n  }\n\n  _failOnExtendedVariableLengthProperties(message) {\n    return false; // return false since no properties for now\n  }\n\n  /**\n   * Sends a request using user-specified callback functions.\n   * <br>\n   * <strong>Note:</strong>\n   * The API sets the correlationId and replyTo fields of the message being sent;\n   * this overwrites any existing correlationId and replyTo values on the message.\n   *\n   * @param {solace.Message} message The request message to send.\n   * @param {Number} [timeout] The timeout value (in milliseconds). The minimum value is 100 msecs.\n   * @param {solace.Session.replyReceivedCallback} [replyReceivedCBFunction] The callback to notify\n   *    when a reply is received.\n   * @param {solace.Session.requestFailedCallback} [requestFailedCBFunction] The callback to notify\n   *    when the request failed.\n   * @param {Object} [userObject] An optional correlation object to use in the response callback.\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed or disconnected.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the parameters have an invalid type.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   * * if the parameters have an invalid value.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_OUT_OF_RANGE}.\n   * * if the message does not have a topic.\n   *   Subcode: {@link solace.ErrorSubcode.TOPIC_MISSING}.\n   * * if there's no space in the transport to send the request.\n   *   Subcode: {@link solace.ErrorSubcode.INSUFFICIENT_SPACE}.  See:\n   *   {@link solace.SessionEventCode#event:CAN_ACCEPT_DATA}.\n   * * if no Guaranteed Message Publisher is available and the message deliveryMode is\n   *   {@link solace.MessageDeliveryModeType.PERSISTENT} or\n   *   {@link solace.MessageDeliveryModeType.NON_PERSISTENT}.\n   *   Subcode: {@link solace.ErrorSubcode.GM_UNAVAILABLE}.\n   * * if the message deliveryMode is\n   *   {@link solace.MessageDeliveryModeType.PERSISTENT} or\n   *   {@link solace.MessageDeliveryModeType.NON_PERSISTENT},\n   *   and the message payload size is above the broker's limit.\n   *   Subcode: {@link solace.ErrorSubcode.MESSAGE_TOO_LARGE}.\n   */\n  sendRequest(message,\n              timeout = undefined,\n              replyReceivedCBFunction = undefined,\n              requestFailedCBFunction = undefined,\n              userObject = undefined\n              ) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session sendRequest called.');\n    const result = this.allowOperation(SessionOperation.SEND, message);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n    Parameter.isInstanceOf('message', message, MessageLib.Message);\n    Parameter.isNumberOrNothing('timeout', timeout);\n    Parameter.isRangeCompareOrNothing('timeout', timeout, '>=', 100);\n    Parameter.isFunctionOrNothing('replyReceivedCBFunction', replyReceivedCBFunction);\n    Parameter.isFunctionOrNothing('requestFailedCBFunction', requestFailedCBFunction);\n\n    // set correlationId and replyTo fields if not set by the application\n    const correlationId = message.getCorrelationId();\n    if (correlationId === null || correlationId === undefined) {\n      message.setCorrelationId(SOLCLIENT_REQUEST_PREFIX + GlobalContext.NextId());\n    }\n    const replyTo = message.getReplyTo();\n    if (replyTo === null || replyTo === undefined) {\n      const replyToTopic = DestinationLib.Topic.createFromName(\n        this._sessionProperties.p2pInboxInUse);\n      message.setReplyTo(replyToTopic);\n    }\n\n    this.validateAndSendMessage(message);\n\n      // enqueue request\n    this.enqueueOutstandingDataReq(message.getCorrelationId(),\n                                   requestFailedCBFunction,\n                                   timeout,\n                                   replyReceivedCBFunction,\n                                   userObject);\n  }\n\n  /**\n   * Sends a reply message to the destination specified in messageToReplyTo.\n   *\n   * If `messageToReplyTo` is non-null:\n   *  * {@link solace.Message#getReplyTo} is copied from `messageToReplyTo` to\n   *    {@link solace.Message#setDestination} on `replyMessage`, unless `replyTo` is null.\n   *  * {@link solace.Message#setCorrelationId} is copied from `messageToReplyTo` to\n   *    {@link solace.Message#setCorrelationId} on `replyMessage`, unless `correlationId` is null.\n   *\n   * If `messageToReplyTo` is null, the application is responsible for setting\n   * the `destination` and `correlationId` on the `replyMessage`.\n   *\n   * @param {solace.Message} messageToReplyTo The message to which a reply will be sent.\n   * @param {solace.Message} replyMessage The reply to send.\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed or disconnected.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the parameters have an invalid type.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   * * if the parameters have an invalid value.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_OUT_OF_RANGE}.\n   * * if the message does not have a topic.\n   *   Subcode: {@link solace.ErrorSubcode.TOPIC_MISSING}.\n   * * if there's no space in the transport to send the request.\n   *   Subcode: {@link solace.ErrorSubcode.INSUFFICIENT_SPACE}.  See:\n   *   {@link solace.SessionEventCode#event:CAN_ACCEPT_DATA}.\n   * * if no Guaranteed Message Publisher is available and the message deliveryMode is\n   *   {@link solace.MessageDeliveryModeType.PERSISTENT} or\n   *   {@link solace.MessageDeliveryModeType.NON_PERSISTENT}.\n   *   Subcode: {@link solace.ErrorSubcode.GM_UNAVAILABLE}.\n   * * if the message deliveryMode is\n   *   {@link solace.MessageDeliveryModeType.PERSISTENT} or\n   *   {@link solace.MessageDeliveryModeType.NON_PERSISTENT},\n   *   and the message payload size is above the broker's limit.\n   *   Subcode: {@link solace.ErrorSubcode.MESSAGE_TOO_LARGE}.\n   */\n  sendReply(messageToReplyTo, replyMessage) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session sendReply called.');\n    const result = this.allowOperation(SessionOperation.SEND, replyMessage);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n\n    Parameter.isInstanceOfOrNothing('messageToReplyTo', messageToReplyTo, MessageLib.Message);\n    Parameter.isInstanceOf('replyMessage', replyMessage, MessageLib.Message);\n\n    replyMessage.setAsReplyMessage(true);\n    if (messageToReplyTo) {\n      replyMessage.setCorrelationId(messageToReplyTo.getCorrelationId());\n      const replyTo = messageToReplyTo.getReplyTo();\n      if (replyTo === null || replyTo === undefined) {\n        throw new OperationError('ReplyTo destination may not be null.',\n                                 ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n      }\n      replyMessage.setDestination(messageToReplyTo.getReplyTo());\n    }\n    this.validateAndSendMessage(replyMessage);\n  }\n\n  /**\n   * Returns the value of a given {@link solace.StatType}.\n   *\n   * @param {solace.StatType} statType The statistic to query.\n   * @returns {Number} The value of the requested statistic.\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the StatType is invalid.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_OUT_OF_RANGE}.\n   */\n  getStat(statType) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session getStat called.');\n    const result = this.allowOperation(SessionOperation.QUERY_OPERATION);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n\n    Parameter.isEnumMember('statType', statType, StatType);\n    return this._sessionFSM.getStat(statType);\n  }\n\n  /**\n   * Reset session statistics to initial values.\n   *\n   * @throws {solace.OperationError} if the session is disposed.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   */\n  resetStats() {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session resetStats called.');\n    const result = this.allowOperation(SessionOperation.QUERY_OPERATION);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n    this._sessionFSM.resetStats();\n  }\n\n  /**\n   * Returns a clone of the properties for this session.\n   *\n   * @returns {solace.SessionProperties} A clone of this session's properties.\n   * @throws {solace.OperationError} if the session is disposed.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   */\n  getSessionProperties() {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session getSessionProperties called.');\n    const result = this.allowOperation(SessionOperation.QUERY_OPERATION);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n\n    const properties = this._sessionProperties.clone();\n    const sessionState = this.getSessionState();\n    if ((sessionState !== SessionStateName.DISCONNECTED) && this._sessionFSM._transport) {\n      properties._setWebTransportProtocolInUse(this._sessionFSM._transport.getTransportProtocol());\n    }\n\n    return properties;\n  }\n\n  /**\n   * Check the value of a boolean router capability.\n   *\n   * This function is a shortcut for {@link solace.Session#getCapability}. It performs the same\n   * operation, but instead of returning a {@link solace.SDTField} wrapping a capability value, it\n   * just returns the boolean value.\n   *\n   *  Attempting to query a non-boolean capability will return `null`.\n   *\n   * @param {solace.CapabilityType} capabilityType The capability to check.\n   *\n   * @returns {Boolean} the value of the capability queried.\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the parameters have an invalid type or value.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   */\n  isCapable(capabilityType) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session isCapable called.');\n    const result = this.allowOperation(SessionOperation.QUERY_OPERATION);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n    Parameter.isNumber('capabilityType', capabilityType);\n\n    const caps = this._capabilities;\n    if (!caps) {\n      return false;\n    }\n\n    // Guard for undefined OR non-boolean capability\n    return (typeof caps[capabilityType] === 'boolean') ? caps[capabilityType] : false;\n  }\n\n  /**\n   * Get the value of an router capability, or null if unknown. This function must\n   * be called after connecting the session.\n   *\n   * SDT Type conversions:\n   *\n   *  * {string} values are returned as {@link solace.SDTFieldType.STRING}.\n   *  * {boolean} values are returned as {@link solace.SDTFieldType.BOOL}.\n   *  * All numeric values are returned as {@link solace.SDTFieldType.INT64}.\n   *\n   * @param {solace.CapabilityType} capabilityType The router capability to query.\n   * @returns {solace.SDTField} The result of the capability query.\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed\n   *    Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the parameters have an invalid type or value.\n   *    Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   */\n  getCapability(capabilityType) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session getCapability called.');\n    const result = this.allowOperation(SessionOperation.QUERY_OPERATION);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n\n    Parameter.isNumber('capabilityType', capabilityType);\n\n    const val = this._getCapability(capabilityType);\n    if (typeof val === 'boolean') {\n      return SDTField.create(SDTFieldType.BOOL, val);\n    }\n    if (typeof val === 'number') {\n      return SDTField.create(SDTFieldType.INT64, val);\n    }\n    if (typeof val === 'string') {\n      return SDTField.create(SDTFieldType.STRING, val);\n    }\n\n    return null;\n  }\n\n  _getCapability(capabilityType) {\n    const caps = this._capabilities;\n    if (!caps) return null;\n\n    const value = caps[capabilityType];\n    return (value === undefined) ? null : value;\n  }\n\n  /**\n   * Returns the session's state. This is a third-choice method to determine session\n   * state; the first is notifications on FSM transitions, and the second choice is\n   * the finer-grained states of the FSM that are used in this mapping.\n   *\n   * @returns {SessionState} The current state of the session.\n   * @throws {solace.OperationError} if the session is disposed.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * @internal\n   */\n  getSessionState() {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session getSessionState called.');\n    const result = this.allowOperation(SessionOperation.QUERY_OPERATION);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n    const sessionStateName = this.getFSMState();\n    switch (sessionStateName) {\n      case SessionStateName.FULLY_CONNECTED:\n        return SessionState.CONNECTED;\n      case SessionStateName.DISCONNECTING:\n        return SessionState.DISCONNECTING;\n      case SessionStateName.DISCONNECTED:\n        return SessionState.DISCONNECTED;\n      case SessionStateName.SESSION_ERROR:\n        return SessionState.SESSION_ERROR;\n      case SessionStateName.CONNECTING:\n      case SessionStateName.WAITING_FOR_INTERCONNECT_TIMEOUT:\n      case SessionStateName.WAITING_FOR_DNS:\n      case SessionStateName.WAITING_FOR_TRANSPORT_UP:\n      case SessionStateName.WAITING_FOR_SESSION_UP:\n      case SessionStateName.WAITING_FOR_LOGIN:\n      case SessionStateName.WAITING_FOR_P2PINBOX_REG:\n      case SessionStateName.WAITING_FOR_PUBFLOW:\n      case SessionStateName.REAPPLYING_SUBSCRIPTIONS:\n        return SessionState.CONNECTING;\n      default:\n        {\n          // State names unaccounted for --\n          // WAITING_FOR_SUBCONFIRM\n          // WAITING_FOR_CAN_ACCEPT_DATA\n          // DISCONNECTING_FLOWS\n          // FLUSHING_TRANSPORT\n          // DESTROYING_TRANSPORT\n          // RECONNECTING\n          // TRANSPORT_FAIL\n          //\n          // Alternatively, we could use StateMachine#isStateActive on key parent states,\n          // instead of having to enumerate all child states.ant\n          const { LOG_INFO } = this.logger;\n          LOG_INFO(`Unmapped session state ${SessionStateName.describe(sessionStateName)}`);\n          return null;\n        }\n    }\n  }\n\n  /**\n   * Gets the fine grained state name from the session FSM.\n   * @returns {solace.SessionStateName} The FSM state name\n   * @private\n   */\n  getFSMState() {\n    return this._sessionFSM.getCurrentStateName();\n  }\n\n  /**\n   * Creates a {@link solace.CacheSession} object that uses this Session to service its\n   * cache requests.\n   *\n   * It should be disposed when the application no longer requires a CacheSession, by calling\n   * {@link solace.CacheSession#dispose}.\n   *\n   * @param {solace.CacheSessionProperties} properties The properties for the cache session.\n   *\n   * @returns {solace.CacheSession} The newly created cache session.\n   *\n   * @throws {solace.OperationError} if a CacheSession is already associated with this Session.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}\n   */\n  createCacheSession(properties) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session createCacheSession called.');\n    return new CacheSession(properties, this, {\n      // bind instead of arrow func for varargs\n      // due to bubl transpiler bug\n      incStat: this._sessionFSM.incStat.bind(this._sessionFSM),\n    });\n  }\n\n  /**\n   * Creates a {@link solace.MessageConsumer} to receive Guaranteed Messages in this Session.\n   *\n   * Consumer characteristics and behavior are defined by properties. The consumer properties are\n   * supplied as an object; the pertinent fields are exposed in\n   * {@link solace.MessageConsumerProperties};\n   * other property names are ignored. If the Message Consumer creation\n   * specifies a non-durable endpoint,\n   * {@link solace.QueueProperties} can be used to change the default properties on the\n   * non-durable endpoint. Any values not supplied are set to default values.\n   *\n   * When the consumer is created, a consumer object is returned to the caller. This is the object\n   * from which events are emitted, and upon which operations (for example, starting and stopping\n   * the consumer) are performed.\n   *\n   * If this session does not support Guaranteed Messaging, this method will throw. The following\n   * must be true in order to create a MessageConsumer:\n   *  * The transport protocol list does not contain any HTTP transport protocols. See\n   *    {@link solace.SessionProperties#transportProtocol} and\n   *    {@link solace.FactoryProfile#cometEnabled}\n   *  * The Solace Messaging Router must support Guaranteed Messaging\n   *\n   * @method solace.Session#createMessageConsumer\n   * @param {solace.MessageConsumerProperties|Object} consumerProperties The properties for the\n   *    consumer.\n   * @returns {solace.MessageConsumer} The newly created Message Consumer.\n   * @throws {solace.OperationError} when Guaranteed Message Consume is not\n   *    supported on this session.\n   * @target browser\n   */\n  /**\n   * Creates a {@link solace.MessageConsumer} to receive Guaranteed Messages in this Session.\n   *\n   * Consumer characteristics and behavior are defined by properties. The consumer properties are\n   * supplied as an object; the pertinent fields are exposed in\n   * {@link solace.MessageConsumerProperties};\n   * other property names are ignored. If the Message Consumer creation\n   * specifies a non-durable endpoint,\n   * {@link solace.QueueProperties} can be used to change the default properties on the\n   * non-durable endpoint. Any values not supplied are set to default values.\n   *\n   * When the consumer is created, a consumer object is returned to the caller. This is the object\n   * from which events are emitted, and upon which operations (for example, starting and stopping\n   * the consumer) are performed.\n   *\n   * If this session does not support Guaranteed Messaging, this method will throw. The Solace\n   * Messaging Router must support Guaranteed Messaging.\n   *\n   * @method solace.Session#createMessageConsumer\n   * @param {solace.MessageConsumerProperties|Object} consumerProperties The properties for the\n   *    consumer.\n   * @returns {solace.MessageConsumer} The newly created Message Consumer.\n   * @throws {solace.OperationError} if Guaranteed Message Consume is not supported on this session.\n   * @target node\n   */\n  createMessageConsumer(consumerProperties) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session createMessageConsumer called.');\n    if (this._adDisabledReason) {\n      throw new OperationError('Session does not provide MessageConsumer capability',\n                               ErrorSubcode.GM_UNAVAILABLE,\n                               this._adDisabledReason);\n    }\n    if ((consumerProperties !== undefined) && (consumerProperties !== null)) {\n      const { LOG_DEBUG } = this.logger;\n      LOG_DEBUG('createMessageConsumer - Consumer properties:\\n', consumerProperties);\n    }\n    return this._sessionFSM.createMessageConsumer(consumerProperties);\n  }\n\n  /**\n   * Creates a {@link solace.QueueBrowser} to browse Guaranteed Messages on a specified queue in\n   * this Session.\n   *\n   * Browser characteristics and behavior are defined by properties. The browser properties are\n   * supplied as an object; the pertinent fields are exposed in\n   * {@link solace.QueueBrowserProperties};\n   * other property names are ignored. Any values not supplied are set to default values.\n   *\n   * Delivery restrictions imposed by the queues Access type (exclusive or non-exclusive),\n   * do not apply when browsing messages with a Browser.\n   *\n   * When the queue browser is created, a queue browser object is returned to the caller. This is\n   * the object from which events are emitted, and upon which operations (for example, starting and\n   * stopping the browser) are performed.\n   *\n   * If this session does not support Guaranteed Messaging, this method will throw. The following\n   * must be true in order to create a QueueBrowser:\n   *  * The transport protocol list does not contain any HTTP transport protocols. See\n   *    {@link solace.SessionProperties#transportProtocol} and\n   *    {@link solace.FactoryProfile#cometEnabled}\n   *  * The Solace Messaging Router must support Guaranteed Messaging\n   *\n   * @method solace.Session#createQueueBrowser\n   * @param {solace.QueueBrowserProperties|Object} browserProperties The properties for the\n   *    browser.\n   * @returns {solace.QueueBrowser} The newly created Queue Browser.\n   * @throws {solace.OperationError} when Guaranteed Messaging is not\n   *    supported on this session.\n   * @target browser\n   */\n  /**\n   * Creates a {@link solace.QueueBrowser} to receive Guaranteed Messages in this Session.\n   *\n   * Browser characteristics and behavior are defined by properties. The properties are\n   * supplied as an object; the pertinent fields are exposed in\n   * {@link solace.QueueBrowserProperties};\n   * other property names are ignored.\n   *\n   * Delivery restrictions imposed by the queues Access type (exclusive or non-exclusive),\n   * do not apply when browsing messages with a Browser.\n   *\n   * When the browser is created, a browser object is returned to the caller. This is the object\n   * from which events are emitted, and upon which operations (for example, starting and stopping\n   * the browser) are performed.\n   *\n   * If this session does not support Guaranteed Messaging, this method will throw. The Solace\n   * Messaging Router must support Guaranteed Messaging.\n   *\n   * @method solace.Session#createQueueBrowser\n   * @param {solace.QueueBrowserProperties|Object} browserProperties The properties for the\n   *    browser.\n   * @returns {solace.QueueBrowser} The newly created Queue Browser.\n   * @throws {solace.OperationError} if Guaranteed Messaging is not supported on this session.\n   * @target node\n   */\n  createQueueBrowser(browserProperties) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session createQueueBrowser called.');\n    if (this._adDisabledReason) {\n      throw new OperationError('Session does not provide QueueBrowser capability',\n                               ErrorSubcode.GM_UNAVAILABLE,\n                               this._adDisabledReason);\n    }\n    if ((browserProperties !== undefined) && (browserProperties !== null)) {\n      const { LOG_DEBUG } = this.logger;\n      LOG_DEBUG('createQueueBrowser - Browser properties:\\n', browserProperties);\n    }\n    return this._sessionFSM.createQueueBrowser(browserProperties);\n  }\n\n  /**\n   * Creates a publishing destination from a queue descriptor.\n   *\n   * A MessageConsumer is the only object that has any business\n   * doing this, but it should not be concerned with the internals\n   * which depend on the session.\n   *\n   * @param {AbstractQueueDescriptor|QueueDescriptor} queueDescriptor The consumer's descriptor\n   * @returns {Destination} A destination that publishes to the descriptor.\n   * @memberof Session\n   * @private\n   */\n  createDestinationFromDescriptor(queueDescriptor) {\n    const {\n      DestinationType,\n      Queue,\n      Topic,\n    } = DestinationLib;\n\n    let destinationType = DestinationType.TOPIC;\n    if (queueDescriptor.type === QueueType.QUEUE) {\n      destinationType = queueDescriptor.durable\n        ? DestinationType.QUEUE\n        : DestinationType.TEMPORARY_QUEUE;\n    }\n\n    const name = queueDescriptor.name || null;\n\n    if (queueDescriptor.durable) {\n      assert(name, 'Durable endpoint with generated name is not a valid configuration');\n      const factoryMethod = queueDescriptor.getType() === QueueType.QUEUE\n        ? Queue.createFromLocalName\n        : Topic.createFromName;\n      return factoryMethod(name);\n    }\n\n    return this.createTemporaryDestination(destinationType, name);\n  }\n\n  /**\n   * Creates a temporary destination.\n   * @param {DestinationType} destinationType Type of destination\n   * @param {String} [name] Name if any\n   * @returns {Destination} Temporary destination\n   * @private\n   */\n  createTemporaryDestination(destinationType, name) {\n    const { LOG_TRACE } = this.logger;\n    const { DestinationFromNetwork, DestinationUtil } = DestinationLib;\n    // TRANSPORT_UP is chosen because this is when the session tells subscribers\n    // that they may begin connecting\n    const vrn = this.getSessionProperties().virtualRouterName;\n    if (!this.isCapable(CapabilityType.TEMPORARY_ENDPOINT) ||\n        vrn === null || vrn === undefined || vrn.length === 0) {\n      throw new OperationError(\n        'Attempt to generate temporary destination or endpoint without suitable session',\n        ErrorSubcode.INVALID_OPERATION);\n    }\n    // Non-durable case; avoid re-prefixing\n    const localName = name && name.startsWith('#P2P')\n      ? name\n      : DestinationUtil.createTemporaryName(destinationType, vrn, name);\n    LOG_TRACE('Generated name:', localName);\n    return DestinationFromNetwork.createDestinationFromName(localName);\n  }\n\n  /**\n   * @param {solace.SessionEvent} sessionEvent The event to send\n   * @private\n   */\n  sendEvent(sessionEvent) {\n    if (!sessionEvent) return;\n    if (this._disposed) return;\n\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE(`Sending event ${sessionEvent}`);\n    this._eventCallbackInfo.sessionEventCBFunction(this,\n                                                   sessionEvent,\n                                                   this._eventCallbackInfo.userObject);\n  }\n\n  /**\n   * Gets a transport session information string.\n   * This string is informative only, and applications should not attempt to parse it.\n   *\n   * @returns {String} A description of the current session's transport.\n   */\n  getTransportInfo() {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session getTransportInfo called.');\n    return this._sessionFSM.getTransportInfo();\n  }\n\n  /**\n   * @param {Object} interceptor The transport interceptor to set\n   * @private\n   */\n  injectTransportInterceptor(interceptor) {\n    this._sessionFSM.injectTransportInterceptor(interceptor);\n  }\n\n  /**\n   * @param {solace.SessionOperation} operationEnum the id of the operation\n   * @param {solace.Message} message The message to send\n   * @returns {?String} error message if not allowed; otherwise null\n   * @private\n   */\n  allowOperation(operationEnum, message) {\n    if (!this._sessionFSM) return false;\n    let allow = true;\n    const sessionStateName = this._sessionFSM.getCurrentStateName();\n\n    if (sessionStateName === SessionStateName.DISPOSED) {\n      allow = false;\n    } else if (Check.anything(operationEnum)) {\n      switch (operationEnum) {\n        case SessionOperation.CONNECT:\n          if (sessionStateName !== SessionStateName.NEW &&\n              sessionStateName !== SessionStateName.DISCONNECTED) {\n            allow = false;\n          }\n          break;\n        case SessionOperation.DISCONNECT:\n          if (sessionStateName === SessionStateName.NEW) {\n            allow = false;\n          }\n          break;\n        case SessionOperation.SEND:\n        case SessionOperation.CTRL:\n          allow =\n            ((sessionStateName === SessionStateName.FULLY_CONNECTED) ||\n            (message && (message.getDeliveryMode() !== MessageLib.MessageDeliveryModeType.DIRECT)));\n          break;\n\n        case SessionOperation.QUERY_OPERATION:\n          allow = true;\n          break;\n        default:\n          allow = false;\n      }\n    } else {\n      allow = false;\n    }\n\n    if (allow) {\n      return null;\n    }\n\n    return `Cannot perform operation ${operationEnum} while in state ${sessionStateName}`;\n  }\n\n  /**\n   * @param {smf.ClientCtrlMessage} routerCapabilities The message containing the router caps\n   * @private\n   */\n  updateCapabilities(routerCapabilities) {\n    this._capabilities = routerCapabilities;\n  }\n\n  /**\n   * @param {solace.Message} message The message to send\n   * @private\n   */\n  validateAndSendMessage(message) {\n    // Sanity checks on the message before attempting to send it\n    //  * do we have a destination?\n    const sendDest = message.getDestination();\n    if (Check.nothing(sendDest) || Check.empty(sendDest.getName())) {\n      throw new OperationError('Message must have a valid Destination', ErrorSubcode.TOPIC_MISSING);\n    }\n\n    const senderTimestamp = message.getSenderTimestamp();\n    const noSenderTimestamp = senderTimestamp === null || senderTimestamp === undefined;\n    if (this._sessionProperties.generateSendTimestamps &&\n        (noSenderTimestamp || message.hasAutoSenderTimestamp)) {\n      const now = new Date();\n      message.setSenderTimestamp(now.getTime());\n      message.hasAutoSenderTimestamp = true;\n    }\n    const sequenceNumber = message.getSequenceNumber();\n    const noSequenceNumber = sequenceNumber === null || sequenceNumber === undefined;\n    if (this._sessionProperties.generateSequenceNumber &&\n        (noSequenceNumber || message.hasAutoSequenceNumber)) {\n      message.setSequenceNumber(this._seqNum++);\n      message.hasAutoSequenceNumber = true;\n    }\n    const senderId = message.getSenderId();\n    const noSenderId = senderId === null || senderId === undefined;\n    if (this._sessionProperties.includeSenderId && noSenderId) {\n      message.setSenderId(this._sessionProperties.clientName);\n    }\n\n    // Allow the FSM and its delegates to prepare and send the message\n    // This may mutate the delegates, so we need to validate first\n    // this may throw if the message is guaranteed and the window is closed.\n    // If this returns true, the message can be sent to the transport\n    // (always true for direct messages whne there is a transport). If\n    // this returns false, the message has been prepared and queued for\n    // transport but may not be sent now.\n    this._sessionFSM.prepareAndSendMessage(message);\n  }\n\n  /**\n   * @param {String} correlationId The internal correlation ID for the message\n   * @param {function(...[*])} reqFailedCb The callback on request failure\n   * @param {Number} reqTimeout The request timeout in ms\n   * @param {function(*)} replyRecvdCb The callback on reply received\n   * @param {Object} userObject A user object to pass back to the callback (legacy)\n   * @private\n   */\n  enqueueOutstandingDataReq(correlationId, reqFailedCb, reqTimeout, replyRecvdCb, userObject) {\n    if (Check.none(correlationId)) {\n      return;\n    }\n    const { LOG_TRACE, LOG_ERROR } = this.logger;\n\n    // empty string is valid\n    LOG_TRACE(`Enqueue outstanding data request correlationId=${correlationId}`);\n    const timer = setTimeout(() => {\n      this._sessionFSM.incStat(StatType.TX_REQUEST_TIMEOUT);\n                  // remove request from queue\n      try {\n        const result = delete this._outstandingDataReqs[correlationId];\n        if (!result) {\n          LOG_ERROR(`Cannot delete data request ${correlationId}`);\n        }\n      } catch (e) {\n        LOG_ERROR(`Cannot delete data request ${correlationId}`, e);\n      }\n\n      if (Check.anything(reqFailedCb)) {\n        const requestEvent = SessionEvent.build(RequestEventCode.REQUEST_TIMEOUT,\n                                                'Request timeout',\n                                                correlationId);\n\n        reqFailedCb(this, requestEvent, userObject);\n      }\n    }, reqTimeout || this._sessionProperties.readTimeoutInMsecs);\n\n    const outstandingReq = new OutstandingDataRequest(correlationId,\n                                                      timer,\n                                                      replyRecvdCb,\n                                                      reqFailedCb,\n                                                      userObject);\n    this._outstandingDataReqs[correlationId] = outstandingReq;\n  }\n\n  /**\n   * @param {String} correlationId The internal ID of the request to cancel\n   * @returns {OutstandingDataRequest} The request that was cancelled, if any\n   * @private\n   */\n  cancelOutstandingDataReq(correlationId) {\n    const { LOG_TRACE, LOG_ERROR } = this.logger;\n\n    if (Check.none(correlationId) || !this._outstandingDataReqs) {\n      return null;\n    }\n\n    const req = this._outstandingDataReqs[correlationId];\n    if (req === undefined || req === null) {\n      return null;\n    }\n    LOG_TRACE(`Cancel outstanding data request correlationId=${correlationId}`);\n    if (req.timer) {\n      clearTimeout(req.timer);\n      req.timer = null;\n    }\n\n    try {\n      const result = delete this._outstandingDataReqs[correlationId];\n      if (!result) {\n        LOG_ERROR(`Cannot delete data request ${correlationId}`);\n      }\n    } catch (e) {\n      LOG_ERROR(`Cannot delete data request ${correlationId}`, e);\n    }\n    return req;\n  }\n\n  /**\n   * @private\n   */\n  cleanupSession() {\n    const { LOG_TRACE } = this.logger;\n    if (this._outstandingDataReqs) {\n      LOG_TRACE('Cancel all outstanding data requests');\n      Object.keys(this._outstandingDataReqs).forEach((key) => {\n        const dataReq = this.cancelOutstandingDataReq(key);\n        if (dataReq && dataReq.reqFailedCBFunction) {\n          const requestEvent = SessionEvent.build(RequestEventCode.REQUEST_ABORTED,\n                                                  'Request aborted',\n                                                  key);\n          dataReq.reqFailedCBFunction(this, requestEvent, dataReq.userObject);\n        }\n      });\n    }\n  }\n\n  /**\n   * @param {Message} dataMessageIn The received direct TRmsg\n   * @private\n   */\n  handleDataMessage(dataMessageIn) {\n    const { LOG_TRACE, LOG_INFO } = this.logger;\n    const dataMessage = dataMessageIn;\n    if (this._sessionProperties.generateReceiveTimestamps) {\n      const now = new Date();\n      dataMessage._receiverTimestamp = now.getTime();\n    }\n\n    if (dataMessage.isReplyMessage()) {\n      const correlationId = dataMessage.getCorrelationId();\n      if (Check.anything(correlationId)) {\n        const dataReq = this.cancelOutstandingDataReq(correlationId);\n        if (dataReq !== null) {\n          this._sessionFSM.incStat(StatType.RX_REPLY_MSG_RECVED);\n          LOG_TRACE('Calling application replyReceivedCallback');\n          dataReq.replyReceivedCBFunction(this, dataMessage, dataReq.userObject);\n          LOG_TRACE('application replyReceivedCallback returns');\n          return;\n        }\n\n        if (correlationId.startsWith(SOLCLIENT_REQUEST_PREFIX)) {\n            // if a reply message doesn't have outstanding request and correlationId\n            // starts with #REQ it is assumed to be a delayed reply and has to be discarded\n          LOG_INFO('DROP: Discard reply message due to missing outstanding request');\n          this._sessionFSM.incStat(StatType.RX_REPLY_MSG_DISCARD);\n          return;\n        }\n\n        if (correlationId.startsWith(CACHE_REQUEST_PREFIX) &&\n              !(CacheSession && this._messageCallbackInfo.userObject instanceof CacheSession)) {\n          // If it's a cache message, only pass it along if the listener is a cache message\n          // listener. The listener may drop it and increment the DISCARD stat if no\n          // cache session recognizes the reply.\n          LOG_INFO('DROP: Discard cache reply due to no cache session active');\n          this._sessionFSM.incStat(StatType.RX_REPLY_MSG_DISCARD);\n          return;\n        }\n      }\n    }\n\n    // notify client message callback\n    LOG_TRACE('Calling application messageCallback');\n    this._messageCallbackInfo.messageRxCBFunction(this,\n                                                  dataMessage,\n                                                  this._messageCallbackInfo.userObject);\n    LOG_TRACE('application messageCallback returns');\n  }\n\n  /**\n   * Callback function for subscribe/unsubscribe response\n   * @param {solace.SMPMessage} smpMsg The SMP response to the subscription request\n   * @param {CorrelatedRequest} request The originating request object\n   * @param {Boolean} requestConfirm Whether the user asked for confirmation on the request\n   * @private\n   */\n  handleSubscriptionUpdateResponse(smpMsg, request, requestConfirm) {\n    const response = smpMsg.getResponse();\n    const {\n      responseCode,\n      responseString,\n     } = response;\n    const { correlationKey } = request;\n    // If we don't request confirmation, the router doesn't send one for the OK case,\n    // so we don't need to guard for that.\n    // The router always replies on SUBSCRIPTION_ERROR, so we track whether confirmation\n    // was requested and suppress the reply in certain cases.\n    if (responseCode === 200) {\n      // notify client\n      const sessionEvent = SessionEvent.build(SessionEventCode.SUBSCRIPTION_OK,\n                                              responseString,\n                                              responseCode,\n                                              0,\n                                              correlationKey,\n                                              null);\n      this.sendEvent(sessionEvent);\n    } else {\n      const subscriptionStr = StringUtils.stripNullTerminate(smpMsg.encodedUtf8Subscription);\n      this._sessionFSM.handleSubscriptionUpdateError(responseCode,\n                                                     responseString,\n                                                     subscriptionStr,\n                                                     correlationKey,\n                                                     requestConfirm);\n    }\n  }\n\n\n  /**\n   * Callback function for queue subscribe/unsubscribe response\n   * @param {solace.SMPMessage} smpMsg The SMP response to the subscription request\n   * @param {CorrelatedRequest} request The originating request object\n   * @param {function} callback The callback on response\n   * @private\n   */\n  handleQueueSubscriptionUpdateResponse(smpMsg, request, callback) {\n    const { LOG_TRACE } = this.logger;\n\n    if (!smpMsg) { // reuest timed out.\n      LOG_TRACE('handleQueueSubscriptionUpdateResponse called on timeout.');\n      callback(false, ErrorSubcode.TIMEOUT, 0, 'Timeout');\n      return;\n    }\n\n    const response = smpMsg.getResponse();\n    const {\n      responseCode,\n      responseString,\n     } = response;\n    const errorSubcode = ErrorResponseSubcodeMapper.getADErrorSubcode(responseCode, responseString);\n    LOG_TRACE('handleQueueSubscriptionUpdateResponse called.', smpMsg);\n    if (responseCode === 200 ||\n      (errorSubcode === ErrorSubcode.SUBSCRIPTION_ALREADY_PRESENT) ||\n      (errorSubcode === ErrorSubcode.SUBSCRIPTION_NOT_FOUND)\n    ) {\n      callback(true, 0, responseCode, responseString);\n    } else {\n      callback(false, errorSubcode, responseCode, responseString);\n    }\n  }\n\n  /**\n   * Callback function for DTE unsubscribe response\n   *\n   * @param {solace.AdMessage} adCtrlMessage The Guaranteed Message Protocol\n   *                           control response to the DTE unsub message\n   * @param {CorrelatedRequest} request The originating request object\n   * @private\n   */\n  handleDTEUnsubscribeResponse(adCtrlMessage, request) {\n    const response = adCtrlMessage.getResponse();\n    const {\n      responseCode,\n      responseString,\n    } = response;\n    const { correlationKey } = request;\n    const eventCode = responseCode === 200\n      ? SessionEventCode.UNSUBSCRIBE_TE_TOPIC_OK\n      : SessionEventCode.UNSUBSCRIBE_TE_TOPIC_ERROR;\n    const subcode = responseCode === 200\n      ? 0\n      : ErrorResponseSubcodeMapper.getADErrorSubcode(responseCode,\n                                                     responseString);\n    this.sendEvent(SessionEvent.build(eventCode,\n                                      responseString,\n                                      responseCode,\n                                      subcode,\n                                      correlationKey\n    ));\n  }\n\n  /**\n   * @param {Number} respCode The returned response code\n   * @param {String} respText The returned response text\n   * @param {String} subscriptionStr The requested topic name\n   * @param {*} correlationKey The user-supplied correlation key\n   * @param {Boolean} requestConfirm Whether confirmation was requested on subscription\n   * @private\n   */\n  handleSubscriptionUpdateError(respCode,\n                                respText,\n                                subscriptionStr,\n                                correlationKey,\n                                requestConfirm) {\n    const errorSubcode = ErrorResponseSubcodeMapper.getErrorSubcode(respCode, respText);\n    if ((errorSubcode === ErrorSubcode.SUBSCRIPTION_ALREADY_PRESENT &&\n         this._sessionProperties.ignoreDuplicateSubscriptionError) ||\n        (errorSubcode === ErrorSubcode.SUBSCRIPTION_NOT_FOUND &&\n          this._sessionProperties.ignoreSubscriptionNotFoundError)) {\n      if (requestConfirm) {\n        // notify client\n        const sessionEvent = SessionEvent.build(\n          SessionEventCode.SUBSCRIPTION_OK,\n          respText,\n          respCode,\n          0,\n          correlationKey,\n          null\n        );\n        this.sendEvent(sessionEvent);\n      }\n    } else {\n      // notify client\n      const sessionEvent = SessionEvent.build(\n        SessionEventCode.SUBSCRIPTION_ERROR,\n        respText,\n        respCode,\n        errorSubcode,\n        correlationKey,\n        `Topic: ${subscriptionStr}`\n      );\n      this.sendEvent(sessionEvent);\n    }\n  }\n\n  /**\n   * @returns {SessionEventCBInfo} The session's event callback\n   * @private\n   */\n  getEventCBInfo() {\n    return this._eventCallbackInfo;\n  }\n\n  /**\n   * @param {SessionEventCBInfo} eventCBInfo The new event callback to set\n   * @private\n   */\n  setEventCBInfo(eventCBInfo) {\n    this._eventCallbackInfo = eventCBInfo;\n  }\n\n  /**\n   * @returns {MessageRxCBInfo} The session's message callback\n   * @private\n   */\n  getMessageCBInfo() {\n    return this._messageCallbackInfo;\n  }\n\n  /**\n   * @param {MessageRxCBInfo} messageCBInfo The new message callback to set\n   * @private\n   */\n  setMessageCBInfo(messageCBInfo) {\n    this._messageCallbackInfo = messageCBInfo;\n  }\n\n  /**\n   * @returns {String} The next correlation tag for this session.\n   * @private\n   */\n  getCorrelationTag() {\n    return this._sessionFSM.getCorrelationTag();\n  }\n\n  /**\n   * Wraps a SessionEventCBInfo or a bare function with an event emitting function.\n   * @param {SessionEventCBInfo|function|undefined} eventCallback The callback to wrap\n   * @returns {SessionEventCBInfo} A SessionEventCBInfo object that handles all callbacks.\n   * @private\n   */\n  wrapEventCallback(eventCallback) {\n    const { LOG_WARN } = this.logger;\n    const eventCallbackInfo = (() => {\n      if (!eventCallback) return null;\n      if (eventCallback.sessionEventCBFunction) return eventCallback;\n      return new SessionEventCBInfo(eventCallback);\n    })();\n    return new SessionEventCBInfo((session, sessionEvent, obj, rfu) => {\n      const { sessionEventCode } = sessionEvent;\n      if (eventCallbackInfo) {\n        try {\n          eventCallbackInfo.sessionEventCBFunction(session, sessionEvent, obj, rfu);\n        } catch (ex) {\n          const error = Object.assign(new OperationError(\n            `Unhandled error in SessionEventRxCBInfo callback on sessionEventCode ${\n              SessionEventCode.describe(sessionEventCode)}`,\n              ErrorSubcode.CALLBACK_ERROR,\n              `On event: ${[sessionEventCode, sessionEvent, obj, rfu]} ${ex}`\n            ), {\n              stack: ex.stack,\n              info:  {\n                event: {\n                  name:          sessionEventCode,\n                  formattedName: `SessionEventCode.${SessionEventCode.describe(sessionEventCode)}`,\n                  args:          [sessionEvent, obj, rfu],\n                },\n                error: ex,\n              },\n            }\n          );\n          LOG_WARN(error.toString(), error.info);\n        }\n      }\n      this.emit(sessionEventCode, sessionEvent);\n    });\n  }\n\n  /**\n   * Wraps a CBInfo or a bare function with an event emitting function.\n   * @param {MessageCBInfo|function|undefined} messageCallback The callback to wrap\n   * @returns {MessageCBInfo} A MessageCBInfo object that handles all callbacks.\n   * @private\n   */\n  wrapMessageCallback(messageCallback) {\n    const { LOG_WARN } = this.logger;\n\n    const messageCallbackInfo = (() => {\n      if (!messageCallback) return null;\n      if (messageCallback.messageRxCBFunction) return messageCallback;\n      return new MessageRxCBInfo(messageCallback);\n    })();\n\n    const formattedName = `SessionEventCode.${SessionEventCode.describe(SessionEventCode.MESSAGE)}`;\n    const buildErrorEvent = (ex, message, object) => Object.assign(\n      new OperationError(`Unhandled error in MessageRxCBInfo callback/handler for ${formattedName}`,\n                         ErrorSubcode.CALLBACK_ERROR),\n      {\n        stack: ex.stack,\n        info:  {\n          event: {\n            name: SessionEventCode.MESSAGE,\n            formattedName,\n            args: [message, object],\n          },\n          error: ex,\n        },\n      });\n\n    return new MessageRxCBInfo((session, message, object) => {\n      if (messageCallbackInfo) {\n        try {\n          messageCallbackInfo.messageRxCBFunction(session, message, object);\n        } catch (ex) {\n          const error = buildErrorEvent(ex, message, object).toString();\n          LOG_WARN(error, error.info, ex);\n        }\n      }\n      try {\n        this.emitDirect(message);\n      } catch (ex) {\n        this.emit('error', buildErrorEvent(ex, message, object));\n      }\n    });\n  }\n\n  /**\n   * @readonly\n   * @private\n   */\n  get adLocallyDisabled() {\n    return !!this._adDisabledReason;\n  }\n\n  /**\n   * @readonly\n   * @private\n   */\n  get canConnectConsumer() {\n    if (this.adLocallyDisabled) return false;\n    if (this._capabilities) {\n      return this.isCapable(CapabilityType.GUARANTEED_MESSAGE_CONSUME);\n    }\n    return undefined;\n  }\n\n  /**\n   * @readonly\n   * @private\n   */\n  get canConnectPublisher() {\n    if (this.adLocallyDisabled) return false;\n    if (this._capabilities) {\n      return this.isCapable(CapabilityType.GUARANTEED_MESSAGE_PUBLISH);\n    }\n    return undefined;\n  }\n\n  /**\n   * @readonly\n   * @private\n   */\n  get disposed() {\n    return this._disposed;\n  }\n\n  [util_inspect_custom]() {\n    return {\n      'sessionId': this._sessionFSM && this._sessionFSM.sessionIdHex || '(N/A)',\n      'transport': this.getTransportInfo(),\n      'state':     SessionState.describe(this.getSessionState()),\n    };\n  }\n\n  toString() {\n    return util_inspect(this);\n  }\n}\n\nmodule.exports.Session = Session;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Effectively a boolean governing TLS downgrade to plain text after authentication.\n * @see {@link solace.SessionProperties#sslConnectionDowngradeTo}\n *\n * @target node\n * @readonly\n * @enum {String}\n * @memberof solace\n * @namespace\n */\nconst SslDowngrade = {\n  /**\n   * @description No downgrade, TLS connection remains encrypted.\n   * @type {String}\n   */\n  NONE:      'NONE',\n  /**\n   * @description TLS connection downgrades to plain text after authentication.\n   * USE WITH CAUTION! Message traffic is not encrypted!\n   */\n  PLAINTEXT: 'PLAIN_TEXT',\n};\n\nmodule.exports.SslDowngrade = Enum.new(SslDowngrade);\n","const { SessionRequestType } = require('./session-request-types');\n\nmodule.exports = {\n  SubscriptionUpdateTimeoutMessages: {\n    [SessionRequestType.ADD_SUBSCRIPTION]:        'Add subscription request timeout',\n    [SessionRequestType.REMOVE_SUBSCRIPTION]:     'Remove subscription request timeout',\n    [SessionRequestType.ADD_P2PINBOX]:            'Add P2P inbox subscription timeout',\n    [SessionRequestType.REMOVE_P2PINBOX]:         'Remove P2P inbox subscription timeout',\n    [SessionRequestType.REMOVE_DTE_SUBSCRIPTION]: 'Remove endpoint topic subscription',\n    default:                                      'Request timeout',\n  },\n};\n","const CodecLib = require('./lib/codec');\nconst { AdProtocolMessage, BinaryMetaBlock, ClientCtrlMessage, KeepAliveMessage, SMPMessage } = require('./lib/message-objects');\nconst { SMFAdProtocolMessageType } = require('./lib/smf-adprotocol-message-types');\nconst { SMFAdProtocolParam } = require('./lib/smf-adprotocol-params');\nconst { SMFClientCtrlMessageType } = require('./lib/smf-client-ctrl-message-types');\nconst { SMFClientCtrlParam } = require('./lib/smf-client-ctrl-params');\nconst { SMFParameterType, SMFExtendedParameterType } = require('./lib/smf-parameter-types');\nconst { SMFProtocol } = require('./lib/smf-protocols');\nconst { SMFSMPMessageType } = require('./lib/smf-smp-message-types');\nconst { SMFSMPMessageTypeFlags } = require('./lib/smf-smp-message-type-flags');\nconst { SMFTransportSessionMessageType } = require('./lib/smf-transport-session-message-types');\n\nmodule.exports.AdProtocolMessage = AdProtocolMessage;\nmodule.exports.BinaryMetaBlock = BinaryMetaBlock;\nmodule.exports.ClientCtrlMessage = ClientCtrlMessage;\nmodule.exports.Codec = CodecLib;\nmodule.exports.KeepAliveMessage = KeepAliveMessage;\nmodule.exports.SMFAdProtocolMessageType = SMFAdProtocolMessageType;\nmodule.exports.SMFAdProtocolParam = SMFAdProtocolParam;\nmodule.exports.SMFClientCtrlMessageType = SMFClientCtrlMessageType;\nmodule.exports.SMFClientCtrlParam = SMFClientCtrlParam;\nmodule.exports.SMFParameterType = SMFParameterType;\nmodule.exports.SMFProtocol = SMFProtocol;\nmodule.exports.SMFSMPMessageTypeFlags = SMFSMPMessageTypeFlags;\nmodule.exports.SMFSMPMessageType = SMFSMPMessageType;\nmodule.exports.SMFTransportSessionMessageType = SMFTransportSessionMessageType;\nmodule.exports.SMPMessage = SMPMessage;\nmodule.exports.SMFExtendedParameterType = SMFExtendedParameterType;\n","const SMFLib = require('solclient-smf');\nconst { AdProtocolMessage, SMFParameter } = require('../message-objects');\nconst { Bits, Convert } = require('solclient-convert');\nconst { LOG_DEBUG, LOG_INFO, LOG_ERROR } = require('solclient-log');\nconst { ReplayStartType } = require('solclient-replaystart');\n// const { SMFAdProtocolParam } = require('solclient-smf');\n\nconst {\n  get: bits,\n  set: setBits,\n} = Bits;\n\nconst {\n  int8ToStr,\n  int16ToStr,\n  int24ToStr,\n  int32ToStr,\n} = Convert;\n\nfunction parseAdpAt(dataBuf, offset) {\n  if ((offset + 3) > dataBuf.length) {\n    //not enough data\n    LOG_DEBUG('Not enough data to read an ADP message.');\n    return false;\n  }\n  let pos = offset;\n  let onebyte = dataBuf.readUInt8(pos);\n  pos++;\n\n  // var msgRFU = bits(onebyte, 6, 2);\n  const adpVersion = bits(onebyte, 0, 6);\n  let msgLength;\n  let msgType;\n  if (adpVersion < 3) {\n    const twobyte = dataBuf.readUInt16BE(pos);\n    pos += 2;\n    msgType = bits(twobyte, 12, 4);\n    // length in 32 bit words is in the lower 12 bits\n    msgLength = bits(twobyte, 0, 12);\n    // convert length to number of bytes\n    msgLength <<= 2;\n  } else if (adpVersion === 3) {\n    onebyte = dataBuf.readUInt8(pos);\n    pos++;\n    msgType = bits(onebyte, 0, 8);\n    msgLength = dataBuf.readUInt32BE(pos);\n    pos += 4;\n  } else {\n    LOG_ERROR('Found unsupported ADP Version', adpVersion);\n    return false; //unsupported type\n  }\n  //\n  // Verify that the ADP header length does not exceed the entire\n  // contents of the SMF message.\n  if (offset + msgLength > dataBuf.length) {\n    LOG_ERROR(`Invalid Asssured Control Protocol length=${msgLength\n      } exceeds remaining message buffer = ${dataBuf.length - offset}`);\n    return false; // invalid message format\n  }\n  const adpMsg = new AdProtocolMessage(msgType, adpVersion);\n  while (pos < (offset + msgLength)) {\n    onebyte = dataBuf.readUInt8(pos);\n    pos++;\n    const paramUH = bits(onebyte, 6, 2);\n    const paramType = bits(onebyte, 0, 6);\n\n    // Look for and skip padding bytes\n    if (paramType === 0) {\n      continue;\n    }\n    if (pos >= (offset + msgLength)) {\n      LOG_ERROR(`Invalid Asssured Control Protocol parameter=${paramType} at position =${pos}`);\n      return false; // Assured Control parsing fail\n    }\n    let paramLen = dataBuf.readUInt8(pos);\n    let paramValueLen;\n    pos++;\n    // If paramLen == 0, then this is an extended length format\n    // and there is a 4 byte length following the '0'\n    if (paramLen === 0) {\n      // need at least 5 more bytes in the buffer\n      if (pos + 5 > (offset + msgLength)) {\n        LOG_ERROR(`Invalid Asssured Control Protocol parameter=${paramType} at position =${pos}`);\n        return false; // Assured Control parsing fail\n      }\n      paramLen = dataBuf.readUInt32BE(pos);\n      pos += 4;\n      paramValueLen = paramLen - 5;\n    } else {\n      paramValueLen = paramLen - 2;\n    }\n    if (paramLen <= 0) {\n      return false; // Assured Control parsing fail\n    }\n    //\n    // make sure there is enough buffer for paramValueLen\n    if (pos + paramValueLen > offset + msgLength) {\n      LOG_ERROR(`Invalid Asssured Control Protocol parameter=${paramType\n        } length =${paramValueLen} invalid at position =${pos}`);\n      return false; // Assured Control parsing fail\n    }\n    const smfParam = new SMFParameter(paramUH, paramType, null, dataBuf, pos, pos + paramValueLen);\n    adpMsg.addParameter(smfParam);\n    pos += paramValueLen;\n  }\n  return adpMsg;\n}\n\nfunction encAdp0Param(uh, paramtype) {\n  const data = [];\n  let byte1 = 0;\n\n  byte1 = Bits.set(byte1, uh, 6, 2);\n  byte1 = Bits.set(byte1, paramtype, 0, 6);\n  data.push(Convert.int8ToStr(byte1));\n  data.push(Convert.int8ToStr(2)); // length\n  return data.join('');\n}\nfunction encAdp8Param(uh, paramtype, value) {\n  const data = [];\n  let byte1 = 0;\n\n  byte1 = Bits.set(byte1, uh, 6, 2);\n  byte1 = Bits.set(byte1, paramtype, 0, 6);\n  data.push(Convert.int8ToStr(byte1));\n  data.push(Convert.int8ToStr(3)); // length\n  data.push(Convert.int8ToStr(value));\n  return data.join('');\n}\n\nfunction encAdp16Param(uh, paramtype, value) {\n  const data = [];\n  let byte1 = 0;\n\n  byte1 = Bits.set(byte1, uh, 6, 2);\n  byte1 = Bits.set(byte1, paramtype, 0, 6);\n  data.push(Convert.int8ToStr(byte1));\n  data.push(Convert.int8ToStr(4)); // length\n  data.push(Convert.int16ToStr(value));\n  return data.join('');\n}\n\nfunction encAdp32Param(uh, paramtype, value) {\n  const data = [];\n  let byte1 = 0;\n\n  byte1 = Bits.set(byte1, uh, 6, 2);\n  byte1 = Bits.set(byte1, paramtype, 0, 6);\n  data.push(Convert.int8ToStr(byte1));\n  data.push(Convert.int8ToStr(6)); // length\n  data.push(Convert.int32ToStr(value));\n  return data.join('');\n}\n\nfunction encAdp64Param(uh, paramtype, value) {\n  const data = [];\n  let byte1 = 0;\n\n  byte1 = Bits.set(byte1, uh, 6, 2);\n  byte1 = Bits.set(byte1, paramtype, 0, 6);\n  data.push(Convert.int8ToStr(byte1));\n  data.push(Convert.int8ToStr(10)); // length\n  data.push(Convert.int64ToStr(value));\n  return data.join('');\n}\n\n// map of replay start value types to parameter lengths\nconst RSValueLenMap = {};\nRSValueLenMap[ReplayStartType.BEGINNING] = 3; // 2 (TLV) + 1 (replay start type)\nRSValueLenMap[ReplayStartType.DATE] = 11; // 2 (TLV) + 1 (replay start type) + 8 (date value)\nRSValueLenMap[ReplayStartType.RGMID] = 19; //2 (TLV) + 1 (replay start type) + 16 (rgmid value)\n\n// special case for message replay value, a 1 byte type\n// followed by 0 bytes of begining, 8 bytes of date or 16 bytes of rgmid\n// Note replay Start type 0 is handled using encAdp8Param as there is no value\nfunction encAdpReplayParam(uh, paramtype, value) {\n  const data = [];\n  const valType = value.type;\n  const valObj = value.value;\n  let byte1 = 0;\n\n  byte1 = Bits.set(byte1, uh, 6, 2);\n  byte1 = Bits.set(byte1, paramtype, 0, 6);\n  data.push(Convert.int8ToStr(byte1));\n  data.push(Convert.int8ToStr(RSValueLenMap[valType])); // length\n  data.push(Convert.int8ToStr(valType)); // replay start type, 1 == date, 2 == RGMID\n  switch (valType) {\n    case ReplayStartType.DATE:\n      // encode 64 bit date\n      data.push(Convert.int64ToStr(valObj)); // value is Long type\n      break;\n    case ReplayStartType.RGMID:\n      // encode 128 bit replication group message id\n      // expected value object of\n      // {\n      //   suid (Long),\n      //   messageId (Long),\n      // }\n      data.push(Convert.int64ToStr(valObj.suid)); // get Long suid\n      data.push(Convert.int64ToStr(valObj.messageId)); // get Long messageId\n      break;\n    case ReplayStartType.BEGINNING:\n      // in this case there is no value to encode\n      break;\n    default:\n      // should not happen until there are more replay start type but those\n      // should be handled in a case above\n      break;\n  }\n  return data.join('');\n}\n\nfunction encAdp64AckPairParam(uh, paramtype, min, max, outcome = undefined) {\n  const data = [];\n  let byte1 = 0;\n  byte1 = Bits.set(byte1, uh, 6, 2);\n  byte1 = Bits.set(byte1, paramtype, 0, 6);\n  const paramLength = (outcome == undefined || outcome === 0) ? 18 : 19;\n  data.push(Convert.int8ToStr(byte1));\n  data.push(Convert.int8ToStr(paramLength)); // length\n  data.push(Convert.int64ToStr(min));\n  data.push(Convert.int64ToStr(max));\n  if(outcome != undefined && outcome > 0) { // skip for MessageOutcome.ACCEPTED\n    data.push(Convert.int8ToStr(outcome)); // write the settlement outcome\n  }\n  return data.join('');\n}\n\nfunction encAdpUTF8NTParam(uh, paramtype, value) {\n  // value is already UTF8 encoded and null terminated.\n  const data = [];\n  let byte1 = 0;\n  byte1 = Bits.set(byte1, uh, 6, 2);\n  byte1 = Bits.set(byte1, paramtype, 0, 6);\n  data.push(Convert.int8ToStr(byte1));\n\n  let byte2 = 0;\n  if (value.length <= 253) {\n    byte2 = value.length + 2; // full length of param\n    data.push(Convert.int8ToStr(byte2));\n  } else {\n    byte2 = 0; // extended-length\n    data.push(Convert.int8ToStr(byte2));\n    data.push(Convert.int32ToStr(value.length + 5));\n  }\n  data.push(value);\n  return data.join('');\n}\n\nfunction encAdp(adpMsg) {\n  const paramspace = [];\n  const paramarray = adpMsg.getParameterArray();\n\n  let p;\n  for (p = 0; p < paramarray.length; p++) {\n    const param = paramarray[p];\n    // It's not a flat array, we have gaps!\n    if (param === undefined) {\n      continue;\n    }\n\n    switch (param.getType()) {\n      /*\n       * 8 bit parameters\n       */\n      case SMFLib.SMFAdProtocolParam.WINDOW:\n      case SMFLib.SMFAdProtocolParam.EP_DURABLE:\n      case SMFLib.SMFAdProtocolParam.ACCESSTYPE:\n      case SMFLib.SMFAdProtocolParam.FLOWTYPE:\n      case SMFLib.SMFAdProtocolParam.EP_RESPECTS_TTL:\n      case SMFLib.SMFAdProtocolParam.TRANSACTION_CTRL_MESSAGE_TYPE:\n      case SMFLib.SMFAdProtocolParam.TRANSACTED_SESSION_STATE:\n      case SMFLib.SMFAdProtocolParam.ACTIVE_FLOW_INDICATION:\n      case SMFLib.SMFAdProtocolParam.WANT_FLOW_CHANGE_NOTIFY:\n      case SMFLib.SMFAdProtocolParam.MAX_REDELIVERY:\n        paramspace.push(encAdp8Param(param.getUh(), param.getType(), param.getValue()));\n        break;\n      /*\n       * 16 bit parameters\n       */\n      case SMFLib.SMFAdProtocolParam.EP_BEHAVIOUR:\n      case SMFLib.SMFAdProtocolParam.PARTITION_GROUP_ID:\n        paramspace.push(encAdp16Param(param.getUh(), param.getType(), param.getValue()));\n        break;\n      /*\n       * 32 bit parameters\n       */\n      case SMFLib.SMFAdProtocolParam.FLOWID:\n      case SMFLib.SMFAdProtocolParam.TRANSPORT_WINDOW:\n      case SMFLib.SMFAdProtocolParam.EP_ALLOTHER_PERMISSION:\n      case SMFLib.SMFAdProtocolParam.EP_QUOTA:\n      case SMFLib.SMFAdProtocolParam.EP_MAX_MSGSIZE:\n      case SMFLib.SMFAdProtocolParam.GRANTED_PERMISSION:\n      case SMFLib.SMFAdProtocolParam.TRANSACTED_SESSION_ID:\n      case SMFLib.SMFAdProtocolParam.PUBLISHER_ID:\n        paramspace.push(encAdp32Param(param.getUh(), param.getType(), param.getValue()));\n        break;\n      /*\n       * 64 bit parameters\n       */\n      case SMFLib.SMFAdProtocolParam.LASTMSGIDSENT:\n      case SMFLib.SMFAdProtocolParam.LASTMSGIDACKED:\n      case SMFLib.SMFAdProtocolParam.LASTMSGIDRECEIVED:\n      case SMFLib.SMFAdProtocolParam.TRANSACTION_ID:\n      case SMFLib.SMFAdProtocolParam.ENDPOINT_ERROR_ID:\n        paramspace.push(encAdp64Param(param.getUh(), param.getType(), param.getValue()));\n        break;\n      /*\n       * Replay start location can be either a 0 bit, 64 bit or 128 bit parameter.\n       */\n      case SMFLib.SMFAdProtocolParam.REPLAY_START_LOCATION:\n        {\n          const replayParamVal = param.getValue();\n          if (undefined === replayParamVal.value) {\n            // replay start location with 0 bit values, type only\n            paramspace.push(encAdp8Param(param.getUh(),\n                                         param.getType(),\n                                         replayParamVal.type));  // start location type 0\n          } else {\n            // replay start location with > 0 bit values, type + value\n            paramspace.push(encAdpReplayParam(param.getUh(), param.getType(), replayParamVal));\n          }\n          break;\n        }\n      /*\n       * application ack\n       */\n      case SMFLib.SMFAdProtocolParam.APPLICATION_ACK:\n        {\n          // Unpack this to multiple parameters\n          const ranges = param.getValue(); // this is the Map() of all settlement ACK/NACK ranges\n          const uh = param.getUh();\n          const type = param.getType();\n          // iterate through the Map of ranges per settlement outcome\n          ranges.forEach((settlementRanges, outcome) => {\n            for (let i = 0; i < settlementRanges.length; ++i) {\n              const range = settlementRanges[i];\n              paramspace.push(encAdp64AckPairParam(uh,\n                                                   type,\n                                                   range[0],\n                                                   range[1],\n                                                   outcome));\n            }\n          });\n          break;\n        }\n      /*\n       * string and other variable length parameters\n       */\n      case SMFLib.SMFAdProtocolParam.QUEUENAME:\n      case SMFLib.SMFAdProtocolParam.DTENAME:\n      case SMFLib.SMFAdProtocolParam.TOPICNAME:\n      case SMFLib.SMFAdProtocolParam.FLOWNAME:\n      case SMFLib.SMFAdProtocolParam.SELECTOR:\n      case SMFLib.SMFAdProtocolParam.TRANSACTED_SESSION_NAME:\n        paramspace.push(encAdpUTF8NTParam(param.getUh(), param.getType(), param.getValue()));\n        break;\n      /*\n       * Transaction Publisher Notify\n       */\n      case SMFLib.SMFAdProtocolParam.TRANSACTION_FLOW_DESCRIPTOR_PUB_NOTIFY:\n        break;\n      /*\n       * Transaction Publisher Ack\n       */\n      case SMFLib.SMFAdProtocolParam.TRANSACTION_FLOW_DESCRIPTOR_PUB_ACK:\n        break;\n      /*\n       * Transaction Subscriber Ack\n       */\n      case SMFLib.SMFAdProtocolParam.TRANSACTION_FLOW_DESCRIPTOR_SUB_ACK:\n        break;\n      /*\n       * No Local Parameter has no data\n       * Cut Through Parameter has no data\n       */\n      case SMFLib.SMFAdProtocolParam.NOLOCAL:\n      case SMFLib.SMFAdProtocolParam.CUT_THROUGH:\n        paramspace.push(encAdp0Param(param.getUh(), param.getType()));\n        break;\n      /*\n       * Application Publisher Acknowledge\n       */\n      case SMFLib.SMFAdProtocolParam.APPLICATION_PUB_ACK:\n        break;\n      default:\n        LOG_INFO('Unrecognized ADProtocol Parameter in Message');\n        break;\n    }\n  }\n\n  const paramdata = paramspace.join('');\n\n  const data = [];\n  if (adpMsg.version === 2) {\n    let threebytes = 0;\n    threebytes = setBits(threebytes, 0, 22, 2); // RFU\n    threebytes = setBits(threebytes, adpMsg.version, 16, 6); // RFU\n    threebytes = setBits(threebytes, adpMsg.msgType, 12, 4); // msgtype\n    // length in 32 bit words means the real length must always be a multiple of 4, so pad as\n    // necessary\n\n    // 4 - how many bytes passed a 4 byte boundary\n    let padBytes = 4 - ((3 + paramdata.length) & 0x3);\n    // calculate the total length, 3 bytes header + params, in 32 bit words\n    const length = (3 + paramdata.length + padBytes) >> 2;\n    threebytes = setBits(threebytes, length, 0, 12);\n    data.push(int24ToStr(threebytes)); // first 3B (RFU, version, msgtype, length)\n    data.push(paramdata);\n\n    if (padBytes === 4) padBytes = 0; // don't add 4 pad bytes\n    while (padBytes > 0) {\n      data.push(int8ToStr(0));\n      padBytes--;\n    }\n  } else if (adpMsg.version === 3) {\n    let twobytes = 0;\n    twobytes = setBits(twobytes, 0, 14, 2); // RFU\n    twobytes = setBits(twobytes, adpMsg.version, 8, 6); // version\n    twobytes = setBits(twobytes, adpMsg.msgType, 0, 8); // msgtype\n    data.push(int16ToStr(twobytes)); // first 2B (RFU, version, msgtype)\n    data.push(int32ToStr(6 + paramdata.length)); //length: 6B header + params\n    data.push(paramdata);\n  } else {\n    LOG_ERROR(`Invalid Version ${adpMsg.version} found while encoding`);\n  }\n\n  return data.join('');\n}\n\nmodule.exports.parseAdpAt = parseAdpAt;\nmodule.exports.encAdp = encAdp;\n","const { ContentSummaryType } = require('./content-summary-types');\nconst { Decode } = require('./decode');\nconst { Encode } = require('./encode');\nconst { ParamParse } = require('./param-parse');\nconst { ParseSMF } = require('./parse-smf');\nconst { Transport } = require('./transport');\n\nmodule.exports.ContentSummaryType = ContentSummaryType;\nmodule.exports.Encode = Encode;\nmodule.exports.Decode = Decode;\nmodule.exports.ParamParse = ParamParse;\nmodule.exports.ParseSMF = ParseSMF;\nmodule.exports.Transport = Transport;\n\n","const { Bits, Convert } = require('solclient-convert');\nconst { ClientCtrlMessage, SMFParameter } = require('../message-objects');\nconst { LOG_ERROR } = require('solclient-log');\n\nconst {\n  get: bits,\n  set: setBits,\n} = Bits;\n\nconst {\n  int8ToStr, /*strToInt8,*/\n  int16ToStr, /*strToInt16,*/\n  int32ToStr, /*strToUInt32,*/\n} = Convert;\n\nfunction parseCCAt(dataBuf, offset, payloadLen) {\n  const ccMsg = new ClientCtrlMessage();\n  if (payloadLen < 6 || offset + 6 > dataBuf.length) {\n      // not enough data! Return empty.\n      // This is required because we can get an empty CC payload as a router response\n    return ccMsg;\n  }\n\n  let pos = offset;\n  const twobytes = dataBuf.readUInt16BE(pos);\n  pos += 2;\n    // var uh = bits(twobytes, 15, 1);\n  const version = bits(twobytes, 8, 3);\n  const msgType = bits(twobytes, 0, 8);\n  const len = dataBuf.readUInt32BE(pos);\n  pos += 4;\n\n    // Sanity check: we support ClientCtrl v1\n  if (version !== 1) {\n    LOG_ERROR(`Unsupported ClientCtrl version ${version}`);\n    return false;\n  }\n\n  if (len <= 0 || (offset + len) > dataBuf.length) {\n    return false;\n  }\n\n  ccMsg.msgType = msgType;\n  ccMsg.version = version;\n  while (pos < (offset + len)) {\n    const onebyte = dataBuf.readUInt8(pos);\n    pos++;\n    const paramUh = bits(onebyte, 7, 1);\n    const paramType = bits(onebyte, 0, 7);\n    const paramLen = dataBuf.readUInt32BE(pos);\n    if (paramLen <= 0) {\n      return false; // SMF parsing fail\n    }\n\n    pos += 4;\n    const paramValueLen = paramLen - 5;\n    const smfP = new SMFParameter(paramUh, paramType, null, dataBuf, pos, pos + paramValueLen);\n    ccMsg.addParameter(smfP);\n    pos += paramValueLen;\n  }\n  return ccMsg;\n}\n\nfunction encCC(ccMsg) {\n  const paramSpace = [];\n  const paramArray = ccMsg.getParameterArray();\n    /*\n    ClientCtrl Parameter formatting:\n        1 byte uh/type\n        4 bytes length\n        N bytes value\n     */\n  for (let p = 0, n = paramArray.length; p < n; ++p) {\n    const currentParam = paramArray[p];\n      // It's not a flat array, we have gaps!\n    if (currentParam === undefined) {\n      continue;\n    }\n    let currentParamOneByte = 0;\n    currentParamOneByte = setBits(currentParamOneByte, currentParam.getUh(), 7, 1);\n    currentParamOneByte = setBits(currentParamOneByte, currentParam.getType(), 0, 7);\n    paramSpace.push(int8ToStr(currentParamOneByte));\n    paramSpace.push(int32ToStr(currentParam.getValue().length + 5));\n    paramSpace.push(currentParam.getValue());\n  }\n\n  const paramData = paramSpace.join('');\n  let twobytes = 0;\n  twobytes = setBits(twobytes, 0, 15, 1); // uh\n  twobytes = setBits(twobytes, 0, 11, 4); // RFU\n  twobytes = setBits(twobytes, 1, 8, 3); // version\n  twobytes = setBits(twobytes, ccMsg.msgType, 0, 8); // msgtype\n\n  const data = [];\n  data.push(int16ToStr(twobytes)); // first 2B (uh, version, msgtype)\n  data.push(int32ToStr(6 + paramData.length)); // length: 6B header + params\n  data.push(paramData);\n  return data.join('');\n}\n\nmodule.exports.parseCCAt = parseCCAt;\nmodule.exports.encCC = encCC;\n","class ContentSummaryElement {\n  constructor(type = null, position = 0, length = 0) {\n    this.type = type;\n    this.position = position;\n    this.length = length;\n  }\n}\n\nmodule.exports.ContentSummaryElement = ContentSummaryElement;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Type maching SMF encoding value\n * @enum {number}\n * @memberof solace\n * @private\n */\nconst ContentSummaryType = {\n  XML_META:          0,\n  XML_PAYLOAD:       1,\n  BINARY_ATTACHMENT: 2,\n  CID_LIST:          3,\n  BINARY_METADATA:   4,\n};\n\nmodule.exports.ContentSummaryType = Enum.new(ContentSummaryType);\n","const DebugLib = require('solclient-debug');\nconst SolclientDestinationLib = require('solclient-destination');\nconst SolclientMessageLib = require('solclient-message');\nconst { Baggage, TraceContextSetter } = require('solclient-message-tracing');\nconst SolclientSDTLib = require('solclient-sdt');\nconst { BinaryMetaBlock, KeepAliveMessage } = require('../message-objects');\nconst { ContentSummaryType } = require('./content-summary-types');\nconst { Hex, Long, Convert: { stringToUint8Array } } = require('solclient-convert');\nconst { Lazy } = require('solclient-eskit');\nconst { LogFormatter } = require('solclient-log');\nconst { parseAdpAt } = require('./adprotocol');\nconst { parseCCAt } = require('./client-ctrl');\nconst { ParseSMF } = require('./parse-smf');\nconst { PriorityUserCosMap } = require('./priority-user-cos-map');\nconst { SMFProtocol } = require('../smf-protocols');\nconst { SMP } = require('./smp');\nconst { Transport } = require('./transport');\n\nconst { formatHexString } = Hex;\nconst { lazyValue } = Lazy;\nconst { parseSMFAt } = ParseSMF;\nconst { parseSMPAt } = SMP;\nconst { parseTsSmfMsgAt } = Transport;\n\nconst logger = new LogFormatter('[smf-decode]');\nconst { LOG_DEBUG,\n        LOG_ERROR } = logger;\n\nconst userCosForPriority = lazyValue(() => new PriorityUserCosMap().reverse);\n\nconst BIN_STRUCTYPES = {\n  0x0A: SolclientMessageLib.MessageType.MAP,\n  0x0B: SolclientMessageLib.MessageType.STREAM,\n  0x07: SolclientMessageLib.MessageType.TEXT,\n};\n\nfunction adaptBinaryMetaToMessage(binaryMeta, messageIn) {\n  const message = messageIn;\n  const messageSdt = SolclientSDTLib.Codec.parseSingleElement(binaryMeta.payload, 0);\n\n  if (!(messageSdt && messageSdt.getType() === SolclientSDTLib.SDTFieldType.STREAM)) {\n    return;\n  }\n\n  const sdtstream = messageSdt.getValue();\n  let sdtfield = sdtstream.getNext();\n  if (sdtfield && sdtfield.getType() === SolclientSDTLib.SDTFieldType.BYTEARRAY\n    && sdtfield._value && sdtfield._value.length > 0) {\n    // Preamble byte array is present\n    const preambleByte0 = sdtfield._value.readUInt8(0);\n    if ((preambleByte0 & 0x80) === 0) {\n      // structured message: override default \"BIN\" message type\n      message._messageType = (BIN_STRUCTYPES[preambleByte0 & 0x0F] ||\n                              SolclientMessageLib.MessageType.BINARY);\n    }\n    if (sdtfield._value.length > 1) {\n      const preambleByte1 = sdtfield._value.readUInt8(1);\n      message.setAsReplyMessage((preambleByte1 & 0x80) !== 0);\n    }\n  }\n\n  sdtfield = sdtstream.getNext();\n  if (sdtfield && sdtfield.getType() === SolclientSDTLib.SDTFieldType.MAP) {\n    const sdtMap = sdtfield.getValue();\n    const p = sdtMap.getField('p');\n    const h = sdtMap.getField('h');\n    if (p) {\n      message.setUserPropertyMap(p.getValue());\n    }\n    if (h) {\n      const headerMap = h.getValue();\n      const ci = headerMap.getField('ci');\n      const mi = headerMap.getField('mi');\n      const mt = headerMap.getField('mt');\n      const rt = headerMap.getField('rt');\n      const si = headerMap.getField('si');\n      const sn = headerMap.getField('sn');\n      const ts = headerMap.getField('ts');\n      const ex = headerMap.getField('ex');\n\n      const bag = headerMap.getField('bag'); // get the baggage field\n      const ctx = headerMap.getField('ctx'); // the message creation context field\n\n      if (ci) {\n        message.setCorrelationId(ci.getValue());\n      }\n      if (mi) {\n        message.setApplicationMessageId(mi.getValue());\n      }\n      if (mt) {\n        message.setApplicationMessageType(mt.getValue());\n      }\n      if (rt) {\n        message.setReplyTo(rt.getValue());\n      }\n      if (si) {\n        message.setSenderId(si.getValue());\n      }\n      if (sn) {\n        message.setSequenceNumber(sn.getValueNoThrow());\n      }\n      if (ts) {\n        message.setSenderTimestamp(ts.getValue());\n      }\n      if (ex) {\n        message.setGMExpiration(ex.getValue());\n      }\n      if (bag) {\n        // set the baggage\n        const _baggageObj = new Baggage();\n        _baggageObj.setBaggage(bag.getValue());\n        message._setBaggage(_baggageObj);\n      }\n      if (ctx) {\n        // create a context setter from the bytes or string depending on the active profile\n        const _traceContextSetter = TraceContextSetter.fromTraceContext(ctx.getValue());\n         // use it to set the message creation context, can be null\n        message._setCreationContext(_traceContextSetter);\n      }\n    }\n  }\n}\n\nfunction adaptSmfToMessage(smfHeader, messageIn, stream, offset) {\n  const message = messageIn;\n  message._setDeliverToOne(!!smfHeader.smf_dto);\n  message._setDeliveryMode(smfHeader.pm_deliverymode ||\n                          SolclientMessageLib.MessageDeliveryModeType.DIRECT);\n  if (smfHeader.pm_tr_topicname_bytes !== null) {\n    message._setDestination(\n      SolclientDestinationLib.DestinationFromNetwork.createDestinationFromBytes(\n        smfHeader.pm_tr_topicname_bytes));\n  }\n  message._setDiscardIndication(!!smfHeader.smf_di);\n  message._setElidingEligible(!!smfHeader.smf_elidingEligible);\n  message._setDMQEligible(!!smfHeader.smf_deadMessageQueueEligible);\n  message._setUserCos(userCosForPriority.value.get(smfHeader.smf_priority));\n  message._setPriority(smfHeader.pm_msg_priority);\n  if (smfHeader.pm_userdata) message._setUserData(smfHeader.pm_userdata);\n\n  message.setRedelivered(!!smfHeader.pm_ad_redelflag || !!smfHeader.pm_ad_flowredelflag);\n\n  message.setFlowId(smfHeader.pm_ad_flowid);\n  message.setGuaranteedMessageId(smfHeader.pm_ad_msgid);\n  message.setGuaranteedPreviousMessageId(smfHeader.pm_ad_prevmsgid);\n  message.setPublisherId(smfHeader.pm_ad_publisherid);\n  message.setPublisherMessageId(smfHeader.pm_ad_publishermsgid);\n  message.setTopicSequenceNumber(smfHeader.pm_ad_topicSequenceNumber);\n  if (message.getDeliveryMode() === SolclientMessageLib.MessageDeliveryModeType.DIRECT) {\n    message.setDeliveryCount(-1);\n  } else if (smfHeader.pm_ad_redeliveryCount) {\n    message.setDeliveryCount(smfHeader.pm_ad_redeliveryCount + 1);\n  } else { // AD, but delivery count header not present\n    // Only the flow knows whether the qEndpointBehaviour DC flag was set,\n    // so it overrides the value before passing it to the user with -1 if it wasn't.\n    message.setDeliveryCount(1);\n  }\n\n  // set the suid for the message if present\n  if (smfHeader.pm_ad_spooler_unique_id) {\n    message._setSpoolerUniqueId(smfHeader.pm_ad_spooler_unique_id);\n  }\n  // set the message id of the replication group message id using\n  // ASSURED_DELIVERY_REPLICATION_MATE_ACK_MESSAGE_ID if present\n  // otherwise use ASSURED_DELIVERY_ACK_MESSAGE_ID if present\n  // otherwise let the Mesage.getReplicationGroupMessageId use\n  // the value set by message.setGuaranteedMessageId\n  if (smfHeader.pm_ad_replication_mate_ack_message_id) {\n    message._setSpoolerMessageId(smfHeader.pm_ad_replication_mate_ack_message_id);\n  } else if (smfHeader.pm_ad_local_spooler_message_id) {\n    message._setSpoolerMessageId(smfHeader.pm_ad_local_spooler_message_id);\n  }\n\n  if (Long.isLong(smfHeader.pm_ad_ttl)) {\n    message.setTimeToLive(smfHeader.pm_ad_ttl.toNumber());\n  } else {\n    message.setTimeToLive(smfHeader.pm_ad_ttl);\n  }\n\n  // set the trace span transport context for the message if present\n  if (smfHeader.pm_ts_transport_context) {\n    // create a context setter from the bytes\n    const _traceContextSetter = TraceContextSetter.fromTraceContext(smfHeader.pm_ts_transport_context);\n    // use it to create the transport context\n    message._setTransportContext(_traceContextSetter);\n  }\n\n  // Copy content into fields (from input bytes)\n  const payloadOffset = offset + smfHeader.headerLength;\n  const cs = smfHeader.pm_content_summary;\n\n  if (!(cs && cs.length)) {\n    // No content-summary, assume binary attachment\n    message._setBinaryAttachment(smfHeader.payloadLength > 0\n                                ? stream.slice(payloadOffset,\n                                               payloadOffset + smfHeader.payloadLength)\n                                : undefined);\n    return;\n  }\n\n  for (let i = 0, n = cs.length; i < n; ++i) {\n    const currentChunk = cs[i];\n    const chunkBegin = payloadOffset + currentChunk.position;\n    const chunkEnd = payloadOffset + currentChunk.position + currentChunk.length;\n    switch (currentChunk.type) {\n      case ContentSummaryType.BINARY_ATTACHMENT:\n        message._setBinaryAttachment(stream.slice(chunkBegin, chunkEnd));\n        break;\n      case ContentSummaryType.BINARY_METADATA:\n        {\n          const binaryMeta = BinaryMetaBlock.fromEncodedSmf(stream, chunkBegin);\n          message.binaryMetadataChunk = binaryMeta;\n          if (binaryMeta.type === 0) {\n            // we have SDT JMS metadata\n            adaptBinaryMetaToMessage(binaryMeta, message);\n          }\n          break;\n        }\n      case ContentSummaryType.XML_META:\n        message._setXmlMetadata(stream.toString('latin1', chunkBegin, chunkEnd));\n        break;\n      case ContentSummaryType.XML_PAYLOAD:\n        message._setXmlContentInternal(stream.toString('latin1', chunkBegin, chunkEnd));\n        break;\n      default:\n        LOG_ERROR(`Unhandled ContentSummaryType: ${ContentSummaryType.describe(currentChunk.type)}`);\n    }\n  }\n}\n\nfunction decodeCompoundMessage(dataBuf, pos) {\n  const header = parseSMFAt(dataBuf, pos);\n  if (!header) {\n    LOG_DEBUG('decodeCompoundMessage: SMF parsing failed');\n    return null;\n  }\n  // the parser determined there was a full SMF message\n  const payloadPosition = pos + header.headerLength;\n  const payloadLen = header.payloadLength;\n  let message;\n  switch (header.smf_protocol) {\n    case SMFProtocol.TSESSION:\n      message = parseTsSmfMsgAt(dataBuf, payloadPosition, header);\n      if (!message) break;\n\n      message.smfHeader = header;\n      return message;\n\n    case SMFProtocol.TRMSG:\n      message = new SolclientMessageLib.Message();\n      message._smfHeader = header;\n      adaptSmfToMessage(header, message, dataBuf, pos);\n      return message;\n\n    case SMFProtocol.ADCTRL:\n      message = parseAdpAt(dataBuf, payloadPosition, payloadLen);\n      message.smfHeader = header;\n      return message;\n\n    case SMFProtocol.CLIENTCTRL:\n      message = parseCCAt(dataBuf, payloadPosition, payloadLen);\n      if (!message) break;\n\n      message.smfHeader = header;\n      return message;\n\n    case SMFProtocol.SMP:\n      message = parseSMPAt(dataBuf, payloadPosition);\n      if (!message) break;\n\n      message.smfHeader = header;\n      return message;\n\n    case SMFProtocol.KEEPALIVE:\n    case SMFProtocol.KEEPALIVEV2:\n      message = new KeepAliveMessage();\n      message.smfHeader = header;\n      return message;\n\n    default:\n      LOG_ERROR(`Unknown protocol: 0x${formatHexString(header.smf_protocol)}, ` +\n                `dump message content: \\n${\n                DebugLib.Debug.formatDumpBytes(dataBuf.slice(pos,\n                                                             pos + header.messageLength).toString('latin1'),\n                                               true, 0)}`);\n      break;\n  }\n  return null;\n}\n\nconst Decode = {\n  decodeCompoundMessage,\n};\n\nmodule.exports.Decode = Decode;\n","const MessageLib = require('solclient-message');\nconst { Base64, Bits, Convert } = require('solclient-convert');\nconst { BinaryMetaBlock, SMFHeader, SMPMessage } = require('../message-objects');\nconst { Check } = require('solclient-validate');\nconst { ClientCtrlMessage, KeepAliveMessage, AdProtocolMessage } = require('../message-objects');\nconst { Codec: SDTCodec } = require('solclient-sdt');\nconst { ContentSummaryElement } = require('./content-summary-element');\nconst { ContentSummaryType } = require('./content-summary-types');\nconst { DestinationType } = require('solclient-destination');\nconst { encAdp } = require('./adprotocol');\nconst { encCC } = require('./client-ctrl');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\nconst { Lazy } = require('solclient-eskit');\nconst { LOG_TRACE, LOG_INFO } = require('solclient-log');\nconst { ParamParse } = require('./param-parse');\nconst { PriorityUserCosMap } = require('./priority-user-cos-map');\nconst { SDTField, SDTFieldType, SDTMapContainer, SDTStreamContainer } = require('solclient-sdt');\nconst { SMFParameterType, SMFExtendedParameterType } = require('../smf-parameter-types');\nconst { SMFProtocol } = require('../smf-protocols');\nconst { SMP } = require('./smp');\n\nconst { encode: base64Encode } = Base64;\nconst { set: setBits } = Bits;\nconst {\n  int8ToStr,\n  int16ToStr,\n  int24ToStr,\n  int32ToStr,\n  int64ToStr,\n  uint8ArrayToString,\n} = Convert;\nconst { lazyValue } = Lazy;\nconst {\n  encContentSummary,\n  encDeliveryMode,\n  encLightSMFParam,\n  encodeSMFParam,\n  encodeSMFExtendedParam,\n  FORCED_LENGTH_MODE,\n} = ParamParse;\nconst { encodeSingleElement } = SDTCodec;\nconst { encSmp } = SMP;\n\nconst priorityForUserCos = lazyValue(() => new PriorityUserCosMap().forward);\n\nfunction addContentElementToArrays(csumm, payloadArray, dataChunk, cstype) {\n  if (Check.anything(dataChunk) && dataChunk.length > 0) {\n    const cse = new ContentSummaryElement(cstype, NaN, dataChunk.length);\n    csumm.push(cse);\n    payloadArray.push(dataChunk);\n  }\n}\n\nfunction addToMapIfPresent(headerMap, key, type, value) {\n  if (Check.anything(value)) {\n    headerMap.addField(key, SDTField.create(type, value));\n  }\n}\n\n// Return the binary attachment as string, sets the binaryMetaData on the message.\n// Not nice, but fast.\nfunction adaptMessageToBinaryMeta(message) {\n  let result;\n  // solace header map\n  const headerMap = new SDTMapContainer();\n  addToMapIfPresent(headerMap, 'ci', SDTFieldType.STRING, message.getCorrelationId());\n  addToMapIfPresent(headerMap, 'mi', SDTFieldType.STRING, message.getApplicationMessageId());\n  addToMapIfPresent(headerMap, 'mt', SDTFieldType.STRING, message.getApplicationMessageType());\n  addToMapIfPresent(headerMap, 'rt', SDTFieldType.DESTINATION, message.getReplyTo());\n  addToMapIfPresent(headerMap, 'si', SDTFieldType.STRING, message.getSenderId());\n  addToMapIfPresent(headerMap, 'sn', SDTFieldType.INT64, message.getSequenceNumber());\n  addToMapIfPresent(headerMap, 'ts', SDTFieldType.INT64, message.getSenderTimestamp());\n  addToMapIfPresent(headerMap, 'ex', SDTFieldType.INT64, message.getGMExpiration());\n\n  // the baggage value in the correct format. See - https://www.w3.org/TR/baggage/\n  const _baggage = message.getBaggage();\n  addToMapIfPresent(headerMap, 'bag', SDTFieldType.STRING, (_baggage ? _baggage.getBaggage() : null));\n  // message creation context will never be null\n  // set the encoded bytes into the map\n  const _creationContext = message.getCreationContext();\n  addToMapIfPresent(\n    headerMap, 'ctx', SDTFieldType.BYTEARRAY,\n    (_creationContext ? _creationContext.getEncodedTraceContext() : null)\n  );\n\n  // container map: solace headers + user prop map\n  const sdtMap = new SDTMapContainer();\n  if (message.getUserPropertyMap()) {\n    sdtMap.addField('p', SDTField.create(SDTFieldType.MAP, message.getUserPropertyMap()));\n  }\n  if (headerMap.getKeys().length > 0) {\n    sdtMap.addField('h', SDTField.create(SDTFieldType.MAP, headerMap));\n  }\n\n  let preambleByte0 = 0;\n  switch (message.getType()) {\n    case MessageLib.MessageType.BINARY:\n      preambleByte0 |= 0x80;\n      break;\n    case MessageLib.MessageType.MAP:\n      preambleByte0 |= 0x0A;\n      result = encodeSingleElement(message._structuredContainer);\n      break;\n    case MessageLib.MessageType.STREAM:\n      preambleByte0 |= 0x0B;\n      result = encodeSingleElement(message._structuredContainer);\n      break;\n    case MessageLib.MessageType.TEXT:\n      preambleByte0 |= 0x07;\n      result = encodeSingleElement(message._structuredContainer);\n      break;\n    default:\n      LOG_INFO(`Unhandled messageType: ${message.getType()}`);\n      break;\n  }\n  const preambleByte1 = message.isReplyMessage() ? 0x80 : 0;\n  const sdtPreamble = SDTField.create(SDTFieldType.BYTEARRAY,\n                                      String.fromCharCode(preambleByte0, preambleByte1));\n\n  // Putting it all together: a stream with the preamble and map\n  const sdtStreamContainer = new SDTStreamContainer();\n  sdtStreamContainer.addField(sdtPreamble);\n  sdtStreamContainer.addField(SDTField.create(SDTFieldType.MAP, sdtMap));\n\n  const binaryMeta = new BinaryMetaBlock();\n  binaryMeta.type = 0;\n  binaryMeta.payload = encodeSingleElement(SDTField.create(SDTFieldType.STREAM,\n                                                           sdtStreamContainer));\n  message.binaryMetadataChunk = binaryMeta;\n  return result;\n}\n\n\nfunction adaptMessageToSmf_nonPayload(message, smfHeaderIn) {\n  const smfHeader = smfHeaderIn;\n  const deliveryMode = message.getDeliveryMode();\n\n  smfHeader.smf_dto = message.isDeliverToOne();\n  smfHeader.pm_deliverymode = deliveryMode;\n  smfHeader.smf_adf = deliveryMode === MessageLib.MessageDeliveryModeType.DIRECT ? 0 : 1;\n  smfHeader.smf_di = message.isDiscardIndication();\n  smfHeader.smf_elidingEligible = message.isElidingEligible();\n  smfHeader.smf_deadMessageQueueEligible = message.isDMQEligible();\n  smfHeader.pm_ad_flowid = message.getFlowId();\n  smfHeader.pm_ad_publisherid = message.getPublisherId();\n  smfHeader.pm_ad_publishermsgId = message.getPublisherMessageId();\n  smfHeader.pm_ad_msgid = message.getGuaranteedMessageId();\n  smfHeader.pm_ad_prevmsgid = message.getGuaranteedPreviousMessageId();\n  smfHeader.pm_ad_ttl = message.getTimeToLive();\n  smfHeader.pm_ad_ackimm = message.isAcknowledgeImmediately();\n  smfHeader.pm_ad_redelflag = message.isRedelivered();\n\n  // get the transport context, if available\n  const _transportContext = message.getTransportContext();\n  if(_transportContext != null) {\n    // set the encoded Uint8 array into the header property\n    smfHeader.pm_ts_transport_context = _transportContext.getEncodedTraceContext();\n  }\n  \n  const dest = message.getDestination();\n  if (dest) {\n    smfHeader.pm_tr_topicname_bytes = dest.getBytes();\n    if (dest.type === DestinationType.QUEUE ||\n        dest.type === DestinationType.TEMPORARY_QUEUE) {\n      const { offset } = dest;\n      smfHeader.pm_queue_len = smfHeader.pm_tr_topicname_bytes.length - offset;\n      smfHeader.pm_queue_offset = offset;\n    }\n  }\n\n  smfHeader.smf_priority = priorityForUserCos.value.get(message.getUserCos());\n\n  if (message.getPriority() !== undefined\n    && typeof message.getPriority() === 'number'\n    && message.getPriority() <= 255\n    && message.getPriority() >= 0) {\n    smfHeader.pm_msg_priority = message.getPriority();\n  } else {\n    smfHeader.pm_msg_priority = null;\n  }\n\n  const userData = message.getUserData();\n  smfHeader.pm_userdata = (userData === null || userData === undefined)\n    ? null\n    : message.getUserData();\n}\n\nfunction adaptMessageToSmf_payloadMemoize(message) {\n  let encodedSdtPayload;\n\n  // Setup user properties, header properties, msgtype\n  if (message.getCorrelationId() ||\n      message.getApplicationMessageId() ||\n      message.getApplicationMessageType() ||\n      message.getReplyTo() ||\n      message.getSenderId() ||\n      message.getSequenceNumber() ||\n      message.getSenderTimestamp() ||\n      message.getUserPropertyMap() ||\n      message.isReplyMessage() ||\n      message.getCreationContext() ||\n      (message.getBaggage() && message.getBaggage().getBaggage()) ||\n      (message.getType() !== MessageLib.MessageType.BINARY)) {\n    // add SDT binary metadata\n    encodedSdtPayload = adaptMessageToBinaryMeta(message);\n  }\n\n  // Build array of ContentSummaryElements\n  const csumm = [];\n  const payload = [];\n  addContentElementToArrays(csumm, payload,\n                            message.getXmlMetadata(), ContentSummaryType.XML_META);\n  addContentElementToArrays(csumm, payload,\n                            message.getXmlContent(), ContentSummaryType.XML_PAYLOAD);\n  if (encodedSdtPayload) {\n    addContentElementToArrays(csumm, payload,\n                              encodedSdtPayload, ContentSummaryType.BINARY_ATTACHMENT);\n  } else {\n    addContentElementToArrays(csumm, payload,\n                              message._binaryAttachment ? message._binaryAttachment.toString('latin1') : '', ContentSummaryType.BINARY_ATTACHMENT);\n  }\n  const binaryMeta = message.binaryMetadataChunk;\n  if (binaryMeta !== null) {\n    const binaryMetaSMF = binaryMeta.asEncodedSmf();\n    const MAX_24BITS = 16777215;\n    if (binaryMetaSMF.length > MAX_24BITS) {\n      LOG_TRACE(`binary-meta data (${binaryMetaSMF.length}) over the ${MAX_24BITS} limit`);\n      throw new OperationError(`binary-meta data (${binaryMetaSMF.length}) over the ${MAX_24BITS} limit`, ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    } else {\n      addContentElementToArrays(csumm, payload, binaryMetaSMF, ContentSummaryType.BINARY_METADATA);\n    }\n  }\n  message._memoized_csumm = csumm;\n  message._memoized_payload = payload.join(''); \n  message._payload_is_memoized = true;\n  return message._memoized_payload ? message._memoized_payload.length : 0;\n}\n\nfunction adaptMessageToSmf_payloadFinalize(message, smfHeaderIn) {\n  const smfHeader = smfHeaderIn;\n  if (!message._payload_is_memoized) {\n    adaptMessageToSmf_payloadMemoize(message);\n  }\n  const csumm = message._memoized_csumm;\n  const payloadBytes = message._memoized_payload;\n  if (csumm.length === 0 ||\n      (csumm.length === 1 && csumm[0].type === ContentSummaryType.BINARY_ATTACHMENT)) {\n    // NULL or RAW payload (no content-summary)\n    //  Was this here to invert the condition?\n    // LOG_TRACE('NULL or RAW payload (no content-summary)');\n  } else {\n    smfHeader.pm_content_summary = csumm;\n  }\n\n  smfHeader.payload = payloadBytes;\n}\n\nfunction adaptMessageToSmf(message, smfHeaderIn) {\n  adaptMessageToSmf_payloadFinalize(message, smfHeaderIn);\n  adaptMessageToSmf_nonPayload(message, smfHeaderIn);\n}\n\n/**\n * Creates an array of all values that fit in the given number of bits.\n * e.g. bitRange(1) => [0, 1], bitRange(2) => [0, 1, 2, 3]\n * @param {Number} bits The number of bits in the range\n * @returns {Number} All values that fit in that number of bits\n * @private\n */\nconst bitRange = bits => Array.from(Array(Math.pow(2, bits))).map((el, i) => i);\nconst maskValues = (shift, bits) => bitRange(bits).map(val => setBits(0, val, shift, bits));\nconst DI_BIT = maskValues(31, 1);\nconst ELIDING_ELIGIBLE_BIT = maskValues(30, 1);\nconst DTO_BIT = maskValues(29, 1);\nconst ADF_BIT = maskValues(28, 1);\nconst DMQE_BIT = maskValues(27, 1);\nconst VERSION_BITS = maskValues(24, 3);\nconst UH_BITS = maskValues(22, 2);\nconst PROTOCOL_BITS = maskValues(16, 6);\nconst PRIORITY_BITS = maskValues(12, 4);\nconst TTL_BITS = maskValues(0, 8);\nconst QT_OFFSET_BYTES = maskValues(8, 8);\nconst QT_LEN_BYTES = maskValues(0, 8);\n\nfunction encodeSMF(header) {\n  // First 4 bytes: protocol, ttl, etc\n  let w1 = 0;\n\n  // PERF: single expression to make w1 const\n  w1 |= DI_BIT[header.smf_di && 1 || 0];\n  w1 |= ELIDING_ELIGIBLE_BIT[header.smf_elidingEligible && 1 || 0];\n  w1 |= DTO_BIT[header.smf_dto && 1 || 0];\n  w1 |= ADF_BIT[header.smf_adf && 1 || 0];\n  w1 |= DMQE_BIT[header.smf_deadMessageQueueEligible && 1 || 0];\n  w1 |= VERSION_BITS[header.smf_version || 0];\n  w1 |= UH_BITS[header.smf_uh || 0];\n  w1 |= PROTOCOL_BITS[header.smf_protocol || 0];\n  w1 |= PRIORITY_BITS[header.smf_priority || 0];\n  w1 |= TTL_BITS[header.smf_ttl || 0]; // PERF: or set w1 to ttl initially.\n\n  const params = [];\n  // Encode all standard SMF parameters\n  // Topic name and queue/topic offsets are supposed to come first\n  if (header.pm_tr_topicname_bytes) {\n    params.push(encodeSMFParam(2, SMFParameterType.TR_TOPICNAME,\n                               `${header.pm_tr_topicname_bytes}`));\n  }\n  if (header.pm_queue_len) {\n    params.push(encLightSMFParam(0, SMFParameterType.LIGHT_QUEUE_NAME_OFFSET,\n                                 int16ToStr(QT_OFFSET_BYTES[header.pm_queue_offset] |\n                                            QT_LEN_BYTES[header.pm_queue_len])));\n  }\n  if (header.pm_topic_len) {\n    params.push(encLightSMFParam(0, SMFParameterType.LIGHT_TOPIC_NAME_OFFSET,\n                                 int16ToStr(QT_OFFSET_BYTES[header.pm_topic_offset] |\n                                            QT_OFFSET_BYTES[header.pm_topic_len])));\n  }\n\n  if (header.pm_corrtag !== null && header.pm_corrtag !== undefined) {\n    params.push(encLightSMFParam(0, SMFParameterType.LIGHT_CORRELATION,\n                                 int24ToStr(header.pm_corrtag)));\n  }\n  if (header.pm_ad_ackimm) {\n    params.push(encLightSMFParam(0, SMFParameterType.LIGHT_ACK_IMMEDIATELY,\n                                 ''));\n  }\n\n  if (header.pm_msg_priority !== null) {\n    params.push(encodeSMFParam(0, SMFParameterType.MESSAGEPRIORITY,\n                               int8ToStr(header.pm_msg_priority)));\n  }\n  if (header.pm_userdata !== null && header.pm_userdata !== '') {\n    params.push(encodeSMFParam(0, SMFParameterType.USERDATA,\n                               header.pm_userdata));\n  }\n  if (header.pm_username) {\n    // do a sloppy base64 (no newlines)\n    params.push(encodeSMFParam(0, SMFParameterType.USERNAME,\n                               base64Encode(header.pm_username)));\n  }\n  if (header.pm_password) {\n    // do a sloppy base64 (no newlines)\n    params.push(encodeSMFParam(0, SMFParameterType.PASSWORD,\n                               base64Encode(header.pm_password)));\n  }\n  if (header.pm_respcode) {\n    // not useful API->router\n    params.push(encodeSMFParam(0, SMFParameterType.RESPONSE,\n                               int32ToStr(header.pm_respcode) + header.pm_respstr));\n  }\n\n  if (header.pm_deliverymode !== null) {\n    params.push(encodeSMFParam(0, SMFParameterType.DELIVERY_MODE,\n                               encDeliveryMode(header.pm_deliverymode)));\n  }\n\n  if (header.pm_ad_msgid !== undefined) {\n    params.push(encodeSMFParam(2, SMFParameterType.ASSURED_MESSAGE_ID,\n                               int64ToStr(header.pm_ad_msgid)));\n    params.push(encodeSMFParam(2, SMFParameterType.ASSURED_PREVMESSAGE_ID,\n                               int64ToStr(header.pm_ad_prevmsgid)));\n  }\n\n  if (header.pm_ad_flowid) {\n    params.push(encodeSMFParam(0, SMFParameterType.ASSURED_FLOWID,\n                               int32ToStr(header.pm_ad_flowid)));\n  }\n\n  // header.pm_ad_redelflag\n  // Ad redelivered\n  if (header.pm_ad_redelflag) {\n    params.push(encodeSMFParam(0, SMFParameterType.ASSURED_REDELIVERED_FLAG, undefined));\n  }\n  // header.pm_ad_flowredelflag\n\n  if (header.pm_ad_ttl !== undefined) {\n    params.push(encodeSMFParam(0, SMFParameterType.AD_TIMETOLIVE,\n                               int64ToStr(header.pm_ad_ttl)));\n  }\n\n  // sequence number?\n\n  if (header.pm_ad_publisherid) {\n    params.push(encodeSMFParam(0, SMFParameterType.PUBLISHER_ID,\n                               int32ToStr(header.pm_ad_publisherid)));\n  }\n\n  if (header.pm_ad_publisherMsgId) {\n    params.push(encodeSMFParam(0, SMFParameterType.PUBLISHER_MSGID,\n                               int64ToStr(header.pm_ad_publisherMsgId)));\n  }\n\n  // transactions: ackmessageid, transactionid, transactionflags\n\n  if (header.pm_content_summary) {\n    params.push(encodeSMFParam(2, SMFParameterType.MESSAGE_CONTENT_SUMMARY,\n                               encContentSummary(header.pm_content_summary)));\n  }\n  // done common SMF parameters!\n\n  // pre-collect and push extended parameters (once we have any)\n\n  let extendedStreamContents = '';\n  let extendedUH = 0;\n\n  if (header.pm_oauth2_access_token) {\n    extendedStreamContents += encodeSMFExtendedParam(0,\n                                                     SMFExtendedParameterType.OAUTH2_ACCESS_TOKEN,\n                                                     header.pm_oauth2_access_token);\n    extendedUH = extendedUH || 0;\n  }\n\n  if (header.pm_oidc_id_token) {\n    extendedStreamContents += encodeSMFExtendedParam(0,\n                                                     SMFExtendedParameterType.OIDC_ID_TOKEN,\n                                                     header.pm_oidc_id_token);\n    extendedUH = extendedUH || 0;\n  }\n\n  if (header.pm_oauth2_issuer_identifier) {\n    extendedStreamContents += encodeSMFExtendedParam(0,\n                                                     SMFExtendedParameterType\n                                                     .OAUTH2_ISSUER_IDENTIFIER,\n                                                     header.pm_oauth2_issuer_identifier);\n    extendedUH = extendedUH || 0;\n  }\n\n  if (header.pm_ts_transport_context) {\n    extendedStreamContents += encodeSMFExtendedParam(0,\n                                                     SMFExtendedParameterType.TS_TRANSPORT_CONTEXT,\n                                                     uint8ArrayToString(header.pm_ts_transport_context),\n                                                     FORCED_LENGTH_MODE.SIX);\n    extendedUH = extendedUH || 0;\n  }\n\n  if (extendedStreamContents.length > 0) {\n    params.push(encodeSMFParam(extendedUH,\n                               SMFParameterType.EXTENDED_TYPE_STREAM,\n                               extendedStreamContents));\n  }\n\n  // compute header size and full message size\n  const encodedParams = params.join('');\n  const hdrlen = 12 + encodedParams.length;\n  const msglen = hdrlen + header.payloadLength;\n\n  // ? Already encoded. Why bother?\n  header.setMessageSizes(hdrlen, header.payloadLength);\n\n  return (\n    int32ToStr(w1) +\n    int32ToStr(hdrlen) +\n    int32ToStr(msglen) +\n    encodedParams\n  );\n}\n\nfunction encodeCompoundMessage(msg) {\n  let payload = '';\n  if (msg instanceof MessageLib.Message) {\n    if (!msg.smfHeader) {\n      msg.smfHeader = new SMFHeader(SMFProtocol.TRMSG, 255);\n    }\n    adaptMessageToSmf(msg, msg._smfHeader);\n    payload = msg._smfHeader.payload;\n  } else if (msg instanceof ClientCtrlMessage) {\n    payload = encCC(msg);\n  } else if (msg instanceof SMPMessage) {\n    payload = encSmp(msg);\n  } else if (msg instanceof KeepAliveMessage) {\n    LOG_TRACE('Skipping retrieve payload as there is none in a KeepAliveMessage');\n  } else if (msg instanceof AdProtocolMessage) {\n    payload = encAdp(msg);\n  }\n  const header = msg.smfHeader;\n  header.setPayloadSize(payload.length);\n  const encodedHeader = encodeSMF(header);\n  return encodedHeader + payload;\n}\n\nconst Encode = {\n  encodeCompoundMessage,\n  encodeSMF,\n  adaptMessageToSmf_payloadMemoize,\n};\n\nmodule.exports.Encode = Encode;\n","const MessageLib = require('solclient-message');\nconst { BidiMap, Lazy } = require('solclient-eskit');\nconst { Bits, Convert } = require('solclient-convert');\nconst { ContentSummaryElement } = require('./content-summary-element');\nconst { ContentSummaryType } = require('./content-summary-types');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\nconst { LOG_ERROR } = require('solclient-log');\nconst { SMFUH } = require('../message-objects');\n\nconst { lazyValue } = Lazy;\nconst {\n  int8ToStr,\n  int16ToStr,\n  int24ToStr,\n  int32ToStr,\n} = Convert;\n\nconst delModeEnumBidiMap = lazyValue(\n  () => {\n    // Single bidirectional map for lookups. Note that the forward\n    // keys are converted to strings.\n    const source = [\n      [0x00, MessageLib.MessageDeliveryModeType.NON_PERSISTENT],\n      [0x01, MessageLib.MessageDeliveryModeType.PERSISTENT],\n      [0x02, MessageLib.MessageDeliveryModeType.DIRECT],\n    ].map(el => [el[0], el[1]]);\n    return new BidiMap(...source);\n  });\nconst lutDelModeToEnum = lazyValue(() => delModeEnumBidiMap.value.forward);\nconst lutEnumToDelMode = lazyValue(() => delModeEnumBidiMap.value.reverse);\n\n/**\n * SMF TLV Param LUT\n * utTypeMap[uh][paramtype] is the binary prefix for a regular (not LW) TLV\n * parameter with uh and paramtype values as accessed in the array.\n *\n * @private\n */\nconst uhTypeMap = (() => {\n  const result = [];\n  const paramTypeBits = 5;\n  const paramTypeCount = Math.pow(2, paramTypeBits);\n  SMFUH.values.forEach((uh) => {\n    result[uh] = [];\n    for (let i = 0; i < paramTypeCount; ++i) {\n      let byte1 = 0;\n      byte1 = Bits.set(byte1, uh, 6, 2);\n      byte1 = Bits.set(byte1, i, 0, paramTypeBits);\n      result[uh][i] = int8ToStr(byte1);\n    }\n  });\n  return result;\n})();\n\n/**\n * SMF TLV length map LUT\n *\n * lenMap[x] === String.fromCharCode(x)\n *\n * @private\n */\nconst lenMap = (new Array(256).fill(null).map((_, idx) => int8ToStr(idx)));\n\n/**\n * SMF Lightweight Param LUT\n *\n * lightMap[uh][paramtype][len] is the prefix for an SMF LWP\n * with uh, paramtype and len values as accessed in the array.\n *\n * @private\n */\nconst lightMap = (() => {\n  const result = [];\n  const paramTypeBits = 3;\n  const paramTypeCount = Math.pow(2, paramTypeBits);\n  const lenBits = 2;\n  const lenCount = Math.pow(2, lenBits);\n  SMFUH.values.forEach((uh) => {\n    result[uh] = [];\n    for (let i = 0; i < paramTypeCount; ++i) {\n      result[uh][i] = [];\n      for (let j = 0; j < lenCount; ++j) {\n        let byte1 = 0;\n        byte1 = Bits.set(byte1, uh, 6, 2);\n        byte1 = Bits.set(byte1, 1, 5, 1);\n        byte1 = Bits.set(byte1, i, 2, 3);\n        byte1 = Bits.set(byte1, j, 0, 2);\n        result[uh][i][j] = int8ToStr(byte1);\n      }\n    }\n  });\n  return result;\n})();\n\nconst ContentSummaryDecodeMap = [\n  ContentSummaryType.XML_META,\n  ContentSummaryType.XML_PAYLOAD,\n  ContentSummaryType.BINARY_ATTACHMENT,\n  ContentSummaryType.CID_LIST,\n  ContentSummaryType.BINARY_METADATA,\n];\n\nconst ParamParse = {};\n\nParamParse.FORCED_LENGTH_MODE = {\n  FIVE:  5,\n  SIX:   6\n};\n\nParamParse.parseTopicQueueOffsets = function parseTopicQueueOffsets(dataBuf, offset) {\n  const result = [];\n  result[0] = dataBuf.readUInt8(offset);\n  result[1] = dataBuf.readUInt8(offset + 1);\n  return result;\n};\n\nParamParse.parseResponseParam = function parseResponseParam(dataBuf, offset, paramLen) {\n  const result = [];\n  result[0] = dataBuf.readInt32BE(offset);\n  if (paramLen > 4) {\n    result[1] = dataBuf.toString('latin1', offset + 4, offset + paramLen);\n  } else {\n    result[1] = '';\n  }\n  return result;\n};\n\nParamParse.parseDeliveryMode = function parseDeliveryMode(dataBuf, offset) {\n  const delmode = dataBuf.readUInt8(offset);\n  const lookup = lutDelModeToEnum.value.get(delmode);\n  return lookup !== undefined ? lookup : MessageLib.MessageDeliveryModeType.DIRECT;\n};\n\nParamParse.encDeliveryMode = function encDeliveryMode(delmode) {\n  const lut = lutEnumToDelMode.value;\n  const lookup = lut.get(delmode);\n  return int8ToStr(lookup !== undefined ? lookup : MessageLib.MessageDeliveryModeType.DIRECT);\n};\n\nParamParse.parseContentSummary = function parseContentSummary(dataBuf, offset, length) {\n  const elements = [];\n  let cumulativeSize = 0;\n  let pos = offset;\n\n  while (pos < offset + length) {\n    const byte1 = dataBuf.readUInt8(pos);\n    const elementType = Bits.get(byte1, 4, 4);\n    const elementDeclaredLength = Bits.get(byte1, 0, 4);\n    let elementSize = 0;\n    switch (elementDeclaredLength) {\n      case 2:\n        elementSize = dataBuf.readUInt8(pos + 1);\n        break;\n      case 3:\n        elementSize = dataBuf.readUInt16BE(pos + 1);\n        break;\n      case 4:\n        elementSize = dataBuf.readUIntBE(pos + 1, 3);\n        break;\n      case 5:\n        elementSize = dataBuf.readInt32BE(pos + 1);\n        break;\n      default:\n        // Allow 1 and continue;\n        break;\n    }\n\n    if (elementDeclaredLength === 0) {\n      LOG_ERROR('Invalid content summary parameter - pos not advancing');\n      return null;\n    }\n    pos += elementDeclaredLength;\n\n    const cst = ContentSummaryDecodeMap[elementType];\n    if (cst === undefined) {\n      LOG_ERROR(`Unhandled element type ${elementType}`);\n    }\n    const currentElement = new ContentSummaryElement(cst, cumulativeSize, elementSize);\n    elements.push(currentElement);\n    cumulativeSize += elementSize;\n  } // end while loop\n  return elements;\n};\n\nParamParse.encContentSummary = function encContentSummary(contentSummaryArr) {\n  const messageElementDescriptions = [];\n  for (let i = 0, n = contentSummaryArr.length; i < n; ++i) {\n    // a ContentSummaryElement\n    const currentContentSummary = contentSummaryArr[i];\n    let currentSizeStr = '';\n    let firstByte = Bits.set(0, currentContentSummary.type, 4, 4);\n    if (currentContentSummary.length <= 255) {\n      // element length: 2\n      firstByte = Bits.set(firstByte, 2, 0, 4);\n      currentSizeStr = int8ToStr(currentContentSummary.length);\n    } else if (currentContentSummary.length <= 65535) {\n      firstByte = Bits.set(firstByte, 3, 0, 4);\n      currentSizeStr = int16ToStr(currentContentSummary.length);\n    } else if (currentContentSummary.length <= 16777215) {\n      firstByte = Bits.set(firstByte, 4, 0, 4);\n      currentSizeStr = int24ToStr(currentContentSummary.length);\n    } else {\n      firstByte = Bits.set(firstByte, 5, 0, 4);\n      currentSizeStr = int32ToStr(currentContentSummary.length);\n    }\n    messageElementDescriptions.push(int8ToStr(firstByte));\n    messageElementDescriptions.push(currentSizeStr);\n  }\n  return messageElementDescriptions.join('');\n};\n\nParamParse.encodeSMFParam = function encodeSMFParam(uh, paramtype, value) {\n  if (value === undefined) {\n    return uhTypeMap[uh][paramtype] + lenMap[2];\n  }\n  const len = value.length;\n  if (len <= 253) {\n    return uhTypeMap[uh][paramtype] + lenMap[len + 2] + value;\n  }\n  return uhTypeMap[uh][paramtype] + lenMap[0] + int32ToStr(len + 6) + value;\n};\n\n\nParamParse.encodeSMFExtendedParam = function encodeSMFExtendedParam(uh, paramtype, value, forcedLengthMode = -1) {\n  let byte1 = 0;\n  byte1 = Bits.set(byte1, (uh ? 1 : 0), 7, 1);\n  const length = ((value === undefined || value === null) ? 0 : value.length);\n  // Bits 1-3 of an extended param (not named in the spec, lengthMode here)\n  // can indicate value lengths 0-8 bytes, or 1-2 byte variable length.\n  const lengthModeMap = { 0: 0, 1: 1, 2: 2, 4: 3, 8: 4 };\n  let lengthMode = 0;\n  let lengthString = '';\n\n  // prevent unsupported value from breaking default behaviour\n  if(forcedLengthMode !== ParamParse.FORCED_LENGTH_MODE.FIVE && forcedLengthMode !== ParamParse.FORCED_LENGTH_MODE.SIX) {\n    forcedLengthMode = -1;\n  }\n\n  // EsLint made me do it.\n  if (Object.prototype.hasOwnProperty.call(lengthModeMap, length)) {\n    lengthMode = lengthModeMap[length];\n  } else if (\n    ((length < 253) && forcedLengthMode !== ParamParse.FORCED_LENGTH_MODE.SIX) \n    || (forcedLengthMode === ParamParse.FORCED_LENGTH_MODE.FIVE)\n  ) {\n    lengthMode = 5;\n    lengthString = int8ToStr(length + 3);\n  } else if (\n    ((length < 256 * 256 - 4) && forcedLengthMode !== ParamParse.FORCED_LENGTH_MODE.FIVE) \n    || (forcedLengthMode === ParamParse.FORCED_LENGTH_MODE.SIX)\n  ) {\n    lengthMode = 6;\n    lengthString = int16ToStr(length + 4);\n  } else {\n    LOG_ERROR(`Extended parameter type ${paramtype} is too long (${length} bytes) `);\n    throw new OperationError(`Extended parameter (${paramtype}) over the 2^16 byte limit`,\n        ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n  }\n\n  byte1 = Bits.set(byte1, lengthMode, 4, 3);\n  byte1 = Bits.set(byte1, (paramtype >> 8), 0, 4);\n  const byte2 = paramtype & 0xFF;\n  return int8ToStr(byte1) + int8ToStr(byte2) + lengthString + value;\n};\n\nParamParse.encLightSMFParam = function encLightSMFParam(uh, paramtype, value) {\n  return lightMap[uh][paramtype][value.length] + value;\n};\n\nmodule.exports.ParamParse = ParamParse;\n","const Long = require('long');\nconst {\n  LOG_DEBUG,\n  LOG_ERROR,\n  LOG_INFO,\n  LOG_TRACE,\n} = require('solclient-log');\nconst { Base64, Bits } = require('solclient-convert');\nconst { ParamParse } = require('./param-parse');\nconst { SMFHeader } = require('../message-objects');\nconst { SMFParameterType, SMFExtendedParameterType } = require('../smf-parameter-types');\n\nconst {\n  decode: base64Decode,\n} = Base64;\nconst {\n  get: bits,\n} = Bits;\n\nfunction isSMFHeaderAvailable(dataBuf, offset) {\n  const remaining = dataBuf.length - offset;\n  if (remaining < 12) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction isSMFHeaderValid(dataBuf, offset) {\n  if (!isSMFHeaderAvailable(dataBuf, offset)) {\n    return false;\n  }\n  const version = dataBuf.readUInt8(offset) & 0x7;\n  if (version !== 3) {\n    LOG_ERROR(`Invalid smf version in smf header, version=${version}`);\n    return false;\n  }\n  return true;\n}\n\nfunction isSMFAvailable(dataBuf, offset) {\n  if (!isSMFHeaderValid(dataBuf, offset)) {\n    return false;\n  }\n  const remaining = dataBuf.length - offset;\n  const totalLen = dataBuf.readUInt32BE(offset + 8);\n  return (totalLen <= remaining);\n}\n\n/**\n * Parse the Extended Parameters from an Extended Type Stream.\n * See section \"4.2.4 Extended Parameter Types\" in the SMF spec.\n * @param {SMFHeader} smfHeader The SMF header to add the extended parameters to.\n * @param {Buffer} dataBuf The binary data to parse\n * @param {Number} offset The offset in the data to begin parsing (ETS payload)\n * @param {Number} streamLen ETS length\n * @returns {Boolean} false if framing is lost, true otherwise.\n * @private\n */\nfunction parseSMFExtendedStream(smfHeader, dataBuf, offset, streamLen) {\n  /* eslint-disable no-unused-vars */\n  let pos = offset;\n  while (pos < offset + streamLen) {\n    if (pos + 2 > offset + streamLen) {\n      LOG_ERROR('Extended parameter stream had padding inside.');\n      break;\n    }\n\n    // The first 2 bytes of Extended Parameters is fixed (MSB order):\n    // 1 bit UH\n    // 3 bits length mode selector (0-, 1-, 2-, 4-, 8-byte, or variable)\n    // 12 bits Type\n    const byte1 = dataBuf.readUInt8(pos);\n    const byte2 = dataBuf.readUInt8(pos + 1);\n    const pUH = bits(byte1, 7, 1);\n    const lengthMode = bits(byte1, 4, 3);\n    const type = (bits(byte1, 0, 4) << 8) + byte2; //FIGURE OUT WHAT bits does\n    pos += 2;\n    const lengthModeMap = { 0: 0, 1: 1, 2: 2, 3: 4, 4: 8 };\n    let valueLen = 0;\n    // EsLint made me do it\n    if (Object.prototype.hasOwnProperty.call(lengthModeMap, lengthMode)) {\n      valueLen = lengthModeMap[lengthMode];\n    } else if (lengthMode === 5) {\n      // 1-byte variable length value\n      valueLen = dataBuf.readUInt8(pos) - 3;\n      pos++;\n    } else if (lengthMode === 6) {\n      // 2-byte variable length value\n      valueLen = dataBuf.readUInt16BE(pos) - 4;\n      pos += 2;\n    } else {\n      LOG_ERROR(`Invalid length mode ${lengthMode} in Extended Parameter type ${type}`);\n      // We must be reading garbage, disconnect:\n      return false;\n    }\n\n    switch (type) {\n      case SMFParameterType.AD_REDELIVERY_COUNT:\n        smfHeader.pm_ad_redeliveryCount = dataBuf.readUInt32BE(pos);\n        break;\n      case SMFParameterType.AD_SPOOLER_UNIQUE_ID:\n        smfHeader.pm_ad_spooler_unique_id = Long.fromBits(dataBuf.readUInt32BE(pos + 4),\n                                                          dataBuf.readUInt32BE(pos),\n                                                          true);\n        break;\n      case SMFParameterType.AD_ACK_MESSAGE_ID:\n        smfHeader.pm_ad_local_spooler_message_id = Long.fromBits(dataBuf.readUInt32BE(pos + 4),\n                                                                 dataBuf.readUInt32BE(pos),\n                                                                 true);\n        break;\n      case SMFParameterType.AD_REPL_MATE_ACK_MSGID:\n        smfHeader.pm_ad_replication_mate_ack_message_id =\n           Long.fromBits(dataBuf.readUInt32BE(pos + 4),\n                         dataBuf.readUInt32BE(pos),\n                         true);\n        break;\n      case SMFExtendedParameterType.TS_TRANSPORT_CONTEXT:\n        // from specs, trace span context must be at least 36 bytes\n        // use 36 - 4 (account for error in 2-byte variable length value calculation above) = 32\n        if(valueLen >= 32) {\n          // will convert this string to a UInt8Array later\n          smfHeader.pm_ts_transport_context = dataBuf.toString('latin1', pos, pos + valueLen);\n        } else {\n          LOG_TRACE('Skipped due to unexpected size of extended parameter ' +\n                    `type ${type} value length ${valueLen} offset ${pos}`);\n        }\n        break;\n      default:\n        if (pUH === 0) {\n          LOG_TRACE('Dropping unrecognised extended parameter ' +\n                    `type ${type} value length ${valueLen} UH ${pUH}`);\n        } else {\n          smfHeader.discardMessage = true;\n          LOG_TRACE('Dropping whole message due to unrecognised extended parameter ' +\n                    `type ${type} value length ${valueLen} UH ${pUH}`);\n        }\n        break;\n    }\n    pos += valueLen;\n  }\n  if (pos > offset + streamLen) {\n    LOG_ERROR(`Last extended parameter ran beyond extended stream length by ${pos - (offset + streamLen)}.`);\n  }\n  return true;\n  /* eslint-enable no-unused-vars */\n}\n\n/**\n * Parse SMF in the given data buffer at the supplied offset.\n * @param {Buffer} dataBuf The binary data to parse\n * @param {Number} offset The offset in the data to begin parsing\n * @param {Boolean} readHeaderOnly If true, stop parsing at end of header\n * @returns {SMFHeader|null} The SMF header, if possible\n * @private\n */\nfunction parseSMFAt(dataBuf, offset, readHeaderOnly = false) {\n  if (!isSMFHeaderValid(dataBuf, offset)) {\n    LOG_DEBUG('Valid SMF header not available');\n    return null;\n  }\n  let pos = offset;\n\n  // Reading fixed header block (12 bytes)\n  const word1 = dataBuf.readUInt32BE(pos);\n  const headerLen = dataBuf.readUInt32BE(pos + 4);\n  const word3 = dataBuf.readUInt32BE(pos + 8);\n\n  const smfHeader = new SMFHeader();\n  smfHeader.smf_di = bits(word1, 31, 1);\n  smfHeader.smf_elidingEligible = bits(word1, 30, 1);\n  smfHeader.smf_dto = bits(word1, 29, 1);\n  smfHeader.smf_adf = bits(word1, 28, 1);\n  smfHeader.smf_deadMessageQueueEligible = bits(word1, 27, 1);\n  smfHeader.smf_version = bits(word1, 24, 3);\n  smfHeader.smf_uh = bits(word1, 22, 2);\n  smfHeader.smf_protocol = bits(word1, 16, 6);\n  smfHeader.smf_priority = bits(word1, 12, 4);\n  smfHeader.smf_ttl = bits(word1, 0, 8);\n\n  const payloadLen = word3 - headerLen;\n  if (payloadLen < 0) {\n    LOG_ERROR('SMF parse error: lost framing');\n    return null; // SMF parse error: lost framing\n  }\n  smfHeader.setMessageSizes(headerLen, payloadLen);\n  if (readHeaderOnly) {\n    return smfHeader;\n  }\n  pos += 12;\n\n  // Reading variable-length params\n  const end = offset + headerLen;\n  while (pos < end) {\n    const paramByte1 = dataBuf.readUInt8(pos);\n    ++pos;\n\n    const prmUh = bits(paramByte1, 6, 2);\n    const paramIsLightweight = (bits(paramByte1, 5, 1) !== 0);\n    if (paramIsLightweight) {\n      // LIGHTWEIGHT param\n      const lwpType = bits(paramByte1, 2, 3);\n      const lwpLen = bits(paramByte1, 0, 2) + 1;\n      const lwpValueLen = lwpLen - 1;\n      if (lwpLen <= 0) {\n        LOG_ERROR('Invalid lightweight parameter length');\n        return null; // Invalid parameter\n      }\n\n      switch (lwpType) {\n        case SMFParameterType.LIGHT_CORRELATION:\n          smfHeader.pm_corrtag = dataBuf.readUIntBE(pos, 3);\n          break;\n        case SMFParameterType.LIGHT_TOPIC_NAME_OFFSET:\n          {\n            const parsedQueueOffsets = ParamParse.parseTopicQueueOffsets(dataBuf, pos);\n            smfHeader.pm_queue_offset = parsedQueueOffsets[0];\n            smfHeader.pm_queue_len = parsedQueueOffsets[1];\n            break;\n          }\n        case SMFParameterType.LIGHT_QUEUE_NAME_OFFSET:\n          {\n            const parsedTopicOffsets = ParamParse.parseTopicQueueOffsets(dataBuf, pos);\n            smfHeader.pm_topic_offset = parsedTopicOffsets[0];\n            smfHeader.pm_topic_len = parsedTopicOffsets[1];\n            break;\n          }\n        case SMFParameterType.LIGHT_ACK_IMMEDIATELY:\n          smfHeader.pm_ad_ackimm = !!dataBuf.readUInt8(pos);\n          break;\n        default:\n          if (prmUh === 0) {\n            // Ignore, and silently discard the parameter.\n            LOG_TRACE(`Unhandled LIGHTWEIGHT parameter type: ${lwpType} UH is ${prmUh} discarding parameter.`);\n          } else {\n            // Ignore, and silently discard the entire message.\n            LOG_TRACE(`Unhandled LIGHTWEIGHT parameter type: ${lwpType} UH is ${prmUh} discarding message.`);\n            smfHeader.discardMessage = true;\n          }\n          break;\n      }\n      pos += lwpValueLen;\n    } else {\n      // REGULAR encoded param (including breakout for Extended Type Stream)\n      const pStart = pos;\n      const pType = bits(paramByte1, 0, 5);\n      if (pType === 0) {\n        break; // PADDING (break while: header finished)\n      }\n\n      let pLen = dataBuf.readUInt8(pos);\n      pos++;\n      let pValueLen;\n      if (pLen === 0) {\n        // extended-length parameter (32-bit)\n        // Works for Extended Parameters too.\n        pLen = dataBuf.readUInt32BE(pos);\n        pos += 4;\n        pValueLen = pLen - 6;\n      } else {\n        pValueLen = pLen - 2;\n      }\n\n      if (pLen <= 0) {\n        LOG_ERROR(`Invalid regular parameter length ${pLen}/${pValueLen\n                  } with suspect type ${SMFParameterType.describe(pType)} at parameter at position ${pStart}`);\n        return null; // Invalid parameter\n      }\n\n      switch (pType) {\n        case SMFParameterType.PUBLISHER_ID:\n          smfHeader.pm_ad_publisher_id = Long.fromBits(dataBuf.readUInt32BE(pos + 4),\n                                                       dataBuf.readUInt32BE(pos),\n                                                       true);\n          break;\n        case SMFParameterType.PUBLISHER_MSGID:\n          smfHeader.pm_ad_publishermsgid = Long.fromBits(dataBuf.readUInt32BE(pos + 4),\n                                                         dataBuf.readUInt32BE(pos),\n                                                         true);\n          break;\n        case SMFParameterType.MESSAGEPRIORITY:\n          smfHeader.pm_msg_priority = dataBuf.readUInt8(pos);\n          break;\n        case SMFParameterType.USERDATA:\n          smfHeader.pm_userdata = dataBuf.toString('latin1', pos, pos + pValueLen);\n          break;\n        case SMFParameterType.USERNAME:\n          // only useful on API -> router\n          smfHeader.pm_username = base64Decode(dataBuf.toString('latin1', pos, pos + pValueLen));\n          break;\n        case SMFParameterType.PASSWORD:\n          // only useful on API -> router\n          smfHeader.pm_password = base64Decode(dataBuf.toString('latin1', pos, pos + pValueLen));\n          break;\n        case SMFParameterType.RESPONSE:\n          {\n            const parsedResponse = ParamParse.parseResponseParam(dataBuf, pos, pValueLen); //CHECK\n            smfHeader.pm_respcode = parsedResponse[0];\n            smfHeader.pm_respstr = parsedResponse[1];\n            break;\n          }\n        case SMFParameterType.SUB_ID_LIST:\n        case SMFParameterType.GENERIC_ATTACHMENT:\n        case SMFParameterType.BINARY_ATTACHMENT:\n          LOG_INFO('Skipping deprecated parameter type');\n          // deprecated\n          break;\n        case SMFParameterType.DELIVERY_MODE:\n          // DeliveryMode is DIRECT unless the AD flag is set. The\n          // deliveryMode parameter (and all other guaranteed messaging\n          // parameters may be present in demoted messages reflecting how\n          // the message was published.\n          // IF ever solClientJS must support the horror that is cut-through\n          // persistence, then we must defer setting deliveryMode back to\n          // DIRECT until the session decides whether it is a true direct\n          // message or a cut-through direct message.  But until that is\n          // forced upon us, the cleanest place to set deliveryMode is always\n          // here in the parser.\n          if (smfHeader.smf_adf) {\n            smfHeader.pm_deliverymode = ParamParse.parseDeliveryMode(dataBuf, pos);\n          }\n          break;\n        case SMFParameterType.ASSURED_MESSAGE_ID:\n          smfHeader.pm_ad_msgid = Long.fromBits(dataBuf.readUInt32BE(pos + 4),\n                                                dataBuf.readUInt32BE(pos),\n                                                true);\n          break;\n        case SMFParameterType.ASSURED_PREVMESSAGE_ID:\n          smfHeader.pm_ad_prevmsgid = Long.fromBits(dataBuf.readUInt32BE(pos + 4),\n                                                    dataBuf.readUInt32BE(pos),\n                                                    true);\n          break;\n        case SMFParameterType.ASSURED_REDELIVERED_FLAG:\n          smfHeader.pm_ad_redelflag = true;\n          break;\n        case SMFParameterType.AD_TIMETOLIVE:\n          smfHeader.pm_ad_ttl = Long.fromBits(dataBuf.readUInt32BE(pos + 4),\n                                              dataBuf.readUInt32BE(pos),\n                                              true);\n          break;\n        case SMFParameterType.AD_TOPICSEQUENCE_NUMBER:\n          smfHeader.pm_ad_topicSequenceNumber = Long.fromBits(dataBuf.readUInt32BE(pos + 4),\n                                                              dataBuf.readUInt32BE(pos),\n                                                              true);\n          break;\n        case SMFParameterType.MESSAGE_CONTENT_SUMMARY:\n          {\n            const contentSummary = ParamParse.parseContentSummary(dataBuf, pos, pValueLen);\n            if (!contentSummary) {\n              LOG_ERROR(`Invalid message content summary at ${pos}, len ${pValueLen}`);\n              return false; // invalid message content summary parameter\n            }\n            smfHeader.pm_content_summary = contentSummary;\n            break;\n          }\n        case SMFParameterType.ASSURED_FLOWID:\n          smfHeader.pm_ad_flowid = dataBuf.readUInt32BE(pos);\n          break;\n        case SMFParameterType.TR_TOPICNAME:\n          // copy bytes. Don't strip null terminator\n          smfHeader.pm_tr_topicname_bytes = dataBuf.toString('latin1', pos, pos + pValueLen);\n          break;\n        case SMFParameterType.AD_FLOWREDELIVERED_FLAG:\n          smfHeader.pm_ad_flowredelflag = true;\n          break;\n        case SMFParameterType.EXTENDED_TYPE_STREAM: {\n          const extSuccess = parseSMFExtendedStream(smfHeader, dataBuf, pos, pValueLen);\n          if (!extSuccess) { return null; }\n          break;\n        }\n        default:\n          if (prmUh === 0) {\n            // Ignore, and silently discard the parameter.\n            LOG_TRACE(`Unhandled SMF parameter type: ${pType} UH is ${prmUh} discarding parameter.`);\n          } else {\n            // Ignore, and silently discard the entire message.\n            LOG_TRACE(`Unhandled SMF parameter type: ${pType} UH is ${prmUh} discarding message.`);\n            smfHeader.discardMessage = true;\n          }\n          break;\n      } // end param type switch block\n\n      pos += pValueLen;\n    } // end (regular param)\n  } // end while\n\n  return smfHeader;\n}\n\nconst ParseSMF = {\n  isSMFHeaderAvailable,\n  isSMFHeaderValid,\n  isSMFAvailable,\n  parseSMFAt,\n};\n\nmodule.exports.ParseSMF = ParseSMF;\n","const MessageLib = require('solclient-message');\nconst { BidiMap } = require('solclient-eskit');\n\nclass PriorityUserCosMap extends BidiMap {\n  constructor() {\n    super([MessageLib.MessageUserCosType.COS1, 0],\n          [MessageLib.MessageUserCosType.COS2, 1],\n          [MessageLib.MessageUserCosType.COS3, 2]);\n  }\n}\n\nmodule.exports.PriorityUserCosMap = PriorityUserCosMap;\n","const { Bits, Convert } = require('solclient-convert');\nconst { LOG_DEBUG, LOG_TRACE } = require('solclient-log');\nconst { SMFSMPMessageType } = require('../smf-smp-message-types');\nconst { SMPMessage } = require('../message-objects');\n\nconst {\n  get: bits,\n  set: setBits,\n} = Bits;\n\nconst {\n  int8ToStr,\n  int32ToStr,\n} = Convert;\n\nconst SMP = {};\nSMP.parseSMPAt = function parseSMPAt(dataBuf, offset) {\n  if ((offset + 6) > dataBuf.length) {\n    // not enough data\n    LOG_DEBUG('Not enough data to read an SMP message.');\n    return false;\n  }\n  let pos = offset;\n  const onebyte = dataBuf.readUInt8(pos);\n  pos++;\n\n  // var msgUh = bits(onebyte, 7, 1);\n  const msgType = bits(onebyte, 0, 7);\n  const smpMsg = new SMPMessage();\n\n  if (!(msgType === SMFSMPMessageType.ADDSUBSCRIPTION ||\n        msgType === SMFSMPMessageType.REMSUBSCRIPTION ||\n        msgType === SMFSMPMessageType.ADDQUEUESUBSCRIPTION ||\n        msgType === SMFSMPMessageType.REMQUEUESUBSCRIPTION\n  )) {\n    LOG_DEBUG(`Found unsupported SMP messageType ${msgType}`);\n    return false; // unsupported type\n  }\n\n  LOG_TRACE('SMP.parseSMPAt called, ', dataBuf.toString('latin1'));\n\n  const msgLength = dataBuf.readUInt32BE(pos);\n  pos += 4;\n  if ((offset + msgLength) > dataBuf.length) {\n    // not enough data\n    LOG_DEBUG(`Invalid declared length of ${msgLength}, unable to read SMP message.`);\n    return false;\n  }\n  const msgFlags = dataBuf.readUInt8(pos);\n  pos++;\n\n  smpMsg.msgType = msgType;\n  smpMsg.smpFlags = msgFlags;\n  if (msgType === SMFSMPMessageType.ADDSUBSCRIPTION ||\n    msgType === SMFSMPMessageType.REMSUBSCRIPTION) {\n    // 6 is the base len (msgLength - 6)\n    smpMsg.encodedUtf8Subscription = dataBuf.toString('latin1', pos, pos + msgLength - 6);\n  } else {\n    const queueLength = dataBuf.readUInt8(pos);\n    pos++;\n    smpMsg.encodedUtf8QueueName = dataBuf.toString('latin1', pos, pos + queueLength);\n    pos += queueLength;\n    const subsLength = dataBuf.readUInt8(pos);\n    pos++;\n    smpMsg.encodedUtf8Subscription = dataBuf.toString('latin1', pos, pos + subsLength);\n    pos += subsLength;\n  }\n  return smpMsg;\n};\n\nSMP.encSmp = function encSmp(smpMsg) {\n  if (!(smpMsg.msgType === SMFSMPMessageType.ADDSUBSCRIPTION ||\n        smpMsg.msgType === SMFSMPMessageType.REMSUBSCRIPTION ||\n        smpMsg.msgType === SMFSMPMessageType.ADDQUEUESUBSCRIPTION ||\n        smpMsg.msgType === SMFSMPMessageType.REMQUEUESUBSCRIPTION\n  )) {\n    LOG_DEBUG(`Unsupported SMP message for encoding: ${smpMsg}`);\n    return false;\n  }\n\n  LOG_TRACE('encSmp called.', smpMsg);\n  const data = [];\n  let onebyte = 0;\n  onebyte = setBits(onebyte, 1, 7, 1);\n  onebyte = setBits(onebyte, smpMsg.msgType, 0, 7);\n  data.push(int8ToStr(onebyte));\n  let msgLength = 6 + smpMsg.encodedUtf8Subscription.length;\n  if (smpMsg.msgType === SMFSMPMessageType.ADDQUEUESUBSCRIPTION ||\n    smpMsg.msgType === SMFSMPMessageType.REMQUEUESUBSCRIPTION) {\n    msgLength += 2 + smpMsg.encodedUtf8QueueName.length; //both strings have a 1-byte length.\n  }\n  data.push(int32ToStr(msgLength)); // length\n  data.push(int8ToStr(smpMsg.smpFlags));\n  if (smpMsg.msgType === SMFSMPMessageType.ADDQUEUESUBSCRIPTION ||\n    smpMsg.msgType === SMFSMPMessageType.REMQUEUESUBSCRIPTION) {\n    //TODO: validate the lengths are < 251 including null termination!\n    // Somewhere else though.\n    data.push(int8ToStr(smpMsg.encodedUtf8QueueName.length));\n    data.push(smpMsg.encodedUtf8QueueName);\n    data.push(int8ToStr(smpMsg.encodedUtf8Subscription.length));\n    data.push(smpMsg.encodedUtf8Subscription);\n  } else {\n    data.push(smpMsg.encodedUtf8Subscription);\n  }\n  return data.join('');\n};\n\nmodule.exports.SMP = SMP;\n","const { Bits, Convert } = require('solclient-convert');\nconst { Lazy } = require('solclient-eskit');\nconst { LOG_ERROR } = require('solclient-log');\nconst { SMFTransportSessionMessageType } = require('../smf-transport-session-message-types');\nconst { TransportSMFMessage } = require('../message-objects');\n\nconst {\n  get: bits,\n} = Bits;\nconst {\n  int16ToStr,\n  int32ToStr,\n} = Convert;\nconst { lazyValue } = Lazy;\n\n// ========== TSSMF ==========\nfunction remains(dataBuf, offset) {\n  return dataBuf.length - offset;\n}\n\nfunction parseTsSmfHdrAt(dataBuf, offset, smfheader) {\n  let pos = offset;\n  if (remains(dataBuf, pos) < 10) {\n    LOG_ERROR('TsSmf parse failed: not enough data, expected at least 10B');\n    return false;\n  }\n\n  const transportSMFMessage = new TransportSMFMessage();\n  transportSMFMessage.smfHeader = smfheader;\n  const twobyte = dataBuf.readUInt16BE(pos);\n  pos += 2;\n  transportSMFMessage.uh = bits(twobyte, 15, 1);\n  transportSMFMessage.messageType = bits(twobyte, 8, 7);\n  const tsHdrLen = bits(twobyte, 0, 8);\n  transportSMFMessage.tsHeaderLength = tsHdrLen;\n  transportSMFMessage.sessionId = dataBuf.toString('latin1', pos, pos + 8);\n  pos += 8;\n\n  if (transportSMFMessage.messageType ===\n      SMFTransportSessionMessageType.CREATE_RESP) {\n    // parse extra chunk: routerTag\n    const rtrTagLen = dataBuf.readUInt8(pos);\n    pos++;\n    if (remains(dataBuf, pos) < rtrTagLen) {\n      LOG_ERROR(`TsSmf parse failed: not enough data for RouterTag, expected ${rtrTagLen}B`);\n      return false;\n    }\n    transportSMFMessage.routerTag = dataBuf.toString('latin1', pos, pos + rtrTagLen);\n    pos += rtrTagLen;\n  }\n\n  // FFWD any remaining TsSmf padding?\n  pos = offset + tsHdrLen;\n\n  // Length of encapsulated message payload:\n  // the SMF msg payload length - bytes consumed in TsSmf\n\n  if (smfheader.payloadLength === 0xffffffff) {\n    // special \"streaming\" unknown-length header\n    transportSMFMessage.payloadLength = smfheader.payloadLength;\n  } else {\n    transportSMFMessage.payloadLength = smfheader.payloadLength - tsHdrLen;\n  }\n  return transportSMFMessage; // Header with no payload field\n}\n\n// Generates an SMF header up to, but not including the the total length\n// This is fixed for all client generated transport session messages\nconst tsHeaderPreLength = lazyValue(() => (\n  int32ToStr(0x03140001) +  // SMF version, TransportSession, TTL\n  int32ToStr(12)            // Header length\n));\n\nconst tsDestroyHeaderPreSid = lazyValue(() => (\n  tsHeaderPreLength.value + // Header up to the message length field\n  int32ToStr(22) +          // Total length\n  int16ToStr(0x820a)        // msgType(destroy), length\n));\n\nconst tsCreateHeader = lazyValue(() => (\n  tsHeaderPreLength.value + // Header up to the message length field\n  int32ToStr(22) +          // Total length\n  int16ToStr(0x800a) +      // msgType(create), length\n  int32ToStr(0) +           // Session ID (first half)\n  int32ToStr(0)             // Session ID (second half)\n));\n\nconst tsDataTokenPreSid = lazyValue(() => (\n  int32ToStr(0x03940001) +\n  int32ToStr(12) +\n  int32ToStr(22) +\n  int16ToStr(0x850a)\n));\n\nconst tsDataStreamTokenPreSid = lazyValue(() => (\n  int32ToStr(0x03940001) +\n  int32ToStr(12) +\n  int32ToStr(24) +\n  int16ToStr(0x860c)\n));\n\n// Generate a full Transport Session Create header\nfunction genTsCreateHeader() {\n  return tsCreateHeader.value;\n}\n\n// Generate a full Transport Session Destroy header\nfunction genTsDestroyHeader(sid) {\n  return (\n    tsDestroyHeaderPreSid.value +\n    sid                       // Session ID\n  );\n}\n\n// Generate a data token message\nfunction genTsDataTokenMsg(sid) {\n  return (\n    tsDataTokenPreSid.value +\n    sid\n  );\n}\n\n// Generate a STREAMING data token message\nfunction genTsDataStreamTokenMsg(sid, paddingBytes) {\n  return (\n    tsDataStreamTokenPreSid.value +\n    sid +\n    ((paddingBytes && paddingBytes > 0) ? int16ToStr(paddingBytes) : int16ToStr(0x0000))\n  );\n}\n\nfunction genTsDataMsgHeaderParts(sid) {\n  return [\n    (int32ToStr(0x03940001) + int32ToStr(12)),\n    (int16ToStr(0x840a) + sid),\n  ];\n}\n\nfunction parseTsSmfMsgAt(dataBuf, offset, smfheader) {\n  const transportSMFMessage = parseTsSmfHdrAt(dataBuf, offset, smfheader);\n  if (!transportSMFMessage) {\n    return null;\n  }\n\n    // need to FF to pos\n  const pos = offset + transportSMFMessage.tsHeaderLength;\n\n    // Length of encapsulated message payload:\n    // the SMF msg payload length - bytes consumed in TsSmf\n  if (remains(dataBuf, pos) < transportSMFMessage.payloadLength) {\n    LOG_ERROR(`Couldn't read full encapsulated TsSmf payload, expected ${transportSMFMessage.payloadLength}B`);\n    return null;\n  }\n\n  transportSMFMessage.payload =\n                            dataBuf.slice(pos, pos + transportSMFMessage.payloadLength);\n  return transportSMFMessage;\n}\n\nconst Transport = {\n  genTsCreateHeader,\n  genTsDestroyHeader,\n  genTsDataTokenMsg,\n  genTsDataStreamTokenMsg,\n  genTsDataMsgHeaderParts,\n  parseTsSmfHdrAt,\n  parseTsSmfMsgAt,\n};\n\nmodule.exports.Transport = Transport;\n","/**\n * Created by rpaulson on 06/02/2017.\n */\nconst { BaseMessage } = require('./base-message');\nconst { Convert, Long } = require('solclient-convert');\nconst { DestinationType } = require('solclient-destination');\nconst { LOG_TRACE } = require('solclient-log');\nconst { OperationError } = require('solclient-error');\nconst { QueueAccessType,\n        QueueDiscardBehavior } = require('solclient-queue');\nconst { QueuePermissions, QueueType } = require('solclient-queue');\nconst { ReplayStartType } = require('solclient-replaystart');\nconst { MessageOutcome } = require('solclient-message');\nconst { SMFAdProtocolMessageType } = require('../smf-adprotocol-message-types');\nconst { SMFAdProtocolParam } = require('../smf-adprotocol-params');\nconst { SMFHeader } = require('./smf-header');\nconst { SMFParameter } = require('./smf-parameter');\nconst { SMFProtocol } = require('../smf-protocols');\nconst { SMFUH } = require('./smf-uh');\nconst { StringUtils } = require('solclient-util');\n\n// eslint-disable-next-line global-require\nconst BufferImpl = require('buffer').Buffer;\n\nconst {\n  strToInt8,\n  strToInt16,\n  strToUInt32,\n  strToUInt64,\n} = Convert;\n\nconst bUInt8 = BufferImpl.prototype.readUInt8;\nconst bUInt16BE = BufferImpl.prototype.readUInt16BE;\nconst bUInt32BE = BufferImpl.prototype.readUInt32BE;\nconst bUInt64BE = function bUInt64BE(pos) { // invoked with \"this\" as the buffer.\n  return Long.fromBits(this.readUInt32BE(pos + 4), this.readUInt32BE(pos), true);\n};\n\nconst {\n  nullTerminate,\n  stripNullTerminate,\n} = StringUtils;\n\n// QUEUENAME/TOPICNAME\nconst EndpointTypeToParam = {\n  [DestinationType.TOPIC]: SMFAdProtocolParam.DTENAME,\n  [DestinationType.QUEUE]: SMFAdProtocolParam.QUEUENAME,\n};\n\n//Same as above, but for CREATE.\nconst QueueDescriptorTypeToParam = {\n  [QueueType.TOPIC_ENDPOINT]: SMFAdProtocolParam.DTENAME,\n  [QueueType.QUEUE]:          SMFAdProtocolParam.QUEUENAME,\n};\n\nconst QUEUE_PERMISSIONS_TO_BITS = {\n  [QueuePermissions.NONE]:         0x0000,\n  [QueuePermissions.READ_ONLY]:    0x0001,\n  [QueuePermissions.CONSUME]:      0x0003,\n  [QueuePermissions.MODIFY_TOPIC]: 0x0007,\n  [QueuePermissions.DELETE]:       0x000f,\n};\n\nconst ACCESS_TYPE_INT_TO_ENUM = {\n  0x01: QueueAccessType.EXCLUSIVE,\n  0x02: QueueAccessType.NONEXCLUSIVE,\n};\n\nconst ACCESS_TYPE_ENUM_TO_BITS = {\n  [QueueAccessType.EXCLUSIVE]:    0x01,\n  [QueueAccessType.NONEXCLUSIVE]: 0x02,\n};\n\nconst DISCARD_ENUM_TO_VALUE = {\n  [QueueDiscardBehavior.NOTIFY_SENDER_OFF]: 0x01,\n  [QueueDiscardBehavior.NOTIFY_SENDER_ON]:  0x02,\n};\n\nfunction addQueueProperties(message, queueProperties, skipAccessType = false) {\n  if (!queueProperties) {\n    return;\n  }\n  const {\n    accessType,\n    discardBehavior,\n    maxMessageRedelivery,\n    maxMessageSize,\n    permissions,\n    quotaMB,\n    respectsTTL,\n  } = queueProperties;\n\n\n  // [AssuredCtrl AllOthersPermissions Parameter]\n  if (permissions && (QUEUE_PERMISSIONS_TO_BITS[permissions] !== undefined)) {\n    message.addParameter(new SMFParameter(\n      SMFUH.IGNORE,\n      SMFAdProtocolParam.EP_ALLOTHER_PERMISSION,\n      QUEUE_PERMISSIONS_TO_BITS[permissions]\n    ));\n  }\n\n  //AccessType\n  if (!skipAccessType &&\n    accessType !== undefined &&\n    ACCESS_TYPE_ENUM_TO_BITS[accessType] !== undefined\n  ) {\n    message.addParameter(new SMFParameter(\n      SMFUH.IGNORE,\n      SMFAdProtocolParam.ACCESSTYPE,\n      ACCESS_TYPE_ENUM_TO_BITS[accessType]\n    ));\n  }\n\n  // [AssuredCtrl EndpointQuotaMB Parameter]\n  if (quotaMB !== null && quotaMB !== undefined) {\n    message.addParameter(new SMFParameter(\n      SMFUH.IGNORE,\n      SMFAdProtocolParam.EP_QUOTA,\n      quotaMB\n    ));\n  }\n\n  // [AssuredCtrl EndpointMaxMessageSize Parameter]\n  if (maxMessageSize !== undefined && maxMessageSize !== null) {\n    message.addParameter(new SMFParameter(\n      SMFUH.IGNORE,\n      SMFAdProtocolParam.EP_MAX_MSGSIZE,\n      maxMessageSize\n    ));\n  }\n\n  let flags = 0x0000;\n  if (discardBehavior !== null && discardBehavior !== undefined) {\n    const discardBehaviorValue = DISCARD_ENUM_TO_VALUE[discardBehavior];\n    flags |= (discardBehaviorValue << 12);\n    // Omit cutThrough, << 14\n  }\n  if (flags /* is nonzero */) {\n    message.addParameter(new SMFParameter(\n      SMFUH.IGNORE,\n      SMFAdProtocolParam.EP_BEHAVIOUR,\n      flags\n    ));\n  }\n\n  if (maxMessageRedelivery !== undefined && maxMessageRedelivery !== null) {\n    message.addParameter(new SMFParameter(\n      SMFUH.IGNORE,\n      SMFAdProtocolParam.MAX_REDELIVERY,\n      maxMessageRedelivery\n    ));\n  }\n\n  if (respectsTTL !== undefined && respectsTTL !== null) {\n    message.addParameter(new SMFParameter(\n      SMFUH.IGNORE,\n      SMFAdProtocolParam.EP_RESPECTS_TTL,\n      (respectsTTL ? 0x1 : 0x0)\n    ));\n  }\n}\n\n/**\n * @internal\n */\nclass AdProtocolMessage extends BaseMessage {\n  /**\n   * @constructor\n   * @param {SMFAdProtocolMessageType} [messageType=SMFAdProtocolMessageType.OPENPUBFLOW]\n   *  The type of message\n   * @param {Number} [version=3] The AD protocol version for the message\n   * @extends {BaseMessage}\n   * @memberof solace\n   * @internal\n   */\n  constructor(messageType = 0, version = 3) {\n    super(new SMFHeader(SMFProtocol.ADCTRL, 1));\n\n    // Field: msgtype\n    this.msgType = messageType;\n\n    // Field: version\n    this.version = version;\n  }\n\n  _readParameter(paramtype, decoder = null, bufMethod = null) {\n    const param = this.getParameter(paramtype);\n    if (param === undefined) return undefined;\n    if (bufMethod && param.getBuffer()) {\n      return bufMethod.call(param.getBuffer(), param.getBegin());\n    }\n    const value = param.getValue();\n    return decoder ? decoder(value) : value;\n  }\n\n  /**\n   * @returns {?QueueAccessType} The access type, if present\n   */\n  getAccessType() {\n    const param = this._readParameter(SMFAdProtocolParam.ACCESSTYPE, strToInt8, bUInt8);\n    return ACCESS_TYPE_INT_TO_ENUM[param];\n  }\n\n  /**\n   * @returns {?Boolean} The active flow indication, if present\n   */\n  getActiveFlow() {\n    return this._readParameter(SMFAdProtocolParam.ACTIVE_FLOW_INDICATION, strToInt8, bUInt8);\n  }\n\n  /**\n   * @returns {?QueueDiscardBehavior} The discard behavior for the endpoint, if present\n   */\n  getQueueDiscardBehavior() {\n    const param = this._readParameter(SMFAdProtocolParam.EP_BEHAVIOUR, strToInt16, bUInt16BE);\n    if (param === undefined) {\n      return undefined;\n    }\n    // Get NotifySender flag\n    const masked = (param & 0x3000) >> 12;\n    if (masked === DISCARD_ENUM_TO_VALUE[QueueDiscardBehavior.NOTIFY_SENDER_OFF]) {\n      return QueueDiscardBehavior.NOTIFY_SENDER_OFF;\n    } else if (masked === DISCARD_ENUM_TO_VALUE[QueueDiscardBehavior.NOTIFY_SENDER_ON]) {\n      return QueueDiscardBehavior.NOTIFY_SENDER_ON;\n    }\n    return undefined;\n  }\n  /**\n   * @returns {?Boolean} The Delivery Count setting of the endpoint, if present\n   */\n  getEndpointDeliveryCountSent() {\n    const param = this._readParameter(SMFAdProtocolParam.EP_BEHAVIOUR, strToInt16, bUInt16BE);\n    // Get NotifySender flag\n    const masked = (param & 0x0c00) >> 10;\n    switch (masked) {\n      case 0 :\n        return undefined;\n      case 1 :\n        return false;\n      case 2:\n        return true;\n      default:\n        //TODO: log: invalid flag value.\n        return undefined;\n    }\n  }\n\n  /**\n   * @returns {?Number} The endpoint ID, if present\n   */\n  getEndpointId() {\n    return this._readParameter(SMFAdProtocolParam.ENDPOINT_ID, strToUInt32, bUInt32BE);\n  }\n\n  /**\n   * @returns {?Boolean} Whether endpoint respects TTL\n   */\n  getRespectsTTL() {\n    const value = this._readParameter(SMFAdProtocolParam.EP_RESPECTS_TTL, strToInt8, bUInt8);\n    if (value === undefined) {\n      LOG_TRACE('respectsTTL missing from response.');\n      return undefined;\n    }\n    LOG_TRACE(`respectsTTL present in response: ${value}`);\n    return !!value;\n  }\n\n  /**\n   * @returns {?String} The router-assigned flow name, if present\n   */\n  getFlowName() {\n    return this._readParameter(SMFAdProtocolParam.FLOWNAME, stripNullTerminate);\n  }\n\n  /**\n   * @returns {?Number} The router-assigned flow ID, if present\n   */\n  getFlowId() {\n    return this._readParameter(SMFAdProtocolParam.FLOWID, strToUInt32, bUInt32BE);\n  }\n\n  /**\n   * @returns {?Number} The quota on the endpoint, if present\n   */\n  getQuota() {\n    return this._readParameter(SMFAdProtocolParam.EP_QUOTA, strToUInt32, bUInt32BE);\n  }\n\n  /**\n   * @returns {?Number} The maximum message size of the endpoint, if present\n   */\n  getMaxMsgSize() {\n    return this._readParameter(SMFAdProtocolParam.EP_MAX_MSGSIZE, strToUInt32, bUInt32BE);\n  }\n\n  /**\n   * @returns {?String} The UTF-8 encoded, null terminated endpoint name\n   */\n  getTopicEndpointBytes() {\n    return this._readParameter(SMFAdProtocolParam.DTENAME);\n  }\n\n  /**\n   * @returns {?QueuePermissions} The granted permissions for the flow, if present\n   */\n  getGrantedPermissions() {\n    const permissions =\n      this._readParameter(SMFAdProtocolParam.GRANTED_PERMISSIONS, strToUInt32, bUInt32BE);\n    let result;\n    Object.keys(QUEUE_PERMISSIONS_TO_BITS).forEach((key) => {\n      if (QUEUE_PERMISSIONS_TO_BITS[key] === permissions) {\n        result = key;\n      }\n    });\n    return result;\n  }\n\n  /**\n   * @returns {?QueuePermissions} The permissions for other users for the endpoint, if present\n   */\n  getAllOthersPermissions() {\n    const permissions =\n      this._readParameter(SMFAdProtocolParam.EP_ALLOTHER_PERMISSION, strToUInt32, bUInt32BE);\n    let result;\n    Object.keys(QUEUE_PERMISSIONS_TO_BITS).forEach((key) => {\n      if (QUEUE_PERMISSIONS_TO_BITS[key] === permissions) {\n        result = key;\n      }\n    });\n    return result;\n  }\n\n  /**\n   * @returns {?Long} The last message ID acked, if present\n   */\n  getLastMsgIdAcked() {\n    return this._readParameter(SMFAdProtocolParam.LASTMSGIDACKED,\n                               strToUInt64, bUInt64BE);\n  }\n\n  /**\n   * @returns {?Long} The last message ID received, if present\n   */\n  getLastMsgIdReceived() {\n    return this._readParameter(SMFAdProtocolParam.LASTMSGIDRECEIVED,\n                               strToUInt64, bUInt64BE);\n  }\n\n  /**\n   * @returns {?Number} The publisher ID, if present\n   */\n  getPublisherId() {\n    return this._readParameter(SMFAdProtocolParam.PUBLISHER_ID, strToUInt32, bUInt32BE);\n  }\n\n  /**\n   * @returns {?Number} Whether we want flow change notifications, if present\n   */\n  getWantFlowChangeNotify() {\n    return !!this._readParameter(SMFAdProtocolParam.WANT_FLOW_CHANGE_NOTIFY, strToInt8, bUInt8);\n  }\n\n  /**\n   * @returns {?Number} The Window parameter, if present\n   */\n  getWindow() {\n    return this._readParameter(SMFAdProtocolParam.WINDOW, strToInt8, bUInt8);\n  }\n\n  /**\n   * @returns {?Number} The max redelivery parameter, if present\n   */\n  getMaxRedelivery() {\n    return this._readParameter(SMFAdProtocolParam.MAX_REDELIVERY, strToInt8, bUInt8);\n  }\n\n  /**\n   * @returns {?Number} The max unacked messages parameter, if present\n   */\n  getMaxUnackedMessages() {\n    return this._readParameter(SMFAdProtocolParam.MAX_DELIVERED_UNACKED_MESSAGES_PER_FLOW,\n                               strToUInt32, bUInt32BE);\n  }\n\n  /**\n   * @returns {?Long} The endpointErrorId, if present\n   */\n  getEndpointErrorId() {\n    return this._readParameter(SMFAdProtocolParam.ENDPOINT_ERROR_ID,\n                               strToUInt64, bUInt64BE);\n  }\n\n  /**\n   * @returns {?Long} The partitionGroupId, if present\n   */\n  getPartitionGroupId() {\n    return this._readParameter(SMFAdProtocolParam.PARTITION_GROUP_ID,\n                               strToInt16, bUInt16BE);\n  }\n\n  /**\n   * @returns {?Long} The spoolerUniqueId, if present\n   */\n  getSpoolerUniqueId() {\n    return this._readParameter(SMFAdProtocolParam.SPOOLER_UNIQUE_ID,\n                               strToUInt64, bUInt64BE);\n  }\n\n  /**\n   * Creates a CLOSEPUBFLOW message\n   * @param {Number} flowId The publisher flow to close\n   * @param {Number} correlationTag The correlation tag for the request\n   * @returns {AdProtocolMessage} The newly created message\n   * @internal\n   * @static\n   */\n  static getCloseMessagePublisher(flowId,\n                                  correlationTag) {\n    const message = new AdProtocolMessage(SMFAdProtocolMessageType.CLOSEPUBFLOW);\n\n    const header = message.smfHeader;\n    header.pm_corrtag = correlationTag;\n\n    message.addParameter(new SMFParameter(SMFUH.REJECT,\n                                          SMFAdProtocolParam.FLOWID,\n                                          flowId));\n    return message;\n  }\n\n\n  /**\n   * Creates a CREATE message\n   * @param {solace.QueueDescriptor} queueDescriptor The endpoint descriptor for the create request\n   * @param {?solace.QueueProperties} queueProperties The properties for the create request\n   * @param {Number} correlationTag The correlation tag for the request\n   * @returns {AdProtocolMessage} The newly created message\n   * @internal\n   * @static\n   */\n  static getCreate(\n    queueDescriptor,\n    queueProperties,\n    correlationTag\n  ) {\n    const message = new AdProtocolMessage(SMFAdProtocolMessageType.CREATE);\n\n    const header = message.smfHeader;\n    header.pm_corrtag = correlationTag;\n\n    /*\n      {AssuredCtrl QueueName|TopicEndpointName Parameter}\n      {AssuredCtrl Durability Parameter}\n      [AssuredCtrl AllOthersPermission Parameter]\n      [AssuredCtrl AccessType Parameter]\n    [AssuredCtrl EndpointQuotaMB Parameter]\n    [AssuredCtrl EndpointMaxMessageSize Parameter]\n    [AssuredCtrl qEndpointBehaviourFlags Parameter]\n    [AssuredCtrl MaxRedelivery Parameter]\n    */\n\n    // QueueName/TopicEndpointName : different param type for TE vs queue\n    const endpointTypeParam = QueueDescriptorTypeToParam[queueDescriptor.type];\n    if (endpointTypeParam === undefined) throw new OperationError('Unknown destination type');\n    message.addParameter(new SMFParameter(\n      SMFUH.REJECT,\n      endpointTypeParam,\n      nullTerminate(queueDescriptor.name)\n    ));\n\n\n    // [AssuredCtrl Durability Parameter]\n    message.addParameter(new SMFParameter(\n      SMFUH.IGNORE,\n      SMFAdProtocolParam.EP_DURABLE,\n      queueDescriptor.durable // better be...\n    ));\n\n\n    addQueueProperties(message, queueProperties);\n\n    return message;\n  }\n\n  /**\n   * Returns an AdProtocolMessage that describes a publisher open-flow request.\n   * @static\n   * @param {?Long} lastMsgIdAcked Last message ID acked, if re-opening\n   * @param {?Long} lastMsgIdSent Last message ID sent, if re-opening\n   * @param {Number} windowSize Desired window size\n   * @param {String} flowName Last flow name in use, if re-opening\n   * @param {Number} correlationTag Correlation tag for the request\n   * @returns {solace.AdProtocolMessage} The OPENPUBFLOW message\n   * @internal\n   */\n  static getOpenMessagePublisher(\n            lastMsgIdAcked,\n            lastMsgIdSent,\n            windowSize,\n            flowName,\n            correlationTag) {\n    const adMsg = new AdProtocolMessage(SMFAdProtocolMessageType.OPENPUBFLOW);\n\n    const smfHeader = adMsg.smfHeader;\n    smfHeader.pm_corrtag = correlationTag;\n\n    if (lastMsgIdAcked !== undefined) {\n      adMsg.addParameter(new SMFParameter(SMFUH.REJECT,\n                                          SMFAdProtocolParam.LASTMSGIDACKED,\n                                          lastMsgIdAcked));\n    }\n    if (lastMsgIdSent !== undefined) {\n      adMsg.addParameter(new SMFParameter(SMFUH.REJECT,\n                                          SMFAdProtocolParam.LASTMSGIDSENT,\n                                          lastMsgIdSent));\n    }\n\n    adMsg.addParameter(new SMFParameter(SMFUH.REJECT,\n                                        SMFAdProtocolParam.WINDOW,\n                                        windowSize));\n\n    adMsg.addParameter(new SMFParameter(SMFUH.IGNORE,\n                                        SMFAdProtocolParam.FLOWNAME,\n                                        flowName || ''));\n\n    LOG_TRACE(`Create open publisher: lastMsgIdAcked=${lastMsgIdAcked} lastMsgIdSent=${lastMsgIdSent} window=${windowSize} flowName=${flowName || '(null)'}`);\n\n    return adMsg;\n  }\n\n  /**\n   * Returns an AdProtocolMessage that describes a subscriber (MessageConsumer) bind request.\n   * @static\n   * @param {solace.QueueDescriptor} queueDescriptor The endpoint descriptor for the bind request\n   * @param {?solace.QueueProperties} queueProperties The properties for the bind request\n   * @param {solace.Destination} endpoint The endpoint for the bind request\n   * @param {?solace.Topic} topicSubscription The topic endpoint\n   * @param {String} correlationTag The correlation tag for the request\n   * @param {Number} windowSize The desired window size\n   * @param {Boolean} [noLocal=false] If true, local publisher messages are not delivered\n   * @param {Boolean} [wantFlowChangeUpdate] default is true if destination is a {solace.Queue}\n   * @param {Long} [lastMsgIdAcked=Long.UZERO] Last message ID acked, if re-binding\n   * @param {Long} [lastMsgIdReceived=Long.UZERO] Last message ID received, if re-binding\n   * @param {Boolean} [browser=false] If true, flow is a queue browser\n   * @param {ReplayStartLocation} [replayStartLocation=undefined] If set messages\n   *         are first retrieved from the replay log before live messages are received.\n   * @param {Long} [endpointErrorId=undefined] Endpoint Error ID identifying the flow\n   *         when rebinding.\n   *  @param {Long} [partitionGroupId=undefined] Partition Group ID for support of\n   *          Partition Queue feature, associate new flow with the same\n   *          PartitionGroupId as an old flow (e.g due to a reconnect).\n   * @param {Boolean} [hasNackSupport=false] If true, flow is created with Consumer Redelivery\n   * @returns {solace.AdProtocolMessage} The BIND message\n   * @internal\n   */\n  static getOpenMessageConsumer(queueDescriptor,\n                                queueProperties,\n                                endpoint,\n                                topicSubscription,\n                                correlationTag,\n                                windowSize,\n                                noLocal,\n                                wantFlowChangeUpdate,\n                                lastMsgIdAcked = Long.UZERO,\n                                lastMsgIdReceived = Long.UZERO,\n                                browser = false,\n                                replayStartLocation = undefined,\n                                endpointErrorId = undefined,\n                                partitionGroupId = undefined,\n                                hasNackSupport = false) {\n    /*\n    QUEUE FLOW                                      TE FLOW\n\n    {SMF Header, protocol=AssuredCtrl ttl=1}        {SMF Header, protocol=AssuredCtrl ttl=1}\n    [Correlation Tag Parameter]                     [Correlation Tag Parameter]\n    {AssuredCtrl Message Header, msgType=Bind}      {AssuredCtrl Message Header, msgType=Bind}\n\n    {AssuredCtrl QueueName Parameter}               {AssuredCtrl TopicEndpointName Parameter}\n    ***                                             {AssuredCtrl TopicName Parameter}\n    [AssuredCtrl Last Message Id Acked Parameter]   ***\n    [AssuredCtrl Last Message Id Recv'd Parameter]  ***\n    {AssuredCtrl Transport Window Size Parameter}   {AssuredCtrl Transport Window Size Parameter}\n    [AssuredCtrl Durability Parameter]              [AssuredCtrl Durability Parameter]\n    [AssuredCtrl Message Selector Parameter]        [AssuredCtrl Message Selector Parameter]\n    [AssuredCtrl FlowType Parameter]                [AssuredCtrl FlowType Parameter]\n    [AssuredCtrl Selector Parameter]                [AssuredCtrl Selector Parameter]\n    [AssuredCtrl AllOthersPermissions Parameter]    [AssuredCtrl AllOthersPermissions Parameter]\n    [AssuredCtrl EndpointQuotaMB Parameter]         [AssuredCtrl EndpointQuotaMB Parameter]\n    [AssuredCtrl EndpointMaxMessageSize Parameter]  [AssuredCtrl EndpointMaxMessageSize Parameter]\n    [AssuredCtrl TransactedSessionId Parameter]     [AssuredCtrl TransactedSessionId Parameter]\n    [AssuredCtrl NoLocal Parameter]                 [AssuredCtrl NoLocal Parameter]\n    [AssuredCtrl wantFlowChangeUpdate Parameter]    ***\n    [AssuredCtrl qEndpointBehaviourFlags Parameter] [AssuredCtrl qEndpointBehaviourFlags Parameter]\n    [AssuredCtrl MaxRedelivery Parameter]           [AssuredCtrl MaxRedelivery Parameter]\n    [AssuredCtrl browser Parameter]                 ***\n    */\n    const durable = queueDescriptor.durable;\n    const endpointBytes = endpoint.bytes;\n    const endpointType = endpoint.type;\n\n    // {SMF Header, protocol=AssuredCtrl ttl=1}        {SMF Header, protocol=AssuredCtrl ttl=1}\n    // [Correlation Tag Parameter]                     [Correlation Tag Parameter]\n    // {AssuredCtrl Message Header, msgType=Bind}      {AssuredCtrl Message Header, msgType=Bind}\n    const message = new AdProtocolMessage(SMFAdProtocolMessageType.BIND);\n    const header = message.smfHeader;\n    header.pm_corrtag = correlationTag;\n\n    // {AssuredCtrl QueueName Parameter}               {AssuredCtrl TopicEndpointName Parameter}\n    const endpointTypeParam = EndpointTypeToParam[endpointType];\n    if (endpointTypeParam === undefined) throw new OperationError('Unknown destination type');\n    message.addParameter(new SMFParameter(\n      SMFUH.REJECT,\n      endpointTypeParam,\n      endpointBytes\n    ));\n\n    // ***                                             {AssuredCtrl TopicName Parameter}\n    if (topicSubscription) {\n      message.addParameter(new SMFParameter(\n        SMFUH.REJECT,\n        SMFAdProtocolParam.TOPICNAME,\n        topicSubscription.bytes\n      ));\n    }\n\n    if (endpointType === DestinationType.QUEUE) {\n      //     [AssuredCtrl Last Message Id Acked Parameter]   ***\n      message.addParameter(new SMFParameter(\n        SMFUH.REJECT,\n        SMFAdProtocolParam.LASTMSGIDACKED,\n        lastMsgIdAcked\n      ));\n      //     [AssuredCtrl Last Message Id Recv'd Parameter]  ***\n      message.addParameter(new SMFParameter(\n        SMFUH.IGNORE,\n        SMFAdProtocolParam.LASTMSGIDRECEIVED,\n        lastMsgIdReceived\n      ));\n    }\n\n    // {AssuredCtrl Transport Window Size Parameter}\n    message.addParameter(new SMFParameter(\n      SMFUH.REJECT,\n      SMFAdProtocolParam.WINDOW,\n      windowSize\n    ));\n\n    // [AssuredCtrl Durability Parameter]\n    message.addParameter(new SMFParameter(\n      SMFUH.IGNORE,\n      SMFAdProtocolParam.EP_DURABLE,\n      durable\n    ));\n\n    // Omit Message Selector\n    // Omit FlowType, CONSUMER assumed (not BROWSER currently)\n    // Omit TransactedSessionId\n\n    addQueueProperties(message, queueProperties, true);\n\n    if (noLocal /* is true */) {\n      // [AssuredCtrl NoLocal Parameter]\n      message.addParameter(new SMFParameter(\n        SMFUH.REJECT,\n        SMFAdProtocolParam.NOLOCAL,\n        0x1\n      ));\n    }\n\n    if (wantFlowChangeUpdate /* is true */) {\n      // [AssuredCtrl wantFlowChangeUpdate Parameter]    ***\n      message.addParameter(new SMFParameter(\n        SMFUH.IGNORE,\n        SMFAdProtocolParam.WANT_FLOW_CHANGE_NOTIFY,\n        0x1\n      ));\n    }\n\n    /**\n     * A Flow that has Browser support cannot have NACK support \n     */\n    if (hasNackSupport /* is true */) {\n      // [AssuredCtrl FlowType Parameter]    ***\n      message.addParameter(new SMFParameter(\n        SMFUH.REJECT,\n        SMFAdProtocolParam.FLOWTYPE,\n        0x3 // create flow with Consumer Redelivery support\n      ));\n    } else if (browser /* is true */) {\n      // [AssuredCtrl browser Parameter]    ***\n      message.addParameter(new SMFParameter(\n        SMFUH.REJECT,\n        SMFAdProtocolParam.FLOWTYPE,\n        0x2 // create flow with browser support\n      ));\n    }\n    if (replayStartLocation !== undefined) {\n      // [AssuredCtrl replay start location Parameter]\n      let rsValue = replayStartLocation._replayStartValue;\n      if (replayStartLocation._type === ReplayStartType.DATE) {\n        const replayStartTimeMs = Long.fromNumber(replayStartLocation._replayStartValue, true);\n        const replayStartTimeNs = replayStartTimeMs.multiply(1000000);\n        rsValue = replayStartTimeNs;\n      }\n      message.addParameter(new SMFParameter(\n        SMFUH.REJECT,\n        SMFAdProtocolParam.REPLAY_START_LOCATION,\n        {\n          type:  replayStartLocation._type,\n          value: rsValue,\n        }\n      ));\n    }\n\n    if (endpointErrorId !== undefined) {\n      // [AssuredCtrl EndpointErrorId Parameter]    ***\n      LOG_TRACE(`Adding endpointErrorId to message: ${endpointErrorId}`);\n      message.addParameter(new SMFParameter(\n        SMFUH.IGNORE,\n        SMFAdProtocolParam.ENDPOINT_ERROR_ID,\n        endpointErrorId\n      ));\n    }\n\n    // support for PartitionGroupId. Only send when not null and undefined\n    if (partitionGroupId !== undefined && partitionGroupId !== null) {\n      // [AssuredCtrl PartitionGroupId Parameter]    ***\n      LOG_TRACE(`Adding partitionGroupId to message: ${partitionGroupId}`);\n      message.addParameter(new SMFParameter(\n        SMFUH.IGNORE,\n        SMFAdProtocolParam.PARTITION_GROUP_ID,\n        partitionGroupId\n      ));\n    }\n\n    return message;\n  }\n\n  /**\n   * Creates an UNBIND request\n   * @param {Number} flowId The flow ID to unbind\n   * @param {Number} correlationTag The correlation tag for the request\n   * @param {?Long} lastMessageIdAcked The last message ID marked as locally acked\n   * @returns {AdProtocolMessage} The new UNBIND request\n   * @static\n   * @internal\n   */\n  static getCloseMessageConsumer(flowId,\n                                 correlationTag) {\n    const message = new AdProtocolMessage(SMFAdProtocolMessageType.UNBIND);\n\n    const header = message.smfHeader;\n    header.pm_corrtag = correlationTag;\n\n    message.addParameter(new SMFParameter(SMFUH.REJECT,\n                                          SMFAdProtocolParam.FLOWID,\n                                          flowId));\n    // linger: assume no\n\n    return message;\n  }\n\n  static getDTEUnsubscribeMessage(correlationTag,\n                                  topic) {\n    const message = new AdProtocolMessage(SMFAdProtocolMessageType.UNSUBSCRIBE);\n    const header = message.smfHeader;\n    header.pm_corrtag = correlationTag;\n\n    message.addParameter(new SMFParameter(\n      SMFUH.REJECT,\n      SMFAdProtocolParam.DTENAME,\n      topic.getBytes()\n    ));\n\n    return message;\n  }\n\n  /**\n   * @param {Number} flowId The flow on which to acknowledge messages.\n   * @param {?Long} [lastMessageIdAcked=undefined] The transport acknowledges receipt of all\n   *  messages up to and including this ID.\n   * @param {?Long} [windowSize=undefined] The size to which the flow window should be set.\n   * @param {?Map.<Array.<Array.<Long>>>} [applicationAckRanges=undefined] Low-high ID pairs of\n   *  message IDs to acknowledge at the application level. To application ack a single message,\n   *  pass `Map.set( MessageOutcome.ACCEPTED, [ [singleMessageId, singleMessageId] ] )`.\n   * @returns {solace.AdProtocolMessage} A message containing the given parameters.\n   * @internal\n   * @static\n   */\n  static getAck(flowId,\n                lastMessageIdAcked = undefined,\n                windowSize = undefined,\n                applicationAckRanges = undefined) {\n    const message = new AdProtocolMessage(SMFAdProtocolMessageType.CLIENTACK);\n\n    message.addParameter(new SMFParameter(\n      SMFUH.REJECT,\n      SMFAdProtocolParam.FLOWID,\n      flowId\n    ));\n\n    if (lastMessageIdAcked) {\n      message.addParameter(new SMFParameter(\n        SMFUH.REJECT,\n        SMFAdProtocolParam.LASTMSGIDACKED,\n        lastMessageIdAcked\n      ));\n    }\n\n    if (windowSize !== undefined && windowSize !== null) {\n      // There are two windowSize options; we'll use the legacy one for smaller\n      // window sizes\n      message.addParameter(new SMFParameter(\n        SMFUH.REJECT,\n        (windowSize <= 0xFF) ? SMFAdProtocolParam.WINDOW : SMFAdProtocolParam.TRANSPORT_WINDOW,\n        windowSize\n      ));\n    }\n\n    if (applicationAckRanges && (applicationAckRanges.size > 0)) {\n      // aggregate the total length of the ack/nack ranges\n      let totalRangeLen  = 0;\n      const allOutcomes = MessageOutcome.values;\n      for(let i = 0; i < allOutcomes.length; i ++) {\n        totalRangeLen += applicationAckRanges.has(allOutcomes[i]) ? applicationAckRanges.get(allOutcomes[i]).length : 0;\n      }\n\n      if (totalRangeLen > AdProtocolMessage.MAX_CLIENT_ACK_RANGES) {\n        throw new OperationError('Application ack range count exceeds limit of 64');\n      }\n      message.addParameter(new SMFParameter(\n        SMFUH.REJECT,\n        SMFAdProtocolParam.APPLICATION_ACK,\n        applicationAckRanges // DANGER: this needs to be encoded immediately, or else deep-cloned\n      ));\n    }\n\n    return message;\n  }\n\n  /**\n   * @param {Number} flowId The flow on which to acknowledge messages.\n   * @param {?Long} [endpointErrorId=undefined] endpoint error id\n   * @param {?Long} [lastMessageIdAcked=undefined] The transport acknowledges receipt of all\n   *  messages up to and including this ID.\n   * @returns {solace.AdProtocolMessage} A message containing the given parameters.\n   * @internal\n   * @static\n   */\n  static getUnbindAck(flowId, endpointErrorId = undefined, lastMessageIdAcked = undefined) {\n    const message = new AdProtocolMessage(SMFAdProtocolMessageType.UNBIND);\n\n    message.addParameter(new SMFParameter(\n      SMFUH.REJECT,\n      SMFAdProtocolParam.FLOWID,\n      flowId\n    ));\n\n    if (endpointErrorId) {\n      LOG_TRACE(`Adding endpointErrorId to unbind ack: ${endpointErrorId}`);\n      message.addParameter(new SMFParameter(\n        SMFUH.IGNORE,\n        SMFAdProtocolParam.ENDPOINT_ERROR_ID,\n        endpointErrorId\n      ));\n    }\n    LOG_TRACE(`Not adding lastMessageIdAcked to unbind ack: ${lastMessageIdAcked}`);\n    //if (lastMessageIdAcked) {\n    //  LOG_TRACE(`Adding lastMessageIdAcked to unbind ack: ${lastMessageIdAcked}`);\n    //  message.addParameter(new SMFParameter(\n    //    SMFUH.REJECT,\n    //    SMFAdProtocolParam.LASTMSGIDACKED,\n    //    lastMessageIdAcked\n    //  ));\n    //}\n    return message;\n  }\n}\n\n\nAdProtocolMessage.MAX_CLIENT_ACK_RANGES = 64;\n\nmodule.exports.AdProtocolMessage = AdProtocolMessage;\n","const { AdProtocolMessage } = require('./adprotocol-message');\nconst { BinaryMetaBlock } = require('./binary-meta-block');\nconst { ClientCtrlMessage } = require('./client-ctrl-message');\nconst { KeepAliveMessage } = require('./keep-alive-message');\nconst { SMFHeader } = require('./smf-header');\nconst { SMFParameter } = require('./smf-parameter');\nconst { SMFUH } = require('./smf-uh');\nconst { SMPMessage } = require('./smp-message');\nconst { TransportSMFMessage } = require('./transport-smf-message');\n\nmodule.exports.AdProtocolMessage = AdProtocolMessage;\nmodule.exports.BinaryMetaBlock = BinaryMetaBlock;\nmodule.exports.ClientCtrlMessage = ClientCtrlMessage;\nmodule.exports.KeepAliveMessage = KeepAliveMessage;\nmodule.exports.SMFHeader = SMFHeader;\nmodule.exports.SMFParameter = SMFParameter;\nmodule.exports.SMFUH = SMFUH;\nmodule.exports.SMPMessage = SMPMessage;\nmodule.exports.TransportSMFMessage = TransportSMFMessage;\n","/**\n * @constructor BaseMessage\n * @private\n */\nclass BaseMessage {\n  constructor(header = null, params = []) {\n    this._smfHeader = header;\n    this._parameters = params;\n  }\n\n  addParameter(param) {\n    this._parameters[param.getType()] = param;\n  }\n\n  getParameter(paramType) {\n    return this._parameters[paramType];\n  }\n\n  getParameterArray() {\n    return this._parameters;\n  }\n\n  get smfHeader() {\n    return this._smfHeader;\n  }\n  set smfHeader(val) {\n    this._smfHeader = val;\n  }\n\n  getResponse() {\n    const smf = this.smfHeader;\n    if (!(smf && smf.pm_respcode && smf.pm_respstr)) {\n      return null;\n    }\n    return {\n      responseCode:   smf.pm_respcode,\n      responseString: smf.pm_respstr,\n    };\n  }\n}\n\nmodule.exports.BaseMessage = BaseMessage;\n","const { Bits, Convert } = require('solclient-convert');\n\nconst {\n  get: bits,\n} = Bits;\nconst {\n  int8ToStr,\n  int24ToStr,\n} = Convert;\n\n/**\n * @classdesc\n *\n * BinaryMetaBlock represents a binary metadata block in a TrMsg\n *\n * @private\n */\nclass BinaryMetaBlock {\n  constructor(type, payload) {\n    this.type = type;\n    this.payload = payload;\n  }\n\n  asEncodedSmf() {\n    const smf = [];\n    smf.push(int8ToStr(1));\n    smf.push(int8ToStr(this.type));\n    smf.push(int24ToStr(this.payload.length));\n    smf.push(this.payload.toString('latin1'));\n    return smf.join('');\n  }\n\n  static fromEncodedSmf(bufSmf, offset = 0) {\n    if ((bufSmf.length - offset) < 6) {\n      return null; // not enough data\n    }\n    const chunkCount = bufSmf.readUInt8(offset);\n    const fourbyte = bufSmf.readInt32BE(offset + 1);\n    const type = bits(fourbyte, 24, 8);\n    const payloadLen = bits(fourbyte, 0, 24);\n    const payloadOffset = chunkCount * 4 + 1;\n    const payload = bufSmf.slice(offset + payloadOffset, offset + payloadOffset + payloadLen);\n    return new BinaryMetaBlock(type, payload);\n  }\n\n}\n\n\nmodule.exports.BinaryMetaBlock = BinaryMetaBlock;\n","const { AuthenticationScheme, CapabilityType, ClientCapabilityType, MutableSessionProperty, SessionProperties } = require('solclient-session');\nconst { BaseMessage } = require('./base-message');\nconst { Bits, Convert } = require('solclient-convert');\nconst { DestinationType, DestinationUtil } = require('solclient-destination');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\nconst { Process, StringUtils, Version } = require('solclient-util');\nconst { SMFClientCtrlMessageType } = require('../smf-client-ctrl-message-types');\nconst { SMFClientCtrlParam, SMFClientCtrlAuthType } = require('../smf-client-ctrl-params');\nconst { SMFHeader } = require('./smf-header');\nconst { SMFParameter } = require('./smf-parameter');\nconst { SMFProtocol } = require('../smf-protocols');\n\nconst { LOG_TRACE } = require('solclient-log');\n\nconst {\n  get: bits,\n  set: setBits,\n} = Bits;\nconst {\n  int8ToStr, strToInt8,\n  int16ToStr, int32ToStr,\n  strToInt16, strToInt32,\n} = Convert;\nconst {\n  nullTerminate,\n  stripNullTerminate,\n} = StringUtils;\nconst {\n  validateAndEncode,\n} = DestinationUtil;\n\nconst BOOLEAN_CAPS_BITS = [\n  CapabilityType.JNDI,\n  CapabilityType.COMPRESSION,\n  CapabilityType.GUARANTEED_MESSAGE_CONSUME,\n  CapabilityType.TEMPORARY_ENDPOINT,\n  CapabilityType.GUARANTEED_MESSAGE_PUBLISH,\n  CapabilityType.GUARANTEED_MESSAGE_BROWSE,\n  CapabilityType.ENDPOINT_MGMT,\n  CapabilityType.SELECTOR,\n  CapabilityType.ENDPOINT_MESSAGE_TTL,\n  CapabilityType.QUEUE_SUBSCRIPTIONS,\n  null, // skip obsolete FLOW_RECOVER\n  CapabilityType.SUBSCRIPTION_MANAGER,\n  CapabilityType.MESSAGE_ELIDING,\n  CapabilityType.TRANSACTED_SESSION,\n  CapabilityType.NO_LOCAL,\n  CapabilityType.ACTIVE_CONSUMER_INDICATION,\n  CapabilityType.PER_TOPIC_SEQUENCE_NUMBERING,\n  CapabilityType.ENDPOINT_DISCARD_BEHAVIOR,\n  CapabilityType.CUT_THROUGH,\n  null, // skip OPENMAMA\n  CapabilityType.MESSAGE_REPLAY,\n  CapabilityType.COMPRESSED_SSL,\n  null, // skipping LONG_SELECTORS\n  CapabilityType.SHARED_SUBSCRIPTIONS,\n  CapabilityType.BR_REPLAY_ERRORID,\n  CapabilityType.AD_APP_ACK_FAILED,\n  CapabilityType.VAR_LEN_EXT_PARAM,\n];\n\nconst CLIENT_CAPS_VALUES = new Map([\n  [ClientCapabilityType.UNBIND_ACK, 0x80],\n  [ClientCapabilityType.BR_ERRORID, 0x40],\n  [ClientCapabilityType.PQ, 0x20],\n]);\n\n/**\n * @classdesc ClientCtrlMessage\n * Represents a ClientCtrl request or reply message\n * @private\n */\nclass ClientCtrlMessage extends BaseMessage {\n  constructor(messageType = 0) {\n    super(new SMFHeader(SMFProtocol.CLIENTCTRL, 1));\n\n    // Field: msgtype\n    this.msgType = messageType;\n\n    // Field: version\n    this.version = 1;\n  }\n\n  getP2PTopicValue() {\n    const p2pParam = this.getParameter(SMFClientCtrlParam.P2PTOPIC);\n    if (!p2pParam) {\n      return null;\n    }\n    return stripNullTerminate(p2pParam.getValue());\n  }\n\n  getVpnNameInUseValue() {\n    const vpnParam = this.getParameter(SMFClientCtrlParam.MSGVPNNAME);\n    if (!vpnParam) {\n      return null;\n    }\n    return stripNullTerminate(vpnParam.getValue());\n  }\n\n  getVridInUseValue() {\n    const vridParam = this.getParameter(SMFClientCtrlParam.VRIDNAME);\n    if (!vridParam) {\n      return null;\n    }\n    return stripNullTerminate(vridParam.getValue());\n  }\n\n  getUserIdValue() {\n    const userIdParam = this.getParameter(SMFClientCtrlParam.USERID);\n    if (!userIdParam) {\n      return null;\n    }\n    return stripNullTerminate(userIdParam.getValue());\n  }\n\n  getRouterCapabilities() {\n    let caps = [];\n\n    // Parse the composite capabilities parameter\n    let capParam = this.getParameter(SMFClientCtrlParam.ROUTER_CAPABILITIES);\n    if (capParam) {\n      caps = ClientCtrlMessage.prmParseCapabilitiesValue(capParam.getValue(), caps);\n    }\n\n    // Parse out the router status strings\n    capParam = this.getParameter(SMFClientCtrlParam.SOFTWAREVERSION);\n    if (capParam) {\n      caps[CapabilityType.PEER_SOFTWARE_VERSION] = stripNullTerminate(capParam.getValue());\n    }\n    capParam = this.getParameter(SMFClientCtrlParam.SOFTWAREDATE);\n    if (capParam) {\n      caps[CapabilityType.PEER_SOFTWARE_DATE] = stripNullTerminate(capParam.getValue());\n    }\n    capParam = this.getParameter(SMFClientCtrlParam.PLATFORM);\n    if (capParam) {\n      caps[CapabilityType.PEER_PLATFORM] = stripNullTerminate(capParam.getValue());\n    }\n    capParam = this.getParameter(SMFClientCtrlParam.PHYSICALROUTERNAME);\n    if (capParam) {\n      caps[CapabilityType.PEER_ROUTER_NAME] = stripNullTerminate(capParam.getValue());\n    }\n    return caps;\n  }\n\n\n  static prmGetDtoPriorityValue(dto) {\n    if (dto.local === undefined || dto.network === undefined) {\n      return false;\n    }\n    let twobyte = 0;\n    twobyte = setBits(twobyte, dto.local, 8, 8);\n    twobyte = setBits(twobyte, dto.network, 0, 8);\n    return int16ToStr(twobyte);\n  }\n\n  static prmParseDtoPriorityValue(strDtoPriority) {\n    const dto = {};\n    const twobyte = strToInt16(strDtoPriority.substr(0, 2));\n    dto.local = bits(twobyte, 8, 8);\n    dto.network = bits(twobyte, 0, 8);\n    return dto;\n  }\n\n  /*\n  strCapabilities: parameter value\n  caps: an already existing hash array of CapabilityType\n   */\n  static prmParseCapabilitiesValue(strCapabilities, capsIn) {\n    const caps = capsIn;\n    if (!(strCapabilities && caps)) {\n      return false;\n    }\n    const CT = CapabilityType;\n    let pos = 0;\n\n    // parse boolean capabilities\n    const boolCapCount = strToInt8(strCapabilities[pos]);\n    ++pos;\n\n    // The boolean caps are listed in order as in the documentation,\n    // that is from MSB to LSB for each caps byte.\n    let capsByte;\n    for (let bitIndex = 0; bitIndex < boolCapCount; ++bitIndex) {\n      const msbIndex = bitIndex & 0x7;\n      if (msbIndex === 0) { // Consume a byte\n        capsByte = strToInt8(strCapabilities[pos]);\n        ++pos;\n      }\n      const capsKey = BOOLEAN_CAPS_BITS[bitIndex];\n      if (!capsKey) continue; // We don't know about this cap\n      // so set caps bits from MSB (bit 7) to LSB (bit 0)\n      caps[capsKey] = !!bits(capsByte, 7 - msbIndex, 1);\n    }\n    // parse non-boolean capabilities\n    const sanityLoop = 500;\n    for (let i = 0; pos < strCapabilities.length && i < sanityLoop; ++i) {\n      const onebyte = strToInt8(strCapabilities[pos]); // type\n      pos++;\n      const capLen = strToInt32(strCapabilities.substr(pos, 4)) - 5;\n      pos += 4;\n      const strValue = strCapabilities.substr(pos, capLen);\n      pos += capLen;\n      switch (onebyte) {\n        case 0x00:\n          caps[CT.PEER_PORT_SPEED] = (strValue.length === 4) ? strToInt32(strValue) : 0;\n          break;\n        case 0x01:\n          caps[CT.PEER_PORT_TYPE] = (strValue.length === 1) ? strToInt8(strValue) : 0;\n          break;\n        case 0x02:\n          caps[CT.MAX_GUARANTEED_MSG_SIZE] = (strValue.length === 4) ? strToInt32(strValue) : 0;\n          break;\n        case 0x03:\n          caps[CT.MAX_DIRECT_MSG_SIZE] = (strValue.length === 4) ? strToInt32(strValue) : 0;\n          break;\n        default:\n          // NOOP (unknown cap)\n          break;\n      }\n    }\n    return caps;\n  }\n\n\n  static getLogin(sprop, compressedTLS, plaintextTLS, correlationTag) {\n    function clientCapsToStr(clientCapList) {\n      const highestCap = Math.max.apply(null, clientCapList) + 1;\n      let capBits = 0;\n      clientCapList.forEach((cap) => { capBits += CLIENT_CAPS_VALUES.get(cap); });\n      return int8ToStr(highestCap) + int8ToStr(capBits);\n    }\n    if (!(sprop instanceof SessionProperties)) {\n      return false;\n    }\n    const cc = new ClientCtrlMessage(SMFClientCtrlMessageType.LOGIN);\n    const smfHeader = cc._smfHeader;\n    const isClientCert = sprop.authenticationScheme === AuthenticationScheme.CLIENT_CERTIFICATE;\n    smfHeader.pm_corrtag = correlationTag;\n    if (sprop.password && !isClientCert) {\n      smfHeader.pm_password = sprop.password;\n    }\n    if (sprop.userName) {\n      smfHeader.pm_username = sprop.userName;\n    }\n    if (sprop.subscriberLocalPriority && sprop.subscriberNetworkPriority) {\n      cc.addParameter(new SMFParameter(0,\n                                       SMFClientCtrlParam.DELIVERTOONEPRIORITY,\n                                       ClientCtrlMessage.prmGetDtoPriorityValue({\n                                         local:   sprop.subscriberLocalPriority,\n                                         network: sprop.subscriberNetworkPriority })));\n    }\n    if (sprop.vpnName && sprop.vpnName.length > 0) {\n      cc.addParameter(new SMFParameter(1,\n                                       SMFClientCtrlParam.MSGVPNNAME,\n                                       nullTerminate(sprop.vpnName)));\n    }\n\n    if (sprop.applicationDescription && sprop.applicationDescription.length > 0) {\n      cc.addParameter(new SMFParameter(0,\n                                       SMFClientCtrlParam.CLIENTDESC,\n                                       nullTerminate(sprop.applicationDescription)));\n    }\n\n    if (sprop.userIdentification && sprop.userIdentification.length > 0) {\n      cc.addParameter(new SMFParameter(0,\n                                       SMFClientCtrlParam.USERID,\n                                       nullTerminate(sprop.userIdentification)));\n    }\n\n    if (sprop.authenticationScheme === AuthenticationScheme.OAUTH2) {\n      cc.addParameter(new SMFParameter(1,\n                                       SMFClientCtrlParam.AUTHENTICATION_SCHEME,\n                                       SMFClientCtrlAuthType.OAUTH2));\n\n      if (sprop.idToken) {\n        smfHeader.pm_oidc_id_token = nullTerminate(sprop.idToken);\n      }\n\n      if (sprop.accessToken) {\n        smfHeader.pm_oauth2_access_token = nullTerminate(sprop.accessToken);\n      }\n\n      if (sprop.issuerIdentifier) {\n        smfHeader.pm_oauth2_issuer_identifier = nullTerminate(sprop.issuerIdentifier);\n      }\n    }\n\n    cc.addParameter(new SMFParameter(0,\n                                     SMFClientCtrlParam.CLIENTNAME,\n                                     nullTerminate(sprop.clientName)));\n    cc.addParameter(new SMFParameter(0,\n                                     SMFClientCtrlParam.PLATFORM,\n                                     nullTerminate(`${Process.platform} - JS API (${Version.mode})`)));\n\n    if (sprop.noLocal) {\n      cc.addParameter(new SMFParameter(0,\n                                       SMFClientCtrlParam.NO_LOCAL,\n                                       '\\x01'));\n    }\n\n    if (isClientCert) {\n      cc.addParameter(new SMFParameter(1,\n                                       SMFClientCtrlParam.AUTHENTICATION_SCHEME,\n                                       SMFClientCtrlAuthType.CLIENT_CERTIFICATE));\n    }\n\n    cc.addParameter(new SMFParameter(0,\n                                     SMFClientCtrlParam.SOFTWAREDATE,\n                                     nullTerminate(Version.formattedDate)));\n    cc.addParameter(new SMFParameter(0,\n                                     SMFClientCtrlParam.SOFTWAREVERSION,\n                                     nullTerminate(Version.version)));\n\n    if (compressedTLS && plaintextTLS) {\n      LOG_TRACE('Adding SslDowngrade=1 to login.');\n      cc.addParameter(new SMFParameter(1,\n                                       SMFClientCtrlParam.SSL_DOWNGRADE,\n                                       '\\x01'));\n    } else if (compressedTLS) {\n      LOG_TRACE('Adding SslDowngrade=2 to login.');\n      cc.addParameter(new SMFParameter(1,\n                                       SMFClientCtrlParam.SSL_DOWNGRADE,\n                                       '\\x02'));\n    } else if (plaintextTLS) {\n      LOG_TRACE('Adding SslDowngrade=0 to login.');\n      cc.addParameter(new SMFParameter(1,\n                                       SMFClientCtrlParam.SSL_DOWNGRADE,\n                                       '\\x00'));\n    }\n    const clientCaps = clientCapsToStr([ClientCapabilityType.UNBIND_ACK,\n      ClientCapabilityType.BR_ERRORID, ClientCapabilityType.PQ]);\n    cc.addParameter(new SMFParameter(0,\n                                     SMFClientCtrlParam.CLIENT_CAPABILITIES,\n                                     clientCaps));\n                                     //'\\x02\\xc0'));\n                                     //'\\x01\\x80'));\n    const keepaliveVal = int32ToStr((sprop.keepAliveIntervalInMsecs) / 1000);\n    cc.addParameter(new SMFParameter(0,\n                                    SMFClientCtrlParam.KEEP_ALIVE_INTERVAL,\n                                    keepaliveVal));\n\n    return cc;\n  }\n\n  /**\n   * Get a CC update message.\n   *\n   * @param {MutableSessionProperty} mutableSessionProperty The property to update\n   * @param {String} newValue The new value for the property\n   * @param {String} correlationTag The correlation tag for the request\n   * @returns {ClientCtrlMessage} The new UPDATE message\n   *\n   * @private\n   */\n  static getUpdate(mutableSessionProperty, newValue, correlationTag) {\n    const cc = new ClientCtrlMessage(SMFClientCtrlMessageType.UPDATE);\n    const smfHeader = cc.smfHeader;\n    smfHeader.pm_corrtag = correlationTag;\n    if (mutableSessionProperty === MutableSessionProperty.CLIENT_DESCRIPTION) {\n      const appdesc = (newValue || '').toString().substr(0, 250);\n      cc.addParameter(new SMFParameter(0,\n                                       SMFClientCtrlParam.CLIENTDESC,\n                                       nullTerminate(appdesc)));\n    } else if (mutableSessionProperty === MutableSessionProperty.CLIENT_NAME) {\n      const error =\n        ClientCtrlMessage.validateClientName(\n          newValue,\n          errorMessage =>\n            new OperationError(`Invalid clientName: ${errorMessage}`,\n                               ErrorSubcode.PARAMETER_OUT_OF_RANGE));\n      if (error) {\n        throw error;\n      }\n      cc.addParameter(new SMFParameter(0,\n                                       SMFClientCtrlParam.CLIENTNAME,\n                                       nullTerminate(newValue)));\n    }\n    return cc;\n  }\n\n  static validateClientName(strName, exceptionCreator) {\n    const encodeResult = validateAndEncode(DestinationType.TOPIC, strName, exceptionCreator);\n    if (encodeResult.error) {\n      return encodeResult.error;\n    }\n    // Add 1: bytes includes terminator, 160 excludes terminator\n    if (encodeResult.bytes.length > 161) {\n      return exceptionCreator('Client Name too long (max length: 160).');\n    }\n    return null;\n  }\n}\n\n\nmodule.exports.ClientCtrlMessage = ClientCtrlMessage;\n","const { BaseMessage } = require('./base-message');\nconst { SMFHeader } = require('./smf-header');\nconst { SMFProtocol } = require('../smf-protocols');\n\nclass KeepAliveMessage extends BaseMessage {\n  constructor() {\n    super(new SMFHeader(SMFProtocol.KEEPALIVEV2, 2));\n    this._smfHeader.smf_uh = 2;\n  }\n}\n\nmodule.exports.KeepAliveMessage = KeepAliveMessage;\n","/**\n * @classdesc\n * Control messages wrap an SMFHeader instance\n * @private\n */\nclass SMFHeader {\n  constructor(protocol = 0, ttl = 0) {\n    // header properties\n    // header block\n    // SMF parameters\n    // payload\n    this._parameters = [];\n\n    // Common SMF header field values\n    this.smf_version = 3;\n    this.smf_uh = 0;\n    this.smf_protocol = protocol;\n    this.smf_priority = 0;\n    this.smf_ttl = ttl;\n    this.smf_msgLen = 0;\n    this.smf_di = 0;\n    this.smf_tqd = 0;\n    this.smf_elidingEligible = 0;\n    this.smf_dto = 0;\n    this.smf_adf = 0;                  // AD\n    this.smf_deadMessageQueueEligible = 0; //DMQ Eligible\n\n    // Common SMF protocol parameters\n    this.pm_userdata = null;\n    this.pm_respcode = 0;\n    this.pm_respstr = null;\n    this.pm_username = null;\n    this.pm_password = null;\n    this.pm_tr_topicname_bytes = null;\n    this.pm_deliverymode = null;\n\n    this.pm_ad_msgid = undefined;      // AD\n    this.pm_ad_prevmsgid = undefined;  // AD\n    this.pm_ad_redelflag = 0;          // AD\n    this.pm_ad_flowredelflag = 0;      // AD\n    this.pm_ad_ttl = undefined;        // AD\n    this.pm_ad_ackimm = undefined;     // AD\n    this.pm_ad_flowid = 0;             // AD\n    this.pm_ad_publisherid = 0;\n    this.pm_ad_publishermsgid = 0;\n\n    this.pm_content_summary = null;\n    this.pm_corrtag = null;\n    this.pm_topic_offset = 0;\n    this.pm_topic_len = 0;\n    this.pm_queue_offset = 0;\n    this.pm_queue_len = 0;\n    this.pm_msg_priority = null;        // {number}\n\n    // extended optional parameters\n    // these fields are header but may not be present\n    // see ../codec/parse-smf.js for details\n    // this.pm_ad_redeliveryCount;\n    // this.pm_ad_spooler_unique_id;\n    // this.pm_ad_local_spooler_message_id;\n    // this.pm_ad_replication_mate_ack_message_id;\n    this.pm_oauth2_access_token = null;\n    this.pm_oidc_id_token = null;\n    this.pm_oauth2_issuer_identifier = null;\n    this.pm_ts_transport_context = null;\n\n    // housekeeping\n    this.unknownProtoFlag = false;\n    this.messageLength = 0;\n    this.payloadLength = 0;\n    this.headerLength = 0;\n    this.payload = null;\n\n    // This message is invalid, but the framing (messageLength) is fine.\n    // set by the parser when UH==2 on an unknown parameter.\n    // The SMF fsm can then discard and increment the stats.\n    this.discardMessage = false;\n  }\n\n  setMessageSizes(headerLength, payloadLength) {\n    this.headerLength = headerLength;\n    this.payloadLength = payloadLength;\n    this.messageLength = headerLength + payloadLength;\n  }\n\n  setPayloadSize(payloadLength) {\n    this.payloadLength = payloadLength;\n  }\n}\n\nmodule.exports.SMFHeader = SMFHeader;\n","/**\n * @classdesc\n * A representation of an SMF parameter\n *\n * @private\n */\nclass SMFParameter {\n/**\n * @constructor\n * @param {Number} uh The UH value [0..2]\n * @param {SMFParameterType} type The type of SMF parameter\n * @param {*} value The value for this parameter\n * @param {Buffer} buffer instead of value, a buffer, with indexes (begin and end)\n * @param {Number} begin start index in buffer\n * @param {Number} end end index in buffer.\n */\n  constructor(uh, type, value, buffer, begin, end) {\n    this._type = type;\n    this._value = value;\n    this._uh = uh;\n    this._buffer = buffer;\n    this._begin = begin;\n    this._end = end;\n  }\n  getType() {\n    return this._type;\n  }\n  getValue() {\n    if (this._buffer && !this._value) {\n      return this._buffer.toString('latin1', this._begin, this._end);\n    }\n    return this._value;\n  }\n  getUh() {\n    return this._uh;\n  }\n  getBuffer() {\n    return this._buffer;\n  }\n  getBegin() {\n    return this._begin;\n  }\n  getEnd() {\n    return this._end;\n  }\n\n  toString() {\n    return `${this._uh}:0x${this._type.toString(16)} = ${this.getValue()}`;\n  }\n}\n\nmodule.exports.SMFParameter = SMFParameter;\n","const { Enum } = require('solclient-eskit');\n\nconst SMFUH = {\n  IGNORE: 0x0,\n  REJECT: 0x2,\n};\n\nmodule.exports.SMFUH = Enum.new(SMFUH);\n","const { assert } = require('solclient-eskit');\nconst { BaseMessage } = require('./base-message');\nconst { Destination, DestinationUtil } = require('solclient-destination');\nconst { SMFHeader } = require('./smf-header');\nconst { SMFProtocol } = require('../smf-protocols');\nconst { SMFSMPMessageType } = require('../smf-smp-message-types');\nconst { SMFSMPMessageTypeFlags } = require('../smf-smp-message-type-flags');\n\n/**\n * Represents an SMP request or reply message\n * @memberof solace\n * @private\n */\nclass SMPMessage extends BaseMessage {\n\n  /**\n   * Creates an instance of SMPMessage.\n   *\n   * @memberOf SMPMessage\n   */\n  constructor() {\n    super(new SMFHeader(SMFProtocol.SMP, 1));\n\n    // Field: msgtype\n    this.msgType = 0;\n\n    // Field: subscription string\n    this.encodedUtf8Subscription = null;\n    this.encodedUtf8QueueName = null;\n\n    this.smpFlags = (0 | SMFSMPMessageTypeFlags.SMF_SMP_FLAG_TOPIC); // default flags\n\n    this._encodedQueueName = null; // unused in solclientjs\n    this._encodedClientName = null; // unused in solclientjs\n  }\n\n  isFlag(flagMask) {\n    return (this.smpFlags & flagMask);\n  }\n\n  setFlag(flagMask, value) {\n    if (value) {\n      this.smpFlags |= flagMask;\n    } else {\n      this.smpFlags &= (~flagMask);\n    }\n  }\n\n  static getSubscriptionMessage(correlationTag, topic, add, requestConfirm) {\n    assert(topic instanceof Destination, 'Topics are not UCS-2 strings. Pass a Topic object.');\n    const smp = new SMPMessage();\n    smp.msgType = add\n      ? SMFSMPMessageType.ADDSUBSCRIPTION\n      : SMFSMPMessageType.REMSUBSCRIPTION;\n    smp.encodedUtf8Subscription = topic.getBytes();\n    assert(smp.encodedUtf8Subscription, 'Topic had no encoding');\n    smp.setFlag(SMFSMPMessageTypeFlags.SMF_SMP_FLAG_TOPIC, true);\n    if (requestConfirm) {\n      smp.setFlag(SMFSMPMessageTypeFlags.SMF_SMP_FLAG_RESPREQUIRED, true);\n    }\n\n    // Always put a correlation tag\n    smp._smfHeader.pm_corrtag = correlationTag;\n    return smp;\n  }\n\n  static getQueueSubscriptionMessage(correlationTag, topic, queue, add) {\n    assert(topic instanceof Destination, 'Topics are not UCS-2 strings. Pass a Topic object.');\n    const smp = new SMPMessage();\n    smp.msgType = add\n      ? SMFSMPMessageType.ADDQUEUESUBSCRIPTION\n      : SMFSMPMessageType.REMQUEUESUBSCRIPTION;\n    smp.encodedUtf8QueueName = DestinationUtil.encodeBytes(queue.getName());\n    smp.encodedUtf8Subscription = topic.getBytes();\n    assert(smp.encodedUtf8Subscription, 'Topic had no encoding');\n    assert(smp.encodedUtf8QueueName, 'Queue had no encoding');\n    smp.setFlag(SMFSMPMessageTypeFlags.SMF_SMP_FLAG_TOPIC, true);\n    smp.setFlag(SMFSMPMessageTypeFlags.SMF_SMP_FLAG_RESPREQUIRED, true);\n    // TODO: true for remove, false for add? Typo in the spec?\n    smp.setFlag(SMFSMPMessageTypeFlags.SMF_SMP_FLAG_PERSIST, true);\n\n    // Always put a correlation tag\n    smp._smfHeader.pm_corrtag = correlationTag;\n    return smp;\n  }\n\n\n}\n\n\nmodule.exports.SMPMessage = SMPMessage;\n","const { BaseMessage } = require('./base-message');\n\n/**\n * @classdesc\n * Transport SMF Message\n * @memberof solace\n * @private\n */\nclass TransportSMFMessage extends BaseMessage {\n  /**\n   * @constructor\n   */\n  constructor() {\n    super(null, null);\n    this.uh = 0;\n    this.messageType = null;\n    this.sessionId = null;\n    this.routerTag = null;\n    this.payload = null;\n    this.payloadLength = 0;\n    this.tsHeaderLength = 0;\n  }\n}\n\nmodule.exports.TransportSMFMessage = TransportSMFMessage;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SMFAdProtocolMessageType = {\n  OPENPUBFLOW:      0x00,\n  // INTERROUTERACK:          0x01,\n  // INTERROUTERHANDSHAKEACK: 0x02,\n  CLIENTACK:        0x03,\n  BIND:             0x04,\n  UNBIND:           0x05,\n  UNSUBSCRIBE:      0x06,\n  CLOSEPUBFLOW:     0x07,\n  CREATE:           0x08,\n  DELETE:           0x09,\n  // FLOWRECOVER:  0x0a,\n  TRANSACTIONCTRL:  0x0b,\n  FLOWCHANGEUPDATE: 0x0c,\n  // EXTERNALACK:      0x0d,\n  XACTRL:           0x0e,\n  CLIENTNACK:       0x0f,\n  // TXNCTRL:          0x10,\n};\n\nmodule.exports.SMFAdProtocolMessageType = Enum.new(SMFAdProtocolMessageType);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SMFAdProtocolParam = {\n  LASTMSGIDSENT:                           0x01,\n  LASTMSGIDACKED:                          0x02,\n  WINDOW:                                  0x03,\n  TRANSPORT_PRIORITY:                      0x04,\n  APPLICATION_ACK:                         0x05,\n  FLOWID:                                  0x06,\n  QUEUENAME:                               0x07,\n  DTENAME:                                 0x08,\n  TOPICNAME:                               0x09,\n  FLOWNAME:                                0x0a,\n  EP_DURABLE:                              0x0b,\n  ACCESSTYPE:                              0x0c,\n  SELECTOR:                                0x0d,\n  TRANSPORT_WINDOW:                        0x0e,\n  LINGER_OPTION:                           0x0f,\n  LASTMSGIDRECEIVED:                       0x10,\n  EP_ALLOTHER_PERMISSION:                  0x11,\n  FLOWTYPE:                                0x12,\n  EP_QUOTA:                                0x13,\n  EP_MAX_MSGSIZE:                          0x14,\n  GRANTED_PERMISSIONS:                     0x15,\n  EP_RESPECTS_TTL:                         0x16,\n  TRANSACTION_CTRL_MESSAGE_TYPE:           0x17,\n  TRANSACTED_SESSION_ID:                   0x18,\n  TRANSACTED_SESSION_NAME:                 0x19,\n  TRANSACTION_ID:                          0x1a,\n  TRANSACTED_SESSION_STATE:                0x1b,\n  TRANSACTION_FLOW_DESCRIPTOR_PUB_NOTIFY:  0x1c,\n  TRANSACTION_FLOW_DESCRIPTOR_PUB_ACK:     0x1d,\n  TRANSACTION_FLOW_DESCRIPTOR_SUB_ACK:     0x1e,\n  NOLOCAL:                                 0x1f,\n  ACTIVE_FLOW_INDICATION:                  0x20,\n  WANT_FLOW_CHANGE_NOTIFY:                 0x21,\n  EP_BEHAVIOUR:                            0x22,\n  PUBLISHER_ID:                            0x23,\n  APPLICATION_PUB_ACK:                     0x24,\n  NUM_MESSAGES_SPOOLED:                    0x25,\n  CUT_THROUGH:                             0x26,\n  PUBLISHER_FLAGS:                         0x27,\n  APP_MSG_ID_TYPE:                         0x28,\n  QUEUE_ENDPOINT_HASH:                     0x29,\n  MAX_REDELIVERY:                          0x2a,\n  PAYLOAD:                                 0x2b,\n  ENDPOINT_ID:                             0x2c,\n  ACK_SEQUENCE_NUMBER:                     0x2d,\n  ACK_RECONCILE_REQUEST:                   0x2e,\n  START_OF_ACK_RECONCILE:                  0x2f,\n  TIMESTAMP:                               0x30,\n  MAX_DELIVERED_UNACKED_MESSAGES_PER_FLOW: 0x31,\n  REPLAY_START_LOCATION:                   0x33,\n  ENDPOINT_ERROR_ID:                       0x34,\n  SPOOLER_UNIQUE_ID:                       0x36,\n  PARTITION_GROUP_ID:                      0x38,\n};\n\nmodule.exports.SMFAdProtocolParam = Enum.new(SMFAdProtocolParam);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SMFClientCtrlMessageType = {\n  LOGIN:  0x00,\n  UPDATE: 0x01,\n};\n\nmodule.exports.SMFClientCtrlMessageType = Enum.new(SMFClientCtrlMessageType);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SMFClientCtrlParam = {\n  SOFTWAREVERSION:              0x00,\n  SOFTWAREDATE:                 0x01,\n  PLATFORM:                     0x02,\n  USERID:                       0x03,\n  CLIENTDESC:                   0x04,\n  CLIENTNAME:                   0x05,\n  MSGVPNNAME:                   0x06,\n  DELIVERTOONEPRIORITY:         0x07,\n  P2PTOPIC:                     0x08,\n  ROUTER_CAPABILITIES:          0x09,\n  VRIDNAME:                     0x0a,\n  PHYSICALROUTERNAME:           0x0c,\n  BRIDGE_MSG_VPN_NAME:          0x0d,\n  BRIDGE_ROUTER_NAME:           0x0e,\n  NO_LOCAL:                     0x0f,\n  BRIDGE_VERSION:               0x10,\n  AUTHENTICATION_SCHEME:        0x11,\n  CONNECTION_TYPE:              0x12,\n  ROUTER_CAPABILITIES_EXTENDED: 0x13,\n  REQUIRES_RELEASE_7:           0x14, // not supported.\n  SSL_DOWNGRADE:                0x15,\n  CLIENT_CAPABILITIES:          0x17,\n  KEEP_ALIVE_INTERVAL:          0x18,\n};\n\n// Internal use only\nconst SMFClientCtrlAuthType = {\n  CLIENT_CERTIFICATE: '\\x01',\n  OAUTH2:             '\\x0a',\n};\n\nmodule.exports.SMFClientCtrlAuthType = Enum.new(SMFClientCtrlAuthType);\nmodule.exports.SMFClientCtrlParam = Enum.new(SMFClientCtrlParam);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SMFParameterType = {\n  // SMF parameter types 5 bit types\n  PADDING:                  0x00,\n  PUBLISHER_ID:             0x01,\n  PUBLISHER_MSGID:          0x02,\n  MESSAGEPRIORITY:          0x03,\n  USERDATA:                 0x04,\n  USERNAME:                 0x06,\n  PASSWORD:                 0x07,\n  RESPONSE:                 0x08,\n  SUB_ID_LIST:              0x0A,\n  GENERIC_ATTACHMENT:       0x0B,\n  BINARY_ATTACHMENT:        0x0C,\n  DELIVERY_MODE:            0x10,\n  ASSURED_MESSAGE_ID:       0x11,\n  ASSURED_PREVMESSAGE_ID:   0x12,\n  ASSURED_REDELIVERED_FLAG: 0x13,\n  MESSAGE_CONTENT_SUMMARY:  0x16,\n  ASSURED_FLOWID:           0x17,\n  TR_TOPICNAME:             0x18,\n  AD_FLOWREDELIVERED_FLAG:  0x19,\n  AD_TIMETOLIVE:            0x1C,\n  AD_TOPICSEQUENCE_NUMBER:  0x1e,\n  EXTENDED_TYPE_STREAM:     0x1f,\n  /* extended parameters 12 bit types */\n  AD_ACK_MESSAGE_ID:        0x29,\n  AD_SPOOLER_UNIQUE_ID:     0x2c,\n  AD_REPL_MATE_ACK_MSGID:   0x2d,\n  AD_REDELIVERY_COUNT:      0x2e,\n\n  /* light wieght parameters */\n  LIGHT_CORRELATION:       0x00,\n  LIGHT_TOPIC_NAME_OFFSET: 0x01,\n  LIGHT_QUEUE_NAME_OFFSET: 0x02,\n  LIGHT_ACK_IMMEDIATELY:   0x03,\n};\n\nconst SMFExtendedParameterType = {\n  // SMFv3 Extended parameters inside the Extended Type Stream\n//Not supported yet\n//  GSS_API_TOKEN:        0x28,\n//  AD_ACK_MESSAGE_ID:    0x29,\n//  AD_TRANSACTION_ID:    0x2a,\n//  AD_TRANSACTION_FLAGS: 0x2b,\n  OAUTH2_ISSUER_IDENTIFIER: 0x2f,\n  OIDC_ID_TOKEN:            0x30,\n  OAUTH2_ACCESS_TOKEN:      0x31,\n  PARTITION_KEY_HASH:       0x35, // @Todo: not yet implemented as improvement for PQ\n  TS_TRANSPORT_CONTEXT:     0x36,\n};\n\nmodule.exports.SMFParameterType = Enum.new(SMFParameterType);\nmodule.exports.SMFExtendedParameterType = Enum.new(SMFExtendedParameterType);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * SMFProtocol\n * @private\n * @enum {number}\n */\nconst SMFProtocol = {\n  CSPF:               0x01,\n  CSMP:               0x02,\n  PUBMSG:             0x03,\n  XMLLINK:            0x04,\n  WSE:                0x05,\n  SEMP:               0x06,\n  SUBCTRL:            0x07,\n  PUBCTRL:            0x08,\n  ADCTRL:             0x09,\n  KEEPALIVE:          0x0a,\n  KEEPALIVEV2:        0x0b,\n  CLIENTCTRL:         0x0c,\n  TRMSG:              0x0d,\n  JNDI:               0x0e,\n  SMP:                0x0f,\n  SMRP:               0x10,\n  SMF_IN_SMF:         0x11,\n  SMF_IN_RV:          0x12,\n  ADCTRL_PASSTHROUGH: 0x13,\n  TSESSION:           0x14,\n\n};\n\nmodule.exports.SMFProtocol = Enum.new(SMFProtocol);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SMFSMPMessageTypeFlags = {\n  FLAG_FILTER:                1,\n  FLAG_PERSIST:               2,\n  SMF_SMP_FLAG_TOPIC:         4,\n  SMF_SMP_FLAG_RESPREQUIRED:  8,\n  SMF_SMP_FLAG_DELIVERALWAYS: 16,\n};\n\nmodule.exports.SMFSMPMessageTypeFlags = Enum.new(SMFSMPMessageTypeFlags);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SMFSMPMessageType = {\n  ADDSUBSCRIPTION:              0x00,\n  REMSUBSCRIPTION:              0x01,\n  ADDQUEUESUBSCRIPTION:         0x02,\n  REMQUEUESUBSCRIPTION:         0x03,\n  ADDSUBSCRIPTIONFORCLIENTNAME: 0x04,\n  REMSUBSCRIPTIONFORCLIENTNAME: 0x05,\n};\n\nmodule.exports.SMFSMPMessageType = Enum.new(SMFSMPMessageType);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SMFTransportSessionMessageType = {\n  CREATE:            0,\n  CREATE_RESP:       1,\n  DESTROY:           2,\n  DESTROY_RESP:      3,\n  DATA:              4,\n  DATA_TOKEN:        5,\n  DATA_STREAM_TOKEN: 6,\n};\n\nmodule.exports.SMFTransportSessionMessageType = Enum.new(SMFTransportSessionMessageType);\n","const { CacheCBInfo } = require('./lib/cache-cb-info');\nconst { CacheContext } = require('./lib/cache-context');\nconst { CacheLiveDataAction } = require('./lib/cache-live-data-actions');\nconst { CacheRequest } = require('./lib/cache-request');\nconst { CacheRequestResult } = require('./lib/cache-request-result');\nconst { CacheReturnCode } = require('./lib/cache-return-codes');\nconst { CacheReturnSubcode } = require('./lib/cache-return-subcodes');\nconst { CacheSession } = require('./lib/cache-session');\nconst { CacheSessionProperties } = require('./lib/cache-session-properties');\n\nmodule.exports.CacheCBInfo = CacheCBInfo;\nmodule.exports.CACHE_REQUEST_PREFIX = CacheContext.CACHE_REQUEST_PREFIX;\nmodule.exports.CacheLiveDataAction = CacheLiveDataAction;\nmodule.exports.CacheRequestResult = CacheRequestResult;\nmodule.exports.CacheReturnCode = CacheReturnCode;\nmodule.exports.CacheReturnSubcode = CacheReturnSubcode;\nmodule.exports.CacheRequest = CacheRequest;\nmodule.exports.CacheSession = CacheSession;\nmodule.exports.CacheSessionProperties = CacheSessionProperties;\n\n","/**\n * This callback is called by a cache session when a cache request\n * completes.\n *\n * @callback solace.CacheCBInfo.cacheRequestCallback\n * @function\n * @param {Number} requestID The ID of the request on which the event is notified.\n * @param {solace.CacheRequestResult} result The result of the cache request.\n * @param {Object} userObject The user object provided.\n */\n\n\n/**\n * @classdesc\n * Encapsulates a {@link solace.CacheSession}'s request listener callback function and\n * optional application-specified context object.\n *\n * Instances of this class are required as a parameter to\n * {@link solace.CacheSession#sendCacheRequest} when creating a CacheSession request.\n *\n * @memberof solace\n */\nclass CacheCBInfo {\n\n  /**\n   * Creates an instance of CacheCBInfo using the provided callback and user context object.\n   * @param {solace.CacheCBInfo.cacheRequestCallback} cacheCBFunction The callback to be invoked.\n   * @param {Object} userObject A context object to be returned with the callback.\n   */\n  constructor(cacheCBFunction, userObject) {\n    /**\n     * The function that will be called by the cache session when a request\n     * completes.\n     * @type {solace.CacheCBInfo.cacheRequestCallback}\n     */\n    this.cacheCBFunction = cacheCBFunction;\n\n    /**\n     * The user context object that will be supplied to the callback function\n     * when the cache request completes.\n     * @type {object}\n     */\n    this.userObject = userObject;\n  }\n\n  /**\n   * @returns {solace.CacheCBInfo.cacheRequestCallback} The callback function\n   * @private\n   */\n  getCallback() {\n    return this.cacheCBFunction;\n  }\n\n  /**\n   * @returns {*} The user context object, if any\n   * @private\n   */\n  getUserObject() {\n    return this.userObject;\n  }\n\n}\n\nmodule.exports.CacheCBInfo = CacheCBInfo;\n","/**\n * @private\n * @static\n */\nconst CacheContext = {\n  /**\n   * A prefix appearing on the request IDs of all requests associated with a Solcache session.\n   * @type {String}\n   * @private\n   */\n  CACHE_REQUEST_PREFIX: '#CRQ',\n\n  /**\n   * A global counter generating unique correlation IDs for cache requests.\n   * @private\n   */\n  cacheRequestCorrelationId: 0,\n};\n\nmodule.exports.CacheContext = CacheContext;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst CacheGetResultCode = {\n  INVALID: 0,\n  OK:      1,\n};\n\nmodule.exports.CacheGetResultCode = Enum.new(CacheGetResultCode);\n","const { CacheGetResultCode } = require('./cache-get-result-codes');\n\nconst DEFAULTS = {\n  messageID:         null,\n  version:           0,\n  responseCode:      CacheGetResultCode.INVALID,\n  responseString:    '',\n  matchTopic:        '',\n  sessionID:         null,\n  isSuspect:         null,\n  hasMore:           null,\n  hasTimestamps:     null,\n  replyTo:           null,\n  messageStream:     null,\n  clusterNameStream: null,\n};\n\n/**\n * @classdesc CacheGetResult encapsulates the result of a cache get request\n * @private\n */\nclass CacheGetResult {\n  /*\n   * @constructor\n   */\n  constructor(options = DEFAULTS) {\n    Object.assign(this, options);\n  }\n\n  readFromStream(stream) {\n    this.messageID = stream.getNext().getValue();\n    this.version = stream.getNext().getValue();\n    this.responseCode = stream.getNext().getValue();\n    this.responseString = stream.getNext().getValue();\n    // SD claims instanceName is present here but empirically, it's not\n\n    this.matchTopic = stream.getNext().getValue();\n    this.sessionID = stream.getNext().getValue();\n    this.isSuspect = stream.getNext().getValue();\n    this.hasMore = stream.getNext().getValue();\n\n    this.hasTimestamps = stream.getNext().getValue();\n\n    if (stream.hasNext()) { // first stream\n      this.messageStream = stream.getNext().getValue();\n    }\n    if (stream.hasNext()) { // if two streams, first was cluster name stream\n      this.clusterNameStream = this.messageStream;\n      this.messageStream = stream.getNext().getValue();\n    }\n  }\n}\n\nmodule.exports.CacheGetResult = CacheGetResult;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * solace.CacheLiveDataAction\n * Enumeration of CacheLiveDataAction values, specifying how the CacheSession should handle\n * live data associated with a cache request in progress.\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst CacheLiveDataAction = {\n  /**\n   * @type {Number}\n   * @description End the cache request when live data arrives that matches the topic.\n   * Note that wildcard cache requests must always be {@link CacheLiveDataAction.FLOW_THRU}.\n   */\n  FULFILL:   1,\n  /**\n   * @type {Number}\n   * @description Queue arriving live data that matches the topic, until the cache request\n   * completes. Note that wildcard cache requests must always be {@link\n   * solace.CacheLiveDataAction.FLOW_THRU}.\n   */\n  QUEUE:     2,\n  /**\n   * @type {Number}\n   * @description Continue the outstanding cache request while allowing live data to flow through to\n   * the application.\n   * Note that wildcard cache requests must always be {@link CacheLiveDataAction.FLOW_THRU}.\n   */\n  FLOW_THRU: 3,\n};\n\nmodule.exports.CacheLiveDataAction = Enum.new(CacheLiveDataAction);\n","/**\n * @classdesc\n * <b>This class is not exposed for construction by API users. A CacheRequestResult object is\n * provided on the callback (see {@link solace.CacheCBInfo.cacheRequestCallback} when a cache\n * request completes.</b>\n *\n * An object that indicates the termination of a cache request, and provides details how it\n * concluded.\n * @memberof solace\n * @hideconstructor\n */\nclass CacheRequestResult {\n  /*\n   * @param {solace.CacheReturnCode} rc The result of the request.\n   *   * When returnCode === CacheReturnCode.OK, the applicable subcodes are:\n   *     * {@link CacheReturnSubcode.REQUEST_COMPLETE}\n   *     * {@link CacheReturnSubcode.LIVE_DATA_FULFILL}\n   *   * When returnCode === CacheReturnCode.FAIL, applicable subcodes are:\n   *     * {@link CacheReturnSubcode.ERROR_RESPONSE}\n   *     * {@link CacheReturnSubcode.INVALID_SESSION}\n   *     * {@link CacheReturnSubcode.REQUEST_ALREADY_IN_PROGRESS}\n   *   * When returnCode === CacheReturnCode.INCOMPLETE, applicable subcodes are:\n   *     * {@link CacheReturnSubcode.NO_DATA}\n   *     * {@link CacheReturnSubcode.REQUEST_TIMEOUT}\n   *     * {@link CacheReturnSubcode.SUSPECT_DATA}\n   *\n   * @param {solace.CacheReturnSubcode} subcode The subcode result of the request. Provides\n   *    details on the condition that caused the result.\n   * @param {solace.Destination} topic The topic destination on which the request was made.\n   * @param {String} error The error, if any, that caused the current result.\n   */\n  constructor(rc, subcode, topic, error) {\n    this._returnCode = rc;\n    this._subcode = subcode;\n    this._topic = topic;\n    this._error = error;\n  }\n\n  /**\n   * Gets the return code from the cache request result.\n   *\n   * @returns {solace.CacheReturnCode} The return code associated with the result of\n   * the request.\n   */\n  getReturnCode() {\n    return this._returnCode;\n  }\n\n  /**\n   * Gets the return subcode from the cache request result.\n   *\n   * @returns {solace.CacheReturnSubcode} A subcode that gives more detail than\n   * {@link CacheRequestResult#getReturnCode} about the result of the request.\n   */\n  getReturnSubcode() {\n    return this._subcode;\n  }\n\n  /**\n   * Gets the topic object associated with the cache request.\n   *\n   * @returns {solace.Destination} The topic destination supplied for the cache request.\n   */\n  getTopic() {\n    return this._topic;\n  }\n\n\n  /**\n   * Gets the error, if any, associated with the returned result.\n   *\n   * @returns {String} The error associated with the returned result.\n   */\n  getError() {\n    return this._error;\n  }\n}\n\nmodule.exports.CacheRequestResult = CacheRequestResult;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst CacheRequestType = {\n  INVALID:                       0,\n  BULK_MSG:                      1,\n  REGISTER_REQUEST:              2,\n  REGISTER_RESPONSE:             3,\n  HEARTBEAT_REQUEST:             4,\n  HEARTBEAT_RESPONSE:            5,\n  EVENT_NOTIFY:                  6,\n  EVENT_ACK:                     7,\n  ACTION_REQUEST:                8,\n  ACTION_RESPONSE:               9,\n  GET_REQUEST:                   10,\n  GET_RESPONSE:                  11,\n  GET_NEXT_REQUEST:              12,\n  GET_NEXT_RESPONSE:             13,\n  SET_REQUEST:                   14,\n  SET_RESPONSE:                  15,\n  GET_MSG_REQUEST:               16,\n  GET_MSG_RESPONSE:              17,\n  GET_NEXT_MSG_REQUEST:          18,\n  GET_NEXT_MSG_RESPONSE:         19,\n  UNREGISTER_IND:                20,\n  BULK_SET_REQUEST:              21,\n  BULK_SET_RESPONSE:             22,\n  PURGE_MSG_SEQUENCE_REQUEST:    23,\n  PURGE_MSG_SEQUENCE_RESPONSE:   24,\n  GET_MSG_SEQUENCE_REQUEST:      25,\n  GET_NEXT_MSG_SEQUENCE_REQUEST: 26,\n  GET_TOPIC_INFO_REQUEST:        27,\n  GET_TOPIC_INFO_RESPONSE:       28,\n  READY_MARKER:                  29,\n  GET_TOPIC_INFO_REQUEST_RANGE:  30,\n  SYNC_READY_MARKER:             31,\n  VACUUM_REQUEST:                32,\n  VACUUM_RESPONSE:               33,\n};\n\nmodule.exports.CacheRequestType = Enum.new(CacheRequestType);\n","const { CacheContext } = require('./cache-context');\nconst { LOG_DEBUG } = require('solclient-log');\n\nconst { CACHE_REQUEST_PREFIX } = CacheContext;\n\n/**\n * @private\n */\nclass CacheRequest {\n  /**\n   * @constructor\n   * @param {CacheSession} cacheSession The owning session\n   * @param {CacheRequestType} cacheMessageType The type of request\n   * @param {Number} requestID The ID for the request\n   * @param {CacheCBInfo} cbInfo Callback target\n   * @param {CacheLiveDataAction} liveDataAction Action on live data received\n   * @param {Topic} topic Associated topic\n   * @param {String} cacheName Associated remote cache name\n   * @private\n   */\n  constructor(cacheSession, cacheMessageType, requestID, cbInfo, liveDataAction, topic, cacheName) {\n    this.cacheSession = cacheSession;\n    this.cacheMessageType = cacheMessageType;\n    this.requestID = requestID;\n    this.cbInfo = cbInfo;\n    this.liveDataAction = liveDataAction;\n    this.topic = topic;\n    this.cacheName = cacheName;\n\n    this.subscriptionWaiting = null;\n    this.replyReceived = false;\n    this.dataReceived = false;\n    this.isSuspect = false;\n\n    this.correlationID = `${CACHE_REQUEST_PREFIX}${CacheContext.cacheRequestCorrelationId++}`;\n\n    this.childRequests = [];\n    this.parentRequest = null;\n\n    this.queuedLiveData = [];\n    this.liveDataFulfilled = false;\n\n    this.timeoutHandle = null;\n  }\n\n  /**\n   * @returns {CacheRequest} The root cache request in the current request tree\n   * @private\n   */\n  getRootRequest() {\n    if (!this.parentRequest) {\n      return this;\n    }\n    return this.parentRequest.getRootRequest();\n  }\n\n  /**\n   * @param {CacheRequest} childIn A request to make a descendant of this node in the request tree\n   * @private\n   */\n  addChild(childIn) {\n    if (!(childIn instanceof CacheRequest)) {\n      throw new Error(`Invalid child ${childIn}`);\n    }\n    if (childIn === this) {\n      throw new Error('Constructing circular child reference');\n    }\n    const child = childIn;\n    child.parentRequest = this;\n    this.childRequests.push(child);\n  }\n\n  /**\n   * @param {CacheRequest} childIn A request to remove as a descendant of this node\n   * @private\n   */\n  removeChild(childIn) {\n    if (childIn === this) {\n      throw new Error('Attempting to deconstruct invalid circular child reference');\n    }\n    const child = childIn;\n    const childIndex = this.childRequests.indexOf(child);\n    if (childIndex === -1) {\n      LOG_DEBUG(`Child ${child} not found in ${this}`);\n    }\n    this.childRequests.splice(childIndex, 1);\n    child.parentRequest = null;\n  }\n\n  /**\n   * @private\n   */\n  collapse() {\n    const parentRequest = this.parentRequest;\n    parentRequest.isSuspect = parentRequest.isSuspect || this.isSuspect;\n    parentRequest.dataReceived = parentRequest.dataReceived || this.dataReceived;\n    parentRequest.removeChild(this);\n  }\n\n  /**\n   * @private\n   */\n  cancel() {\n    if (this.parentRequest) {\n      this.collapse();\n    }\n\n    while (this.childRequests.length) {\n      const child = this.childRequests.shift();\n      if (child.childRequests) {\n        child.cancel();\n      }\n      this.removeChild(child);\n    }\n\n    this.clearRequestTimeout();\n  }\n\n  /**\n   * @returns {Number} The ID of this request\n   * @private\n   */\n  getRequestID() {\n    return this.requestID;\n  }\n\n\n  /**\n   * @returns {CacheCBInfo} The callback object for this request\n   * @private\n   */\n  getCBInfo() {\n    return this.cbInfo;\n  }\n\n  /**\n   * @returns {Topic} The topic for this request\n   * @private\n   */\n  getTopic() {\n    return this.topic;\n  }\n\n\n  /**\n   * @returns {CacheLiveDataAction} The live data action for this request\n   * @private\n   */\n  getLiveDataAction() {\n    return this.liveDataAction;\n  }\n\n  /**\n   * @param {function({solace.CacheRequest})} cacheSessionTimeoutCB Callback to notify on timeout\n   * @param {Number} timeoutMsec Timeout in milliseconds\n   * @private\n   */\n  startRequestTimeout(cacheSessionTimeoutCB, timeoutMsec) {\n    this.timeoutHandle = setTimeout(() => {\n      cacheSessionTimeoutCB(this);\n    }, timeoutMsec);\n  }\n\n  /**\n   * @private\n   */\n  clearRequestTimeout() {\n    if (this.timeoutHandle === null || this.timeoutHandle === undefined) {\n      return;\n    }\n\n    LOG_DEBUG(`Clearing timeout for ${this}`);\n    clearTimeout(this.timeoutHandle);\n    this.timeoutHandle = null;\n  }\n\n  /**\n   * Returns a string representing the request.\n   * @returns {String} A brief description of this object\n   */\n  toString() {\n    return `CacheRequest[correlationID=${this.correlationID\n        },requestID=${this.requestID\n        },cacheName=${this.cacheName\n        },topic=${this.topic.getName()}]`;\n  }\n\n}\n\n/**\n * @private\n */\nCacheRequest.VERSION = 1;\n\n/**\n * @private\n */\nCacheRequest.DEFAULT_REPLY_SIZE_LIMIT = 1000000;\n\n/**\n * @private\n */\nCacheRequest.REPLY_SIZE_LIMIT = CacheRequest.DEFAULT_REPLY_SIZE_LIMIT;\n\nmodule.exports.CacheRequest = CacheRequest;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Enumeration of CacheReturnCode types.  The method {@link solace.CacheRequestResult#getReturnCode}\n * returns on of these basic results of a cache request.  More details are available in the\n * associated {@link solace.CacheReturnSubcode}, retrieved by\n * {@link solace.CacheRequestResult#getReturnSubcode}.\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst CacheReturnCode = {\n  /**\n   * @type {Number}\n   * @description The cache request succeeded.  See the subcode for more information.\n   */\n  OK:         1,\n  /**\n   * @type {Number}\n   * @description The cache request was not processed.  See the subcode for more information.\n   */\n  FAIL:       2,\n  /**\n   * @type {Number}\n   * @description The cache request was processed but could not be completed.  See the subcode for\n   * more information.\n   */\n  INCOMPLETE: 3,\n};\n\nmodule.exports.CacheReturnCode = Enum.new(CacheReturnCode);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Enumeration of CacheReturnSubcode types.\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst CacheReturnSubcode = {\n  /**\n   * @type {Number}\n   * @description\n   * The cache request completed successfully.\n   */\n  REQUEST_COMPLETE:            0,\n  /**\n   * @type {Number}\n   * @description\n   * The cache request completed when live data arrived on the topic requested.\n   */\n  LIVE_DATA_FULFILL:           1,\n  /**\n   * @type {Number}\n   * @description\n   * The cache instance or session returned an error response to the cache request.\n   */\n  ERROR_RESPONSE:              2,\n  /**\n   * @type {Number}\n   * @description\n   * The cache request failed because the {@link Session} used to construct it has been\n   * disposed.\n   */\n  INVALID_SESSION:             3,\n  /**\n   * @type {Number}\n   * @description\n   * The cache request failed because the request timeout expired.\n   */\n  REQUEST_TIMEOUT:             4,\n  /**\n   * @type {Number}\n   * @description\n   * The cache request was made on the same topic as an existing request, and\n   * {@link CacheLiveDataAction.FLOW_THRU} was not set.\n   */\n  REQUEST_ALREADY_IN_PROGRESS: 5,\n  /**\n   * @type {Number}\n   * @description\n   * The cache reply returned no data.\n   */\n  NO_DATA:                     6,\n  /**\n   * @type {Number}\n   * @description\n   * The cache reply returned suspect data.\n   */\n  SUSPECT_DATA:                7,\n  /**\n   * @type {Number}\n   * @description\n   * The request was terminated because the cache session was disposed.\n   */\n  CACHE_SESSION_DISPOSED:      8,\n  /**\n   * @type {Number}\n   * @description\n   * The request was terminated because the subscription request for the specified topic failed.\n   */\n  SUBSCRIPTION_ERROR:          9,\n};\n\nmodule.exports.CacheReturnSubcode = Enum.new(CacheReturnSubcode);\n","/**\n * @classdesc\n *\n * Encapsulates the properties of a cache session.\n *\n * @memberof solace\n *\n */\nclass CacheSessionProperties {\n\n   /**\n    * @constructor\n    *\n    * @param {String} cacheName A property that specifies the cache name to which CacheSession\n    *   operations should be sent.\n    * @param {Number} [maxAgeSec=0] The maximum allowable message age in seconds to deliver in\n    *   response to a cache request. 0 means no restriction on age.\n    * @param {Number} [maxMessages=1] The maximum number of messages per Topic to deliver in\n    *   response to cache requests. 0 means no restriction on the number of messages.\n    * @param {Number} [timeoutMsec=10000] The timeout period (in milliseconds) to wait for a\n    *   response from the cache. This is a protocol timer used internally by the API on each\n    *   message exchange with SolCache. A single call to\n    *   {@link solace.CacheSession#sendCacheRequest} may lead to many request-reply exchanges\n    *   with SolCache and so is not bounded by this timer as long as each internal request is\n    *   satisfied in time.\n    *   * The valid range for this property is >= 3000.\n    */\n  constructor(cacheName, maxAgeSec, maxMessages, timeoutMsec) {\n    /**\n     * @type {String}\n     *\n     * @description A property that specifies the cache name to which CacheSession operations should\n     * be sent.\n     */\n    this.cacheName = cacheName;\n\n    /**\n     * @type {Number}\n     *\n     * @description The maximum allowable message age in seconds to deliver in response to cache\n     * requests.  0 means no restriction on age.\n     *\n     * @default 0\n     */\n    this.maxAgeSec = maxAgeSec || 0;\n\n    /**\n     * @type {Number}\n     *\n     * @description The maximum number of messages per Topic to deliver in response to cache\n     * requests.  0 means no restriction on the number of messages.\n     *\n     * @default 1\n     */\n    this.maxMessages = (maxMessages === null || maxMessages === undefined) ? 1 : maxMessages;\n\n    /**\n     * @type {Number}\n     *\n     * @description The timeout for a cache request, in milliseconds.  The valid range for this\n     * property is >= 3000.\n     *\n     * @default 10000\n     */\n    this.timeoutMsec = timeoutMsec || 10000;\n\n    /**\n     * @private\n     * @type {Boolean}\n     * @description Whether to include other clusters in the request.\n     * @default true\n     */\n    this.includeOtherClusters = true;\n\n    /**\n     * @private\n     */\n    this.cachePrefix = '#P2P/CACHEINST/';\n  }\n\n  /**\n   * Gets the cache name to which {@link solace.CacheSession} requests should be sent, for\n   * sessions constructed using these properties.\n   *\n   * @returns {String} The cache name.\n   */\n  getCacheName() {\n    return this.cacheName;\n  }\n\n  /**\n   * Sets the cache name to which requests should be sent. Cannot be null or blank.\n   * @param {String} value The cache name to which requests should be sent.\n   */\n  setCacheName(value) {\n    this.cacheName = value;\n  }\n\n  /**\n   * Gets the maximum allowable message age for messages to be delivered in response to a request\n   * made on a {@link solace.CacheSession} that was constructed using these properties.  0 means no\n   * restriction on age.\n   *\n   * @returns {Number} The maximum allowable message age to be returned by an associated\n   * {@link solace.CacheSession}, or 0 for no restriction.\n   */\n  getMaxMessageAgeSec() {\n    return this.maxAgeSec;\n  }\n\n  /**\n   * Sets the maximum allowable message age. 0 means no restriction on age.\n   *\n   * @param {Number} value The maximum allowable message age, or 0 for no restriction.\n   */\n  setMaxMessageAgeSec(value) {\n    this.maxAgeSec = value;\n  }\n\n  /**\n   * Gets the maximum count of messages to be delivered, per {@link solace.Destination}, in\n   * response to a request issued on a {@link solace.CacheSession} constructed using these\n   * properties.  0 means no restriction on the number of messages.\n   *\n   * @returns {Number} The maximum number of messages per Topic to deliver, or 0 for no restriction.\n   */\n  getMaxMessages() {\n    return this.maxMessages;\n  }\n\n  /**\n   * Sets the maximum count of messages to be delivered per {@link solace.Destination} in response\n   * to a cache request. 0 means no restriction.\n   *\n   * @param {Number} value The maximum count of messages to deliver, or 0 for no restriction.\n   */\n  setMaxMessages(value) {\n    this.maxMessages = value;\n  }\n\n  /**\n   * Gets the timeout for requests issued on a {@link solace.CacheSession} constructed\n   * using these properties.\n   *  * The valid range is >= 3000.\n   *\n   * @returns {Number} The timeout, in milliseconds, for cache session requests.\n   */\n  getTimeoutMsec() {\n    return this.timeoutMsec;\n  }\n\n  /**\n   * Sets the timeout for requests.\n   *  * The valid range is >= 3000.\n   * @param {Number} value The timeout for requests.\n   */\n  setTimeoutMsec(value) {\n    this.timeoutMsec = value;\n  }\n\n}\n\nmodule.exports.CacheSessionProperties = CacheSessionProperties;\n","/**\n * A tuple associating subscriptions, correlation IDs and cache sessions.\n * @param {String} correlationID The correlation ID for this tuple\n * @param {Topic} topic The topic for this tuple\n * @param {CacheSession} cacheSession The cache session for this tuple\n * @private\n */\nclass CacheSessionSubscribeInfo {\n  constructor(correlationID, topic, cacheSession) {\n    Object.assign(this, {\n      correlationID,\n      topic,\n      cacheSession,\n    });\n  }\n}\n\nmodule.exports.CacheSessionSubscribeInfo = CacheSessionSubscribeInfo;\n","const MessageLib = require('solclient-message');\nconst SessionLib = require('solclient-session');\nconst SMFLib = require('solclient-smf');\nconst StatType = require('solclient-stats');\nconst {\n  ErrorSubcode,\n  OperationError,\n} = require('solclient-error');\nconst {\n  LOG_TRACE,\n  LOG_DEBUG,\n  LOG_INFO,\n  LOG_WARN,\n} = require('solclient-log');\nconst {\n  SDTField,\n  SDTFieldType,\n  SDTStreamContainer,\n} = require('solclient-sdt');\nconst { CacheCBInfo } = require('./cache-cb-info');\nconst { CacheContext } = require('./cache-context');\nconst { CacheGetResult } = require('./cache-get-result');\nconst { CacheLiveDataAction } = require('./cache-live-data-actions');\nconst { CacheRequest } = require('./cache-request');\nconst { CacheRequestResult } = require('./cache-request-result');\nconst { CacheRequestType } = require('./cache-request-types');\nconst { CacheReturnCode } = require('./cache-return-codes');\nconst { CacheReturnSubcode } = require('./cache-return-subcodes');\nconst { CacheSessionProperties } = require('./cache-session-properties');\nconst { CacheSessionSubscribeInfo } = require('./cache-session-subscribe-info');\nconst { Destination,\n        Topic } = require('solclient-destination');\n\nconst { CACHE_REQUEST_PREFIX } = CacheContext;\n\nconst noOp = () => undefined;\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users. Users should obtain an instance from\n * {@link solace.Session#createCacheSession}</b>\n * <p>\n * A session for performing cache requests.\n *\n * Applications must use {@link solace.Session#createCacheSession} to construct this class.\n *\n * The supplied {@link solace.CacheSessionProperties} will be copied. Subsequent modifications\n * to the passed properties will not modify the session. The properties may be reused.\n *\n * @hideconstructor\n * @memberof solace\n */\nclass CacheSession {\n  /*\n   * @constructor\n   * @private\n   *\n   * @param {solace.CacheSessionProperties} props The properties for the cache session.\n   * @param {solace.Session} session The Session on which the CacheSession will issue\n   *  cache requests.\n   * @param {Object} privateInterface Private methods exposed to this CacheSession.\n   *\n   * @throws {solace.OperationError}\n   *  * if the parameters have an invalid type or value;\n   *    subcode {@link ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   */\n  constructor(props, session, privateInterface) {\n    CacheSession._validateProps(props);\n    const properties = new CacheSessionProperties(props.cacheName,\n                                                  props.maxAgeSec,\n                                                  props.maxMessages,\n                                                  props.timeoutMsec);\n    Object.assign(this,\n                  {\n                    _outstandingRequests:          {},\n                    _outstandingIDs:               {},\n                    _disposed:                     false,\n                    _nextMessageCallbackInfo:      null,\n                    _nextSessionEventCallbackInfo: null,\n                    _properties:                   properties,\n                    _session:                      session,\n                    _sessionIF:                    privateInterface,\n                  });\n    this._connectToSession(session);\n  }\n\n  /**\n   * @param {solace.Session} session The session to connect\n   * @private\n   */\n  _connectToSession(session) {\n    this._nextSessionEventCallbackInfo = session.getEventCBInfo();\n    this._nextMessageCallbackInfo = session.getMessageCBInfo();\n    session.setMessageCBInfo(new SessionLib.MessageRxCBInfo((_, message) => {\n      this._handleMessage(message);\n    }, this));\n    session.setEventCBInfo(this._createCompoundEventCB(this._nextSessionEventCallbackInfo));\n  }\n\n  /**\n   * Takes the session's existing event callback and sets it as the next delegate in a\n   * chain of responsibility. The next delegate could be the client application, or another\n   * cache session.\n   * @param {SessionEventCBInfo} nextDelegate The next event receiver in the chain\n   * @returns {SessionEventCBInfo} An event receiver that delegates to the supplied receiver\n   * @private\n   */\n  _createCompoundEventCB(nextDelegate) {\n    return new SessionLib.SessionEventCBInfo((session, sessionEvent, userObject, rfuObject) => {\n      this._handleSessionEvent(nextDelegate, session, sessionEvent, userObject, rfuObject);\n    }, null);\n  }\n\n  /**\n   * Modified chain of responsibility. Handles the event, then passes the event to the next\n   * delegate.\n   * @param {SessionEventCBInfo} nextDelegate The next delegate to notify\n   * @param {solace.Session} session The associated session\n   * @param {SessionEvent} sessionEvent The session event to dispatch\n   * @private\n   */\n  _handleSessionEvent(nextDelegate, session, sessionEvent /*, userObject, rfuObject */) {\n    const passEvent = this._processSessionEvent(session, sessionEvent);\n    if (!passEvent) {\n      return;\n    }\n    const cbUserObject = nextDelegate.userObject;\n    if (!cbUserObject) {\n      nextDelegate.sessionEventCBFunction(session, sessionEvent);\n    } else {\n      nextDelegate.sessionEventCBFunction(session, sessionEvent, cbUserObject);\n    }\n  }\n\n  /**\n   * @param {Message} message The message to forward\n   * @private\n   */\n  _sendToNextDelegate(message) {\n    const cbUserObject = this._nextMessageCallbackInfo.userObject;\n    if (!cbUserObject) {\n      this._nextMessageCallbackInfo.messageRxCBFunction(this._session, message);\n    } else {\n      this._nextMessageCallbackInfo.messageRxCBFunction(this._session, message, cbUserObject);\n    }\n  }\n\n  /**\n   * @param {solace.Session} session The associated session\n   * @param {SessionEvent} event The event to process\n   * @returns {Boolean} true if event should pass to next delegate\n   * @private\n   */\n  _processSessionEvent(session, event) {\n    switch (event.sessionEventCode) {\n      case SessionLib.SessionEventCode.SUBSCRIPTION_ERROR:\n      case SessionLib.SessionEventCode.SUBSCRIPTION_OK:\n        return this._checkSubscriptionStatus(event);\n      case SessionLib.SessionEventCode.DOWN_ERROR:\n        this.dispose();\n        return true;\n      default:\n        LOG_TRACE(`Unhandled session event: ${event.sessionEventCode}`);\n        return true;\n    }\n  }\n\n  /**\n   * @param {SessionEvent} event The event to check\n   * @returns {Boolean} `true` if event should pass to next delegate\n   * @private\n   */\n  _checkSubscriptionStatus(event) {\n    // Incremental checks for whether this is our subscription.\n    if ((event.correlationKey === null || event.correlationKey === undefined) ||\n        (!(event.correlationKey instanceof CacheSessionSubscribeInfo)) ||\n        (event.correlationKey.cacheSession !== this)) {\n      return true;\n    }\n    const request = this._getOutstandingRequest(event.correlationKey.correlationID);\n    if (!request) {\n      LOG_WARN(`No request found for subscription success on ${event.correlationKey.topic}`);\n      return true;\n    }\n    if (event.sessionEventCode === SessionLib.SessionEventCode.SUBSCRIPTION_OK) {\n      this._handleSubscriptionSuccess(request, event.correlationKey.topic);\n      return false;\n    }\n    this._handleSubscriptionError(request, event);\n    return false;\n  }\n\n  /**\n   * @param {CacheRequest} requestIn The cache on which to register success\n   * @param {Topic} topic The topic on which to issue the request.\n   * @private\n   */\n  _handleSubscriptionSuccess(requestIn /*, topic */) {\n    // Null out this field and check completion status.\n    const request = requestIn;\n    request.subscriptionWaiting = null;\n    this._startCacheRequest(request);\n  }\n\n  /**\n   * @param {CacheRequest} request The cache request on which to register failure\n   * @private\n   */\n  _handleSubscriptionError(request/*, event */) {\n    this._terminateRequest(request, CacheReturnCode.FAIL, CacheReturnSubcode.SUBSCRIPTION_ERROR);\n  }\n\n  /**\n   * @param {CacheRequest} request The cache request on which to check completion\n   * @private\n   */\n  _checkRequestCompletion(request) {\n    if (request.childRequests.length) {\n      // Not finished with spawned child requests.\n      LOG_DEBUG(`Awaiting termination of ${request.childRequests.length} children`);\n      return;\n    }\n    if (request.subscriptionWaiting) {\n      // Waiting for confirmation of subscription to a topic.\n      LOG_DEBUG('Awaiting subscription');\n      return;\n    }\n    if (request.timeoutHandle !== null && (!request.replyReceived)) {\n      LOG_DEBUG('Awaiting timeout');\n      return;\n    }\n    if (request.parentRequest) {\n      // We're no longer waiting for a child to complete.\n      const parent = request.parentRequest;\n      request.cancel();\n      this._unregisterRequest(request);\n      this._checkRequestCompletion(parent);\n      return;\n    }\n\n    // This is a parent request and it is done.\n    let code;\n    let subcode;\n    if (request.isSuspect) {\n      code = CacheReturnCode.INCOMPLETE;\n      subcode = CacheReturnSubcode.SUSPECT_DATA;\n    } else if (request.dataReceived) {\n      code = CacheReturnCode.OK;\n      if (request.liveDataFulfilled) {\n        subcode = CacheReturnSubcode.LIVE_DATA_FULFILL;\n      } else {\n        subcode = CacheReturnSubcode.REQUEST_COMPLETE;\n      }\n    } else if (request.replyReceived) {\n      code = CacheReturnCode.INCOMPLETE;\n      subcode = CacheReturnSubcode.NO_DATA;\n    } else {\n      throw new Error('Sanity: should never happen');\n    }\n    this._terminateRequest(request, code, subcode);\n  }\n\n  /**\n   * @param {CacheRequest} parentRequest The parent node for the new request\n   * @param {CacheGetResult} cacheGetResult The result of this request\n   * @private\n   */\n  _sendSeeOther(parentRequest, cacheGetResult) {\n    const clusterName = cacheGetResult.clusterNameStream.getNext().getValue();\n    // var root = parentRequest.getRootRequest();\n    LOG_DEBUG(`See Other for ${clusterName}. Sending child request`);\n    const childRequest = new CacheRequest(this,\n                                          CacheRequestType.GET_MSG_REQUEST,\n                                          parentRequest.requestID,\n                                          new CacheCBInfo(noOp, null),\n                                          parentRequest.liveDataAction,\n                                          parentRequest.topic,\n                                          clusterName);\n    // Add this request to its parent\n    parentRequest.addChild(childRequest);\n    // Start the request\n    this._registerRequest(childRequest);\n    childRequest.startRequestTimeout(CacheSession._handleCacheRequestTimeout,\n                                     this._properties.timeoutMsec);\n    this._startCacheRequest(childRequest, // request to send\n                            null, // no session ID\n                            null, // no specific instance target\n                            true); // don't return other clusters\n  }\n\n  /**\n   * @param {CacheRequest} parentRequest The parent node for the new request\n   * @param {CacheGetResult} cacheGetResult The result of this request\n   * @private\n   */\n  _sendGetNext(parentRequest, cacheGetResult) {\n    LOG_DEBUG('Cache result has more, sending GET_NEXT_MSG_REQUEST as child');\n    // This is how to trigger \"Invalid Session\":\n    //require(\"child_process\").execSync('sleep 11');\n    const nextRequest = new CacheRequest(this,\n                                         CacheRequestType.GET_NEXT_MSG_REQUEST,\n                                         parentRequest.requestID,\n                                         new CacheCBInfo(noOp, null),\n                                         parentRequest.liveDataAction,\n                                         parentRequest.topic,\n                                         parentRequest.cacheName);\n    // Set up parent-child relationship\n    parentRequest.addChild(nextRequest);\n    // Start the request\n    this._registerRequest(nextRequest);\n    nextRequest.startRequestTimeout(CacheSession._handleCacheRequestTimeout,\n                                    this._properties.timeoutMsec);\n    this._startCacheRequest(nextRequest, // request to send\n                            cacheGetResult.sessionID, // supplied session ID\n                            cacheGetResult.replyTo); // supplied cache instance target\n  }\n\n  /**\n   * @param {Message} message The message to inspect and handle\n   * @private\n   */\n  _handleMessage(message) {\n    // Determine if the message is associated with one of this session's requests\n    const correlationID = message.getCorrelationId();\n    const request = correlationID === null || correlationID === undefined\n      ? null\n      : this._outstandingRequests[correlationID];\n\n    // This could be live data on a relevant topic.  Check that.\n    if (!request) {\n      if (this._relevantLiveData(message)) {\n        this._sendToNextDelegate(message);\n      }\n      return;\n    }\n\n    // It's ours!\n    LOG_DEBUG(`Processing reply to ${request}`);\n    // bug 36404: We have a response. Cancel the timeout for this request.\n    request.clearRequestTimeout();\n    const streamField = message.getSdtContainer();\n    const stream = streamField && streamField.getValue();\n    if (!stream) {\n      LOG_INFO(\n        `Invalid message format for cache response: no SDT container (${\n        streamField}) or stream (${stream})`);\n      this._terminateRequest(request, CacheReturnCode.FAIL, CacheReturnSubcode.ERROR_RESPONSE);\n    }\n    // The session will never see this reply, so we need to update the stats\n    // from here.\n    this._incStat(StatType.RX_REPLY_MSG_RECVED);\n    request.replyReceived = true;\n\n    // If the request was fulfilled by live data, discard the reply and stop processing\n    // the response.\n    if (request.getRootRequest().liveDataFulfilled) {\n      this._incStat(StatType.CACHE_REQUEST_FULFILL_DISCARD_RESPONSE);\n      this._checkRequestCompletion(request);\n      return;\n    }\n\n    if (!stream) {\n      LOG_INFO('Invalid cache response did not fulfill request. Skipping response processing');\n      return;\n    }\n\n    try {\n      // Fill the result object with values from the result stream.\n      const result = new CacheGetResult();\n      result.readFromStream(stream);\n      result.replyTo = message.getReplyTo();\n      if (result.responseString) {\n        LOG_DEBUG(`Cluster response: ${result.responseString}`);\n      }\n        if (result.responseCode === 7 || result.responseString == \"Invalid Session\") {\n          LOG_INFO(`Cluster response indicates invalid session: ${result.responseString} code: ${result.responseCode}`);\n          this._terminateRequest(request, CacheReturnCode.FAIL, CacheReturnSubcode.INVALID_SESSION);\n        }\n      // Apply the isSuspect flag. Don't clear it if the result is already suspect.\n      request.isSuspect = request.isSuspect || result.isSuspect;\n      // Get any inner messages.\n      const messages = CacheSession._decodeMessageStream(request, result);\n      // Update statistics.\n      this._incStat(StatType.RX_CACHE_MSG, messages.length);\n      // If we have more results to come, send a get next request.\n      if (result.hasMore) {\n        this._sendGetNext(request, result);\n      }\n      // If we have more clusters to visit, send requests to those clusters.\n      if (result.clusterNameStream) {\n        LOG_DEBUG('Receiving cluster stream');\n        while (result.clusterNameStream.hasNext()) {\n          this._sendSeeOther(request, result);\n        }\n      }\n      // Forward any retrieved messages.\n      if (messages) {\n        messages.forEach((m) => {\n          this._sendToNextDelegate(m);\n        });\n      }\n      this._checkRequestCompletion(request);\n    } catch (exception) {\n      LOG_INFO(`Invalid message format for cache response: ${exception.stack}`);\n      this._terminateRequest(request, CacheReturnCode.FAIL, CacheReturnSubcode.ERROR_RESPONSE);\n    }\n  }\n\n  /**\n   * @param {Message} message The message to inspect and handle\n   * @returns {Boolean} `true` if the next delegate should handle this message\n   * @private\n   */\n  _relevantLiveData(message) {\n    // If the next message processor does not belong to a cache\n    // session, and this is a CRQ message, suppress it.\n    if (message.getCorrelationId() &&\n        message.getCorrelationId().startsWith(CACHE_REQUEST_PREFIX) &&\n        !(this._nextMessageCallbackInfo.userObject instanceof CacheSession)) {\n      LOG_WARN('DROP: Dropping CRQ reply due to no remaining Cache Session processors on message ' +\n               'callback chain');\n      this._incStat(StatType.RX_REPLY_MSG_DISCARD);\n      return false;\n    }\n    // Otherwise, assume the message should flow through.\n    // If all _performLiveDataAction calls return true, we return true;\n    return Object.keys(this._outstandingRequests).every(checkCID =>\n      this._performLiveDataAction(this._outstandingRequests[checkCID], message));\n  }\n\n  /**\n   * @param {CacheRequest} requestIn The cache request for which to perform the action\n   * @param {Message} message The message to process on the request\n   * @returns {Boolean} true if message should flow through after action.\n   * @private\n   */\n  _performLiveDataAction(requestIn, message) {\n    const request = requestIn;\n    request.dataReceived = true;\n    switch (request.liveDataAction) {\n      case CacheLiveDataAction.QUEUE:\n        request.queuedLiveData.push(message);\n        return false;\n\n      case CacheLiveDataAction.FULFILL:\n        if (!request.liveDataFulfilled) {\n          this._fulfillRequest(request);\n        }\n        return true;\n\n      default:\n        return true;\n    }\n  }\n\n  /**\n   * @param {CacheRequest} requestIn The request to fulfill\n   * @private\n   */\n  _fulfillRequest(requestIn) {\n    const request = requestIn;\n    request.liveDataFulfilled = true;\n    this._trackCompletionStats(CacheReturnCode.OK, CacheReturnSubcode.LIVE_DATA_FULFILL);\n    // We have more work to do here -- we need to return the live data first.\n    // Schedule the notification for later.\n    setTimeout(() => {\n      CacheSession._notifyCallback(request,\n                                   CacheReturnCode.OK,\n                                   CacheReturnSubcode.LIVE_DATA_FULFILL,\n                                   request.getTopic(),\n                                   null);\n    }, 0);\n  }\n\n  /**\n   * Disposes the session.  No cache requests will be sent by this CacheSession after it is\n   * _disposed.\n   *\n   * Any subsequent operations on the session will throw {OperationError}.\n   *\n   * Any pending operations will immediately terminate, returning\n   *   * {@link solace.CacheRequestResult}\n   *     * #returnCode === {@link solace.CacheReturnCode.INCOMPLETE}\n   *     * #subcode === {@link solace.CacheReturnSubcode.CACHE_SESSION_DISPOSED}\n   * @throws {solace.OperationError} if the CacheSession is already _disposed.\n   */\n  dispose() {\n    const toTerminate = Object.keys(this._outstandingRequests)\n      .map(correlationID => this._outstandingRequests[correlationID])\n      .filter(request => request instanceof CacheRequest);\n    toTerminate.forEach((request) => {\n      this._terminateRequest(request,\n                             CacheReturnCode.INCOMPLETE,\n                             CacheReturnSubcode.CACHE_SESSION_DISPOSED);\n    });\n    this._outstandingRequests = [];\n    // Restore original listeners\n    this._session.setEventCBInfo(this._nextSessionEventCallbackInfo);\n    this._session.setMessageCBInfo(this._nextMessageCallbackInfo);\n    // Set _disposed\n    this._disposed = true;\n  }\n\n  /**\n   * Gets the cache session properties.\n   *\n   * @returns {solace.CacheSessionProperties} The properties for the session.\n   * @throws {solace.OperationError} if the CacheSession is disposed.\n   */\n  getProperties() {\n    return this._properties;\n  }\n\n  /**\n   * Issues an asynchronous cache request. The result of the request will be returned via the\n   * listener. Messages returned as a result of issuing the request will be returned to the\n   * application via the {@link solace.MessageRxCBInfo} associated with this\n   * {@link solace.CacheSession}'s {@link solace.Session}\n   *\n   * @param {Number} requestID The application-assigned ID number for the request.\n   * @param {solace.Destination} topic The topic destination for which the cache request will be\n   *    made.\n   * @param {Boolean} subscribe If true, the session will subscribe to the given {Topic}, if it is\n   * not already subscribed, before performing the cache request.\n   * @param {solace.CacheLiveDataAction} liveDataAction The action to perform when the\n   *    {@link solace.CacheSession} receives live data on the given topic.\n   * @param {solace.CacheCBInfo} cbInfo Callback info for the cache request.\n   *\n   * @throws {solace.OperationError} In the following cases:\n   * * If the CacheSession is disposed.\n   *    Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}\n   * * If one or more parameters were invalid.\n   *    Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}\n   * * If the supplied topic and live data action cannot be combined.\n   *    Subcode: {@link solace.ErrorSubcode.PARAMETER_CONFLICT}\n   * * If the supplied topic or live data action cannot be used given the current outstanding\n   *    requests.\n   *    Subcode: {@link solace.ErrorSubcode.PARAMETER_CONFLICT}\n   */\n  sendCacheRequest(requestID, topic, subscribe, liveDataAction, cbInfo) {\n    if (arguments.length !== 5) {\n      throw new OperationError(`sendCacheRequest() invoked with an illegal argument count of ${\n        arguments.length}`);\n    }\n    if (typeof subscribe !== 'boolean') {\n      throw new OperationError(\n        `Invalid subscribe flag argument, should be a boolean but was ${typeof subscribe}`);\n    }\n    if (typeof requestID !== 'number' || Number.isNaN(requestID)) {\n      throw new OperationError('Invalid requestID', ErrorSubcode.PARAMETER_INVALID_TYPE, null);\n    }\n    if (this._outstandingIDs[requestID]) {\n      throw new OperationError('Request already in progress with this requestID');\n    }\n    if (!(topic instanceof Destination)) {\n      throw new OperationError('Invalid topic', ErrorSubcode.PARAMETER_INVALID_TYPE, (typeof topic));\n    }\n    topic.validate();\n    if (!(liveDataAction === CacheLiveDataAction.FLOW_THRU || liveDataAction ===\n        CacheLiveDataAction.FULFILL || liveDataAction === CacheLiveDataAction.QUEUE)) {\n      throw new OperationError('Invalid live data action', ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n    if (topic.isWildcarded() && liveDataAction !== CacheLiveDataAction.FLOW_THRU) {\n      throw new OperationError('Wildcarded topic not supported for this live data action',\n        ErrorSubcode.PARAMETER_CONFLICT);\n    }\n    if (!(cbInfo instanceof CacheCBInfo)) {\n      throw new OperationError('Callback info was not an instance of CacheCBInfo');\n    }\n    if (this._disposed) {\n      CacheSession._notifyCallbackError(cbInfo, requestID, CacheReturnCode.FAIL,\n                                        CacheReturnSubcode.CACHE_SESSION_DISPOSED, topic,\n                                        'Cache request failed: the cache session is disposed.');\n      return;\n    }\n    if (this._session._disposed) {\n      CacheSession._notifyCallbackError(cbInfo, requestID, CacheReturnCode.FAIL,\n                                        CacheReturnSubcode.INVALID_SESSION, topic,\n                                        'Cache request failed: the session is disposed.');\n      return;\n    }\n\n    const request = new CacheRequest(this,\n      CacheRequestType.GET_MSG_REQUEST,\n      requestID,\n      cbInfo,\n      liveDataAction,\n      topic,\n      this._properties.cacheName);\n\n    const matchingRequestKeys = Object.keys(this._outstandingRequests).filter(key =>\n      this._outstandingRequests[key].topic.getName() === topic.getName());\n\n    if (matchingRequestKeys.length) {\n      // Topic name matches mean a conflict unless both requests are FLOW_THRU\n      const conflictKeys = (\n        liveDataAction !== CacheLiveDataAction.FLOW_THRU\n          ? matchingRequestKeys\n          : matchingRequestKeys.filter(k =>\n            this._outstandingRequests[k].liveDataAction !== CacheLiveDataAction.FLOW_THRU));\n      if (conflictKeys.length) {\n        const conflictRequest = this._outstandingRequests[conflictKeys[0]];\n        LOG_WARN(`Existing request ${conflictRequest} conflicts. Rejecting request ${request}`);\n         // Register this request so that it is not dismissed as an orphan.\n        this._registerRequest(request);\n        this._terminateRequest(request,\n                               CacheReturnCode.FAIL,\n                               CacheReturnSubcode.REQUEST_ALREADY_IN_PROGRESS);\n        return;\n      }\n    }\n\n    this._registerRequest(request);\n    request.startRequestTimeout(CacheSession._handleCacheRequestTimeout,\n                                this._properties.timeoutMsec);\n    if (subscribe) {\n      const waitingForSubscribeInfo = new CacheSessionSubscribeInfo(request.correlationID, topic,\n        this);\n      request._subscriptionWaiting = waitingForSubscribeInfo;\n      this._session.subscribe(topic, true, waitingForSubscribeInfo);\n      return;\n    }\n    this._startCacheRequest(request);\n  }\n\n  /**\n   * @param {solace.Session} session The session associated with the request\n   * @param {SessionEvent} sessionEvent The session event\n   * @param {CacheRequest} userObject The user-specified context object\n   * @private\n   */\n  _handleCacheRequestFailed(session, sessionEvent, userObject /*, rfuObject */) {\n    this._terminateRequest(userObject.getRequestID(),\n                           CacheReturnCode.FAIL,\n                           CacheReturnSubcode.ERROR_RESPONSE);\n  }\n\n  /**\n   * @param {CacheRequest} request The new request to register\n   * @private\n   */\n  _registerRequest(request) {\n    this._outstandingRequests[request.correlationID] = request;\n    if (!request.parentRequest) {\n      this._outstandingIDs[request.requestID] = request;\n    }\n  }\n\n  /**\n   * @param {Number} correlationID The ID of an existing request\n   * @returns {CacheRequest} The existing request with the given ID\n   * @private\n   */\n  _getOutstandingRequest(correlationID) {\n    return this._outstandingRequests[correlationID];\n  }\n\n  /**\n   *\n   * @param {CacheRequest} request The request to start\n   * @param {?Number} sessionID Only when returned from a cache instance as part of a\n   * previous message\n   * @param {?Topic} destination Only when required by a cache reply\n   * @param {?Boolean} suppressClusters True when other clusters should be excluded from\n   * the response, as in a request resulting from a \"see other\"\n   * @private\n   */\n  _startCacheRequest(request, sessionID, destination, suppressClusters) {\n    const message = new MessageLib.Message();\n\n    // Prepare message\n    message.setCorrelationId(request.correlationID);\n    if (destination) {\n      message.setDestination(destination);\n    } else {\n      message.setDestination(\n        Topic.createFromName(this._properties.cachePrefix + request.cacheName));\n    }\n    message.setReplyTo(Topic.createFromName(this._session.getSessionProperties().p2pInboxInUse));\n    message.setDeliverToOne(request.cacheMessageType === CacheRequestType.GET_MSG_REQUEST);\n\n    // Prepare stream container\n    const stream = new SDTStreamContainer();\n    stream.addField(SDTFieldType.UINT32, request.cacheMessageType);\n    stream.addField(SDTFieldType.UINT32, CacheRequest.VERSION);\n    stream.addField(SDTFieldType.STRING, request.topic.getName());\n    stream.addField(SDTFieldType.UINT32, CacheRequest.REPLY_SIZE_LIMIT);\n\n    if (typeof sessionID === 'number') {\n      LOG_DEBUG(`Including session ID: ${sessionID}`);\n      stream.addField(SDTFieldType.UINT32, sessionID);\n    }\n\n    stream.addField(SDTFieldType.UINT32, this._properties.maxMessages);\n    stream.addField(SDTFieldType.UINT32, this._properties.maxAgeSec);\n    if (request.cacheMessageType === CacheRequestType.GET_MSG_REQUEST) {\n      stream.addField(SDTFieldType.BOOL,\n                      this._properties.includeOtherClusters && (!suppressClusters));\n    }\n\n    stream.addField(SDTFieldType.BOOL, false); // includeTimestamps, 6.17.1\n    if (request.cacheMessageType === CacheRequestType.GET_MSG_REQUEST) {\n      stream.addField(SDTFieldType.UINT32, Math.round(this._properties.timeoutMsec / 1000));\n    }\n\n    // Load stream container\n    message.setSdtContainer(SDTField.create(SDTFieldType.STREAM, stream));\n    try {\n      LOG_DEBUG(`Sending ${request}`);\n      this._session.send(message);\n\n      if (!request.parentRequest) { // Don't count child requests in CACHE_REQUEST_SENT total\n        this._incStat(StatType.CACHE_REQUEST_SENT);\n      }\n    } catch (e) {\n      LOG_INFO(`Failed to send request: ${e.message}`);\n      this._terminateRequest(request, CacheReturnCode.FAIL, CacheReturnSubcode.ERROR_RESPONSE, e);\n    }\n  }\n\n  /**\n   * Increments a stat.\n   * @param  {String} statType The stat to increment\n   * @param  {Number} value    The amount by which to increment the state\n   * @private\n   */\n  _incStat(statType, value) {\n    if (!this._session) {\n      LOG_DEBUG(\"Can't log stat: session is disposed\");\n      return;\n    }\n    if (!this._sessionIF) {\n      LOG_INFO(\"Can't log stat: session statistics not available\");\n      return;\n    }\n    this._sessionIF.incStat(statType, value);\n  }\n\n  /**\n   * Unregisters the given request.\n   * @param  {CacheRequest} request The request to unreguster\n   * @private\n   */\n  _unregisterRequest(request) {\n    delete this._outstandingRequests[request.correlationID];\n    delete this._outstandingIDs[request.requestID];\n  }\n\n  /**\n   * @param {CacheReturnCode} returnCode The return code for this completion\n   * @param {CacheReturnSubcode} subcode The subcode for this completion\n   * @private\n   */\n  _trackCompletionStats(returnCode, subcode) {\n    switch (returnCode) {\n      case CacheReturnCode.OK:\n        this._incStat(StatType.CACHE_REQUEST_OK_RESPONSE);\n        if (subcode === CacheReturnSubcode.LIVE_DATA_FULFILL) {\n          this._incStat(StatType.CACHE_REQUEST_LIVE_DATA_FULFILL);\n        }\n        break;\n      case CacheReturnCode.INCOMPLETE:\n        this._incStat(StatType.CACHE_REQUEST_INCOMPLETE_RESPONSE);\n        break;\n      case CacheReturnCode.FAIL:\n        this._incStat(StatType.CACHE_REQUEST_FAIL_RESPONSE);\n        break;\n      default:\n        throw new Error('Sanity: no return code supplied');\n    }\n  }\n\n  /**\n   * @param {CacheRequest} requestIn The request to terminate\n   * @param {CacheReturnCode} returnCode The return code for this operation\n   * @param {CacheReturnSubcode} subcode The subcode for this operation\n   * @param {Error} error Any error associated with this operation\n   * @private\n   */\n  _terminateRequest(requestIn, returnCode, subcode, error) {\n    const request = requestIn.getRootRequest();\n    if (!this._outstandingRequests[request.correlationID]) {\n      // Request is unknown or was previously terminated\n      return;\n    }\n    const cbInfo = request.cbInfo;\n    if (!cbInfo) {\n      LOG_WARN(`No callback info provided for ${request}. Cannot notify`);\n      return; // Cannot continue\n    }\n    const callback = cbInfo.getCallback();\n    if (!callback) {\n      LOG_WARN(`No callback provided for ${request}. Cannot notify`);\n      return; // Cannot continue\n    }\n    const topic = request.getTopic();\n    if (!topic) {\n      LOG_WARN(`No topic provided for ${request}`);\n    }\n    request.queuedLiveData.forEach(data => this._sendToNextDelegate(data));\n\n    // Unregister before callback so that the client application can treat the request ID\n    // as \"freed\" and reuse it\n    request.cancel();\n    this._unregisterRequest(request);\n\n    if (!request.liveDataFulfilled) {\n      // All of this has already been done on fulfill.\n      this._trackCompletionStats(returnCode, subcode);\n      CacheSession._notifyCallback(request, returnCode, subcode, topic, error);\n    }\n  }\n\n  /**\n   * @param {CacheRequest} requestIn The request with a result to decode\n   * @param {CacheGetResult} result The result to decode\n   * @returns {Array.<Message>} The messages contained in the result\n   * @private\n   */\n  static _decodeMessageStream(requestIn, result) {\n    if (!result.messageStream) {\n      return [];\n    }\n\n    LOG_DEBUG('Receiving messages');\n    const messages = [];\n    const request = requestIn;\n    while (result.messageStream.hasNext()) {\n      request.dataReceived = true;\n      const data = result.messageStream.getNext().getValue();\n      const innerMessage = SMFLib.Codec.Decode.decodeCompoundMessage(data, 0);\n      if (!innerMessage) {\n        continue;\n      }\n      const cacheStatus = result.isSuspect\n        ? MessageLib.MessageCacheStatus.SUSPECT\n        : MessageLib.MessageCacheStatus.CACHED;\n      innerMessage._setCacheStatus(cacheStatus);\n      innerMessage._setCacheRequestID(request.requestID);\n      messages.push(innerMessage);\n    }\n    LOG_DEBUG(`${messages.length} cached messages received`);\n    return messages;\n  }\n\n  /**\n   * Closure call context; `this` will be redefined\n   * @param {CacheRequest} cacheRequest The request that timed out\n   * @private\n   */\n  static _handleCacheRequestTimeout(cacheRequest) {\n    const context = cacheRequest.cacheSession;\n    if (!context._getOutstandingRequest(cacheRequest.correlationID)) {\n      LOG_INFO(`Timeout for ${cacheRequest} was not unregistered. Ignoring`);\n      // already completed\n      return;\n    }\n\n    // bug 36404: Cache request timeout is to be interpreted as timeout per session request-reply,\n    // not timeout per cache request-reply.\n    // Implementation: Timeouts on parent requests are cancelled when a child request is spawned.\n    // Timeouts on child requests cause the root request to fail.\n    LOG_INFO(`Request ${cacheRequest} timed out`);\n    context._terminateRequest(cacheRequest.getRootRequest(), CacheReturnCode.INCOMPLETE,\n                              CacheReturnSubcode.REQUEST_TIMEOUT);\n  }\n\n\n  /**\n   * @param {CacheRequest} request The request that is notifying\n   * @param {CacheReturnCode} returnCode The return code for the notification\n   * @param {CacheReturnSubcode} subcode The subcode for the notification\n   * @param {Destination} topic The topic associated with the notification\n   * @param {Error} error Any error associated with the notification\n   * @private\n   */\n  static _notifyCallback(request, returnCode, subcode, topic, error) {\n    const cbInfo = request.cbInfo;\n    const callback = cbInfo.getCallback();\n    callback(request.requestID,\n             new CacheRequestResult(returnCode, subcode, topic, error),\n             cbInfo.getUserObject());\n  }\n\n  /**\n   * @param {solace.CacheCBInfo} cbInfo Callback info for the cache request.\n   * @param {Number} requestID The application-assigned ID number for the request\n   * @param {CacheReturnCode} returnCode The return code for the notification\n   * @param {CacheReturnSubcode} subcode The subcode for the notification\n   * @param {Destination} topic The topic associated with the notification\n   * @param {Error} error Any error associated with the notification\n   * @private\n   */\n  static _notifyCallbackError(cbInfo, requestID, returnCode, subcode, topic, error) {\n    const callback = cbInfo.getCallback();\n    callback(requestID,\n             new CacheRequestResult(returnCode, subcode, topic, error),\n             cbInfo.getUserObject());\n  }\n\n  /**\n   * Validates the cache session properties.\n   * @param {solace.CacheSessionProperties} props The properties to validate\n   * @private\n   */\n  static _validateProps(props) {\n    if ((typeof (props.cacheName) !== 'string')) {\n      throw new OperationError('Invalid parameter type for cacheName', ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n    // Create from name will throw if the cacheName is invalid.  This performs more checking than\n    // the legacy API did, but I think it is all justified as we shouldn't be able to use anything\n    // that would be rejected here as a cacheName.\n    if (Topic.createFromName(props.cacheName).isWildcarded()) {\n      throw new OperationError(\n        `Invalid cacheName '${props.cacheName}'. The cacheName cannot be wildcarded`,\n        ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n    if ((typeof (props.maxAgeSec) !== 'number')) {\n      throw new OperationError('Invalid parameter type for maxAgeSec', ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n    if (props.maxAgeSec < 0) {\n      throw new OperationError('Invalid value for maxAgeSec; must be >= 0', ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n    if ((typeof (props.maxMessages) !== 'number')) {\n      throw new OperationError('Invalid parameter type for maxMessages', ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n    if (props.maxMessages < 0) {\n      throw new OperationError('Invalid value for maxMessages; must be >= 0', ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n    if ((typeof (props.timeoutMsec) !== 'number')) {\n      throw new OperationError('Invalid parameter type for timeoutMsec', ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n    if (props.timeoutMsec < 3000) {\n      throw new OperationError('Invalid value for timeoutMsec; must be >= 3000', ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n  }\n\n}\n\nmodule.exports.CacheSession = CacheSession;\n","const { Stats } = require('./lib/stats.js');\nconst { StatsByMode } = require('./lib/stat-bymode');\nconst { StatType } = require('./lib/stat-types');\n\nmodule.exports = {\n  Stats,\n  StatType,\n  StatsByMode,\n};\n","const { StatType } = require('./stat-types');\n\nmodule.exports = {\n  StatsByMode: {\n    STAT_TX_BYMODE_MSGS: [\n      StatType.TX_DIRECT_MSGS,\n      StatType.TX_PERSISTENT_MSGS,\n      StatType.TX_NONPERSISTENT_MSGS,\n    ],\n    STAT_TX_BYMODE_BYTES: [\n      StatType.TX_DIRECT_BYTES,\n      StatType.TX_PERSISTENT_BYTES,\n      StatType.TX_NONPERSISTENT_BYTES,\n    ],\n    STAT_TX_BYMODE_REDELIVERED: [\n      StatType.TX_DIRECT_MSGS,     // unused placeholder, direct messsages are not redelivered\n      StatType.TX_PERSISTENT_REDELIVERED,\n      StatType.TX_NONPERSISTENT_REDELIVERED,\n    ],\n    STAT_TX_BYMODE_BYTES_REDELIVERED: [\n      StatType.TX_DIRECT_BYTES,     // unused placeholder, direct messsages are not redelivered\n      StatType.TX_PERSISTENT_BYTES_REDELIVERED,\n      StatType.TX_NONPERSISTENT_BYTES_REDELIVERED,\n    ],\n    STAT_RX_BYMODE_MSGS: [\n      StatType.RX_DIRECT_MSGS,\n      StatType.RX_PERSISTENT_MSGS,\n      StatType.RX_NONPERSISTENT_MSGS,\n    ],\n    STAT_RX_BYMODE_BYTES: [\n      StatType.RX_DIRECT_BYTES,\n      StatType.RX_PERSISTENT_BYTES,\n      StatType.RX_NONPERSISTENT_BYTES,\n    ],\n  },\n};\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Statistics for sent/received messages and control operations.\n *\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst StatType = {\n\n  // ------- SMF and Direct Messaging\n\n  /**\n   * Count of bytes sent as part of data messages.\n   */\n  TX_TOTAL_DATA_BYTES:            0,\n  /**\n   * Count of data messages sent.\n   */\n  TX_TOTAL_DATA_MSGS:             1,\n  /**\n   * Count of bytes sent as part of direct data messages.\n   */\n  TX_DIRECT_BYTES:                2,\n  /**\n   * Count of direct data messages sent.\n   */\n  TX_DIRECT_MSGS:                 3,\n  /**\n   * Count of bytes sent as part of control messages.\n   */\n  TX_CONTROL_BYTES:               4,\n  /**\n   * Count of control messages sent.\n   */\n  TX_CONTROL_MSGS:                5,\n  /**\n   * Count of request messages sent.\n   */\n  TX_REQUEST_SENT:                6,\n  /**\n   * Count of request timeouts that occurred.\n   */\n  TX_REQUEST_TIMEOUT:             7,\n  /**\n   * Count of bytes received as part of data messages.\n   */\n  RX_TOTAL_DATA_BYTES:            8,\n  /**\n   * Count of data messages received.\n   */\n  RX_TOTAL_DATA_MSGS:             9,\n  /**\n   * Count of bytes received as part of direct data messages.\n   */\n  RX_DIRECT_BYTES:                10,\n  /**\n   * Count of direct data messages received.\n   */\n  RX_DIRECT_MSGS:                 11,\n  /**\n   * Count of bytes received as part of control messages.\n   */\n  RX_CONTROL_BYTES:               12,\n  /**\n   * Count of control messages received.\n   */\n  RX_CONTROL_MSGS:                13,\n  /**\n   * Count discard message indications received on incoming messages.\n   */\n  RX_DISCARD_MSG_INDICATION:      14,\n  /**\n   * Count of reply messaged received.\n   */\n  RX_REPLY_MSG_RECVED:            15,\n  /**\n   * Count of received reply messages that were discarded.\n   */\n  RX_REPLY_MSG_DISCARD:           16,\n  /**\n   * @description\n   * Count of messages discarded due to the presence of an unknown element or\n   * unknown protocol in the SMF header.\n   */\n  RX_DISCARD_SMF_UNKNOWN_ELEMENT: 17,\n\n  // ------- SolCache Session\n\n  /**\n   * @description\n   * Count of cache requests sent. One conceptual request (i.e. one API call)\n   * may involve many requests and replies.\n   */\n  CACHE_REQUEST_SENT:                     18,\n  /**\n   * @description\n   * Count of OK responses to cache requests.\n   */\n  CACHE_REQUEST_OK_RESPONSE:              19,\n  /**\n   * @description\n   * Count of cache requests that returned a failure response.\n   */\n  CACHE_REQUEST_FAIL_RESPONSE:            20,\n  /**\n   * @description\n   * Count of cache replies discarded because a request has been fulfilled.\n   */\n  CACHE_REQUEST_FULFILL_DISCARD_RESPONSE: 21,\n  /**\n   * @description\n   * Count of cached messages delivered to the application.\n   */\n  RX_CACHE_MSG:                           22,\n  /**\n   * @description\n   * Count of cache requests that were incomplete.\n   */\n  CACHE_REQUEST_INCOMPLETE_RESPONSE:      23,\n  /**\n   * @description\n   * The cache session operation completed when live data arrived on the requested topic.\n   */\n  CACHE_REQUEST_LIVE_DATA_FULFILL:        24,\n\n  // ------ Guaranteed Messaging\n\n  /**\n   * Count of bytes sent as part of persistent data messages.\n   */\n  TX_PERSISTENT_BYTES:                25,\n  /**\n   * Count of persistent data messages sent.\n   */\n  TX_PERSISTENT_MSGS:                 26,\n  /**\n   * Count of non-persistent data bytes sent.\n   */\n  TX_NONPERSISTENT_BYTES:             27,\n  /**\n   * Count of non-persistent data messages sent.\n   */\n  TX_NONPERSISTENT_MSGS:              28,\n  /**\n   * The number of bytes redelivered in Persistent messages.\n   */\n  TX_PERSISTENT_BYTES_REDELIVERED:    29,\n  /**\n   * The number of Persistent messages redelivered.\n   */\n  TX_PERSISTENT_REDELIVERED:          30,\n  /**\n   * The number of bytes redelivered in Non-Persistent messages.\n   */\n  TX_NONPERSISTENT_BYTES_REDELIVERED: 31,\n  /**\n   * The number of Non-Persistent messages redelivered.\n   */\n  TX_NONPERSISTENT_REDELIVERED:       32,\n  /**\n   * The number of acknowledgments received.\n   */\n  TX_ACKS_RXED:                       33,\n  /**\n   * The number of times the transmit window closed.\n   */\n  TX_WINDOW_CLOSE:                    34,\n  /**\n   * The number of times the acknowledgment timer expired.\n   */\n  TX_ACK_TIMEOUT:                     35,\n  /**\n   * Count of bytes received as part of persistent data messages.\n   */\n  RX_PERSISTENT_BYTES:                36,\n  /**\n   * Count of persistent data messages received.\n   */\n  RX_PERSISTENT_MSGS:                 37,\n  /**\n   * Count of bytes received as part of non-persistent data messages.\n   */\n  RX_NONPERSISTENT_BYTES:             38,\n  /**\n   * Count of non-persistent data messages received.\n   */\n  RX_NONPERSISTENT_MSGS:              39,\n  /**\n   * Count of acknowledgements sent to the Solace Message Router\n   * for guaranteed messages received by the API.\n   */\n  RX_ACKED:                           40,\n  /**\n   * Count of guaranteed messages discarded for being duplicates.\n   */\n  RX_DISCARD_DUPLICATE:               41,\n  /**\n   * Count of guaranteed messages discarded due to no match message consumer for the message.\n   */\n  RX_DISCARD_NO_MATCHING_CONSUMER:    42,\n  /**\n   * Count of guaranteed messages discarded for being received out of order.\n   */\n  RX_DISCARD_OUT_OF_ORDER:            43,\n  /**\n   * Count of received persistent and non-persistent messages that were rejected.\n   */\n  RX_SETTLE_REJECTED:       44,\n  /**\n   * Count of received persistent and non-persistent messages that were failed.\n   */\n  RX_SETTLE_FAILED:         45,\n  /**\n   * Count of received persistent and non-persistent messages that were accepted manually (no auto-acks).\n   */\n  RX_SETTLE_ACCEPTED:       46,\n};\n\nmodule.exports.StatType = Enum.new(StatType);\n","const { EventEmitter } = require('solclient-events');\nconst { StatType } = require('./stat-types');\n\n/**\n * @private\n */\nclass Stats extends EventEmitter {\n  constructor(parent) {\n    super();\n\n    this._parent = parent;\n    this._statsMap = [];\n    StatType.values.forEach((value) => {\n      this._statsMap[value] = 0;\n    });\n  }\n\n  resetStats() {\n    this.emit('reset');\n    // The stat types are sequential, so .fill(0) would work, but the API design\n    // doesn't really guarantee this so overwriting every existing index is safer.\n    this._statsMap = this._statsMap.map(() => 0);\n  }\n\n  incStat(statType, value = 1) {\n    // should we validate statType?\n    this._statsMap[statType] += value;\n    if (this._parent) {\n      this._parent.incStat(statType, value);\n    }\n  }\n\n  getStat(statType) {\n    return this._statsMap[statType];\n  }\n\n}\n\nmodule.exports.Stats = Stats;\n","const { SMFClient } = require('./lib/smf-client');\nconst { TransportCapabilities } = require('./lib/transport-capabilities');\nconst { TransportError } = require('./lib/transport-error');\nconst { TransportFactory } = require('./lib/transport-factory');\nconst { TransportProtocol } = require('./lib/transport-protocols');\nconst { TransportReturnCode } = require('./lib/transport-return-codes');\nconst { TransportSessionEventCode } = require('./lib/transport-session-event-codes');\nconst { TransportSessionStates } = require('./lib/transport-session-states');\n\n\nmodule.exports.SMFClient = SMFClient;\nmodule.exports.TransportCapabilities = TransportCapabilities;\nmodule.exports.TransportError = TransportError;\nmodule.exports.TransportFactory = TransportFactory;\nmodule.exports.TransportProtocol = TransportProtocol;\nmodule.exports.TransportReturnCode = TransportReturnCode;\nmodule.exports.TransportSessionEventCode = TransportSessionEventCode;\nmodule.exports.TransportSessionStates = TransportSessionStates;\n","class BaseSMFClient {\n  constructor(rxSmfCB, rxMessageErrorCB, session) {\n    this.reset();\n    this._rxSmfCB = rxSmfCB; // callback for parsed msg\n    this._rxMessageErrorCB = rxMessageErrorCB; // invalid UH, etc.\n    this._session = session;\n  }\n\n  reset() {\n    this._correlationCounter = 0;\n  }\n\n  nextCorrelationTag() {\n    // Login uses the max value as a sentinel, so wrap around early\n    if (++this._correlationCounter >= BaseSMFClient.SMF_MAX_CORRELATION) {\n      this._correlationCounter = 1;\n    }\n    // added check to prevent it returning as undefined/null\n    return this._correlationCounter ? this._correlationCounter : 0;\n  }\n}\n\nBaseSMFClient.SMF_MAX_CORRELATION = 0xFFFFFF;\n\n\nmodule.exports.BaseSMFClient = BaseSMFClient;\n","// eslint-disable-next-line global-require\nconst BufferImpl = require('buffer').Buffer;\n\n\nfunction concatFrom(list, from, length) {\n  const buffer = BufferImpl.allocUnsafe(length);\n  let pos = 0;\n  let i;\n  const buf0 = list[0];\n  pos += buf0.copy(buffer, 0, from, buf0.length);\n  for (i = 1; i < list.length && pos < length; i++) {\n    const buf = list[i];\n    pos += buf.copy(buffer, pos, 0, buf.length);\n  }\n  return buffer;\n}\n\n\nfunction readUInt32BEFrag(bufList, listOffsetParam, byteIndexParam) {\n  let listOffset = listOffsetParam;\n  let byteIndex = byteIndexParam;\n  const bytes = []; // the 4 bytes\n  let i = 0;\n  for (i = 0; i < 4; i++) {\n    while (bufList[listOffset].length <= byteIndex) {\n      byteIndex -= bufList[listOffset].length;\n      listOffset++;\n      if (listOffset >= bufList.length) { return null; } // should not happen.\n    }\n    bytes[i] = bufList[listOffset].readUInt8(byteIndex);\n    byteIndex++;\n  }\n  // shift the bytes into a 32 bit number, BE.\n  return (bytes[0] << 24) + (bytes[1] << 16) + (bytes[2] << 8) + bytes[3];\n}\n\n/**\n * Simplified FIFO of buffers.\n * Holds transport buffers without copying, allows 12 byte peeks for header and length detection.\n * For pops either a slice is returned if possible,\n * or a copy if the message spans transport buffers.\n * Pushes are refused when over capacity.\n * @internal\n */\nclass BufferQueue {\n  constructor(maxSize) {\n    let _queue = [];\n    const _maxSize = maxSize;\n    let _size = 0;\n    let _offset = 0;\n\n    /**\n     * Creates a slice (view) of the buffer with the given size. Conceptually.\n     * Since slicing is expensive, it just retruns the raw transport buffer with the offset.\n     * Buffer - offset pair if possible, copy (with zero offset) if beyond first buffer boundary.\n     *\n     *\n     * @param {Number} size Bytes to view\n     * @returns {?Array} Buffer - offset pair if there was enough data to peek, or `null`\n     */\n    this.peekView = function peekView(size) {\n      const result = [];\n      if (_queue.length < 1 || size > _size) { return null; }\n      if (_queue[0].length >= size + _offset) {\n        result[0] = _queue[0];\n        result[1] = _offset;\n      } else {  //over buffer boundary, must copy.\n        result[0] = concatFrom(_queue, _offset, size);\n        result[1] = 0;\n      }\n      return result;\n    };\n\n    this.readUInt8 = function readUInt8(index) {\n      if (index >= _size) { return null; }\n      const oIndex = index + _offset;\n      if (oIndex < _queue[0].length) {\n        return _queue[0].readUInt8(oIndex);\n      } // else\n      let pos = _queue[0].length;\n      let i = 1;\n      while (pos + _queue[i].length <= oIndex) {\n        pos += _queue[i].length;\n        i++;\n      }\n      return _queue[i].readUInt8(oIndex - pos);\n    };\n\n    this.readUInt32BE = function readUInt32BE(index) {\n      if (index + 3 >= _size) { return null; }\n      const oIndex = index + _offset;\n      if (oIndex + 3 < _queue[0].length) {\n        return _queue[0].readUInt32BE(oIndex);\n      } // else\n      if (oIndex < _queue[0].length) {\n        return readUInt32BEFrag(_queue, 0, oIndex);\n      }\n\n      let pos = _queue[0].length;\n      let i = 1;\n      while (pos + _queue[i].length <= oIndex) {\n        pos += _queue[i].length;\n        i++;\n      }\n      if (oIndex - pos + 3 < _queue[i].length) {\n        return _queue[i].readUInt32BE(oIndex - pos);\n      } // else\n      return readUInt32BEFrag(_queue, i, oIndex - pos);\n    };\n\n    /**\n     * Adds a buffer to the queue.\n     * Fails if maxsize is exeeded.\n     *\n     * @param {Buffer} dataIn Source data\n     * @returns {Boolean} `true` if the data fits.\n     */\n    this.put = function put(dataIn) {\n      const buffer = BufferQueue.adaptData(dataIn);\n      const size = buffer.length;\n      if (size === 0) { return true; }\n\n      if (_size + size >= _maxSize) return false;\n\n      _queue.push(buffer);\n      _size += size;\n\n      return true;\n    };\n\n    this.advance = function advance(size) {\n      if (size < 1) {\n        return;\n      }\n      if (size >= _size) {\n        this.reset();\n        return;\n      }\n      let done = 0;\n      while (done < size) {\n        if (_queue[0].length - _offset <= size - done) { // drop first buffer entirely\n          const chunk = _queue[0].length - _offset;\n          _queue.shift();\n          done += chunk;\n          _size -= chunk; // invariants are good.\n          _offset = 0;\n        } else { // cut into first buffer, virtually, with _offset\n          _offset += (size - done);\n          _size -= (size - done);\n          break;\n        }\n      }\n    };\n\n    this.reset = function reset() {\n      _queue = [];\n      _size = 0;\n      _offset = 0;\n    };\n\n    this.remaining = function remaining() {\n      return _size;\n    };\n\n    this.isEmpty = function isEmpty() {\n      return _size === 0;\n    };\n  }\n\n  /**\n   * Adapt incoming data to the format expected by this.put().\n   * @param {*} data The data to adapt.\n   * @returns {Buffer} The adapted data.\n   */\n  static adaptData(data) {\n    if (data instanceof BufferImpl) return data;\n    return BufferImpl.from(data);\n  }\n}\n\nmodule.exports.BufferQueue = BufferQueue;\nmodule.exports.concatFrom = concatFrom;\n","const DebugLib = require('solclient-debug');\nconst SMFLib = require('solclient-smf');\nconst { BaseSMFClient } = require('./base-smf-client');\nconst { BufferQueue } = require('./buffer-queue');\nconst { Convert, Hex } = require('solclient-convert');\nconst { LogFormatter } = require('solclient-log');\n\nconst BufferImpl = require('buffer').Buffer;\n\nconst { stringToUint8Array } = Convert;\nconst { formatHexString } = Hex;\n\nconst SMF_LOST_FRAMING_THRESHOLD = 80000000;\n\nconst { LOG_ERROR } = new LogFormatter('[buffer-smf-client]');\n\nfunction logPeekBuffer(buffer) {\n  const bufPair = buffer.peekView(Math.min(buffer.remaining(), 64));\n  LOG_ERROR(`First 64 bytes (or fewer) of incoming buffer: \\n${\n    DebugLib.Debug.formatDumpBytes(bufPair[0].toString('latin1', bufPair[1]), true, 0)}`);\n}\n\n/**\n * Interact with underlying transport to send and receive SMF messages\n * @private\n */\nclass BufferSMFClient extends BaseSMFClient {\n\n  /**\n   * @constructor\n   * @param {Function} rxSmfCB The callback to notify on SMF binary data received\n   * @param {Function} rxMessageErrorCB The callback to notify on message errors\n   * @param {Session} session The session owning this client\n   */\n  constructor(rxSmfCB, rxMessageErrorCB, session) {\n    super(rxSmfCB, rxMessageErrorCB, session);\n    this._incomingBuffer = new BufferQueue(SMF_LOST_FRAMING_THRESHOLD);\n  }\n\n  reset() {\n    super.reset();\n    // Called from super constructor, so guard this\n    if (this._incomingBuffer) this._incomingBuffer.reset();\n  }\n\n  /**\n   * @param {String} data Incoming data as binary string\n   */\n  rxDataString(data) {\n    this._rxDataCB(BufferImpl.from(stringToUint8Array(data)));\n  }\n\n  /**\n   * @param {ArrayBuffer} data Incoming data\n   */\n  rxDataArrayBuffer(data) {\n    this._rxDataCB(BufferImpl.from(data));\n  }\n\n  /**\n   * @param {Buffer} data Incoming data\n   */\n  rxDataBuffer(data) {\n    this._rxDataCB(data);\n  }\n\n  /**\n   * Invoked by transport session. Handles multiple SMF messages in input, as well as defragmenting\n   * partial SMF messages. The state we keep is in this._incomingBuffer.\n   * @param {Buffer} data The binary data to decode\n   */\n  _rxDataCB(data) {\n    if (this._session) {\n      // each incoming data chunk resets KA counter\n      this._session.resetKeepAliveCounter();\n    }\n    const buffer = this._incomingBuffer;\n    const putSuccess = buffer.put(data);\n    let remaining = buffer.remaining();\n\n    if (!putSuccess) {\n      // 80 megabytes - lost SMF framing: may never complete\n      logPeekBuffer(buffer);\n      this._rxMessageErrorCB(`Buffer overflow (length: ${remaining})`);\n      this._incomingBuffer.reset();\n    }\n\n    while (remaining > 12) {\n      const version = buffer.readUInt8(0) & 0x7;\n      if (version !== 3) {\n        LOG_ERROR(`Invalid smf version in smf header, version=${version}`);\n        // Throw away the buffer and bail out\n        LOG_ERROR(\"BufferSMFClient._rxDataCB(): couldn't decode message due to invalid smf header\");\n        logPeekBuffer(buffer);\n        this._incomingBuffer.reset();\n        this._rxMessageErrorCB('Error parsing incoming SMF - invalid SMF header detected');\n        return;\n      }\n\n      const messageLen = buffer.readUInt32BE(8);\n      if (messageLen > buffer.remaining()) {\n        break; // no full message\n      }\n      const msgBuffer = buffer.peekView(messageLen);\n\n      //const binaryString = messageBuffer.toString('binary');\n      const incomingMsg = SMFLib.Codec.Decode.decodeCompoundMessage(msgBuffer[0], msgBuffer[1]);\n      if (incomingMsg && incomingMsg.smfHeader) {\n        buffer.advance(incomingMsg.smfHeader.messageLength);\n        this._rxSmfCB(incomingMsg); // hand over to core API callback\n      } else {\n        // couldn't decode! Lost SMF framing.\n        // throw away the buffer and bail out\n        const sessionId = this._session ? this._session._sessionId : null;\n        const sessionIdHex = sessionId ? formatHexString(sessionId) : 'N/A';\n        LOG_ERROR(`BufferSMFClient._rxDataCB(): couldn't decode message (sessionId=${sessionIdHex})`);\n        logPeekBuffer(buffer);\n        this._incomingBuffer.reset();\n        this._rxMessageErrorCB('Error parsing incoming SMF');\n        return;\n      }\n      remaining = buffer.remaining();\n    }\n\n    if (remaining) {\n      // We have a partial header, or a valid header and a partial message.\n      // partial message remaining: keep it in incoming buffer\n    } else {\n      // clear incoming buffer\n      this._incomingBuffer.reset();\n    }\n  }\n}\n\nmodule.exports.BufferSMFClient = BufferSMFClient;\n","/* eslint-disable global-require */\nconst { BaseSMFClient } = require('./base-smf-client');\n\n// Got rid of anonymous function that checked browser and set smf-client\n// Now ignoring string-smf-client and setting it straight to buffer-smf-client\n// const SMFClient = require('./buffer-smf-client').BufferSMFClient;\n\nconst SMFClient = (() => {\n  if (typeof navigator !== 'undefined') {\n      /* eslint-env browser */\n    if (navigator.appVersion.indexOf('MSIE 9.') !== -1 ||\n        navigator.appVersion.indexOf('Trident/') !== -1) {\n        // Avoid the buffer-based version for IE9, 10, and 11, but not Edge.\n      return require('./buffer-smf-client').BufferSMFClient;\n    }\n  }\n  /* eslint-env shared-browser-node */\n  return require('./buffer-smf-client').BufferSMFClient;\n})();\n\nSMFClient.SMF_CLIENTCTRL_LOGIN_FAKE_CORRELATIONTAG = BaseSMFClient.SMF_MAX_CORRELATION;\n\nmodule.exports.SMFClient = SMFClient;\n","const { ErrorSubcode, OperationError } = require('solclient-error');\nconst { TransportReturnCode } = require('./transport-return-codes');\n\n// Stubs don't use this\n/* eslint-disable class-methods-use-this */\n// Stubs declare all params\n/* eslint-disable no-unused-vars */\n\n/**\n *\n * Base class for various transports\n * @private\n */\nclass TransportBase {\n  /**\n   * @constructor\n   * @param {URL} url The URL to connect to\n   * @param {function} eventCB The callback to notify on events\n   * @param {SMFClient} client The SMF client to notify on data\n   * @param {Object} transportProps Additional properties to assign to the transport\n   * @param {?Object} [interceptor] The transport interceptor to install\n   */\n  constructor(url, eventCB, client, transportProps, interceptor = null) {\n    this._url = url;\n    this._ssl = TransportBase.useSsl(url);\n    this._client = client;\n    this._eventCB = eventCB;\n    this._props = transportProps;\n    this.setInterceptor(interceptor);\n  }\n\n  /**\n   * Establish underlying transport.\n   * Returns transport return code, to be overridden in subclass\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  connect() { return TransportReturnCode.OK; }\n\n  /**\n   * Destroy the underlying transport.\n   * Returns transport return code, to be overridden in subclass\n   * @param {Boolean} immediate Destroy gracefully if false.\n   * @param {?String} msg The message associated with this operation, if any.\n   * @param {?ErrorSubcode} subcode The subcode associated with this operation, if any.\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  destroy(immediate, msg, subcode) { return TransportReturnCode.OK; }\n\n  /**\n   * Force fail the underlying transport's socket to force a failure.\n   * Returns transport return code, to be overridden in subclass\n   * @param {?String} msg The message associated with this operation, if any.\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  forceFailure(msg) { return TransportReturnCode.OK; }\n\n  flush(callback) {\n    callback();\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * Send encoded SMF message\n   * Returns transport return code, to be overridden in subclass\n   * @param {String} message The encoded SMF message to send\n   * @param {?Boolean} [forceAllowEnqueue=false] If true, do not fail due to transport buffer full\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  send(message, forceAllowEnqueue = false) { return TransportReturnCode.OK; }\n\n  /**\n   * @returns {TransportProtocol} Return transport protocol in use\n   */\n  getTransportProtocol() {\n    return this._props.transportProtocol;\n  }\n\n  /**\n   * @returns {?String} Return transport session information such as sessionId\n   */\n  getInfoStr() { return null; }\n\n  /**\n   * @returns {TransportClientStats} transport statistics\n   */\n  getClientStats() { return null; }\n\n  /**\n   * Check whether or not the transport can be downgraded to the next protocol.\n   * It is possible to downgrade the transport, the existing transport is destroyed and\n   * the new transport connection initiated.\n   * @param {String} msg The message associated with this operation\n   * @param {ErrorSubcode} subcode The subcode associated with this operation\n   * @returns {Boolean} Return true if downgrade is allowed and has been initiated; false otherwise\n   */\n  beginDowngrade(msg, subcode) { return false; }\n\n  /**\n   * Sets the interceptor for this transport. This object has the chance\n   * to intervene before bytes are sent or received.\n   * @param {Object} [interceptor] If set, the interceptor is inserted into the\n   *\n   * @private\n   */\n  setInterceptor(interceptor) {\n    if (this._interceptor) {\n      // Reset original callbacks\n      if (this._interceptor.removed) this._interceptor.removed(this);\n    }\n    this._interceptor = interceptor;\n    if (interceptor) {\n      if (interceptor.installed) interceptor.installed(this);\n    }\n  }\n\n  toString() {\n    return `${this.getTransportProtocol()}${this._ssl ? ' (SSL)' : ''}`;\n  }\n\n  /**\n   * @param {String} url The URL to check\n   * @returns {Boolean} `true` if the URL requires SSL; `false` otherwise\n   * @static\n   */\n  static useSsl(url) {\n    const urlParts = (url || '').split('://');\n    if (urlParts.length === 0 || TransportBase.validSchemes.indexOf(urlParts[0]) < 0) {\n      throw new OperationError(`Invalid url \"${url}\": Only [${\n                               TransportBase.validSchemes.join(', ')}] URL schemes are supported`,\n                               ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n\n    const useSSL = (urlParts[0] === 'https' || urlParts[0] === 'wss' || urlParts[0] === 'tcps');\n    return useSSL;\n  }\n\n}\n\n/**\n * @type {Array.<String>}\n */\nTransportBase.validSchemes = ['http', 'https', 'ws', 'wss', 'tcp', 'tcps'];\n\nmodule.exports.TransportBase = TransportBase;\n\n","const { WebTransportCapabilities } = require('./web');\n\nconst TransportCapabilities = {\n  web: WebTransportCapabilities,\n};\n\nmodule.exports.TransportCapabilities = TransportCapabilities;\n","/**\n * @private\n * @constructor\n */\nclass TransportClientStats {\n  constructor() {\n    this.bytesWritten = 0;\n    this.msgWritten = 0;\n  }\n}\n\nmodule.exports.TransportClientStats = TransportClientStats;\n","const { SolaceError } = require('solclient-error');\n\n/**\n * @classdesc\n * An error thrown when an error occurs on the transport session.\n * <p>\n * Applications are not expected to instantiate this type.\n *\n * @memberof solace\n * @private\n */\nclass TransportError extends SolaceError {\n  /**\n   * Creates an instance of TransportError.\n   * @constructor\n   * @param {String} message The message associated with this error\n   * @param {ErrorSubcode} subcode The subcode for this error\n   * @private\n   */\n  constructor(message, subcode) {\n    super('TransportError', message);\n    this.subcode = subcode;\n  }\n\n  toString() {\n    return `${super.toString()}, subcode=${this.subcode}`;\n  }\n}\n\nmodule.exports.TransportError = TransportError;\n","const { LOG_TRACE } = require('solclient-log');\nconst { TcpRawTransport, CompressedTransport, TlsOnlyTransport, TcpTlsTransport } = BUILD_ENV.TARGET_NODE ? require('./tcp') : {};\nconst { WebTransport } = require('./web');\n\nconst TransportFactory = {\n  createTransport(host, eventCB, client, props, getId) {\n    const url = host;\n    Object.assign(props, {\n      connectTimeoutInMsecs: 100000,\n    });\n    // TCP transport is dictated by the URL (tcp:// or tcps://)\n    // It is unaffected by the transportProtocol config parameter.\n    if (TcpRawTransport && url.trim().startsWith('tcp')) {\n      if (!url.trim().startsWith('tcps')) {\n        if (props.compressionLevel === 0) {\n          LOG_TRACE('createTransport raw tcp');\n          return new TcpRawTransport(url, eventCB, client, props);\n        } // else { //compressed plaintext right off the bat.\n        LOG_TRACE('createTransport compressed plaintex.');\n        const compressingLayer = new CompressedTransport(eventCB, client, props);\n        const plaintextTransport =\n          new TcpRawTransport(url,\n                              compressingLayer.eventCB.bind(compressingLayer),\n                              compressingLayer, props);\n        compressingLayer.setClientStats(plaintextTransport.getClientStats());\n        plaintextTransport.setClientStats(null);\n        compressingLayer.setUnderlyingTransport(plaintextTransport);\n        return compressingLayer;\n      } //else { //tcps\n      if (props.sslConnectionDowngradeTo !== 'PLAIN_TEXT') { //no downgrade\n        LOG_TRACE('createTransport monolithic tls');\n        return new TcpTlsTransport(url, eventCB, client, props);\n      } //else { // Composite TLS transport anticipating downgrade.\n      LOG_TRACE('createTransport composite tls (anticipating downgrade)');\n      // passing URL for SNI.\n      const tlsLayer = new TlsOnlyTransport(url, eventCB, client, props);\n      const plaintextTransport =\n        new TcpRawTransport(url,\n                            tlsLayer.eventCB.bind(tlsLayer),\n                            tlsLayer, props);\n      tlsLayer.setClientStats(plaintextTransport.getClientStats());\n      plaintextTransport.setClientStats(null);\n      tlsLayer.setUnderlyingTransport(plaintextTransport);\n      return tlsLayer;\n    }\n    LOG_TRACE('createTransport WebTransport');\n    return new WebTransport(url, eventCB, client, props, getId);\n  },\n\n  startCompression(uncompressedTransport) {\n    const eventCB = uncompressedTransport._eventCB;\n    const client = uncompressedTransport._client;\n    const props = uncompressedTransport._props;\n\n    const compressingLayer = new CompressedTransport(eventCB, client, props);\n    uncompressedTransport.rehome(compressingLayer.eventCB.bind(compressingLayer),\n                                 compressingLayer);\n    compressingLayer.setClientStats(uncompressedTransport.getClientStats());\n    uncompressedTransport.setClientStats(null);\n    compressingLayer.setUnderlyingTransport(uncompressedTransport);\n    compressingLayer.connect();\n    return compressingLayer;\n  },\n\n  severTls(encryptedTransport, compress, callback) {\n    if (!compress) {\n      encryptedTransport.tlsShutdown(callback);\n    } else {\n      const precallback = plaintextTransport => callback(this.startCompression(plaintextTransport));\n      //encryptedTransport.tlsShutdown(precallback.bind(this));\n      encryptedTransport.tlsShutdown(precallback);\n    }\n  },\n};\n\nmodule.exports.TransportFactory = TransportFactory;\n","const WebTransportsLib = require('./web');\nconst { Lazy } = require('solclient-eskit');\nconst { LOG_TRACE } = require('solclient-log');\nconst { TransportBase } = require('./transport-base');\nconst { TransportProtocol } = require('./transport-protocols');\n\nconst { lazyValue } = Lazy;\n\n// Define transportProtocol to transport mapping\nconst lutTransportProtocols = lazyValue(() => {\n  const protocols = {\n    [TransportProtocol.HTTP_BASE64]:           WebTransportsLib.StateBase64,\n    [TransportProtocol.HTTP_BINARY]:           WebTransportsLib.StateBinary,\n    [TransportProtocol.HTTP_BINARY_STREAMING]: WebTransportsLib.StateStreamingAndBinary,\n    [TransportProtocol.WS_BINARY]:             WebTransportsLib.StateWebSocketBinary,\n  };\n  return protocols;\n});\n\n/**\n * @classdesc\n * Handles web transport selection and downgrade without creating the actual transport\n * session object\n * @memberof solace\n * @private\n */\nclass TransportProtocolHandler {\n  constructor(url, webTransportProtocolList) {\n    const useSSL = TransportBase.useSsl(url);\n    let transport = null;\n    let downgradeTransport = null;\n    webTransportProtocolList.slice().reverse().forEach((el) => {\n      const TransportConstructor = lutTransportProtocols.value[el];\n      transport = new TransportConstructor(useSSL, this.switchState.bind(this), downgradeTransport);\n      downgradeTransport = transport;\n    });\n    this._transport = transport;\n    this._transport.onEnter();\n  }\n\n  getTransportProtocol() {\n    return this._transport.getTransportProtocol();\n  }\n\n  completeDowngrade(err) {\n    return this._transport.completeDowngrade(err);\n  }\n\n  canCompleteDowngrade() {\n    return (this._transport.getNextState() !== null);\n  }\n\n  toString() {\n    return this._transport.toString();\n  }\n\n  switchState(newState, reason) {\n    LOG_TRACE(`Switching ${this._transport} => ${newState} (${reason})`);\n    this._transport = newState;\n    newState.onEnter();\n  }\n}\n\nmodule.exports.TransportProtocolHandler = TransportProtocolHandler;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Connection scheme types referenced by {@link solace.SessionProperties#transportProtocol},\n * {@link solace.SessionProperties#webTransportProtocolList} (browser only), and\n * {@link solace.SessionProperties#transportProtocolInUse}.\n *\n * @target browser\n * @enum {string}\n * @namespace\n * @memberof solace\n */\nconst TransportProtocol = {\n\n  /**\n   * A COMET model that uses base64 payload encoding. HTTP responses have a defined Content-Length.\n   *\n   * Guaranteed Messaging is incompatbile with HTTP_ transports.\n   *  * {@link solace.MessagePublisherProperties#enabled} must be `false` for a session that may\n   *    use this transport protocol.\n   *  * {@link solace.Session#createMessageConsumer} will throw on a session that may use this\n   *    transport protocol if {@link solace.MessagePublisherProperties#enabled} is `true`.\n   *\n   * @target browser\n   */\n  HTTP_BASE64: 'HTTP_BASE64',\n\n  /**\n   * A COMET model that uses binary payload encoding. HTTP responses have a defined Content-Length.\n   *\n   * Guaranteed Messaging is incompatbile with HTTP_ transports.\n   *  * {@link solace.MessagePublisherProperties#enabled} must be `false` for a session that may\n   *    use this transport protocol.\n   *  * {@link solace.Session#createMessageConsumer} will throw on a session that may use this\n   *    transport protocol if {@link solace.MessagePublisherProperties#enabled} is `true`.\n   *\n   * @target browser\n   */\n  HTTP_BINARY: 'HTTP_BINARY',\n\n  /**\n   * A COMET model that uses binary payload encoding. HTTP responses use Chunked Transfer-Encoding\n   * to stream data from the Solace Message Router to the client without needing to terminate the\n   * HTTP response.\n   *\n   * Guaranteed Messaging is incompatbile with HTTP_ transports.\n   *  * {@link solace.MessagePublisherProperties#enabled} must be `false` for a session that may\n   *    use this transport protocol.\n   *  * {@link solace.Session#createMessageConsumer} will throw on a session that may use this\n   *    transport protocol if {@link solace.MessagePublisherProperties#enabled} is `true`.\n   *\n   * @target browser\n   */\n  HTTP_BINARY_STREAMING: 'HTTP_BINARY_STREAMING',\n\n  /**\n   * A WebSocket communication channel uses binary payload encoding and provides full-duplex\n   * communication between the client and the Solace Message Router over a single TCP connection.\n   *\n   * This is the preferred protocol to use if all networking infrastructure betweed the application\n   * and the Solace Message router support WebSockets. If this is not the case, it may be necessary\n   * to use one of the HTTP protocols that use the COMET model of messaging.\n   *\n   * This transport protocol supports Guaranteed Messaging.\n   */\n  WS_BINARY: 'WS_BINARY',\n\n};\n\nmodule.exports.TransportProtocol = Enum.new(TransportProtocol);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst TransportReturnCode = {\n  OK:                          0,\n  FAIL:                        1,\n  NO_SPACE:                    2,\n  DATA_DECODE_ERROR:           3,\n  INVALID_STATE_FOR_OPERATION: 4,\n  CONNECTION_ERROR:            5,\n};\n\nmodule.exports.TransportReturnCode = Enum.new(TransportReturnCode);\n\n/* eslint-disable */\n// Manually demangle these names; bug 70031\nmodule.exports.TransportReturnCode._setCanonical({\n  'OK':                          TransportReturnCode.OK,\n  'FAIL':                        TransportReturnCode.FAIL,\n  'NO_SPACE':                    TransportReturnCode.NO_SPACE,\n  'DATA_DECODE_ERROR':           TransportReturnCode.DATA_DECODE_ERROR,\n  'INVALID_STATE_FOR_OPERATION': TransportReturnCode.INVALID_STATE_FOR_OPERATION,\n  'CONNECTION_ERROR':           TransportReturnCode.CONNECTION_ERROR\n});\n/* eslint-enable */\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Defines the possible TransportSessionEvent codes.\n * @private\n * @enum {number}\n */\nconst TransportSessionEventCode = {\n  // Raised when TransportSession is up and ready to send/receive data\n  UP_NOTICE:           1,\n  // Raised if the session is destroyed\n  DESTROYED_NOTICE:    2,\n  // Raised when the send queue had reached its maximum, but now has space again\n  CAN_ACCEPT_DATA:     4,\n  // Raised when there is a decode error on received data.  The app should destroy the session\n  DATA_DECODE_ERROR:   5,\n  // Raised when there is a decode error on received data.  The app should destroy the session\n  PARSE_FAILURE:       6,\n  // Raised when the connection times out. The app should attempt downgrade if available.\n  CONNECT_TIMEOUT:     7,\n  // There was an error sending a message on an etablished transport\n  SEND_ERROR:          8,\n  // The requested downgrade was rejected.\n  DOWNGRADE_FAILED:    10,\n  // The requested downgrade completed.\n  DOWNGRADE_SUCCEEDED: 11,\n};\n\nmodule.exports.TransportSessionEventCode = Enum.new(TransportSessionEventCode);\n","const { ErrorSubcode } = require('solclient-error');\nconst { Hex } = require('solclient-convert');\nconst { TransportSessionEventCode } = require('./transport-session-event-codes');\n\nconst { formatHexString } = Hex;\n\n/**\n * @classdesc\n * Defines a Transport Session Event\n *\n * @private\n */\nclass TransportSessionEvent {\n\n  /**\n   * @constructor\n   * @param {Object} tsEventCode The {@link TransportSessionEventCode} associated with this event\n   * @param {String} infoStr An informational string\n   * @param {?Number} responseCode The response code from the router, if any\n   * @param {ErrorSubcode} subcode The {@link ErrorSubcode} associated with this event\n   * @param {Number} sessionId The session ID associated with this event\n   *\n   */\n  constructor(tsEventCode, infoStr, responseCode, subcode, sessionId) {\n    this._transportEventCode = tsEventCode;\n    this._infoStr = infoStr;\n    this._responseCode = responseCode;\n    this._errorSubcode = subcode;\n    this._sid = sessionId;\n  }\n\n  // TransportSessionEvent functions\n\n  getTransportEventCode() {\n    return this._transportEventCode;\n  }\n\n  get transportEventCode() {\n    return this._transportEventCode;\n  }\n\n  getInfoStr() {\n    return this.infoStr;\n  }\n\n  get infoStr() {\n    return this._infoStr;\n  }\n\n  getResponseCode() {\n    return this.responseCode;\n  }\n\n  get responseCode() {\n    return this._responseCode;\n  }\n\n  getSubcode() {\n    return this.errorSubcode;\n  }\n\n  get errorSubcode() {\n    return this._errorSubcode;\n  }\n\n  getSessionId() {\n    return this.sessionId;\n  }\n\n  get sessionId() {\n    return this._sid;\n  }\n\n  [util_inspect_custom]() {\n    return {\n      'transportEventCode': TransportSessionEventCode.describe(this.transportEventCode),\n      'infoStr':            this.infoStr,\n      'responseCode':       this.responseCode,\n      'errorSubcode':       ErrorSubcode.describe(this.errorSubcode),\n      'sid':                this.sid && formatHexString(this.sid) || 'N/A',\n    };\n  }\n\n  toString() {\n    return util_inspect(this);\n  }\n\n}\n\nmodule.exports.TransportSessionEvent = TransportSessionEvent;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Transport session states, used by WebSocketTransportSession and HTTPTransportSession\n * @enum {number}\n * @private\n */\nconst TransportSessionState = {\n  DOWN:                0,\n  WAITING_FOR_CREATE:  1,\n  SESSION_UP:          2,\n  WAITING_FOR_DESTROY: 4,\n  CONNECTION_FAILED:   5,\n};\n\nmodule.exports.TransportSessionState = Enum.new(TransportSessionState);\n","const {\n  LOG_INFO,\n  LOG_WARN,\n} = require('solclient-log');\nconst { Process } = require('solclient-util');\n\n/**\n * @classdesc\n * Base class for transports\n * @memberof solace\n * @private\n */\nclass TSHState {\n  /**\n   * @constructor\n   * @param {Boolean} useSsl True if SSL should be used\n   * @param {TransportProtocol} tpProtocol The protocol to use for this state\n   * @param {Function} exitCallback The callback to notify on exit\n   * @param {?TSHState} nextState The TSH state to use on downgrade\n   */\n  constructor(useSsl, tpProtocol, exitCallback, nextState) {\n    this._ssl = !!useSsl;\n    this._transportProtocol = tpProtocol;\n    this._exitCallback = exitCallback;\n    this._nextState = nextState;\n    this._unsupportedRuntimeMessage =\n      `${this._transportProtocol} not supported by this runtime: ${Process.userAgent}`;\n  }\n\n  getNextState() {\n    return this._nextState;\n  }\n\n  setNextState(nextState) {\n    this._nextState = nextState;\n  }\n\n  getTransportProtocol() {\n    return this._transportProtocol;\n  }\n\n  getUseSsl() {\n    return this._ssl;\n  }\n\n  // Override me\n  validateLegal() { // eslint-disable-line class-methods-use-this\n    return true;\n  }\n\n  onEnter() {\n    if (!this.validateLegal()) {\n      if (this._nextState && this._exitCallback) {\n        this._exitCallback(this._nextState, this._unsupportedRuntimeMessage);\n      } else {\n        LOG_WARN(`${this._unsupportedRuntimeMessage}, no next state.`);\n      }\n    }\n  }\n\n  completeDowngrade(err) {\n    if (this._nextState && this._exitCallback) {\n      LOG_INFO(`Connect failed (${err}), try next state.`);\n      this._exitCallback(this._nextState, 'Connect failed');\n      return true;\n    }\n    LOG_WARN(`Connect failed (${err}), no next state.`);\n    return false;\n  }\n\n  toString() {\n    return this._transportProtocol + (this._ssl ? ' (SSL)' : '');\n  }\n\n}\n\nmodule.exports.TSHState = TSHState;\n","const HTTPLib = require('./http');\nconst { StateBase64 } = require('./state-base64');\nconst { StateBinary } = require('./state-binary');\nconst { StateStreamingAndBinary } = require('./state-streaming-and-binary');\nconst { StateWebSocketBinary } = require('./state-websocket-binary');\nconst { WebTransport } = require('./web-transport');\nconst { WebTransportCapabilities } = require('./web-transport-capabilities');\n\nconst { HTTPConnection, HTTPTransportSession } = HTTPLib;\n\nmodule.exports.HTTPConnection = HTTPConnection;\nmodule.exports.HTTPTransportSession = HTTPTransportSession;\nmodule.exports.StateBase64 = StateBase64;\nmodule.exports.StateBinary = StateBinary;\nmodule.exports.StateStreamingAndBinary = StateStreamingAndBinary;\nmodule.exports.StateWebSocketBinary = StateWebSocketBinary;\nmodule.exports.WebTransport = WebTransport;\nmodule.exports.WebTransportCapabilities = WebTransportCapabilities;\n","const { HTTPConnection } = require('./http-connection');\nconst { HTTPTransportSession } = require('./http-transport-session');\n\nif (BUILD_ENV.TARGET_BROWSER) {\n  module.exports.HTTPConnection = HTTPConnection;\n  module.exports.HTTPTransportSession = HTTPTransportSession;\n}\n","const DebugLib = require('solclient-debug');\nconst {\n  Convert,\n  Base64,\n} = require('solclient-convert');\nconst {\n  LOG_DEBUG,\n  LOG_INFO,\n  LOG_WARN,\n  LOG_ERROR,\n} = require('solclient-log');\nconst {\n  sendXhrBinary,\n  sendXhrText,\n} = require('./send-xhr');\nconst { StringBuffer, TimingBucket } = require('solclient-util');\nconst { TransportReturnCode } = require('../../transport-return-codes');\nconst { XHRFactory } = require('./xhr-factory');\n\nconst { arrayBufferToString } = Convert;\n\nconst SOL_CONNECTION_DEBUG = false;\n\n/**\n * A URI starting with a \"/\" is a \"path-absolute\" URI, and those aren't\n * allowed to have a query component (starting with \"?\").\n *\n * If an origin isn't defined in the url, tack on the one from the page.\n *\n * @param {URL} url The URL to connect to\n * @returns {URL} Adjusted URL if incoming URL was relative\n * @private\n */\nfunction prependOrigin(url) {\n  if (!url.match(/^(http|ws)(s?):/i) && window.location && window.location.origin) {\n    return window.location.origin + ((url.charAt(0) !== '/') ? '/' : '') + url;\n  }\n  return url;\n}\n\nfunction getTs() {\n  return new Date().getTime();\n}\n\nclass Stats {\n  constructor() {\n    this.WaitedToken = new TimingBucket('WaitedToken', 100);\n    this.HadToken = new TimingBucket('HadToken', 100);\n    this.ReturnedToken = new TimingBucket('ReturnedToken', 100);\n  }\n  toString() {\n    let s = '';\n    [this.WaitedToken, this.HadToken, this.ReturnedToken].forEach((b) => {\n      if (b && b.bucketCount() > 0) {\n        s += `${b.name} >> ${b}\\n`;\n      }\n    });\n    return s;\n  }\n}\n\n/**\n * @classdesc\n * This class contains all state for a single HTTP connection (XHR).\n *\n * @private\n */\nclass HTTPConnection {\n  constructor(url, base64Enc, streamProgressEvents, rxDataCb,\n              connectionErrorCb, contentType, connectionClose) {\n    this.Options = {\n      url: prependOrigin(url),\n      contentType,\n      base64Enc,\n      streamProgressEvents,\n      connectionClose,\n    };\n\n    this._streamProgressBytes = 0;\n    this._xhr = null;\n    this._rxDataCb = rxDataCb;\n    this._connErrorCb = connectionErrorCb;\n    this._reqActive = false;\n    this._REQCOUNTER = 0;\n    this._REQBASE = Math.floor(Math.random() * 1000);\n\n    this._xhr = XHRFactory.create();\n    // older browser ie9\n    this._handleAbortedReq = !HTTPConnection.browserSupportsXhrBinary();\n\n    this.stats = new Stats();\n  }\n\n  recStat(s) {\n    if (!SOL_CONNECTION_DEBUG) {\n      return;\n    }\n    const stats = this.stats;\n    if (s === 'GotToken') {\n      stats.LastGotToken = getTs();\n      if (stats.LastSendMsg) {\n        const waitedTok = stats.LastGotToken - stats.LastSendMsg;\n        stats.WaitedToken.log(waitedTok);\n        if (waitedTok > 100) {\n          LOG_WARN(`Abnormally long waitToken, last request: ${this._REQBASE}_${this._REQCOUNTER}`);\n        }\n      }\n    }\n    if (s === 'SendMsg') {\n      stats.LastSendMsg = getTs();\n      const hadToken = stats.LastSendMsg - stats.LastGotToken;\n      stats.HadToken.log(hadToken);\n    }\n    if (s === 'GotData') {\n      stats.LastGotData = getTs();\n    }\n    if (s === 'ReturnToken') {\n      stats.LastReturnToken = getTs();\n      if (stats.LastGotData) {\n        const returnedToken = stats.LastReturnToken - stats.LastGotData;\n        stats.ReturnedToken.log(returnedToken);\n      }\n    }\n  }\n\n  /*\n   * Send data over the connection - this requires a send token\n   */\n  send(data, attempt = 0, maxRetry = 1) {\n    if (attempt > 0) {\n      this._xhr.abort();\n      this._xhr = XHRFactory.create();\n    }\n    this._xhr.open('POST', this.Options.url, true);\n\n    this._streamProgressBytes = 0;\n    // We pass the write data to the CB so we can retry when it mysteriously fails.\n    this._xhr.onreadystatechange = () => this.xhrStateChange(data, attempt, maxRetry);\n\n    this._reqActive = true;\n\n    if (SOL_CONNECTION_DEBUG) {\n      this._REQCOUNTER++;\n      this._xhr.setRequestHeader('sol-request-track', `${this._REQBASE}_${this._REQCOUNTER}`);\n    }\n    if (this.Options.base64Enc) {\n      sendXhrText(this._xhr, data, this.Options.contentType, this.Options.connectionClose);\n    } else {\n      sendXhrBinary(this._xhr, data, this.Options.contentType, this.Options.connectionClose);\n    }\n    this.recStat('SendMsg');\n  }\n\n\n  // XmlHTTPRequest Callback\n  xhrStateChange(sentdata, attempt, maxRetry) {\n    const readyState = this._xhr.readyState;\n    const RS_LOADING = this._xhr.LOADING;\n    const RS_DONE = this._xhr.DONE;\n\n    if (!((this.Options.streamProgressEvents && readyState === RS_LOADING)\n          || readyState === RS_DONE)) {\n      // we proceed with notifications if we're LOADING and we requested streaming events,\n      // or we're DONE.\n      return;\n    }\n\n    if (!this._reqActive) {\n          // request aborted, DO NOT propagate event\n      return;\n    }\n\n    let status = null;\n    if (this._handleAbortedReq) {\n      // To avoid the following IE9 error when request is aborted by server or client and\n      // application tries to access any property in the XHR other than readyState whose value is\n      // 4 (XMLHTTPRequest.DONE):\n      // - The data necessary to complete this operation is not yet available\n      // See https://groups.google.com/forum/#!topic/websync/ysBEvtvMyb0 for details\n      // _requestActive is used to handle client initiated abort, but it does not handle\n      // the case when the request is aborted on the server side or proxy server\n      try {\n        status = this._xhr.status;\n      } catch (e) {\n        LOG_INFO(`Error trying to access status in XHR due to request aborted: ${e.message}`);\n        return;\n      }\n    } else {\n      status = this._xhr.status;\n    }\n\n    if (status === 200 || status === 304) {\n      // Success status code\n      let data = null;\n      if (this._xhr.responseType && this._xhr.responseType === 'arraybuffer') {\n        data = arrayBufferToString(this._xhr.response);\n      } else {\n        data = this._xhr.responseText;\n      }\n      data = data.substring(this._streamProgressBytes, data.length);\n      this._streamProgressBytes += data.length;\n\n      if (data.length === 0 && readyState === RS_LOADING) {\n        // we are streaming LOADING events but have no data\n        return;\n      }\n\n      if (this.Options.base64Enc) {\n        try {\n          data = Base64.decode(data);\n        } catch (e) {\n          // Failed the decode - call the error callback\n          LOG_ERROR(`Data decode error on: ${data}`);\n          LOG_ERROR(`Data decode error is: ${e.message}`);\n          this._rxDataCb(TransportReturnCode.DATA_DECODE_ERROR, data);\n          return;\n        }\n      } else {\n        // take lower-8 bits\n        const decodedData = [];\n        const dataLength = data.length;\n        for (let i = 0; i < dataLength; i++) {\n          decodedData.push(String.fromCharCode(data.charCodeAt(i) & 0xFF));\n        }\n        data = decodedData.join('');\n      }\n      if (readyState === RS_DONE) {\n        // MUST do this BEFORE the callback invocation, because the callback can trigger a new send.\n        this._reqActive = false;\n      }\n      this._rxDataCb(TransportReturnCode.OK, data);\n      if (readyState === RS_DONE && data.length > 0) {\n        this._rxDataCb(TransportReturnCode.OK, ''); // indicate end of stream\n      }\n\n      return;\n    }\n\n    // Failure status code.\n    const statusText = this._xhr.statusText;\n    let responseText = '';\n    if (this._xhr.responseType && this._xhr.responseType === 'arraybuffer') {\n      responseText = arrayBufferToString(this._xhr.response);\n    } else {\n      responseText = this._xhr.responseText || '';\n    }\n\n    const responseTextLen = responseText.length;\n    const requestUrl = this.Options.url;\n    const sentdataLen = sentdata ? sentdata.length : 0;\n    const { formatDumpBytes } = DebugLib.Debug;\n    const responseTextDump = formatDumpBytes(\n      responseText.substr(0, Math.min(responseTextLen, 64)), true, 0);\n    const sentTextDump = formatDumpBytes(\n      (sentdata || '').substr(0, Math.min(sentdataLen, 256)), true, 0);\n    if (BUILD_ENV.MODE_DEBUG) {\n      const stmt = new StringBuffer(\n        `Http request failed.  url=${requestUrl}, status=${status}, statusText=${statusText}, `,\n        `responseText length=${responseTextLen}, `,\n        'responseText (first 64 bytes or fewer)=\\n',\n        `${responseTextDump}, `,\n        `XHR errorCode=${this._xhr._error ? this._xhr._error.code : ''}, `,\n        `attempt=${attempt}, reqActive=${this._reqActive}, readyState=${readyState}, `,\n        `sent data length=${sentdataLen}, `,\n        'sent data (first 256 bytes or fewer)=\\n',\n        `${sentTextDump}`).toString();\n      LOG_DEBUG(stmt);\n    }\n\n    const nextMaxRetry = maxRetry;\n    if (this._reqActive\n          && status !== 400\n          && responseText.length === 0\n          && (attempt === 0 || attempt < nextMaxRetry)) {\n      LOG_INFO(`XHR failed while request active, will retry send, retry=${attempt + 1}`);\n        // RETRY (could be a transient browser connection problem)\n      this.send(sentdata, attempt + 1, nextMaxRetry);\n    } else {\n      this._reqActive = false;\n      this._connErrorCb(\n          status,\n          new StringBuffer(\n            `HTTP request failed(status=${status} statusText=${statusText}, `,\n            `responseText length=${responseTextLen}, responseText[0..64]=\\n`,\n            responseTextDump,\n            `XHR errorCode=${this._xhr._error ? this._xhr._error.code : ''})`).toString());\n    }\n  }\n\n  isUsingBase64() {\n    return this.Options.base64Enc;\n  }\n\n  // This function will abort the current xhr request if it is active\n  abort() {\n      // mark request as inactive, so we won't process statechange events\n    this._reqActive = false;\n    if (this._xhr && this._xhr.abort) {\n      this._xhr.abort();\n    }\n  }\n\n  /**\n   * Check if we can try binary XHR on this browser.\n   * @returns {Boolean} `true` if XHR binary should work; `false` otherwise\n   * @static\n   */\n  static browserSupportsXhrBinary() {\n    return sendXhrBinary !== sendXhrText;\n  }\n\n  /**\n   * Check if browser supports streaming responses (progressive reading of XHR).\n   * @returns {Boolean} `true` if feature was detected, `false` otherwise\n   * @static\n   */\n  static browserSupportsStreamingResponse() {\n    const xhr = XHRFactory.create();\n    // A conforming XHR2 implementation must include progress events.\n    // Can we assume that the event property will be null instead of undefined?\n    // A conforming XHR2 implementation must also include withCredentials.\n    const check = xhr && xhr.onprogress === null; // xhr.withCredentials === false;\n    LOG_INFO(`http browserStreamingCheck - if XMLHTTPRequest supported and XMLHTTPRequest support onprogress: ${check}`);\n    return check;\n  }\n}\n\nmodule.exports.HTTPConnection = HTTPConnection;\n","const DebugLib = require('solclient-debug');\nconst SMFLib = require('solclient-smf');\nconst { Check } = require('solclient-validate');\nconst { Convert, Hex } = require('solclient-convert');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\nconst { HTTPConnection } = require('./http-connection');\nconst { LogFormatter } = require('solclient-log');\nconst { SMFClient } = require('../../smf-client');\nconst { TransportError } = require('../../transport-error');\nconst { TransportProtocol } = require('../../transport-protocols');\nconst { TransportReturnCode } = require('../../transport-return-codes');\nconst { TransportSessionEvent } = require('../../transport-session-event');\nconst { TransportSessionEventCode } = require('../../transport-session-event-codes');\nconst { TransportSessionState } = require('../../transport-session-states');\nconst { WebTransportSessionBase } = require('../web-transport-session-base');\n\nconst { int32ToStr, strToByteArray, strToHexArray } = Convert;\nconst { formatHexString } = Hex;\n\nconst {\n  LOG_TRACE,\n  LOG_DEBUG,\n  LOG_ERROR,\n  LOG_INFO,\n} = new LogFormatter('[http-transport-session]');\n\n/**\n * @private\n * @namespace Values for tracking current state of incoming streaming data\n */\nconst PacketReadState = {\n  READING_HEADER: 0,\n  STREAMING:      1,\n};\n\n// eslint-disable-next-line global-require\nconst BufferImpl = require('buffer').Buffer;\n\n/**\n * @private\n */\nconst MSIE_TRANSPORT_PADDING = 257;\n\nfunction adaptURL(url) {\n  const v = url.match(/(ws|http)(s?:\\/\\/.+)/);\n  return `http${v[2]}`;\n}\n\n/** ===========================================================================\n * HTTPTransportSession :\n *\n * This contains all data and code required to maintain HTTP transport sessions\n * with Solace routers\n * ============================================================================\n * @extends WebTransportSessionBase\n * @private\n */\nclass HTTPTransportSession extends WebTransportSessionBase {\n  constructor(baseUrl, eventCB, client, props) {\n    // Our internal data format (for now) is binary string, so we wrap the callback\n    // in a function that does the required conversion to ArrayBuffer.\n    super(baseUrl,\n          eventCB,\n          client,\n          props);\n\n    // const self = this;\n    // logger.formatter = function formatter(...args) {\n    //   return [self.sessionIdHex, ...args];\n    // };\n\n    // Set to true if we have the data token that we need for sending data to the router\n    this._haveToken = true;\n\n    // Maximum payload chunk size in web transport\n    this._confMaxWebPayload = props.maxWebPayload;\n    this._maxPayloadBytes = 0;\n\n    // Timer that will keep track of the destroy time\n    this._destroyTimer = null;\n    this._destroyTimeout = props.connectTimeoutInMsecs;\n\n    // The URL used for create messages\n    this._createUrl = adaptURL(baseUrl);\n\n    // The URL used for all other messages - it will have the router tag appended\n    // after the session has been created\n    this._routerUrl = this._createUrl;\n\n    // SMF client (instantiated after session is created)\n    this._rxChannelClient = null;\n    // Send data connection (instantiated after session is created)\n    this._httpSendConn = null;\n\n    // Receive data connection (instantiated after session is created)\n    this._httpReceiveConn = null;\n\n    // Data Token SMF header - this is preformatted for performance\n    // It will be set after session is created\n    this._smfDataTokenTSHeader = null;\n\n    // Router Tag - a string that will be added to HTTP request URLs\n    this._routerTag = '';\n\n    // Session ID - 8-byte identifier that will associate this client\n    // with client resources on the router\n    this._sid = null;\n\n    if (props.transportProtocol === null || props.transportProtocol === undefined) {\n      throw new OperationError('transportProtocol is not set', ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n\n    this._transportProtocol = props.transportProtocol;\n    this._useBinaryTransport = false;\n    this._useStreamingTransport = false;\n    this._streamingTransportPadding = 0;\n\n    this._useBinaryTransport = (props.transportProtocol !== TransportProtocol.HTTP_BASE64);\n    this._useStreamingTransport = (props.transportProtocol ===\n                                   TransportProtocol.HTTP_BINARY_STREAMING);\n\n    // extra state for STREAMING transport\n    this._incomingBuffer = '';\n    this._packetReadState = PacketReadState.READING_HEADER;\n\n    const agent = navigator.userAgent || '';\n    if (agent.match(/trident/i) || agent.match(/msie/i)) {\n      this._streamingTransportPadding = MSIE_TRANSPORT_PADDING;\n    }\n\n    if (props.transportContentType === null || props.transportContentType === undefined) {\n      throw new OperationError('transportContentType is not set', ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n    this._contentType = props.transportContentType;\n  }\n\n  /**\n   * @override\n   */\n  connectTimerExpiry() {\n    LOG_INFO('HTTP transport connect timeout');\n    this.destroyCleanup('HTTP transport connect timeout', ErrorSubcode.TIMEOUT);\n  }\n\n  get sessionIdHex() {\n    return (this._sid) ? formatHexString(this._sid) : '';\n  }\n\n  updateMaxWebPayload() {\n    // 22 Bytes of TransportSMF wrapping overhead\n    const trLessEncapSMF = this._confMaxWebPayload - 22;\n    // Base64 has a 4:3 expansion\n    this._maxPayloadBytes = this._useBinaryTransport\n      ? trLessEncapSMF\n      : Math.floor(trLessEncapSMF * 0.75);\n  }\n\n  /**\n   * Connect transport session to router\n   * @returns {TransportReturnCode} The result of the operation\n   */\n  connect() {\n    // Check that we we are in an acceptable state for connection\n    if (this._state !== TransportSessionState.DOWN) {\n      return TransportReturnCode.INVALID_STATE_FOR_OPERATION;\n    }\n\n    return this.connectInternal();\n  }\n\n  connectInternal() {\n    // Create the XHR to talk to the router\n    this._connError = null;\n    try {\n      this._createConn = new HTTPConnection(this._createUrl,\n                                            !(this._useBinaryTransport),\n                                            false,\n                                            (rc, data) => this.handleCreateResponse(rc, data),\n                                            (rc, data) => this.handleCreateConnFailure(rc, data),\n                                            this._contentType);\n    } catch (e) {\n      LOG_INFO(`Failed to create connection to router: ${e.message}`);\n      this._connError = e;\n      return TransportReturnCode.CONNECTION_ERROR;\n    }\n    if (Check.nothing(this._createConn)) {\n      LOG_INFO('Failed to create connection to router');\n      return TransportReturnCode.CONNECTION_ERROR;\n    }\n\n    // Get an SMF transport session create message\n    const createMsg = SMFLib.Codec.Transport.genTsCreateHeader();\n\n    if (this._state === TransportSessionState.WAITING_FOR_CREATE) {\n      // already connecting (this is likely a retry with Base64 encoding)\n      LOG_DEBUG('Connect attempt while in WAITING_FOR_CREATE (retry)');\n    } else {\n      this.createConnectTimeout();\n      // Set the current state\n      this._state = TransportSessionState.WAITING_FOR_CREATE;\n    }\n\n    // Send the create message to the router.  When the response is received, the\n    // handleCreateResponse method will be called\n    try {\n      this._createConn.send(createMsg);\n    } catch (connError) {\n      LOG_INFO(`Error connecting: ${connError.message}`);\n      LOG_TRACE('Error details:', connError.stack || connError);\n      this._state = TransportSessionState.CONNECTION_FAILED;\n      this.cancelConnectTimeout();\n      if (connError instanceof TransportError) {\n        this._connError = connError;\n      } else {\n        this._connError = new TransportError(\n          `Could not create HTTP transport session: ${connError.message}`,\n          connError.subcode || ErrorSubcode.CONNECTION_ERROR);\n      }\n      return TransportReturnCode.CONNECTION_ERROR;\n    }\n\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * Destroy transport session to router\n   * @param {String} msg The message associated with the operation\n   * @param {ErrorSubcode} subcode The subcode associated with the operation\n   * @returns {TransportReturnCode} The result of the operation\n   */\n  destroy(msg, subcode) {\n    LOG_TRACE(`Destroy transport session when in state ${this._state}`);\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY ||\n        this._state === TransportSessionState.DOWN) {\n      // Nothing to do\n      return TransportReturnCode.OK;\n    }\n\n    if (this._state === TransportSessionState.CONNECTION_FAILED ||\n        this._state === TransportSessionState.WAITING_FOR_CREATE) {\n      // The connections are in an unreliable state - we will just\n      // kill our local object and let the router clean itself up with its inactivity timer\n      LOG_INFO('The connection is in unreliable state, close transport');\n      this.destroyCleanup(msg, subcode, true);\n      return TransportReturnCode.OK;\n    }\n\n    LOG_INFO('Destroy transport session immediately');\n    // Set the current state\n    this._state = TransportSessionState.WAITING_FOR_DESTROY;\n\n    // Abort any current requests for this session\n    if (this._httpSendConn !== null) {\n      LOG_INFO('Destroy transport session: abort sendConn');\n      this._httpSendConn.abort();\n    }\n    if (this._httpReceiveConn !== null) {\n      LOG_INFO('Destroy transport session: abort receiveConn');\n      this._httpReceiveConn.abort();\n    }\n\n    // Start a timer\n    this._destroyTimer = setTimeout(() => {\n      this.destroyTimerExpiry();\n    }, this._destroyTimeout);\n\n    // Send the destroy message over new HTTPConnection to the router so that the async abort\n    // can properly finish in the old _httpSendConn.\n    // When the response is received, the handleDestroyResponse method will be called.\n    this._httpSendConn = new HTTPConnection(\n        this._routerUrl,\n        !(this._useBinaryTransport), false,\n        (rc, data) => this.handleRxDataToken(rc, data), // RxData callback\n        (rc, data) => this.handleSendFailure(rc, data), // connection close or error callback\n        this._contentType,\n        true);\n\n    // Get an SMF transport session destroy message\n    const destroyMsg = SMFLib.Codec.Transport.genTsDestroyHeader(this._sid);\n\n    LOG_TRACE(`destroy message: ${strToHexArray(destroyMsg)}`);\n    this._httpSendConn.send(destroyMsg);\n\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * Send data over the connection - this requires a send token\n   * @param {String} dataIn The data to send\n   * @param {Boolean} [forceAllowEnqueue=false] If `true`, do not fail due to out of space\n   * @returns {TransportReturnCode} The result of the operation\n   */\n  send(dataIn, forceAllowEnqueue = false) {\n    let data = dataIn;\n    // LOG_TRACE(`HTTPTransportSession:send ${data.length}, tx_queued:${this._queuedDataSize}`);\n    if (this._state !== TransportSessionState.SESSION_UP) {\n      return TransportReturnCode.INVALID_STATE_FOR_OPERATION;\n    }\n\n    // Check to see if we already have queued data\n    if ((this._queuedData.length > 0) || (!this._haveToken)) {\n      return this.enqueueData(data, forceAllowEnqueue);\n    }\n\n    // Check if we need to chop up the payload\n    let remainder = null;\n    if (data.length > this._maxPayloadBytes) {\n      remainder = data.substr(this._maxPayloadBytes);\n      data = data.substr(0, this._maxPayloadBytes);\n\n      // If no space for remainder, return FAIL without sending anything.\n      if (!this.allowEnqueue(remainder.length)) {\n        return this.enqueueFailNoSpace();\n      }\n\n    // LOG_DEBUG(\"$$ send dataChunk:\" + data.length + \", remainderChunk:\" + remainder.length);\n    }\n\n    // We have the token, so send the data\n    this._haveToken = false;\n\n    const transportPacketLen = (this._smfDataTSHeaderParts[0].length + 4 +\n                                this._smfDataTSHeaderParts[1].length + data.length);\n\n    this._httpSendConn.send(this._smfDataTSHeaderParts[0] +\n                            int32ToStr(transportPacketLen) +\n                            this._smfDataTSHeaderParts[1] +\n                            data);\n    this._clientstats.bytesWritten += data.length;\n\n    if (remainder) {\n      // The message was partially sent. The message written count will be incremented\n      // when its last bytes go out.\n      return this.enqueueData(remainder, null);\n    }\n\n    // The whole message was sent.\n    this._clientstats.msgWritten++;\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * Push data onto the pending send queue as long as it doesn't violate\n   * the max stored message size\n   * @param {String} data The data to enqueue\n   * @param {Boolean} [forceAllowEnqueue=false] If `true`, don't fail due to no space.\n   * @returns {TransportReturnCode} The result of the operation.\n   */\n  enqueueData(data, forceAllowEnqueue = false) {\n    const dataLen = data.length;\n\n    // LOG_DEBUG(\"enqueueing data: \" + data.length + \", queue depth: \" + this._queuedDataSize);\n    if (forceAllowEnqueue || this.allowEnqueue(dataLen)) {\n      this._queuedDataSize += dataLen;\n      this._queuedData.push(data);\n    } else {\n      return this.enqueueFailNoSpace();\n    }\n\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * Set the data in the preformatted headers.  The headers are set up this way\n   * for performance reasons\n   * @param {String} sid The session ID to incorporate into the headers\n   */\n  initPreformattedHeaders(sid) {\n    // _smfDataTSHeaderParts is a two entry array - one part before the total length\n    // and the other after.  The total length is not known until actual data is sent\n    this._smfDataTSHeaderParts = SMFLib.Codec.Transport.genTsDataMsgHeaderParts(sid);\n\n    // _smfDataTokenTSHeader is a single header that all data-token messages require\n    if (this._useStreamingTransport) {\n      this._smfDataTokenTSHeader = SMFLib.Codec.Transport.genTsDataStreamTokenMsg(\n        sid,\n        this._streamingTransportPadding);\n    } else {\n      this._smfDataTokenTSHeader = SMFLib.Codec.Transport.genTsDataTokenMsg(sid);\n    }\n  }\n\n  /**\n   * @override\n   */\n  flush(callback) {\n    if (this._queuedDataSize) {\n      this._flushCallback = callback;\n    } else {\n      callback();\n    }\n  }\n\n  /**\n   * Check if there is any data waiting to be sent to the router.\n   * If there is, send it.\n   */\n  sendQueuedData() {\n    if (this._queuedDataSize === 0) {\n      return;\n    }\n    this._haveToken = false;\n    const data = this.getQueuedDataToSend();\n    const transportPacketLen = this._smfDataTSHeaderParts[0].length + 4 +\n                               this._smfDataTSHeaderParts[1].length + data.length;\n\n    this._httpSendConn.send(this._smfDataTSHeaderParts[0] +\n                            int32ToStr(transportPacketLen) +\n                            this._smfDataTSHeaderParts[1] +\n                            data);\n    this._clientstats.bytesWritten += data.length;\n\n\n    if (this._canSendNeeded) {\n      this._canSendNeeded = false;\n      this._eventCB(\n        new TransportSessionEvent(TransportSessionEventCode.CAN_ACCEPT_DATA,\n                                  '',\n                                  null,\n                                  0,\n                                  this._sid));\n    }\n\n    if (this._flushCallback) {\n      const cb = this._flushCallback;\n      this._flushCallback = null;\n      cb();\n    }\n  }\n\n  // Internal Callbacks\n\n  // Called when a create response message has been received\n  handleCreateResponse(tsRc, response) {\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY ||\n        this._state === TransportSessionState.DOWN) {\n      LOG_DEBUG('Received create response on a destroyed transport session, ignore');\n      return;\n    }\n\n    // Was: stop the connect timer. We don't do that in this transport now.\n    // We wait for the login response.\n\n    // We know whether we're using Base64 or not, so update our max payload size.\n    this.updateMaxWebPayload();\n\n    if (tsRc !== TransportReturnCode.OK) {\n      LOG_INFO(`Received create response with return code ${TransportReturnCode.describe(tsRc)}`);\n      if (tsRc === TransportReturnCode.DATA_DECODE_ERROR) {\n        this.destroyCleanup('Received data decode error on create session response', ErrorSubcode.DATA_DECODE_ERROR);\n      } else {\n        this.destroyCleanup('Failed to handle create session response', ErrorSubcode.CONNECTION_ERROR);\n      }\n      return;\n    }\n\n    if (response.length === 0) {\n      return; // null read indicating end of stream\n    }\n\n    // Parse the Transport Session SMF\n    const parsedResponse = SMFLib.Codec.Decode.decodeCompoundMessage(BufferImpl.from(response, 'latin1'), 0);\n    if (!parsedResponse) {\n      LOG_ERROR('Could not parse create response as SMF. Destroying transport');\n      this.destroyCleanup('Failed to parse create response message', ErrorSubcode.CONNECTION_ERROR);\n      return;\n    }\n\n    const smfresponse = parsedResponse.getResponse();\n    if (smfresponse.responseCode !== 200) {\n      this.destroyCleanup(`Transport create request failed (${smfresponse.responseCode}, ${smfresponse.responseString})`,\n                          ErrorSubcode.CONNECTION_ERROR);\n      return;\n    }\n\n    this.cancelConnectTimeout();\n    this._createConn.abort();\n    this._createConn = null;\n    this._state = TransportSessionState.SESSION_UP;\n    this._sid = parsedResponse.sessionId;\n    this._routerTag = parsedResponse.routerTag;\n\n    // Trim any parameters off the create url before using it for the routerUrl\n    this._routerUrl = this._createUrl.replace(/\\?.*/, '');\n    if (this._routerTag !== '') {\n      this._routerUrl = this._routerUrl + this._routerTag;\n    }\n\n    this.initPreformattedHeaders(this._sid);\n    const useBase64 = !this._useBinaryTransport;\n    const useStreaming = this._useStreamingTransport;\n\n    // Create the two connections to the router\n    // By now, getXhrObj() should not throw any exception inside HTTPConnection constructor\n    this._httpSendConn = new HTTPConnection(this._routerUrl, useBase64, false,\n        (rc, data) => this.handleRxDataToken(rc, data), // RxData callback\n        (rc, data) => this.handleSendFailure(rc, data), // connection close or error callback\n        this._contentType);\n    if (this._useStreamingTransport) {\n      // When the transport is HTTP_BINARY_STREAMING the SMF encapsulation\n      // is complete, the SMF header indicates a message length of 0xFFFFFFFF\n      // and after decoding just the header alone the data is passed through\n      // to the session layer, so we must use a simplified SMF parser and a\n      // stateful data callback in that case.\n      this._httpReceiveConn = new HTTPConnection(this._routerUrl, useBase64, useStreaming,\n            (rc, data) => this.handleRxStreaming(rc, data), // RxData Callback\n            (rc, data) => this.handleSendFailure(rc, data), // connection close or error callback\n            this._contentType,\n            true);\n    } else {\n      // Create a SMF client for the Receive Data channel, when http is used.\n      // SMF messages are encapsualated in a solace http-transport which is itself\n      // encapsulated in SMF.  So create an SMF client that will callback with\n      // an smfMessage construct to the HTTPTransportSession.\n      this._rxChannelClient = new SMFClient(\n            rxData => this.handleSmfMessage(rxData),\n            rxError => this.handleSmfParseError(rxError),\n            null);    // we don't have a 'session' for this client. It's just a parser.\n      this._httpReceiveConn = new HTTPConnection(this._routerUrl, useBase64, useStreaming,\n            (rc, data) => this.handleRxData(rc, data), // RxData Callback\n            (rc, data) => this.handleSendFailure(rc, data), // connection close or error callback\n            this._contentType);\n    }\n\n    // Give the router the data token so that it will be able to send data\n    this._httpReceiveConn.send(this._smfDataTokenTSHeader);\n\n    // Send the event to the application letting it know that the session is up\n    this._eventCB(\n      new TransportSessionEvent(TransportSessionEventCode.UP_NOTICE,\n                                smfresponse.responseString,\n                                smfresponse.responseCode,\n                                0,\n                                parsedResponse.sessionId));\n  }\n\n  // Called when receiving a destroy response\n  handleDestroyResponse(response) {\n    LOG_DEBUG('Handle destroy response');\n    // Stop the timer\n    this.cancelDestroyTimeout();\n    const innerResponse = response.getResponse();\n    const responseString = innerResponse ? innerResponse.responseString : '';\n    this.destroyCleanup(\n      `${responseString} handled Destroy Response addressed to session ${\n      formatHexString(response.sessionId)}, on session ${formatHexString(this._sid)}`,\n      0);\n  }\n\n  handleSmfMessage(tsmsg) {\n    const smfHeader = tsmsg.smfHeader;\n    if (smfHeader.smf_protocol !== SMFLib.SMFProtocol.TSESSION) {\n      this.handleSmfParseError(`Unexpected Message Prototcol (${smfHeader.smf_protocol}) on ReceiveData connection`);\n      return;\n    }\n\n      // we have found a transport SMF, can we now read the Transport SMF chunk\n    const data = tsmsg.payload;\n    const TotalPayloadToRead = tsmsg.payloadLength;\n\n    switch (tsmsg.messageType) {\n      case SMFLib.SMFTransportSessionMessageType.DESTROY_RESP:\n        this.handleDestroyResponse(tsmsg);\n        return;\n\n      case SMFLib.SMFTransportSessionMessageType.DATA:\n        if (tsmsg.sessionId !== this._sid) {\n          // The router may have given us an error code; if so, include in the error message.\n          const smfErrResponse = tsmsg.getResponse();\n          const responseErrStr = smfErrResponse\n              ? (` (${smfErrResponse.responseCode} ${smfErrResponse.responseString})`)\n              : '';\n          const responseCode = smfErrResponse ? smfErrResponse.responseCode : null;\n\n          LOG_DEBUG(`HandleRxData Bad Session ID received in message. Expected: ${strToByteArray(this._sid)\n                        }, Received: ${strToByteArray(tsmsg.sessionId)}${responseErrStr}`);\n\n          this._state = TransportSessionState.CONNECTION_FAILED;\n          this._eventCB(new TransportSessionEvent(TransportSessionEventCode.PARSE_FAILURE,\n                        `Session ID mismatch in data message, expected: ${formatHexString(this._sid)}, got: ${\n                        formatHexString(tsmsg.sessionId)}, ${responseErrStr}`,\n                        responseCode,\n                        ErrorSubcode.PROTOCOL_ERROR, this._sid));\n          return;\n        }\n\n        // pass-through encapsulated data to parent\n        if (TotalPayloadToRead > 0) {\n          this._client.rxDataBuffer(data);\n        }\n        break;\n      default:\n        // Unexpected message type\n        this.handleSmfParseError(`Unexpected message type (${\n                    tsmsg.messageType}) on ReceiveData connection`);\n    }\n  }\n\n  handleSmfParseError() {\n    this._eventCB(new TransportSessionEvent(TransportSessionEventCode.DATA_DECODE_ERROR,\n        'Received data decode error', null,\n        ErrorSubcode.DATA_DECODE_ERROR, this._sid));\n  }\n\n  // Called when data is received on the connection\n  handleRxData(tsRc, data) {\n    if (this._httpReceiveConn === null || this._rxChannelClient === null) {\n      if (this._state === TransportSessionState.DOWN) {\n        LOG_INFO('Transport session is down, ignore data from receive connection');\n      } else {\n        LOG_ERROR(`Transport session is not in working state, state: ${this._state}`);\n      }\n      return;\n    }\n\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY) {\n      LOG_DEBUG('Transport session is being destroyed, ignore data from receive connection, ' +\n               `dump first 64 bytes (or fewer) of data:\\n${\n                 DebugLib.Debug.formatDumpBytes(data.substring(0, 64), true, 0)}`);\n      return;\n    }\n\n    this._httpReceiveConn.recStat('GotData');\n    if (tsRc !== TransportReturnCode.OK) {\n      this.handleRxError(tsRc, data);\n      return;\n    }\n\n    if (data.length === 0) {\n      LOG_DEBUG('Send write token to router');\n      this._httpReceiveConn.send(this._smfDataTokenTSHeader);\n    } else {\n      this._rxChannelClient.rxDataString(data);\n    } // end have data to process\n  }\n\n  // Called when data is received on a HTTP_BINARY_STREAMING connection\n  handleRxStreaming(tsRc, data) {\n    if (this._httpReceiveConn === null) {\n      if (this._state === TransportSessionState.DOWN) {\n        LOG_DEBUG('Transport session is down, ignore data from receive connection');\n      } else {\n        LOG_ERROR(`Transport session is not in working state, state: ${this._state}`);\n      }\n      return;\n    }\n\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY) {\n      LOG_DEBUG('Transport session is being destroyed, ignore data from streaming receive ' +\n               `connection, dump first 64 bytes (or fewer) of data:\\n${\n               DebugLib.Debug.formatDumpBytes(data.substring(0, 64), true, 0)}`);\n      return;\n    }\n\n    this._httpReceiveConn.recStat('GotData');\n    if (tsRc !== TransportReturnCode.OK) {\n      this.handleRxError(tsRc, data);\n      return;\n    }\n\n    if (data.length === 0) {\n      LOG_TRACE('Send write token to router');\n      this._packetReadState = PacketReadState.READING_HEADER;\n      this._httpReceiveConn.send(this._smfDataTokenTSHeader);\n      return;\n    }\n\n    // pass-through encapsulated data to parent\n    if (this._packetReadState === PacketReadState.STREAMING) {\n      this._client.rxDataString(data);\n      return;\n    }\n\n    this._incomingBuffer += data;\n    const smfheader = SMFLib.Codec.ParseSMF.parseSMFAt(BufferImpl.from(this._incomingBuffer, 'latin1'),\n                                                       0, true);\n    if (smfheader) {\n        // we have a valid smf header, see if there is a transport header and session-id\n      const tsmsg = SMFLib.Codec.Transport.parseTsSmfHdrAt(BufferImpl.from(this._incomingBuffer, 'latin1'),\n                                                           smfheader.headerLength,\n                                                           smfheader);\n      if (!tsmsg) {\n        // Not tsMsg but there is an smf header, just return until more data arrives\n        return;\n      }\n\n      // We have the transport message header too, if it is a DATA message enter\n      // STREAMING state\n      switch (tsmsg.messageType) {\n        case SMFLib.SMFTransportSessionMessageType.DESTROY_RESP:\n          this.handleDestroyResponse(tsmsg);\n          return;\n\n        case SMFLib.SMFTransportSessionMessageType.DATA:\n          if (tsmsg.sessionId !== this._sid) {\n            // The router may have given us an error code, if so, include in the error message.\n            const smfErrResponse = tsmsg.getResponse();\n            const responseErrStr = smfErrResponse\n                ? (` (${smfErrResponse.responseCode} ${smfErrResponse.responseString})`)\n                : '';\n            const responseCode = smfErrResponse ? smfErrResponse.responseCode : null;\n\n            LOG_DEBUG(`HandleRxData Bad Session ID received in message.  Expected: ${strToByteArray(this._sid)\n                        }, Received: ${strToByteArray(tsmsg.sessionId)}${responseErrStr}`);\n            LOG_DEBUG(`First 64 bytes (or fewer) of message: ${strToByteArray(data.substr(0, 64))}`);\n\n            this._state = TransportSessionState.CONNECTION_FAILED;\n            this._eventCB(\n              new TransportSessionEvent(TransportSessionEventCode.PARSE_FAILURE,\n                                        `Session ID mismatch in data message, expected: ${formatHexString(this._sid)}, got: ${\n                                        formatHexString(tsmsg.sessionId)}, ${responseErrStr}`,\n                                        responseCode,\n                                        ErrorSubcode.PROTOCOL_ERROR, this._sid));\n            return;\n          }\n          // all is good. We can now STREAM the rest of the data until a empty message is received.\n          this._packetReadState = PacketReadState.STREAMING;\n          // pass-through any remaining data\n          if (this._incomingBuffer.length > (smfheader.headerLength + tsmsg.tsHeaderLength)) {\n            this._client.rxDataString(\n              this._incomingBuffer.substr(smfheader.headerLength + tsmsg.tsHeaderLength));\n          }\n          this._incomingBuffer = '';\n          return;\n\n        default:\n          // Unexpected message type\n          throw new TransportError(`Unexpected message type (${tsmsg.messageType}) on ReceiveData connection`, 0);\n      }\n    } else if (SMFLib.Codec.ParseSMF.isSMFHeaderAvailable(BufferImpl.from(this._incomingBuffer, 'latin1'), 0) &&\n               !SMFLib.Codec.ParseSMF.isSMFHeaderValid(BufferImpl.from(this._incomingBuffer, 'latin1'), 0)) {\n      // Probably lost framing\n      LOG_ERROR(`Couldn't decode message due to invalid smf header, dump first 64 bytes (or fewer) of buffer content:\\n${\n                 DebugLib.Debug.formatDumpBytes(this._incomingBuffer.substring(0, 64), true, 0)}`);\n\n      const errorInfo = 'Error parsing incoming message - invalid SMF header detected';\n      this._state = TransportSessionState.CONNECTION_FAILED;\n      this._eventCB(\n        new TransportSessionEvent(TransportSessionEventCode.PARSE_FAILURE,\n                                  errorInfo, null,\n                                  ErrorSubcode.PROTOCOL_ERROR,\n                                  null));\n    }\n  }\n\n  // Called when data is received on the httpDataSend\n  handleRxDataToken(tsRc, data) {\n    if (tsRc !== TransportReturnCode.OK) {\n      this.handleRxError(tsRc, data);\n      return;\n    }\n\n    if (data.length === 0) {\n      return; // handle End of Stream\n    }\n\n    const parsedResponse = SMFLib.Codec.Decode.decodeCompoundMessage(BufferImpl.from(data, 'latin1'), 0);\n    if (!parsedResponse) {\n      if (this._state !== TransportSessionState.WAITING_FOR_DESTROY) {\n        this._state = TransportSessionState.CONNECTION_FAILED;\n        this._eventCB(new TransportSessionEvent(TransportSessionEventCode.PARSE_FAILURE,\n                'Failed to parse received data message', null,\n                ErrorSubcode.PROTOCOL_ERROR, this._sid));\n      } else {\n        this.destroyCleanup('Failed to parse received data message', ErrorSubcode.PROTOCOL_ERROR);\n      }\n      return;\n    }\n\n    if (parsedResponse.messageType === SMFLib.SMFTransportSessionMessageType.DESTROY_RESP) {\n      this.handleDestroyResponse(parsedResponse);\n      return;\n    }\n\n    if (parsedResponse.sessionId !== this._sid) {\n        // The router may have given us an error code, if so, include in the error message.\n      const smfErrResponse = parsedResponse.getResponse();\n      const responseErrStr = smfErrResponse ?\n            (` (${smfErrResponse.responseCode} ${smfErrResponse.responseString})`) :\n            '';\n      const responseCode = smfErrResponse ? smfErrResponse.responseCode : null;\n\n      LOG_DEBUG(`HandleRxDataToken Bad SID received in message.  Expected: ${strToByteArray(this._sid)\n            }, Received: ${strToByteArray(parsedResponse.sessionId)}${responseErrStr}`);\n      LOG_DEBUG(`First 64 bytes (or fewer) of message: ${strToByteArray(data.substr(0, 64))}`);\n\n      if (this._state !== TransportSessionState.WAITING_FOR_DESTROY) {\n        this._state = TransportSessionState.CONNECTION_FAILED;\n        this._eventCB(new TransportSessionEvent(TransportSessionEventCode.PARSE_FAILURE,\n                `Session ID mismatch in response message, expected: ${formatHexString(this._sid)}, got: ${formatHexString(parsedResponse.sessionId)}, ${responseErrStr}`,\n                responseCode, ErrorSubcode.PROTOCOL_ERROR, this._sid));\n      } else {\n        this.destroyCleanup('Session ID mismatch in response message', ErrorSubcode.PROTOCOL_ERROR);\n      }\n      return;\n    }\n\n    if (parsedResponse.messageType ===\n        SMFLib.SMFTransportSessionMessageType.DATA_TOKEN ||\n        parsedResponse.messageType ===\n        SMFLib.SMFTransportSessionMessageType.DATA_STREAM_TOKEN) {\n      this._haveToken = true;\n      this._httpSendConn.recStat('GotToken');\n      // this._eventCB(\n      //    new TransportSessionEvent(TransportSessionEventCode.NOTIFY_GOT_TOKEN, \"\", null, null));\n      this.sendQueuedData();\n    } else {\n        // Unexpected message type\n      throw (new TransportError(`Unexpected message type (${\n            parsedResponse.messageType}) on SendData connection`, 0));\n    }\n  }\n\n  handleRxError(tsRc) {\n    LOG_INFO(`handleRxError, transport return code ${TransportReturnCode.name(tsRc)}`);\n    this._state = TransportSessionState.CONNECTION_FAILED;\n    if (tsRc === TransportReturnCode.DATA_DECODE_ERROR) {\n      this._eventCB(new TransportSessionEvent(TransportSessionEventCode.DATA_DECODE_ERROR,\n            'Received data decode error', null,\n            ErrorSubcode.DATA_DECODE_ERROR, this._sid));\n    } else {\n      this._eventCB(new TransportSessionEvent(TransportSessionEventCode.SEND_ERROR,\n            'Connection error',\n            ErrorSubcode.CONNECTION_ERROR, this._sid));\n    }\n  }\n\n  // Called when there is an error on a connection or the connection is aborted\n  handleSendFailure(status, msg) {\n    // failed to send message, if it is a destroy message, just complete the destroy process\\\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY) {\n      LOG_INFO(`Connection destroy failure (${msg}) while in state ${this._state}`);\n      this.destroyCleanup(`Connection destroy failure: ${msg}`, ErrorSubcode.CONNECTION_ERROR);\n    } else {\n      // Failed to send message, return error to upper layer which may  tear the session down\n      LOG_INFO(`Connection failure (${msg}) while in state ${this._state}`);\n      this._eventCB(new TransportSessionEvent(TransportSessionEventCode.SEND_ERROR,\n            `Connection error: ${msg}`, status,\n            ErrorSubcode.CONNECTION_ERROR, this._sid));\n    }\n  }\n\n  // Called when there is an error on a connection for a session create request\n  handleCreateConnFailure(status, msg) {\n    if (this._state === TransportSessionState.DOWN) {\n      return;\n    }\n\n    LOG_INFO(`Connection create failure (${msg}) while in state ${this._state}`);\n    this.destroyCleanup(`Connection create failure: ${msg}`, ErrorSubcode.CONNECTION_ERROR);\n  }\n\n  // Called when the destroy timer expires\n  destroyTimerExpiry() {\n    this.destroyCleanup('Destroy request timeout', ErrorSubcode.CONNECTION_ERROR);\n  }\n\n  cancelDestroyTimeout() {\n    if (this._destroyTimer) {\n      clearTimeout(this._destroyTimer);\n      this._destroyTimer = null;\n    }\n  }\n\n  /**\n   * Called after receiving ts destroy response from router\n   * @param {String} infoStr The informational string to pass along\n   * @param {ErrorSubcode} subcode The subcode associated with the event\n   * @param {Boolean} asyncSendEvent If true, always send the event asynchronously.\n   */\n  destroyCleanup(infoStr, subcode, asyncSendEvent) {\n    LOG_DEBUG(`Destroy cleanup: ${infoStr}`);\n\n    // Abort any current requests for this session\n    if (this._createConn) {\n      LOG_DEBUG('Destroy cleanup: Abort createConn');\n      this._createConn.abort();\n    }\n    if (this._httpSendConn) {\n      LOG_DEBUG('Destroy cleanup: Abort sendConn');\n      this._httpSendConn.abort();\n    }\n    if (this._httpReceiveConn) {\n      LOG_DEBUG('Destroy cleanup: Abort receiveConn');\n      this._httpReceiveConn.abort();\n    }\n\n    // Clear most internal state\n    this._createUrl = null;\n    this._routerUrl = null;\n    this._createConn = null;\n    this._httpSendConn = null;\n    this._httpReceiveConn = null;\n    this._smfDataTokenTSHeader = null;\n    this._rxChannelClient = null;\n    this._routerTag = '';\n    this._queuedData = [];\n    this._queuedDataSize = 0;\n    this._canSendNeeded = false;\n\n    // Clear timers.\n    this.cancelDestroyTimeout();\n    this.cancelConnectTimeout();\n\n    // Set final state\n    this._state = TransportSessionState.DOWN;\n\n    // Send the event to the application letting it know that the session is down\n    const finalize = () => {\n      // Check whether the callback was cleared before the timeout completes.\n      if (this._eventCB) {\n        this._eventCB(\n            new TransportSessionEvent(TransportSessionEventCode.DESTROYED_NOTICE,\n                                      infoStr || 'Session is destroyed',\n                                      null,\n                                      subcode || 0,\n                                      this._sid));\n      }\n\n      // release reference to smf client object\n      this._client = null;\n      // release reference to session object\n      this._eventCB = null;\n    };\n\n    if (asyncSendEvent) {\n      setTimeout(finalize, 0); // opportunity to use setImmediate instead\n    } else {\n      finalize();\n    }\n  }\n\n  getInfoStr() {\n    const str = `HTTPTransportSession; sid=${\n        formatHexString(this._sid)\n        }; routerTag=${this._routerTag}`;\n    return str;\n  }\n\n}\n\nmodule.exports.HTTPTransportSession = HTTPTransportSession;\n","const { Base64, Convert } = require('solclient-convert');\nconst { XHRFactory } = require('./xhr-factory');\n\nconst { encode: base64Encode } = Base64;\nconst { stringToUint8Array } = Convert;\n\nfunction sendXhrBinaryMSIE10(xhr, data, contentType) {\n  xhr.responseType = 'arraybuffer';\n  xhr.overrideMimeType(`${contentType}; charset=x-user-defined`);\n  xhr.setRequestHeader('Content-Type', `${contentType}; charset=x-user-defined`);\n  xhr.send(stringToUint8Array(data));\n}\n\nfunction sendXhrBinaryXHR2(xhr, data, contentType) {\n  xhr.overrideMimeType(`${contentType}; charset=x-user-defined`);\n  xhr.setRequestHeader('Content-Type', `${contentType}; charset=x-user-defined`);\n  xhr.send(stringToUint8Array(data).buffer);\n}\n\nfunction sendXhrText(xhr, data, contentType, connClose) {\n  xhr.setRequestHeader('Content-Type', `${contentType}; charset=x-user-defined`);\n  xhr.send(data === null || data === undefined ? data : base64Encode(data), connClose);\n}\n\nconst sendXhrBinary = (() => {\n  // Uint8Array is probably shimmed by core-js. We don't use window.Blob, but\n  // it is a Working Draft, not  part of ES6, and not shimmed by core-js.\n  // Therefore it makes a workable canary for IE10 detection.\n  if (typeof window !== 'undefined' && window.Uint8Array && window.Blob /* !ie9 */) {\n    const xhr = XHRFactory.create(true);\n    if (xhr.responseType /* ie10 */) {\n      return sendXhrBinaryMSIE10;\n    }\n    return sendXhrBinaryXHR2;\n  }\n  return sendXhrText;\n})();\n\nmodule.exports.sendXhrBinary = sendXhrBinary;\nmodule.exports.sendXhrText = sendXhrText;\n","const { ErrorSubcode } = require('solclient-error');\nconst { TransportError } = require('../../transport-error');\n\n/* eslint-env browser */\nconst XHRFactory = {\n  /**\n   * Creates an XHR object.\n   *\n   * @param {Boolean} [allowFail=false] If `true`, return null on failure; otherwise throw.\n   * @throws {TransportError}\n   * @returns {XMLHttpRequest} The new XHR object\n   */\n  create(allowFail = false) {\n    const xhr = typeof XMLHttpRequest !== 'undefined' ? new XMLHttpRequest() : null;\n    if (!allowFail && !xhr) {\n      throw new TransportError('Failed to create an XMLHTTPRequest',\n                                 ErrorSubcode.CREATE_XHR_FAILED);\n    }\n    return xhr;\n  },\n};\n\nmodule.exports.XHRFactory = XHRFactory;\n","const { TransportProtocol } = require('../transport-protocols');\nconst { TSHState } = require('../tsh-state');\n\n/**\n * @classdesc\n * HTTP Base64 transport\n * @memberof solace\n * @private\n */\nclass StateBase64 extends TSHState {\n  /**\n   * @constructor\n   * @extends TSHState\n   * @param {Boolean} useSsl True if SSL should be used\n   * @param {Function} exitCb Callback to notify on exit\n   * @param {?TSHState} nextState Downgrade target\n   */\n  constructor(useSsl, exitCb, nextState) {\n    super(useSsl, TransportProtocol.HTTP_BASE64, exitCb, nextState);\n  }\n}\n\nmodule.exports.StateBase64 = StateBase64;\n\n","const { TransportProtocol } = require('../transport-protocols');\nconst { TSHState } = require('../tsh-state');\nconst { WebTransportCapabilities } = require('./web-transport-capabilities');\n\n/**\n * @classdesc\n * HTTP Binary transport\n * @memberof solace\n * @private\n */\nclass StateBinary extends TSHState {\n  /**\n   * @constructor\n   * @extends TSHState\n   * @param {Boolean} useSsl True if SSL should be used\n   * @param {Function} exitCb Callback to notify on exit\n   * @param {?TSHState} nextState Downgrade target\n   */\n  constructor(useSsl, exitCb, nextState) {\n    super(useSsl, TransportProtocol.HTTP_BINARY, exitCb, nextState);\n  }\n\n  validateLegal() { // eslint-disable-line class-methods-use-this\n    return WebTransportCapabilities.xhrBinary();\n  }\n}\n\nmodule.exports.StateBinary = StateBinary;\n\n","const { TransportProtocol } = require('../transport-protocols');\nconst { TSHState } = require('../tsh-state');\nconst { WebTransportCapabilities } = require('./web-transport-capabilities');\n\n/**\n * @classdesc\n * HTTP Binary Streaming transport\n * @memberof solace\n * @private\n */\nclass StateStreamingAndBinary extends TSHState {\n  /**\n   * @constructor\n   * @extends TSHState\n   * @param {Boolean} useSsl True if SSL should be used\n   * @param {Function} exitCb Callback to notify on exit\n   * @param {?TSHState} nextState Downgrade target\n   */\n  constructor(useSsl, exitCb, nextState) {\n    super(useSsl, TransportProtocol.HTTP_BINARY_STREAMING, exitCb, nextState);\n  }\n\n  validateLegal() { // eslint-disable-line class-methods-use-this\n    return WebTransportCapabilities.streaming() && WebTransportCapabilities.xhrBinary();\n  }\n}\n\nmodule.exports.StateStreamingAndBinary = StateStreamingAndBinary;\n","const { TransportProtocol } = require('../transport-protocols');\nconst { TSHState } = require('../tsh-state');\nconst { WebTransportCapabilities } = require('./web-transport-capabilities');\n\n/**\n * @classdesc\n * WebSocket transport\n * @memberof solace\n * @private\n */\nclass StateWebSocketBinary extends TSHState {\n  /**\n   * @constructor\n   * @extends TSHState\n   * @param {Boolean} useSsl True if SSL should be used\n   * @param {Function} exitCb Callback to notify on exit\n   * @param {?TSHState} nextState Downgrade target\n   */\n  constructor(useSsl, exitCb, nextState) {\n    super(useSsl, TransportProtocol.WS_BINARY, exitCb, nextState);\n  }\n\n  validateLegal() { // eslint-disable-line class-methods-use-this\n    return WebTransportCapabilities.webSocket();\n  }\n}\n\nmodule.exports.StateWebSocketBinary = StateWebSocketBinary;\n","const HTTPLib = require('./http');\nconst { WebSocketTransportSession } = require('./websocket-transport-session');\n\nconst { HTTPConnection } = HTTPLib;\n\nconst WebTransportCapabilities = {\n  webSocket() { return WebSocketTransportSession.browserSupportsBinaryWebSockets(); },\n  xhrBinary() { return HTTPConnection.browserSupportsXhrBinary(); },\n  streaming() { return HTTPConnection.browserSupportsStreamingResponse(); },\n};\n\nmodule.exports.WebTransportCapabilities = WebTransportCapabilities;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Enumeration of Web Transport events.\n * @enum {string}\n * @namespace\n * @memberof solace\n * @private\n */\nconst WebTransportEvent = {\n  /**\n   * The Session Layer has issued a connect request\n   */\n  CONNECT:          'Connect',\n  /**\n   * The Session Layer has issued a destroy request\n   */\n  DESTROY:          'Destroy',\n  /**\n   * A downgrade request has been received from an FSM.\n   */\n  DOWNGRADE:        'Downgrade',\n  /**\n   * The underlying transport has been destroyed. Seen in\n   * response to calling destroy() and in some cases when\n   * the transport is destroyed by the peer.\n   */\n  DESTROYED_NOTICE: 'DestroyedNotice',\n  /**\n   * The underlying transport timed out in its connection attempt.\n   * The managing component should abort this connection attempt\n   * and begin a downgrade if available.\n   */\n  CONNECT_TIMEOUT:  'ConnectTimeout',\n  /**\n   * The underlying transport is active and ready for traffic.\n   */\n  UP_NOTICE:        'UpNotice',\n  /**\n   * The transport encountered an error sending data.\n   */\n  SEND_ERROR:       'SendError',\n};\n\nmodule.exports.WebTransportEvent = Enum.new(WebTransportEvent);\n","\nconst { ErrorSubcode } = require('solclient-error');\nconst { FsmEvent, State, StateMachine } = require('solclient-fsm');\nconst { LogFormatter } = require('solclient-log');\nconst { TransportReturnCode } = require('../transport-return-codes');\nconst { TransportSessionEvent } = require('../transport-session-event');\nconst { TransportSessionEventCode } = require('../transport-session-event-codes');\nconst { WebTransportEvent } = require('./web-transport-events');\nconst { WebTransportState } = require('./web-transport-states');\n\nconst {\n  LOG_TRACE,\n  LOG_INFO,\n} = new LogFormatter();\n\nclass WebTransportFSM extends StateMachine {\n  constructor(transportIn, getId) {\n    super({ name: 'WebTransportFSM' });\n    const transport = transportIn;\n    const fsm = this;\n    const logger = new LogFormatter();\n    logger.formatter = function logFormatter(...args) {\n      return [`[web-transport-fsm=${getId()}]`, ...args];\n    };\n    this.log = logger.wrap(this.log, this);\n    this.transport = transport;\n\n    this.initial(function onInitial() {\n      return this.transitionTo(\n        this.WebTransportDown,\n        (context) => {\n          LOG_TRACE(`Starting ${context.getStateMachine().getName()}`);\n        });\n    });\n\n    this.unhandledEventReaction(function onUnhandledEvent(wEvent) {\n      LOG_TRACE(`Ignoring event ${wEvent.getName()} in state ${this.getCurrentState().getName()}`);\n      return this;\n    });\n\n    this.WebTransportDown = new State({\n      name:          WebTransportState.DOWN,\n      parentContext: this,\n    })\n      .reaction(WebTransportEvent.CONNECT, function onConnect(/* wEevent */) {\n        return this.transitionTo(fsm.WebTransportConnecting);\n      })\n      .reaction(WebTransportEvent.DESTROY, function onDestroy(wEvent) {\n        transport.destroyInternal(wEvent._destroyMsg, wEvent._subcode);\n        return this.transitionTo(fsm.WebTransportDestroying);\n      });\n\n    this.WebTransportConnecting = new State({\n      name:          WebTransportState.CONNECTING,\n      parentContext: this,\n    })\n      .entry(() => {\n        try {\n          const rc = transport.connectInternal();\n          if (rc !== TransportReturnCode.OK) {\n            const connError = transport.getConnError();\n            const wEvent = new FsmEvent({ name: WebTransportEvent.DESTROY });\n            wEvent._destroyMsg = connError ? connError.message : 'Error occurred while establishing transport';\n            wEvent._subcode = connError ? connError.subcode : null;\n            wEvent._eventReason = connError;\n            return this.processEvent(wEvent);\n          }\n        } catch (e) {\n          LOG_INFO(`transport.connectInternal threw: ${e.message}`);\n          const wEvent = new FsmEvent({ name: WebTransportEvent.DESTROY });\n          wEvent._destroyMsg = e.message;\n          wEvent._subcode = e.subcode ? e.subcode : ErrorSubcode.CONNECTION_ERROR;\n          wEvent._eventReason = e;\n          return this.processEvent(wEvent);\n        }\n        return undefined;\n      })\n      // Transport destroy is async, so in downgrade cases we need an event to start the downgrade\n      // (and associated transport destroy) and one to complete it (DESTROYED_NOTICE).\n      // These two events trigger downgrade: SEND_ERROR on connection (protocol issue) and\n      // CONNECT_TIMEOUT (possible black hole proxy).\n      .reaction(WebTransportEvent.SEND_ERROR, (wEvent) => {\n        transport.notifyEvent(wEvent._transportEvent); // Give the session a chance to intervene\n        return fsm.attemptDowngrade(wEvent._transportEvent);\n      })\n      .reaction(WebTransportEvent.CONNECT_TIMEOUT, e => fsm.attemptDowngrade(e._transportEvent))\n      .reaction(WebTransportEvent.DESTROYED_NOTICE, (wEvent) => {\n        transport.notifyEvent(wEvent._transportEvent);\n        return this.transitionTo(fsm.WebTransportDown);\n      })\n      .reaction(WebTransportEvent.UP_NOTICE, function onUpNotice(wEvent) {\n        transport.notifyEvent(wEvent._transportEvent);\n        return this.transitionTo(fsm.WebTransportUp);\n      })\n      .reaction(WebTransportEvent.DESTROY, function onDestroy(wEvent) {\n        transport.destroyInternal(wEvent._destroyMsg, wEvent._subcode);\n        return this.transitionTo(fsm.WebTransportDestroying);\n      });\n    this.WebTransportDowngrading = new State({\n      name:          WebTransportState.DOWNGRADING,\n      parentContext: this,\n    })\n      .reaction(WebTransportEvent.DESTROYED_NOTICE, function onDestroyed(wEvent) {\n        LOG_INFO('Web transport: request downgrade');\n        if (!transport.completeDowngrade()) {\n          LOG_INFO('Web transport: connection error, no downgrade');\n          transport.notifyEvent(wEvent._transportEvent);\n          fsm.notifyDowngradeFailed();\n          return this.transitionTo(fsm.WebTransportDown);\n        }\n        return this.transitionTo(fsm.WebTransportConnecting);\n      })\n      .reaction(WebTransportEvent.DESTROY, function onDestroy(wEvent) {\n        transport.destroyInternal(wEvent._destroyMsg, wEvent._subcode);\n        return this.transitionTo(fsm.WebTransportDestroying);\n      });\n    this.WebTransportUp = new State({\n      name:          WebTransportState.UP,\n      parentContext: this,\n    })\n      .reaction(WebTransportEvent.DOWNGRADE, wEvent =>\n        fsm.attemptDowngrade(new TransportSessionEvent(wEvent._downgradeMsg, wEvent._subcode)))\n      .reaction(WebTransportEvent.DESTROYED_NOTICE, function onDestroyed(wEvent) {\n        transport.notifyEvent(wEvent._transportEvent);\n        return this.transitionTo(fsm.WebTransportDown);\n      })\n      .reaction(WebTransportEvent.DESTROY, function onDestroy(wEvent) {\n        transport.destroyInternal(wEvent._destroyMsg, wEvent._subcode);\n        return this.transitionTo(fsm.WebTransportDestroying);\n      })\n      .reaction(WebTransportEvent.SEND_ERROR, function onUpNotice(wEvent) {\n        transport.notifyEvent(wEvent._transportEvent);\n        transport.destroyInternal(wEvent._destroyMsg, wEvent._subcode);\n        return this.transitionTo(fsm.WebTransportDestroying);\n      });\n    this.WebTransportDestroying = new State({\n      name:          WebTransportState.DESTROYING,\n      parentContext: this,\n    })\n      .reaction(WebTransportEvent.DESTROYED_NOTICE, function onDestroyed(wEvent) {\n        transport.notifyEvent(wEvent._transportEvent);\n        return this.transitionTo(fsm.WebTransportDown);\n      });\n  }\n\n\n    /**\n     * Attempt a downgrade. This is the procedure.\n     * 1. Call this. If it returns true, wait for DESTROYED_NOTICE, then\n     * 2. Call transport.completeDowngrade().\n     * @param {TransportSessionEvent} tsEvent The event triggering the downgrade\n     * @returns {Boolean} `true` if downgrade is starting (by destroying the transport)\n     */\n  attemptDowngrade(tsEvent) {\n    const { infoStr, errorSubcode } = tsEvent;\n    if (!this.transport.beginDowngrade(infoStr, errorSubcode)) {\n      LOG_TRACE('Downgrade unavailable');\n      this.transport.destroyInternal(infoStr, errorSubcode);\n      this.transport.notifyEvent(tsEvent);\n      return this.transitionTo(this.WebTransportDestroying);\n    }\n    LOG_TRACE('Downgrade available');\n    return this.transitionTo(this.WebTransportDowngrading);\n  }\n\n  notifyDowngradeFailed() {\n    LOG_TRACE('Notifying of downgrade failure');\n    this.transport.notifyEvent(new TransportSessionEvent(TransportSessionEventCode.DOWNGRADE_FAILED,\n                                  'Downgrade failed'));\n  }\n}\n\nmodule.exports.WebTransportFSM = WebTransportFSM;\n","const {\n  LOG_DEBUG,\n  LOG_TRACE,\n} = require('solclient-log');\nconst { TransportBase } = require('../transport-base');\nconst { TransportClientStats } = require('../transport-client-stats');\nconst { TransportReturnCode } = require('../transport-return-codes');\nconst { TransportSessionState } = require('../transport-session-states');\n\nconst MAX_BUFFERED_AMOUNT_QUERY_INTERVAL_MS = 4000;\n\n/**\n * Base class for web related transports\n * @extends TransportBase\n * @private\n */\nclass WebTransportSessionBase extends TransportBase {\n  /**\n   * @constructor\n   * @param {URL} url The URL to connect to\n   * @param {function} eventCB The function to call on events\n   * @param {SMFClient} client The function to call on data received.\n   * @param {Object} props Additional object properties for this transport session\n   */\n  constructor(url, eventCB, client, props) {\n    // instanitate instance properties defined in TransportBase\n    super(url, eventCB, client, props);\n\n    /**\n     * @type {Number}\n     */\n    this._connectTimeout = props.transportDowngradeTimeoutInMsecs;\n\n    /**\n     * @type {?number}\n     */\n    this._connectTimer = null;\n\n    /**\n     * @type {TransportClientStats}\n     */\n    this._clientstats = new TransportClientStats();\n\n    /**\n     * Maximum amount of send data than can be queued\n     * @type {Number}\n     */\n    this._sendBufferMaxSize = props.sendBufferMaxSize;\n\n    /**\n     * Maximum payload chunk size in web transport\n     * @type {Number}\n     */\n    this._maxPayloadBytes = props.maxWebPayload;\n\n    /**\n     * Queue to hold data to be sent to the Solace Message Router when we get back a\n     * data token\n     * @type {array}\n     */\n    this._queuedData = [];\n\n    /**\n     * Number of bytes of queued data\n     * @type {Number}\n     */\n    this._queuedDataSize = 0;\n\n    /**\n     * Remember if we have to send an event when there is room in the queue\n     * @type {Boolean}\n     */\n    this._canSendNeeded = false;\n\n    /**\n     * @type {TransportSessionState}\n     */\n    this._state = TransportSessionState.DOWN;\n\n    /**\n     * Any connection error that needs to be propagated up\n     * @type {?Error}\n     */\n    this._connError = null;\n  }\n\n  // override\n  getClientStats() {\n    return this._clientstats;\n  }\n\n  createConnectTimeout() {\n    if (this._connectTimeout > 0) {\n      this._connectTimer = setTimeout(() => {\n        this.connectTimerExpiry();\n      }, this._connectTimeout);\n    }\n  }\n\n  cancelConnectTimeout() {\n    if (this._connectTimer) {\n      clearTimeout(this._connectTimer);\n      this._connectTimer = null;\n    }\n  }\n\n  /* override me */\n  connectTimerExpiry() { // eslint-disable-line class-methods-use-this\n    return undefined;\n  }\n\n  allowEnqueue(datalen) {\n      // Bug 32006: if there's no queued data, we always accept at least one message, even if it\n      // exceeds the sendBufferMaxSize.\n      // If we reject enqueueing something too large because we already have queued data,\n      // that guarantees when the data is flushed we will emit the alertOnDequeue event.\n    return (this._queuedDataSize === 0 ||\n            ((datalen + this._queuedDataSize) <= this._sendBufferMaxSize));\n  }\n\n  enqueueFailNoSpace() {\n    this._canSendNeeded = true;\n    return TransportReturnCode.NO_SPACE;\n  }\n\n  /* override me */\n  flush(callback) { // eslint-disable-line class-methods-use-this\n    callback();\n  }\n\n  getQueuedDataToSend() {\n    // Track messages dequeued.\n    let data = '';\n\n    // Start by trying to fill a complete payload.\n    let bytesAllowed = this._maxPayloadBytes;\n    LOG_TRACE(`getQueuedDataToSend: bytesAllowed=${bytesAllowed}, bufferedAmount=${this.getBufferedAmount ? this.getBufferedAmount() : 'undefined'}`);\n    if (this.getBufferedAmount) {\n      bytesAllowed = this._maxPayloadBytes - this.getBufferedAmount();\n      if (bytesAllowed <= 0) {\n        LOG_DEBUG(`$$ bytesAllowed=${bytesAllowed}, maxPayloadBytes=${this._maxPayloadBytes\n                  }, bufferedAmount=${this.getBufferedAmount()}`);\n        if (BUILD_ENV.TARGET_BROWSER &&\n            (this._bufferedAmountQueryIntervalInMsecs *\n              this._bufferedAmountQueryIntervalDelayMultiplier <=\n              MAX_BUFFERED_AMOUNT_QUERY_INTERVAL_MS)) {\n          this._bufferedAmountQueryIntervalDelayMultiplier *= 2;\n        }\n        return data;\n      }\n      if (BUILD_ENV.TARGET_BROWSER) {\n        this._bufferedAmountQueryIntervalDelayMultiplier = 1;\n      }\n    }\n\n    if (this._queuedDataSize > bytesAllowed) {\n      let payloadSize = bytesAllowed;\n      // Slow path: dequeue and append until we fill the payload.\n      while (payloadSize && this._queuedDataSize) {\n        // Is this element larger than the payload?\n        const elem = this._queuedData[0];\n        const elemLength = elem.length;\n        if (elemLength > payloadSize) {\n          // This element is larger than the payload.\n          data += elem.substr(0, payloadSize);\n          this._queuedData[0] = elem.substr(payloadSize);\n\n          // The rest of the payload space was consumed.\n          this._queuedDataSize -= payloadSize;\n          payloadSize = 0;\n        } else {\n          data += this._queuedData.shift();\n          payloadSize -= elemLength;\n          this._queuedDataSize -= elemLength;\n          this._clientstats.msgWritten++;\n        }\n      }\n    } else {\n      // Shortcut: use the whole buffer, increase the message sent count by the length of the size\n      // queue, and reset the buffer.\n      data = this._queuedData.join('');\n      this._clientstats.msgWritten += this._queuedData.length;\n\n      this._queuedData = [];\n      this._queuedDataSize = 0;\n    }\n\n    LOG_DEBUG(`Sending ${data.length} bytes from queued data`);\n    return data;\n  }\n}\n\nmodule.exports.WebTransportSessionBase = WebTransportSessionBase;\n","const { Enum } = require('solclient-eskit');\n\n// WebTransport states, used by WebTransport\nconst WebTransportState = {\n  DOWN:        'WebTransportDown',\n  CONNECTING:  'WebTransportConnecting',\n  DOWNGRADING: 'WebTransportDowngrading',\n  DESTROYING:  'WebTransportDestroying',\n  UP:          'WebTransportUp',\n};\n\nmodule.exports.WebTransportState = Enum.new(WebTransportState);\n","const {\n  ErrorSubcode,\n  OperationError,\n} = require('solclient-error');\nconst {\n  HTTPTransportSession,\n} = require('./http');\nconst {\n  LOG_TRACE,\n  LOG_INFO,\n  LOG_ERROR,\n} = require('solclient-log');\nconst { FsmEvent } = require('solclient-fsm');\nconst { TransportBase } = require('../transport-base');\nconst { TransportProtocol } = require('../transport-protocols');\nconst { TransportProtocolHandler } = require('../transport-protocol-handler');\nconst { TransportReturnCode } = require('../transport-return-codes');\nconst { TransportSessionEventCode } = require('../transport-session-event-codes');\nconst { WebSocketTransportSession } = require('./websocket-transport-session');\nconst { WebTransportEvent } = require('./web-transport-events');\nconst { WebTransportFSM } = require('./web-transport-fsm');\n\n/**\n * @classdesc\n * This class manages all the web based transport protocols.\n * <ul>\n *     <li>{@link TransportProtocol.HTTP_BASE64}\n *     <li>{@link TransportProtocol.HTTP_BINARY}\n *     <li>{@link TransportProtocol.HTTP_BINARY_STREAMING}\n *     <li>{@link TransportProtocol.WS_BINARY}\n * </ul>\n * @extends TransportBase\n * @private\n */\nclass WebTransport extends TransportBase {\n\n  /**\n   * @constructor\n   * @param {URL} url The url to connect to\n   * @param {Function} eventCB The callback for transport events\n   * @param {BaseSMFClient} client An SMF client instance\n   * @param {Object} props Additional transport properties\n   * @param {Function} getId A function that returns this transport's unique ID\n   */\n  constructor(url, eventCB, client, props, getId) {\n    super(url, eventCB, client, props);\n    LOG_TRACE(`webTransportProtocolList ${props.webTransportProtocolList}`);\n    this._transportHandler = new TransportProtocolHandler(url, props.webTransportProtocolList);\n    this._webTransportFsm = new WebTransportFSM(this, getId);\n    this._webTransportFsm.start();\n  }\n\n  notifyEvent(event) {\n    this._eventCB(event);\n  }\n\n  handleDestroyed() {\n    this._transportSession = null;\n  }\n\n  handleTransportEvent(transportEvent) {\n    LOG_INFO(`Web transport receive transport event: ${transportEvent}`);\n    let wEvent;\n    switch (transportEvent.getTransportEventCode()) {\n      case TransportSessionEventCode.UP_NOTICE:\n        wEvent = new FsmEvent({ name: WebTransportEvent.UP_NOTICE });\n        wEvent._transportEvent = transportEvent;\n        this._webTransportFsm.processEvent(wEvent);\n        break;\n\n      case TransportSessionEventCode.DESTROYED_NOTICE:\n        this.handleDestroyed();\n        wEvent = new FsmEvent({ name: WebTransportEvent.DESTROYED_NOTICE });\n        wEvent._transportEvent = transportEvent;\n        this._webTransportFsm.processEvent(wEvent);\n        break;\n\n      case TransportSessionEventCode.SEND_ERROR:\n        wEvent = new FsmEvent({ name: WebTransportEvent.SEND_ERROR });\n        wEvent._transportEvent = transportEvent;\n        this._webTransportFsm.processEvent(wEvent);\n        break;\n\n      case TransportSessionEventCode.CONNECT_TIMEOUT:\n        wEvent = new FsmEvent({ name: WebTransportEvent.CONNECT_TIMEOUT });\n        wEvent._transportEvent = transportEvent;\n        this._webTransportFsm.processEvent(wEvent);\n        break;\n\n      case TransportSessionEventCode.DOWNGRADE_FAILED:\n        this._lastDowngradeSucceeded = false;\n        break;\n\n      case TransportSessionEventCode.DOWNGRADE_SUCCEEDED:\n        this._lastDowngradeSucceeded = true;\n        break;\n\n      default:\n        // All other transport events have no effect on the web transport and are passed through\n        this._eventCB(transportEvent);\n    }\n  }\n\n  /**\n   * @override\n   */\n  connect() {\n    const wEvent = new FsmEvent({ name: WebTransportEvent.CONNECT });\n    this._webTransportFsm.processEvent(wEvent);\n    return TransportReturnCode.OK;\n  }\n\n  connectInternal() {\n    this._transportSession = null;\n    const tpProtocol = this._transportHandler.getTransportProtocol();\n    this._props.transportProtocol = tpProtocol;\n    switch (tpProtocol) {\n      case TransportProtocol.HTTP_BASE64:\n      case TransportProtocol.HTTP_BINARY:\n      case TransportProtocol.HTTP_BINARY_STREAMING:\n        this._transportSession = new HTTPTransportSession(\n          this._url,\n          evt => this.handleTransportEvent(evt),\n          this._client,\n          this._props\n        );\n        break;\n\n      case TransportProtocol.WS_BINARY:\n        this._transportSession = new WebSocketTransportSession(\n          this._url,\n          evt => this.handleTransportEvent(evt),\n          this._client,\n          this._props\n        );\n        break;\n\n      default:\n        LOG_ERROR(`Web transport unrecognized TransportProtocol: ${tpProtocol}`);\n        throw new OperationError(`No transport session provider for scheme: ${tpProtocol}`,\n                                 ErrorSubcode.CONNECTION_ERROR,\n                                 tpProtocol);\n    }\n\n    LOG_INFO(`Connect Transport ${tpProtocol}`);\n    return this._transportSession.connect();\n  }\n\n  /**\n   * @override\n   */\n  destroy(msg, subcode) {\n    const wEvent = new FsmEvent({ name: WebTransportEvent.DESTROY });\n    wEvent._destroyMsg = msg;\n    wEvent._subcode = subcode;\n    this._webTransportFsm.processEvent(wEvent);\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * Force fail the underlying transport's socket to force a failure.\n   * Returns transport return code.\n   * @override\n   * @param {?String} msg The message associated with this operation, if any.\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  forceFailure(msg) {\n    const errorMsg = (msg !== undefined && msg !== null) ? msg : ''; // default empty\n    LOG_DEBUG(`Destroy Tls transport: ${errorMsg}`);\n    if (this._transportSession) {\n      this._transportSession._socket._sender._socket.destroy(new Error(errorMsg));\n    }\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * @param {String} msg The message associated with the downgrade\n   * @param {ErrorSubcode} subcode The subcode associated with the downgrade\n   * @returns {Boolean} `true` if there are downgrade options available. `false` otherwise.\n   * @private\n   */\n  beginDowngrade(msg, subcode) {\n    if (this._transportHandler.canCompleteDowngrade()) {\n      LOG_TRACE('Web transport downgrade');\n      // Destroy the underlying transport session\n      // This will asynchronously cause DESTROYED_NOTICE to be emitted.\n      // The receiver can then call completeDowngrade, which will complete the downgrade.\n      this.destroyInternal(msg, subcode);\n      return true;\n    }\n    LOG_TRACE('Web transport downgrade rejected');\n    return false;\n  }\n\n  completeDowngrade() {\n    if (!this._transportHandler.canCompleteDowngrade()) {\n      return false;\n    }\n    return this._transportHandler.completeDowngrade();\n  }\n\n  destroyInternal(msg, subcode) {\n    if (this._transportSession) {\n      this._transportSession.destroy(msg, subcode);\n    }\n  }\n\n  /**\n   * @override\n   */\n  flush(callback) {\n    return this._transportSession.flush(callback);\n  }\n\n  getConnError() {\n    if (this._transportSession) {\n      return this._transportSession._connError;\n    }\n    return null;\n  }\n\n  /**\n   * @override\n   */\n  getInfoStr() {\n    if (this._transportSession) {\n      return this._transportSession.getInfoStr();\n    }\n    return 'Not connected.';\n  }\n\n  /**\n   * @override\n   */\n  getTransportProtocol() {\n    return this._transportHandler.getTransportProtocol();\n  }\n\n  /**\n   * @override\n   */\n  getClientStats() {\n    if (this._transportSession) {\n      return this._transportSession.getClientStats();\n    }\n    return null;\n  }\n\n  /**\n   * @override\n   */\n  requestDowngrade(msg, subcode) {\n    LOG_TRACE('Creating downgrade request event');\n    this._lastDowngradeSucceeded = undefined; // will be reset by handler for TS DOWNGRADE_ events\n    const wEvent = new FsmEvent({ name: WebTransportEvent.DOWNGRADE });\n    wEvent._downgradeMsg = msg;\n    wEvent._subcode = subcode;\n    this._webTransportFsm.processEvent(wEvent);\n    return this._lastDowngradeSucceeded;\n  }\n\n  /**\n   * @override\n   */\n  send(message, forceAllowEnqueue) {\n    return this._transportSession.send(message, forceAllowEnqueue);\n  }\n}\n\nmodule.exports.WebTransport = WebTransport;\n","module.exports.WebSocketCloseCodes = {\n  0: {\n    name:        'Unknown code',\n    description: 'No status code was returned by the operation',\n  },\n  1000: {\n    name:        'Normal Closure',\n    description: 'The connection closed normally',\n  },\n  1001: {\n    name:        'Going Away',\n    description: 'The endpoint is going away due to a server failure or client navigation',\n  },\n  1002: {\n    name:        'Protocol Error',\n    description: 'A WebSocket protocol error occurred',\n  },\n  1003: {\n    name:        'Unsupported Data',\n    description: 'The endpoint cannot handle the specified data type',\n  },\n  1004: {\n    name:        'Reserved',\n    description: '',\n  },\n  1005: {\n    name:        'No Status Recvd',\n    description: 'Expected a status code but none was provided',\n  },\n  1006: {\n    name:        'Abnormal Closure',\n    description: 'No close frame was received before remote hangup',\n  },\n  1007: {\n    name:        'Invalid Frame Payload Data',\n    description: 'A message contained data inconsistent with its encoding',\n  },\n  1008: {\n    name:        'Policy Violation',\n    description: 'A message violated endpoint policy',\n  },\n  1009: {\n    name:        'Message Too Big',\n    description: 'A data frame was too large',\n  },\n  1010: {\n    name:        'Missing Extension',\n    description: 'The endpoint did not negotiate an expected extension',\n  },\n  1011: {\n    name:        'Internal Error',\n    description: 'The server encountered an unexpected condition that prevented it from fulfilling the request',\n  },\n  1012: {\n    name:        'Service Restart',\n    description: 'The server is restarting',\n  },\n  1013: {\n    name:        'Try Again Later',\n    description: 'The server is terminating the connection due to a temporary condition',\n  },\n  1014: {\n    name:        'Bad Gateway',\n    description: 'A gateway or proxy received an invalid response from the upstream server',\n  },\n  1015: {\n    name:        'TLS Handshake',\n    description: 'The connection was closed due to a failure to perform a TLS handshake',\n  },\n};\n","const {\n  LOG_TRACE,\n  LOG_DEBUG,\n  LOG_INFO,\n  LOG_WARN,\n  LOG_ERROR } = require('solclient-log');\n\nconst { ArrayUtils } = require('solclient-util');\nconst { Convert,\n        Hex } = require('solclient-convert');\nconst { ErrorSubcode } = require('solclient-error');\nconst { mixin } = require('solclient-eskit');\nconst { TransportError } = require('../transport-error');\nconst { TransportReturnCode } = require('../transport-return-codes');\nconst { TransportSessionEvent } = require('../transport-session-event');\nconst { TransportSessionEventCode } = require('../transport-session-event-codes');\nconst { TransportSessionState } = require('../transport-session-states');\nconst { WebSocketCloseCodes } = require('./websocket-close-codes');\nconst { WebTransportSessionBase } = require('./web-transport-session-base');\n\nconst http = require('http');\nconst https = require('https');\n\nconst {\n  stringToArrayBuffer,\n} = Convert;\nconst {\n  formatHexString,\n} = Hex;\nconst {\n  includes,\n} = ArrayUtils;\n\n/* eslint-env browser */\n// closure mangles window.WebSocket\nconst globalContext = (typeof window === 'undefined' ? global : window);\nlet MyWebSocket = globalContext.WebSocket;\nif (BUILD_ENV.TARGET_NODE) {\n  /* eslint-disable no-global-assign */\n  /* eslint-disable global-require */\n  MyWebSocket = /** @type {WebSocket} */ (require('ws'));\n  /* eslint-enable no-global-assign */\n  /* eslint-enable global-require */\n}\n/* eslint-env shared-browser-node */\n\nfunction adaptURL(url) {\n  const v = url.match(/(ws|http)(s?:\\/\\/.+)/);\n  return `ws${v[2]}`;\n}\n\n\n/**\n * @classdesc\n * @private\n * @memberof solace\n */\nclass WebSocketTransportSession extends WebTransportSessionBase {\n\n  /**\n   * @constructor\n   * @param {String} url The url to connect to\n   * @param {function} eventCB The callback for transport events\n   * @param {SMFClient} client The SMF client for data events\n   * @param {Object} props Properties for the transport session\n   */\n  constructor(url, eventCB, client, props) {\n    super(url, eventCB, client, props);\n    /**\n     * @type {String}\n     */\n    this._url = adaptURL(url);\n\n    /**\n     * @type {?WebSocket}\n     */\n    this._socket = null;\n\n    /**\n     * @type {?string}\n     */\n    this._sessionId = new Date().getTime();\n\n    if (BUILD_ENV.TARGET_BROWSER) {\n      /**\n       * @type {Number}\n       */\n      this._bufferedAmountQueryIntervalInMsecs = props.bufferedAmountQueryIntervalInMsecs;\n      /**\n       * @type {?number}\n       */\n      this._bufferedAmountQueryTimer = null;\n      /**\n       * @type {Number}\n       */\n      this._bufferedAmountQueryIntervalDelayMultiplier = 1;\n    }\n  }\n\n\n  /**\n   * @private\n   */\n  onOpen() {\n    this.cancelConnectTimeout();\n    this._state = TransportSessionState.SESSION_UP;\n      // Send the event to the application letting it know that the session is up\n    this._eventCB(\n          new TransportSessionEvent(\n              TransportSessionEventCode.UP_NOTICE,\n              'Connected',\n              0,\n              null,\n              this._sessionId));\n  }\n\n  /**\n   * @param {Socket} originalSocket bound at the time of callback registration,\n   * safety against stray calls after socket is destroyed.\n   * @param {Event} event The websocket event causing the close\n   * @private\n   */\n  onClose(originalSocket, event) {\n    if (originalSocket !== this._socket) {\n      LOG_DEBUG('Websocket Transport Session stray onClose for previous socket, ignoring.');\n      return;\n    }\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY) {\n      LOG_TRACE('WebSocket transport is being destroyed, ignore error');\n      return;\n    }\n    const msgBuf = [];\n    const code = WebSocketCloseCodes[event.code] || WebSocketCloseCodes[0];\n    msgBuf.push(`${event.code} ${code.name} (${code.description})`);\n    if (event.wasClean !== undefined) {\n      msgBuf.push(`clean closure: ${event.wasClean}`);\n    }\n    if (event.reason) {\n      msgBuf.push(`reason: ${event.reason}`);\n    }\n    const msg = msgBuf.join(', ');\n    LOG_DEBUG(`WebSocket transport connection is closed ${msg}`);\n    LOG_TRACE(`Event { type: ${event.type} wasClean: ${event.wasClean} code: ${event.code} reason: ${event.reason} }`);\n    this._state = TransportSessionState.CONNECTION_FAILED;\n    this.destroy(`Connection closed: ${msg}`, ErrorSubcode.COMMUNICATION_ERROR);\n  }\n\n  onDrain() {\n    LOG_TRACE('Drained socket');\n    this.maybeEmitCanSend();\n    this.maybeEmitFlush();\n  }\n\n  onBufferedAmountPoll() {\n    if (this.getBufferedAmount() === 0) {\n      this.onDrain();\n    } else if (this.scheduleQuery) {\n      this.scheduleQuery();\n    }\n  }\n\n  /**\n   * @param {Socket} originalSocket bound at callback registration.\n   * @param {TransportSessionEvent} event The event causing the error\n   * @private\n   */\n  onError(originalSocket, event) {\n    LOG_INFO(`Websocket Transport Session onError for socket ${originalSocket} while socket is ${this._socket}`);\n    if (originalSocket !== this._socket) {\n      LOG_INFO('Websocket Transport Session stray onError for previous socket, ignoring.');\n      return;\n    }\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY) {\n      LOG_INFO('WebSocket transport is being destroyed, ignore error');\n      return;\n    }\n    const msg = (event.message) ? (`: ${event.message}`) : '';\n    LOG_INFO(`WebSocket transport connection error ${msg} while in state ${this._state}`);\n    // There won't be an onClose call to clean up unless we are connected already.\n    if (this._state === TransportSessionState.WAITING_FOR_CONNECT) {\n      this.cancelConnectTimeout();\n      this._state = TransportSessionState.CONNECTION_FAILED;\n      this.destroy(`Connection failed: ${msg}`, ErrorSubcode.CONNECTION_ERROR);\n    } else { // Sending error event only, onClose will clean up in due time.\n      this._eventCB(\n            new TransportSessionEvent(\n                TransportSessionEventCode.SEND_ERROR,\n                `Connection error${msg}`,\n                null,\n                ErrorSubcode.CONNECTION_ERROR, null));\n    }\n  }\n\n  /**\n   * @param {TransportSessionEvent} event The data event\n   * @private\n   */\n  onMessage(event) {\n    if (this._client) {\n      this._client.rxDataArrayBuffer(event.data);\n    }\n  }\n\n  /**\n   * @override\n   * @private\n   */\n  connectTimerExpiry() {\n    LOG_INFO('WebSocket transport connect timeout');\n    this.state = TransportSessionState.CONNECTION_FAILED;\n    this._eventCB(new TransportSessionEvent(\n      TransportSessionEventCode.CONNECT_TIMEOUT,\n      'Connection timed out',\n      null,\n      ErrorSubcode.TIMEOUT\n    ));\n  }\n\n  /**\n   * @override\n   * @private\n   */\n  connect() {\n    if (this._state !== TransportSessionState.DOWN) {\n      LOG_ERROR(`Invalid state for operation: ${TransportSessionState.nameOf(this._state)}`);\n      return TransportReturnCode.INVALID_STATE_FOR_OPERATION;\n    }\n    if (!this._url) {\n      LOG_WARN('Cannot connect to null URL');\n      return TransportReturnCode.CONNECTION_ERROR;\n    }\n    if (this._socket) {\n      this.onError('Socket already connected');\n    }\n\n    LOG_INFO('Establishing WebSocket transport session');\n    try {\n      this.createConnectTimeout();\n      this._state = TransportSessionState.WAITING_FOR_CREATE;\n      if (BUILD_ENV.TARGET_NODE && !this._socketOptions) {\n        LOG_DEBUG('Creating Node websocket options');\n        this._socketOptions = this.createWebSocketOptions(this.onDrain.bind(this));\n      }\n      LOG_INFO('Constructing socket');\n      if (BUILD_ENV.TARGET_BROWSER) {\n        /**\n         * @type {WebSocket}\n         */\n        this._socket = new MyWebSocket(this._url, 'smf.solacesystems.com');\n      } else {\n        this._socket = new MyWebSocket(this._url, 'smf.solacesystems.com', this._socketOptions);\n        this._socket.ondrain = this.onDrain.bind(this);\n      }\n      // Closure is generally faster than bind\n      LOG_TRACE('Assigning properties to socket');\n      // Closure using Browser profile to avoid mangling this\n      this._socket.binaryType = 'arraybuffer';\n      this._socket.onopen = this.onOpen.bind(this);\n      this._socket.onmessage = this.onMessage.bind(this);\n      this._socket.onclose = this.onClose.bind(this, this._socket);\n      this._socket.onerror = this.onError.bind(this, this._socket);\n      LOG_TRACE('Prepared socket');\n    } catch (error) {\n      LOG_INFO(`Error connecting: ${error.message}`);\n      LOG_TRACE('Error details', error.stack || error);\n      this._state = TransportSessionState.CONNECTION_FAILED;\n      this.cancelConnectTimeout();\n      if (error instanceof TransportError) {\n        this._connError = error;\n      } else {\n        throw new TransportError(`Could not create WebSocket: ${error.message}`,\n                                 error.subcode || ErrorSubcode.CONNECTION_ERROR);\n      }\n      return TransportReturnCode.CONNECTION_ERROR;\n    }\n\n    LOG_INFO('WebSocket is connecting');\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * @override\n   * @param {String} data The binary string data to send.\n   * @param {Boolean} [force=false] If true, send even if buffer is full.\n   */\n  send(data, force = false) {\n    if (this._state !== TransportSessionState.SESSION_UP) {\n      return TransportReturnCode.INVALID_STATE_FOR_OPERATION;\n    }\n\n    const dataLen = data.length;\n    const bufferAllow = (this._sendBufferMaxSize - this.getBufferedAmount()) >= 0;\n    // LOG_DEBUG('Websocket send:', dataLen, force, bufferAllow);\n    if (!(force || bufferAllow)) {\n      this._canSendNeeded = true;\n      if (this.scheduleQuery) this.scheduleQuery();\n      return TransportReturnCode.NO_SPACE;\n    }\n\n    // LOG_TRACE(`websocket.send: len=${data.length}`);\n    // Slice messages per maxPayloadBytes\n    const maxPayloadBytes = this._maxPayloadBytes;\n    const ab = stringToArrayBuffer(data);\n    if (dataLen > maxPayloadBytes) {\n      for (let i = 0; i < dataLen; i += maxPayloadBytes) {\n        this._socket.send(ab.slice(i, i + maxPayloadBytes));\n      }\n    } else {\n      this._socket.send(ab);\n    }\n    // LOG_TRACE(`websocket.send: after send getBufferedAmount=${this.getBufferedAmount()}`);\n    this._clientstats.bytesWritten += dataLen;\n    ++this._clientstats.msgWritten;\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * @returns {Number} The number of already buffered bytes in this transport.\n   * @private\n   */\n  getBufferedAmount() {\n    // Access as string property because this is a defineProperty on node websocket,\n    // meaning it is not mangled by Closure Compiler\n    return this._socket ? this._socket['bufferedAmount'] : 0; // eslint-disable-line dot-notation\n  }\n\n  /**\n   * @override\n   */\n  flush(callback) {\n    this._flushCallback = callback;\n    this.maybeEmitFlush();\n  }\n\n  maybeEmitCanSend() {\n    if (this._canSendNeeded && this.getBufferedAmount() < this._sendBufferMaxSize) {\n      LOG_TRACE('Transport emitting CAN_ACCEPT_DATA');\n      this._canSendNeeded = false;\n      this._eventCB(\n        new TransportSessionEvent(TransportSessionEventCode.CAN_ACCEPT_DATA,\n                                  '', null, 0, this._sessionId));\n    }\n  }\n\n  maybeEmitFlush() {\n    if (!this._flushCallback) return;\n    if (BUILD_ENV.TARGET_BROWSER && this.getBufferedAmount() > 0) {\n      // Ensure we have a query scheduled, but don't interrupt a query in progress\n      if (!this._bufferedAmountQueryTimer) {\n        this.scheduleQuery();\n      }\n      return;\n    }\n\n    // Node is automatically flushed by socket.end(), which is called in non-error cases\n    LOG_DEBUG('Transport emitting FLUSH');\n    const cb = this._flushCallback;\n    this._flushCallback = null;\n    cb();\n  }\n\n  /**\n   * @override\n   */\n  destroy(message, subcode) {\n    // We can destroy (and get a notice) even if the socket is freshly created.\n    // But this will only work once.\n    if (this._state !== TransportSessionState.DOWN) {\n      LOG_INFO(`Destroy WebSocket transport: ${message}`);\n\n      // Set state for connection teardown.\n      this._state = TransportSessionState.WAITING_FOR_DESTROY;\n\n      if (this._socket) {\n        this._socket.close();\n        this._socket.onopen = null;\n        this._socket.onmessage = null;\n        this._socket.onclose = null;\n        this._socket.onerror = function onerrorStub() { }; // Prevent unhandled errors\n        this._socket = null;\n      }\n\n      if (this._connectTimer) {\n        clearTimeout(this._connectTimer);\n        this._connectTimer = undefined;\n      }\n\n      if (BUILD_ENV.TARGET_BROWSER) {\n        this.cancelQuery();\n        this._bufferedAmountQueryIntervalDelayMultiplier = 1;\n      }\n\n      this._canSendNeeded = false;\n\n      this._state = TransportSessionState.DOWN;\n\n      this._client = null; // Don't accept data.\n    }\n    // always send a DESTROYED_NOTICE in response to a destroy() even\n    // if we think the transport is already destroyed\n    if (this._eventCB) {\n      // Fire this *almost* instantly, but follow the HTTP\n      // transport pattern by guaranteeing an async callback.\n      this._eventCB(new TransportSessionEvent(TransportSessionEventCode.DESTROYED_NOTICE,\n                                              message || 'Session is destroyed',\n                                              null,\n                                              subcode || 0,\n                                              this._sessionId));\n      // Release references to other components\n      this._eventCB = null;\n    }\n\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * @override\n   * @returns {String} A description of this object.\n   */\n  getInfoStr() {\n    const str = `WebSocketTransportSession; sid=${formatHexString(this._sessionId)}`;\n    return str;\n  }\n\n  static browserSupportsBinaryWebSockets() {\n    LOG_DEBUG('websocket browserSupportBinaryCheck - ' +\n              'if WebSocket, ArrayBuffer and Uint8Array are supported');\n\n    const exists = ['function', 'object'];\n    if (!includes(exists, typeof MyWebSocket) ||\n        !includes(exists, typeof ArrayBuffer) ||\n        !includes(exists, typeof Uint8Array)) {\n      LOG_INFO('websocket browserSupportBinaryCheck: false - some required classes not supported');\n      return false;\n    }\n\n    LOG_DEBUG('websocket browserSupportBinaryCheck - if WebSocket supports binaryType');\n    if ('binaryType' in MyWebSocket.prototype) {\n      LOG_INFO('websocket browserSupportBinaryCheck: true - WebSocket supports binaryType');\n      return true;\n    }\n\n    LOG_INFO('websocket browserSupportBinaryCheck: false - WebSocket does not support binaryType');\n    return false;\n  }\n\n}\n\nif (BUILD_ENV.TARGET_BROWSER) {\n  mixin(WebSocketTransportSession, class WebSocketTransportSessionBrowser {\n    /**\n     * @private\n     */\n    scheduleQuery() {\n      const bufferedAmount = this.getBufferedAmount();\n      if (bufferedAmount > 0 && this._bufferedAmountQueryIntervalInMsecs > 0) {\n        this.cancelQuery();\n        if (this._bufferedAmountQueryIntervalDelayMultiplier > 1) {\n          LOG_DEBUG(`$$ schedule bufferedAmount query timer in ${\n                    this._bufferedAmountQueryIntervalInMsecs *\n                    this._bufferedAmountQueryIntervalDelayMultiplier} ms`);\n        }\n        const timeout = this._bufferedAmountQueryIntervalInMsecs *\n                        this._bufferedAmountQueryIntervalDelayMultiplier;\n        this._bufferedAmountQueryTimer = setTimeout(() => {\n          this.cancelQuery();\n          try {\n            this.onBufferedAmountPoll();\n          } catch (e) {\n            LOG_ERROR(`Error occurred in onBufferedAmountPoll: ${e.message}`);\n            LOG_TRACE('Error details:', e.stack || e);\n          }\n        }, timeout);\n      }\n    }\n\n    cancelQuery() {\n      if (this._bufferedAmountQueryTimer) {\n        clearTimeout(this._bufferedAmountQueryTimer);\n        this._bufferedAmountQueryTimer = null;\n      }\n    }\n  });\n} else {\n  // Node TLS socket options formulation shared with TCP transport\n  // eslint-disable-next-line global-require\n  const { NodeTLSOptsMixin } = require('../node-tls-opts-mixin');\n  mixin(WebTransportSessionBase, NodeTLSOptsMixin);\n  // Node-specific methods of this class go here\n  mixin(WebTransportSessionBase, class WebTransportSessionBaseNode {\n\n    /**\n     * @name solace.WebTransportSession#createWebSocketOptions\n     * @param {Function} onDrainCallback handler function for socket onDrain event\n     * @returns {Object} A WebSocket options object for the current configuration\n     * @private\n     */\n    createWebSocketOptions(onDrainCallback) {\n      let options = {};\n      if (this._ssl) {\n        options = this.createTLSOptions();\n        // use custom agent for client certificate support, ssl resume session support\n        // eslint-disable-next-line dot-notation\n        options['agent'] = new https.Agent({\n          keepAlive: false,\n        });\n      } else { // else no TLS:\n        // eslint-disable-next-line dot-notation\n        options['agent'] = new http.Agent();\n      }\n      // eslint-disable-next-line dot-notation\n      const wsAgent = options['agent'];\n      const origCreateConnection = wsAgent.createConnection;\n      wsAgent.createConnection = function newCreateConnection(opts, callback) {\n        const socket = origCreateConnection.call(this, opts, callback);\n        socket.on('drain', onDrainCallback);\n        return socket;\n      };\n      LOG_DEBUG('WebSocket options', options);\n      return options;\n    }\n  });\n}\n\nmodule.exports.WebSocketTransportSession = WebSocketTransportSession;\n","const { APIProperties } = require('./lib/api-properties');\nconst { APIPropertiesValidators } = require('./lib/api-properties-validators');\nconst { ArrayUtils } = require('./lib/array-utils');\nconst { parseURL } = require('./lib/url');\nconst { Process } = require('./lib/process');\nconst { StringBuffer } = require('./lib/string-buffer');\nconst { StringUtils } = require('./lib/string-utils');\nconst { TimingBucket } = require('./lib/timing-bucket');\nconst { UUID } = require('./lib/uuid');\nconst { Version } = require('./lib/version');\nconst clone = require('./lib/clone');\n\nmodule.exports = {\n  clone,\n  parseURL,\n\n  APIProperties,\n  APIPropertiesValidators,\n  ArrayUtils,\n  Process,\n  StringBuffer,\n  StringUtils,\n  TimingBucket,\n  UUID,\n  Version,\n};\n","const { Check } = require('solclient-validate');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\n\nconst APIPropertiesValidators = {\n  validateInstance(typeDesc, instance, name, ...args) {\n    args.forEach((check) => {\n      const validator = check.shift();\n      const validatorArgs = [typeDesc, instance, name, ...check];\n      validator(...validatorArgs);\n    });\n  },\n\n  valInstance(typeDesc, instance, name, typeInstance, typeInstanceDesc) {\n    if (!Check.instanceOf(instance[name], typeInstance)) {\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                               }' must be instance of ${typeInstanceDesc}`);\n    }\n  },\n\n  valNotEmpty(typeDesc, instance, name) {\n    if (Check.none(instance[name]) || instance[name] === '') {\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                             }' cannot be empty.`,\n                             ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n  },\n\n  valLength(typeDesc, instance, name, max) {\n    if (Check.string(instance[name]) && instance[name].length > max) {\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                             }' exceeded max length ${max}`,\n                             ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n  },\n\n  valRange(typeDesc, instance, name, min, max) {\n    if (Check.number(instance[name]) && (instance[name] < min || instance[name] > max)) {\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                              }' out of range [${min}; ${max}].`,\n                              ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n  },\n\n  valString(typeDesc, instance, name) {\n    if (!Check.string(instance[name])) {\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                             }' must be type string; was ${typeof instance[name]}`,\n                             ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n  },\n\n  valNumber(typeDesc, instance, name) {\n    if (!Check.number(instance[name])) {\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                             }' must be type number; was ${typeof instance[name]}`,\n                             ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n  },\n\n  valBoolean(typeDesc, instance, name) {\n    const val = instance[name];\n    if (!Check.boolean(val)) {\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                             }' must be type boolean; was ${typeof val}`,\n                             ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n  },\n\n  valIsMember(typeDesc, instance, key, enumInstance, enumName, allowNull = false) {\n    const val = instance[key];\n    if (allowNull && (val === null || val === undefined)) return;\n    if (enumInstance.values.indexOf(val) >= 0) return;\n    throw new OperationError(`${typeDesc} validation: Property '${key\n                             }'=${val} must be a member of ${enumName}`,\n                             ErrorSubcode.PARAMETER_INVALID_TYPE);\n  },\n\n  valStringOrArray(typeDesc, instance, name) {\n    const val = instance[name];\n    if (typeof val !== 'string' && !Array.isArray(val)) {\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                                }' must be a string or array`,\n                                ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n  },\n\n  valArrayIsMember(typeDesc, instance, name, enumInstance, enumName,\n                   allowUndefined, allowEmpty, allowDuplicate) {\n    const val = instance[name];\n    if ((val === undefined || val === null)) {\n      if (allowUndefined) {\n        return;\n      }\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                              }' must be type Array`,\n                              ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n\n    if (!Array.isArray(instance[name])) {\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                              }' must be type Array`,\n                              ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n    if (!allowEmpty && instance[name].length === 0) {\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                              }' cannot be empty`,\n                              ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n\n    instance[name].forEach((ele, index) => {\n      if (!enumInstance.values.includes(ele)) {\n        throw new OperationError(`${typeDesc} validation: Property '${name\n                                }' must be an array of ${enumName}`,\n                                ErrorSubcode.PARAMETER_INVALID_TYPE);\n      }\n      if (!allowDuplicate) {\n        if (instance[name].indexOf(ele, index + 1) >= 0) {\n          throw new OperationError(`${typeDesc} validation: Property '${name\n                          }' cannot have duplicate element value`,\n                          ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n        }\n      }\n    });\n  },\n\n  valArrayOfString(typeDesc, instance, name) {\n    const val = instance[name];\n    if (Check.something(val)) {\n      if (!Array.isArray(val)) {\n        throw new OperationError(`${typeDesc} validation: Property '${name\n                               }' must be type Array`,\n                               ErrorSubcode.PARAMETER_INVALID_TYPE);\n      }\n      val.forEach((ele) => {\n        if (typeof ele !== 'string') {\n          throw new OperationError(`${typeDesc} validation: Property '${name\n                                 }' must be an array of string`,\n                                 ErrorSubcode.PARAMETER_INVALID_TYPE);\n        }\n      });\n    }\n  },\n\n  valTopicString(typedesc, instance, name) {\n    // Pardon this late import. I need to break a circular dependency.\n    // eslint-disable-next-line global-require\n    const { DestinationUtil, DestinationType } = require('solclient-destination');\n    module.exports.APIPropertiesValidators.valString(typedesc, instance, name);\n    const val = instance[name];\n    const result = DestinationUtil.validateAndEncode(DestinationType.TOPIC, val);\n    if (result.error) {\n      throw new OperationError(`${typedesc} validation: Property '${name}' must be ` +\n                               `a valid topic string: ${result.error}`,\n                              ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n  },\n\n  valTopicStringOrEmpty(typedesc, instance, name) {\n    const val = instance[name];\n    if (val && val.length) {\n      module.exports.APIPropertiesValidators.valTopicString(typedesc, instance, name);\n    }\n  },\n};\n\nmodule.exports.APIPropertiesValidators = APIPropertiesValidators;\n","const cloneObj = require('./clone'); // using the modified local clone version\n\nconst CLONE_CIRCULAR = false; // If true, handles circular references safely.\nconst CLONE_DEPTH = 1; // Don't deep-clone nested values.\n\n/**\n * @memberof solace\n * @private\n */\nclass APIProperties {\n\n  /**\n   * Base class for all API properties structures. Provides the clone() method to\n   * make all properties cloneable.\n   * Creates an instance of APIProperties. Assigns properties from one or more\n   * objects in increasing priority order.\n   *\n   * @example\n   * super({ foo: 'defaultFoo', bar: 42 }, { foo: 'quux' }); // .foo == quux, .bar = 42\n   *\n   * @param {...any} options The properties sources to assign.\n   *\n   * @since 10.0.0\n   * @constructor\n   */\n  constructor(...options) {\n    Object.assign(this, ...options);\n  }\n\n  /**\n   * Can be overridden.  For instance sessionProperties\n   * overrides this to suppress printing the password.\n   * @returns {String} The string representation of this object\n   * @private\n   */\n  toString() {\n    return util_inspect(this);\n  }\n\n  clone() {\n    return cloneObj(this, CLONE_CIRCULAR, CLONE_DEPTH);\n  }\n}\n\nmodule.exports.APIProperties = APIProperties;\n","function flatten(array) {\n  return array.reduce((acc, el) => acc.concat(Array.isArray(el) ? flatten(el) : el), []);\n}\n\nfunction includes(array, el) {\n  return array.some(v => v === el);\n}\n\nmodule.exports.ArrayUtils = {\n  flatten,\n  includes,\n};\n","/* Any copyright is dedicated to the Public Domain.\n * http://creativecommons.org/publicdomain/zero/1.0/ */\n/* eslint-disable no-restricted-syntax */\n/* eslint-disable no-labels */\n/* eslint-env browser */\nmodule.exports = function (scope) {\n  // feature detect for URL constructor\n  let hasWorkingUrl = false;\n  if (!scope.forceJURL) {\n    try {\n      const u = new URL('b', 'http://a');\n      u.pathname = 'c%20d';\n      hasWorkingUrl = u.href === 'http://a/c%20d';\n    } catch (e) {\n      // no problem\n    }\n  }\n\n  if (hasWorkingUrl) {\n    return;\n  }\n\n  // Otherwise the keys get minified.\n  /* eslint-disable dot-notation */\n  const relative = Object.create(null);\n  relative['ftp'] = 21;\n  relative['file'] = 0;\n  relative['gopher'] = 70;\n  relative['http'] = 80;\n  relative['https'] = 443;\n  relative['ws'] = 80;\n  relative['wss'] = 443;\n  /* eslint-enable dot-notation */\n\n  const relativePathDotMapping = Object.create(null);\n  relativePathDotMapping['%2e'] = '.';\n  relativePathDotMapping['.%2e'] = '..';\n  relativePathDotMapping['%2e.'] = '..';\n  relativePathDotMapping['%2e%2e'] = '..';\n\n  function clear() {\n    this._scheme = '';\n    this._schemeData = '';\n    this._username = '';\n    this._password = null;\n    this._host = '';\n    this._port = '';\n    this._path = [];\n    this._query = '';\n    this._fragment = '';\n    this._isInvalid = false;\n    this._isRelative = false;\n  }\n\n  function isRelativeScheme(scheme) {\n    return relative[scheme] !== undefined;\n  }\n\n  function invalid() {\n    clear.call(this);\n    this._isInvalid = true;\n  }\n\n  function IDNAToASCII(h) {\n    if (h === '') {\n      invalid.call(this);\n    }\n    // TODO: more robust\n    return h.toLowerCase();\n  }\n\n  function percentEscape(c) {\n    const unicode = c.charCodeAt(0);\n    if (unicode > 0x20 &&\n       unicode < 0x7F &&\n       // \" # < > ? `\n       [0x22, 0x23, 0x3C, 0x3E, 0x3F, 0x60].indexOf(unicode) === -1\n      ) {\n      return c;\n    }\n    return encodeURIComponent(c);\n  }\n\n  function percentEscapeQuery(c) {\n    // TODO: This actually needs to encode c using encoding and then\n    // convert the bytes one-by-one.\n\n    const unicode = c.charCodeAt(0);\n    if (unicode > 0x20 &&\n       unicode < 0x7F &&\n       // \" # < > ` (do not escape '?')\n       [0x22, 0x23, 0x3C, 0x3E, 0x60].indexOf(unicode) === -1\n      ) {\n      return c;\n    }\n    return encodeURIComponent(c);\n  }\n\n  let EOF;\n  const ALPHA = /[a-zA-Z]/;\n  const ALPHANUMERIC = /[a-zA-Z0-9+\\-.]/;\n\n  function parse(input, stateOverride, base) {\n    const errors = [];\n    function err(message) {\n      errors.push(message);\n    }\n\n    let state = stateOverride || 'scheme start';\n    let cursor = 0;\n    let buffer = '';\n    let seenAt = false;\n    let seenBracket = false;\n\n    loop: while ((input[cursor - 1] !== EOF || cursor === 0) && !this._isInvalid) {\n      const c = input[cursor];\n      switch (state) {\n        case 'scheme start':\n          if (c && ALPHA.test(c)) {\n            buffer += c.toLowerCase(); // ASCII-safe\n            state = 'scheme';\n          } else if (!stateOverride) {\n            buffer = '';\n            state = 'no scheme';\n            continue;\n          } else {\n            err('Invalid scheme.');\n            break loop;\n          }\n          break;\n\n        case 'scheme':\n          if (c && ALPHANUMERIC.test(c)) {\n            buffer += c.toLowerCase(); // ASCII-safe\n          } else if (c === ':') {\n            this._scheme = buffer;\n            buffer = '';\n            if (stateOverride) {\n              break loop;\n            }\n            if (isRelativeScheme(this._scheme)) {\n              this._isRelative = true;\n            }\n            if (this._scheme === 'file') {\n              state = 'relative';\n            } else if (this._isRelative && base && base._scheme === this._scheme) {\n              state = 'relative or authority';\n            } else if (this._isRelative) {\n              state = 'authority first slash';\n            } else {\n              state = 'scheme data';\n            }\n          } else if (!stateOverride) {\n            buffer = '';\n            cursor = 0;\n            state = 'no scheme';\n            continue;\n          } else if (EOF === c) {\n            break loop;\n          } else {\n            err(`Code point not allowed in scheme: ${c}`);\n            break loop;\n          }\n          break;\n\n        case 'scheme data':\n          if (c === '?') {\n            this._query = '?';\n            state = 'query';\n          } else if (c === '#') {\n            this._fragment = '#';\n            state = 'fragment';\n          } else if (EOF !== c && c !== '\\t' && c !== '\\n' && c !== '\\r') {\n            // TODO: error handling\n            this._schemeData += percentEscape(c);\n          }\n          break;\n\n        case 'no scheme':\n          if (!base || !(isRelativeScheme(base._scheme))) {\n            err('Missing scheme.');\n            invalid.call(this);\n          } else {\n            state = 'relative';\n            continue;\n          }\n          break;\n\n        case 'relative or authority':\n          if (c === '/' && input[cursor + 1] === '/') {\n            state = 'authority ignore slashes';\n          } else {\n            err(`Expected /, got: ${c}`);\n            state = 'relative';\n            continue;\n          }\n          break;\n\n        case 'relative':\n          this._isRelative = true;\n          if (this._scheme !== 'file') { this._scheme = base._scheme; }\n          if (EOF === c) {\n            this._host = base._host;\n            this._port = base._port;\n            this._path = base._path.slice();\n            this._query = base._query;\n            this._username = base._username;\n            this._password = base._password;\n            break loop;\n          } else if (c === '/' || c === '\\\\') {\n            if (c === '\\\\') { err('\\\\ is an invalid code point.'); }\n            state = 'relative slash';\n          } else if (c === '?') {\n            this._host = base._host;\n            this._port = base._port;\n            this._path = base._path.slice();\n            this._query = '?';\n            this._username = base._username;\n            this._password = base._password;\n            state = 'query';\n          } else if (c === '#') {\n            this._host = base._host;\n            this._port = base._port;\n            this._path = base._path.slice();\n            this._query = base._query;\n            this._fragment = '#';\n            this._username = base._username;\n            this._password = base._password;\n            state = 'fragment';\n          } else {\n            const nextC = input[cursor + 1];\n            const nextNextC = input[cursor + 2];\n            if (this._scheme !== 'file' || !ALPHA.test(c) ||\n                (nextC !== ':' && nextC !== '|') ||\n                (\n                  EOF !== nextNextC && nextNextC !== '/' &&\n                  nextNextC !== '\\\\' && nextNextC !== '?' && nextNextC !== '#'\n                )\n              ) {\n              this._host = base._host;\n              this._port = base._port;\n              this._username = base._username;\n              this._password = base._password;\n              this._path = base._path.slice();\n              this._path.pop();\n            }\n            state = 'relative path';\n            continue;\n          }\n          break;\n\n        case 'relative slash':\n          if (c === '/' || c === '\\\\') {\n            if (c === '\\\\') {\n              err('\\\\ is an invalid code point.');\n            }\n            if (this._scheme === 'file') {\n              state = 'file host';\n            } else {\n              state = 'authority ignore slashes';\n            }\n          } else {\n            if (this._scheme !== 'file') {\n              this._host = base._host;\n              this._port = base._port;\n              this._username = base._username;\n              this._password = base._password;\n            }\n            state = 'relative path';\n            continue;\n          }\n          break;\n\n        case 'authority first slash':\n          if (c === '/') {\n            state = 'authority second slash';\n          } else {\n            err(`Expected '/', got: ${c}`);\n            state = 'authority ignore slashes';\n            continue;\n          }\n          break;\n\n        case 'authority second slash':\n          state = 'authority ignore slashes';\n          if (c !== '/') {\n            err(`Expected '/', got: ${c}`);\n            continue;\n          }\n          break;\n\n        case 'authority ignore slashes':\n          if (c !== '/' && c !== '\\\\') {\n            state = 'authority';\n            continue;\n          } else {\n            err(`Expected authority, got: ${c}`);\n          }\n          break;\n\n        case 'authority':\n          if (c === '@') {\n            if (seenAt) {\n              err('@ already seen.');\n              buffer += '%40';\n            }\n            seenAt = true;\n            for (let i = 0; i < buffer.length; i++) {\n              const cp = buffer[i];\n              if (cp === '\\t' || cp === '\\n' || cp === '\\r') {\n                err('Invalid whitespace in authority.');\n                continue;\n              }\n              // TODO: check URL code points\n              if (cp === ':' && this._password === null) {\n                this._password = '';\n                continue;\n              }\n              const tempC = percentEscape(cp);\n              if (this._password !== null) {\n                this._password += tempC;\n              } else {\n                this._username += tempC;\n              }\n            }\n            buffer = '';\n          } else if (EOF === c || c === '/' || c === '\\\\' || c === '?' || c === '#') {\n            cursor -= buffer.length;\n            buffer = '';\n            state = 'host';\n            continue;\n          } else {\n            buffer += c;\n          }\n          break;\n\n        case 'file host':\n          if (EOF === c || c === '/' || c === '\\\\' || c === '?' || c === '#') {\n            if (buffer.length === 2 && ALPHA.test(buffer[0]) &&\n                (buffer[1] === ':' || buffer[1] === '|')) {\n              state = 'relative path';\n            } else if (buffer.length === 0) {\n              state = 'relative path start';\n            } else {\n              this._host = IDNAToASCII.call(this, buffer);\n              buffer = '';\n              state = 'relative path start';\n            }\n            continue;\n          } else if (c === '\\t' || c === '\\n' || c === '\\r') {\n            err('Invalid whitespace in file host.');\n          } else {\n            buffer += c;\n          }\n          break;\n\n        case 'host':\n        case 'hostname':\n          if (c === ':' && !seenBracket) {\n            // TODO: host parsing\n            this._host = IDNAToASCII.call(this, buffer);\n            buffer = '';\n            state = 'port';\n            if (stateOverride === 'hostname') {\n              break loop;\n            }\n          } else if (EOF === c || c === '/' || c === '\\\\' || c === '?' || c === '#') {\n            this._host = IDNAToASCII.call(this, buffer);\n            buffer = '';\n            state = 'relative path start';\n            if (stateOverride) {\n              break loop;\n            }\n            continue;\n          } else if (c !== '\\t' && c !== '\\n' && c !== '\\r') {\n            if (c === '[') {\n              seenBracket = true;\n            } else if (c === ']') {\n              seenBracket = false;\n            }\n            buffer += c;\n          } else {\n            err(`Invalid code point in host/hostname: ${c}`);\n          }\n          break;\n\n        case 'port':\n          if (/[0-9]/.test(c)) {\n            buffer += c;\n          } else if (EOF === c || c === '/' || c === '\\\\' || c === '?' || c === '#'\n                     || stateOverride) {\n            if (buffer !== '') {\n              const temp = parseInt(buffer, 10);\n              if (temp !== relative[this._scheme]) {\n                this._port = `${temp}`;\n              }\n              buffer = '';\n            }\n            if (stateOverride) {\n              break loop;\n            }\n            state = 'relative path start';\n            continue;\n          } else if (c === '\\t' || c === '\\n' || c === '\\r') {\n            err(`Invalid code point in port: ${c}`);\n          } else {\n            invalid.call(this);\n          }\n          break;\n\n        case 'relative path start':\n          if (c === '\\\\') {\n            err(\"'\\\\' not allowed in path.\");\n          }\n          state = 'relative path';\n          if (c !== '/' && c !== '\\\\') {\n            continue;\n          }\n          break;\n\n        case 'relative path':\n          if (EOF === c || c === '/' || c === '\\\\' ||\n              (!stateOverride && (c === '?' || c === '#'))) {\n            if (c === '\\\\') {\n              err('\\\\ not allowed in relative path.');\n            }\n            const tmp = relativePathDotMapping[buffer.toLowerCase()];\n            if (tmp) {\n              buffer = tmp;\n            }\n            if (buffer === '..') {\n              this._path.pop();\n              if (c !== '/' && c !== '\\\\') {\n                this._path.push('');\n              }\n            } else if (buffer === '.' && c !== '/' && c !== '\\\\') {\n              this._path.push('');\n            } else if (buffer !== '.') {\n              if (this._scheme === 'file' && this._path.length === 0 && buffer.length === 2 &&\n                  ALPHA.test(buffer[0]) && buffer[1] === '|') {\n                buffer = `${buffer[0]}:`;\n              }\n              this._path.push(buffer);\n            }\n            buffer = '';\n            if (c === '?') {\n              this._query = '?';\n              state = 'query';\n            } else if (c === '#') {\n              this._fragment = '#';\n              state = 'fragment';\n            }\n          } else if (c !== '\\t' && c !== '\\n' && c !== '\\r') {\n            buffer += percentEscape(c);\n          }\n          break;\n\n        case 'query':\n          if (!stateOverride && c === '#') {\n            this._fragment = '#';\n            state = 'fragment';\n          } else if (EOF !== c && c !== '\\t' && c !== '\\n' && c !== '\\r') {\n            this._query += percentEscapeQuery(c);\n          }\n          break;\n\n        case 'fragment':\n          if (EOF !== c && c !== '\\t' && c !== '\\n' && c !== '\\r') {\n            this._fragment += c;\n          }\n          break;\n\n        default:\n      }\n\n      cursor++;\n    }\n  }\n\n\n  // Does not process domain names or IP addresses.\n  // Does not handle encoding for the query parameter.\n  /* eslint-disable no-param-reassign */\n  function PolyfillURL(url, base /* , encoding */) {\n    if (base !== undefined && !(base instanceof PolyfillURL)) {\n      base = new PolyfillURL(String(base));\n    }\n\n    url = String(url);\n    this._url = url;\n    clear.call(this);\n\n    const input = url.replace(/^[ \\t\\r\\n\\f]+|[ \\t\\r\\n\\f]+$/g, '');\n    // encoding = encoding || 'utf-8'\n\n    parse.call(this, input, null, base);\n  }\n\n  PolyfillURL.prototype = {\n    toString() {\n      return this.href;\n    },\n    get href() {\n      if (this._isInvalid) { return this._url; }\n\n      let authority = '';\n      if (this._username !== '' || this._password !== null) {\n        authority = `${this._username +\n            (this._password !== null ? `:${this._password}` : '')}@`;\n      }\n\n      return this.protocol +\n          (this._isRelative ? `//${authority}${this.host}` : '') +\n          this.pathname + this._query + this._fragment;\n    },\n    set href(href) {\n      clear.call(this);\n      parse.call(this, href);\n    },\n\n    get protocol() {\n      return `${this._scheme}:`;\n    },\n    set protocol(protocol) {\n      if (this._isInvalid) { return; }\n      parse.call(this, `${protocol}:`, 'scheme start');\n    },\n\n    get host() {\n      if (this._isInvalid) return '';\n      if (this._port) return `${this._host}:${this._port}`;\n      return this._host;\n    },\n    set host(host) {\n      if (this._isInvalid || !this._isRelative) { return; }\n      parse.call(this, host, 'host');\n    },\n\n    get hostname() {\n      return this._host;\n    },\n    set hostname(hostname) {\n      if (this._isInvalid || !this._isRelative) { return; }\n      parse.call(this, hostname, 'hostname');\n    },\n\n    get port() {\n      return this._port;\n    },\n    set port(port) {\n      if (this._isInvalid || !this._isRelative) { return; }\n      parse.call(this, port, 'port');\n    },\n\n    get pathname() {\n      if (this._isInvalid) return '';\n      if (this._isRelative) return `/${this._path.join('/')}`;\n      return this._schemeData;\n    },\n    set pathname(pathname) {\n      if (this._isInvalid || !this._isRelative) { return; }\n      this._path = [];\n      parse.call(this, pathname, 'relative path start');\n    },\n\n    get search() {\n      return this._isInvalid || !this._query || this._query === '?' ?\n          '' : this._query;\n    },\n    set search(search) {\n      if (this._isInvalid || !this._isRelative) { return; }\n      this._query = '?';\n      if (search[0] === '?') { search = search.slice(1); }\n      parse.call(this, search, 'query');\n    },\n\n    get hash() {\n      return this._isInvalid || !this._fragment || this._fragment === '#' ?\n          '' : this._fragment;\n    },\n    set hash(hash) {\n      if (this._isInvalid) { return; }\n      this._fragment = '#';\n      if (hash[0] === '#') { hash = hash.slice(1); }\n      parse.call(this, hash, 'fragment');\n    },\n\n    get origin() {\n      if (this._isInvalid || !this._scheme) {\n        return '';\n      }\n      // javascript: Gecko returns String(\"\"), WebKit/Blink String(\"null\")\n      // Gecko throws error for \"data://\"\n      // data: Gecko returns \"\", Blink returns \"data://\", WebKit returns \"null\"\n      // Gecko returns String(\"\") for file: mailto:\n      // WebKit/Blink returns String(\"SCHEME://\") for file: mailto:\n      switch (this._scheme) {\n        case 'data':\n        case 'file':\n        case 'javascript':\n        case 'mailto':\n          return 'null';\n        default:\n      }\n      const host = this.host;\n      if (!host) {\n        return '';\n      }\n      return `${this._scheme}://${host}`;\n    },\n  };\n\n  // Copy over the static methods\n  const OriginalURL = scope.URL;\n  if (OriginalURL) {\n    PolyfillURL.createObjectURL = function createObjectURL(...args) {\n      // IE extension allows a second optional options argument.\n      // http://msdn.microsoft.com/en-us/library/ie/hh772302(v=vs.85).aspx\n      return OriginalURL.createObjectURL(...args);\n    };\n    PolyfillURL.revokeObjectURL = function revokeObjectURL(url) {\n      OriginalURL.revokeObjectURL(url);\n    };\n  }\n\n  scope.URL = PolyfillURL;\n};\n","/**\n * Copyright (c) 2011-2016 Paul Vorbach and contributors.\n * \n * Permission is hereby granted, free of charge, to any person obtaining \n * a copy of this software and associated documentation files \n * (the Software), to deal in the Software without restriction, \n * including without limitation the rights to use, copy, modify, \n * merge, publish, distribute, sublicense, and/or sell copies of \n * the Software, and to permit persons to whom the Software is \n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included \n * in all copies or substantial portions of the Software.\n * THE SOFTWARE IS PROVIDED AS IS, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n'use strict';\n\n/**\n * The is a local modified version of the clone npm module (https://www.npmjs.com/package/clone).\n * According to its description, it offers a foolproof deep cloning \n * of objects, arrays, numbers, strings, maps, sets, \n * promises, etc. in JavaScript.\n * \n * I refactored it to be compatible with Webpack.\n * Refator List:\n * - update the use of the 'var' keyword to 'let' and 'const' where appropriate.\n * - Made the variable names more clearer and intuitive (clean code)\n * - I used ES6 contants/definitions where possible.\n * \n * Original can be found Here:\n * - On Npm -> https://www.npmjs.com/package/clone\n * - On GitHub -> https://github.com/pvorb/node-clone\n * \n * Created by oodigie on 26/05/2023.\n */\nconst clone = (function() {\n\nfunction _instanceof(obj, type) {\n  return type != null && obj instanceof type;\n}\n\nlet nativeMap;\ntry {\n  nativeMap = Map;\n} catch(_) {\n  // maybe a reference error because no `Map`. Give it a dummy value that no\n  // value will ever be an instanceof.\n  nativeMap = function() {};\n}\n\nlet nativeSet;\ntry {\n  nativeSet = Set;\n} catch(_) {\n  nativeSet = function() {};\n}\n\nlet nativePromise;\ntry {\n  nativePromise = Promise;\n} catch(_) {\n  nativePromise = function() {};\n}\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n * @param `includeNonEnumerable` - set to true if the non-enumerable properties\n *    should be cloned as well. Non-enumerable properties on the prototype\n *    chain will be ignored. (optional - false by default)\n*/\nfunction clone(parent, circular, depth, prototype, includeNonEnumerable) {\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    includeNonEnumerable = circular.includeNonEnumerable;\n    circular = circular.circular;\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  const allParents = [];\n  const allChildren = [];\n\n  const useBuffer = typeof Buffer != 'undefined';\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth === 0)\n      return parent;\n\n    let child;\n    let proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      child = new nativeMap();\n    } else if (_instanceof(parent, nativeSet)) {\n      child = new nativeSet();\n    } else if (_instanceof(parent, nativePromise)) {\n      child = new nativePromise(function (resolve, reject) {\n        parent.then(function(value) {\n          resolve(_clone(value, depth - 1));\n        }, function(err) {\n          reject(_clone(err, depth - 1));\n        });\n      });\n    } else if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\n      if (Buffer.allocUnsafe) {\n        // Node.js >= 4.5.0\n        child = Buffer.allocUnsafe(parent.length);\n      } else {\n        // Older Node.js versions\n        child = new Buffer(parent.length);\n      }\n      parent.copy(child);\n      return child;\n    } else if (_instanceof(parent, Error)) {\n      child = Object.create(parent);\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      const index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      let keyChild, valueChild;\n      parent.forEach(function(value, key) {\n        keyChild = _clone(key, depth - 1);\n        valueChild = _clone(value, depth - 1);\n        child.set(keyChild, valueChild);\n      });\n    }\n    if (_instanceof(parent, nativeSet)) {\n      let entryChild;\n      parent.forEach(function(value) {\n        entryChild = _clone(value, depth - 1);\n        child.add(entryChild);\n      });\n    }\n\n    for (let i in parent) {\n      let attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      const symbols = Object.getOwnPropertySymbols(parent);\n      for (let i = 0; i < symbols.length; i++) {\n        // Don't need to worry about cloning a symbol because it is a primitive,\n        // like a number or string.\n        let symbol = symbols[i];\n        let descriptor = Object.getOwnPropertyDescriptor(parent, symbol);\n        if (descriptor && !descriptor.enumerable && !includeNonEnumerable) {\n          continue;\n        }\n        child[symbol] = _clone(parent[symbol], depth - 1);\n        if (!descriptor.enumerable) {\n          Object.defineProperty(child, symbol, {\n            enumerable: false\n          });\n        }\n      }\n    }\n\n    if (includeNonEnumerable) {\n      const allPropertyNames = Object.getOwnPropertyNames(parent);\n      for (let i = 0; i < allPropertyNames.length; i++) {\n        let propertyName = allPropertyNames[i];\n        let descriptor = Object.getOwnPropertyDescriptor(parent, propertyName);\n        if (descriptor && descriptor.enumerable) {\n          continue;\n        }\n        child[propertyName] = _clone(parent[propertyName], depth - 1);\n        Object.defineProperty(child, propertyName, {\n          enumerable: false\n        });\n      }\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  let emptyCloneFunc = function () {};\n  emptyCloneFunc.prototype = parent;\n  return new emptyCloneFunc();\n};\n\n// private utility functions\n\nfunction __objToStr(obj) {\n  return Object.prototype.toString.call(obj);\n}\nclone.__objToStr = __objToStr;\n\nfunction __isDate(obj) {\n  return typeof obj === 'object' && __objToStr(obj) === '[object Date]';\n}\nclone.__isDate = __isDate;\n\nfunction __isArray(obj) {\n  return typeof obj === 'object' && __objToStr(obj) === '[object Array]';\n}\nclone.__isArray = __isArray;\n\nfunction __isRegExp(obj) {\n  return typeof obj === 'object' && __objToStr(obj) === '[object RegExp]';\n}\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(regExpOptions) {\n  let flags = '';\n  if (regExpOptions.global) flags += 'g';\n  if (regExpOptions.ignoreCase) flags += 'i';\n  if (regExpOptions.multiline) flags += 'm';\n  return flags;\n}\nclone.__getRegExpFlags = __getRegExpFlags;\n\nreturn clone;\n\n})();\n\nmodule.exports = clone;\n","\nconst WINDOWS_VERSION_MAP = {\n  '6.4':  '10.0',\n  '6.3':  '8.1',\n  '6.2':  '8',\n  '6.1':  '7',\n  '6.0':  'Vista',\n  '5.2':  'Server 2003',\n  '5.1':  'XP',\n  '5.01': '2000 SP1',\n  '5.0':  '2000',\n  '4.0':  '4.0',\n};\n\nconst NODE_OS_TYPES = {\n  Darwin:     'OSX',\n  Windows_NT: 'Windows',\n};\n\nconst context = typeof window !== 'undefined' ? window : global;\n\nconst DEFAULT = {\n};\n\nconst NODE_PROCESS = {\n  product:  'solclientjs',\n  platform: 'node',\n  agent:    'node',\n  process:  context.process,\n};\n\n// Worst case fallbacks\nconst BROWSER_PROCESS = {\n  product:  'solclientjs',\n  platform: 'unknown',\n  agent:    'Gecko',\n};\n\nfunction getBrowserAgentInfo() {\n  /* eslint-env browser */\n  const navObj = typeof navigator !== 'undefined' ? navigator : null;\n  if (!navObj) return null;\n  const agentStr = navigator.userAgent;\n\n  // Execute these regex checks against the user agent string in this order.\n  // The earlier browsers have a lot of impersonation substrings in their user\n  // agent list so we positively test for them before considering the browsers\n  // that are frequently impersonated.\n  const browsers = [\n    ['edge', /Edge\\/([0-9._]+)/],\n    ['chrome', /(?!Chrom.*OPR)Chrom(?:e|ium)\\/([0-9.]+)(:?\\s|$)/],\n    ['firefox', /Firefox\\/([0-9.]+)(?:\\s|$)/],\n    ['opera', /Opera\\/([0-9.]+)(?:\\s|$)/],\n    ['opera', /OPR\\/([0-9.]+)(:?\\s|$)$/],\n    ['ie', /Trident\\/7\\.0.*rv:([0-9.]+).*\\).*Gecko$/],\n    ['ie', /MSIE\\s([0-9.]+);.*Trident\\/[4-8].0/], // Edit: IE11 in IE9 emu mode uses Trident 8\n    ['ie', /MSIE\\s(7\\.0)/],\n    ['bb10', /BB10;\\sTouch.*Version\\/([0-9.]+)/],\n    ['android', /Android\\s([0-9.]+)/],\n    ['ios', /Version\\/([0-9._]+).*Mobile.*Safari.*/],\n    ['safari', /Version\\/([0-9._]+).*Safari/],\n  ];\n\n  const agentInfo = {\n    browser:  { name: 'unknown', version: '0.0.0' },\n    platform: { os: 'unknown', arch: 'unknown', version: 'unknown' },\n  };\n\n  const agentHas = (...strs) => strs.some(str => agentStr.indexOf(str) >= 0);\n  const firstValue = (...vals) => vals.filter(Boolean).shift();\n\n  Object.assign(\n    agentInfo, // start with fallbacks above\n    // 1. Run the callback below for each browser name/regex-rule pair.\n    // 2. Decompose the pair into variables called `key` and `rule`.\n    browsers.map(([key, rule]) => {\n      // 3. Skip if the rule doesn't match the user agent string.\n      if (!rule.test(agentStr)) return false;\n      // 4. Get the matches for the rule.\n      const match = rule.exec(agentStr);\n      // 5. Extract the version from match group 1.\n      const versionStrs = match && match[1].split(/[._]/).slice(0, 3);\n      // 6. Convert the version strings to numbers.\n      const version = versionStrs.map(str => parseInt(str, 10));\n      // 7. Ensure our version tuple is length 3 by appending 0 elements.\n      while (version.length < 3) version.push(0);\n      // 8. Return an agentInfo object in the same form as above, consuming the version array.\n      return { browser: { name: key, version: version.join('.') } };\n    }).filter(Boolean).shift()); // 9. Filter out anything that returned `false` (#3)...\n    // 10. ...and return the first element.\n\n  // Now try to extract platform info\n  const os = firstValue(\n    agentHas('Windows Phone') && 'WindowsPhone',\n    agentHas('Windows') && 'Windows',\n    agentHas('Linux') && 'Linux',\n    agentHas('like Mac OS X') && 'iOS',\n    agentHas('OS X') && 'OSX',\n    agentHas('Android', 'Adr') && 'Android',\n    agentHas('BB10', 'RIM Tablet OS', 'BlackBerry') && 'BlackBerry'\n  );\n  const versionTests = {\n    'Windows': () => firstValue(\n      agentHas('Win16') && '3.1.1',\n      agentHas('Windows CE') && 'CE',\n      agentHas('Windows 95') && '4.00.950',\n      agentHas('Windows 98; Win 9x 4.90') && '4.90',\n      agentHas('Windows 98') && '4.10',\n      (() => {\n        // Look in the first set of parentheses for a version string key.\n        // This will fail when Windows 16 comes out\n        const parenParts = agentStr.match(/\\(.+?\\)/);\n        const versionPart = parenParts[0];\n        if (!versionPart) return false;\n        const versionMatch = str => versionPart.indexOf(str) >= 0;\n        return firstValue(...Object.keys(WINDOWS_VERSION_MAP).map(k =>\n            versionMatch(k) && WINDOWS_VERSION_MAP[k]));\n      })()\n    ),\n    'OSX':        () => agentStr.match(/OS X ((\\d+[._])+\\d+)\\b/)[1],\n    'Linux':      () => '',\n    'iOS':        () => agentStr.match(/OS ((\\d+[._])+\\d+) like Mac OS X/)[1],\n    'Android':    () => agentStr.match(/(?:Android|Adr) ((\\d+[._])+\\d_)/)[1],\n    'BlackBerry': () => agentStr.match(/(?:Version\\/|RIM Tablet OS )((\\d+\\.)+\\d+)/)[1],\n  };\n  const versionTest = versionTests[os];\n  agentInfo.platform.os = os || 'Unknown';\n  agentInfo.platform.version = (versionTest && versionTest() || '0.0.0').replace(/_/g, '.');\n  return agentInfo;\n}\n/* eslint-env shared-browser-node */\n\ntry {\n  if (BUILD_ENV.TARGET_BROWSER && context.navigator) {\n    // These are historical defaults\n    const safeEncode = str => str.replace(/[^a-zA-Z0-9_/.]/g, '-');\n    Object.assign(BROWSER_PROCESS, {\n      platform:    context.navigator.platform,\n      agent:       context.navigator.product,\n      description: safeEncode(context.navigator.userAgent),\n      navigator:   context.navigator,\n    });\n    const browserAgentInfo = getBrowserAgentInfo();\n    if (browserAgentInfo) {\n      BROWSER_PROCESS.agent = safeEncode(`${browserAgentInfo.browser.name\n                                           }-${browserAgentInfo.browser.version}`);\n      BROWSER_PROCESS.platform = `${BROWSER_PROCESS.agent}-${safeEncode(\n        `${browserAgentInfo.platform.os}-${browserAgentInfo.platform.version}`)}`;\n    }\n  }\n  if (BUILD_ENV.TARGET_NODE && context.process) {\n  //if (false) {\n    const os = require('os'); // eslint-disable-line global-require\n    const ostype = os.type();\n    const osname = NODE_OS_TYPES[ostype] || ostype || 'unknown';\n    const nodeVersionStr = `node-${process.version.substr(1)}`;\n    Object.assign(NODE_PROCESS, {\n      platform:    `${nodeVersionStr}-${osname}-${os.release()}-${os.arch()}`,\n      agent:       nodeVersionStr,\n      description: nodeVersionStr,\n    });\n  }\n} catch (ex) {\n  // Fall back to defaults\n}\n\nconst Process = Object.assign({}, DEFAULT,\n                              BUILD_ENV.TARGET_BROWSER ? BROWSER_PROCESS : {},\n                              BUILD_ENV.TARGET_NODE ? NODE_PROCESS : {});\n\nmodule.exports.Process = Process;\n","/**\n * This class is used to efficiently concatenate strings.\n * @private\n */\nclass StringBuffer {\n  /**\n   * @constructor\n   * @param {...*} args Initial buffer contents\n   * @private\n   */\n  constructor(...args) {\n    this.clear();\n    this.append(...args);\n  }\n\n  /**\n   * Appends the given strings to the buffer\n   *\n   * @param {...*} args Objects to add to the buffer. These are immediately\n   *                    coerced to strings.\n   * @returns {StringBuffer} this\n   */\n  append(...args) {\n    [...args].forEach((arg) => {\n      this.buffer[this.index++] = String(arg);\n    });\n    return this;\n  }\n\n  /**\n   * Resets the buffer.\n   */\n  clear() {\n    this.buffer = [];\n    this.index = 0;\n  }\n\n  /**\n   * Returns the buffer as a string. Additional concatenations and renderings\n   * can be performed.\n   * @returns {String} The buffer's contents concatenated to a string.\n   */\n  toString() {\n    return this.buffer.join('');\n  }\n}\n\nmodule.exports.StringBuffer = StringBuffer;\n","const { StringBuffer } = require('./string-buffer');\n\nconst PAD_LEFT = 0;\nconst PAD_RIGHT = 1;\n\nconst LUT_PRINTABLE = (() => {\n  const tmp = [];\n  for (let c = 0; c < 256; ++c) {\n    tmp[c] = (c < 33 || c > 126) ? '.' : String.fromCharCode(c);\n  }\n  return tmp;\n})();\n\nfunction padLeftRight(str, minLen, padSide, padChar = ' ') {\n  if (typeof str !== 'string') {\n    return str;\n  }\n  if (str.length >= minLen) {\n    return str;\n  }\n\n  const buf = new StringBuffer();\n  for (let i = 0; i < (minLen - str.length); i++) {\n    buf.append(padChar.charAt(0));\n  }\n  switch (padSide) {\n    case PAD_LEFT:\n      return `${buf}${str}`;\n    case PAD_RIGHT:\n      return `${str}${buf}`;\n    default:\n      return str;\n  }\n}\n\nfunction leastSpaces(length, line) {\n  if (!line.length) return length;\n  const spaces = line.match(/^\\s*/)[0].length;\n  return spaces < length ? spaces : length;\n}\n\nfunction capitalizeWord(str) {\n  return `${str.charAt(0).toUpperCase()}${str.substr(1)}`;\n}\n\nfunction isEmptyFun(str) {\n  return (\n    str === undefined ||\n    str === null ||\n    str.length === 0\n  );\n}\n\n/**\n * @private\n * @type {StringUtils}\n */\nconst StringUtils = {};\n\nStringUtils.capitalize = function capitalize(str) {\n  if (!(str && str.length)) {\n    return str;\n  }\n\n  return str.split(' ').map(capitalizeWord).join(' ');\n};\n\nStringUtils.isEmpty = isEmptyFun;\n\nStringUtils.notEmpty = function notEmpty(str) {\n  return !(isEmptyFun(str));\n};\n\nStringUtils.toSafeChars = function toSafeChars(str) {\n  return str.replace(/[^a-zA-Z0-9_/.]/g, '');\n};\n\nStringUtils.padLeft = function padLeft(str, minLen, padChar) {\n  return padLeftRight(str, minLen, PAD_LEFT, padChar);\n};\n\nStringUtils.padRight = function padRight(str, minLen, padChar) {\n  return padLeftRight(str, minLen, PAD_RIGHT, padChar);\n};\n\nStringUtils.nullTerminate = function nullTerminate(str) {\n  if (str === null || str === undefined) {\n    throw new Error('non str in nullTerminate');\n  }\n  const lastChar = str.charCodeAt(str.length - 1);\n  if (lastChar === 0) {\n    return str;\n  }\n  return str + String.fromCharCode(0x00);\n};\n\nStringUtils.stripNullTerminate = function stripNullTerminate(str) {\n  if (str === null || str === undefined) {\n    throw new Error('null str in stripNullTerminate');\n  }\n  const lastChar = str.charCodeAt(str.length - 1);\n  if (lastChar === 0) {\n    return str.substr(0, str.length - 1);\n  }\n  return str;\n};\n\nStringUtils.hexdump = function hexdump(s) {\n  const output = new StringBuffer();\n  const printable = new StringBuffer();\n  const spacer = pos => (pos === 8 || pos === 16 ? '  ' : ' ');\n  let linelen = 0;\n  for (let i = 0, sLength = s.length; i < sLength; i++) {\n    const ccode = s.charCodeAt(i);\n    output.append(padLeftRight(ccode.toString(16), 2, PAD_LEFT));\n    printable.append(LUT_PRINTABLE[ccode] || '.');\n    output.append(spacer(++linelen));\n\n    if (i === s.length - 1) {\n      // input finished: complete the line\n      while (linelen < 16) {\n        output.append(`  ${spacer(++linelen)}`);\n      }\n    }\n\n    if (linelen === 16) {\n      output.append(printable.join(''));\n      output.append('\\n');\n      linelen = 0;\n      printable.clear();\n    }\n  }\n  return output.toString();\n};\n\n/**\n * Use heredoc`....` to create multi-line heredoc strings. Leading blank lines are removed, as are\n * leading spaces, up to the number of spaces on the least-indented line.\n * @param {String} literals The document template\n * @param {...String} substitutions The substitutions to make in the document\n * @returns {String} The interpolated representation of the document\n */\nStringUtils.heredoc = function heredoc(literals, ...substitutions) {\n  const subst = [...substitutions, ''];\n  const lines = literals.map(k => k + subst.shift())\n    .join('')\n    .split(/\\r?\\n/);\n  const spaces = lines.length === 1 ? 0 : lines.reduce(leastSpaces, Infinity);\n  while (lines[0] === '') {\n    lines.shift();\n  }\n  return lines.map(line => line.substring(spaces)).join('\\n');\n};\n\n\nmodule.exports.StringUtils = StringUtils;\n","class TimingBucket {\n  constructor(name, interval) {\n    this.name = name;\n    this.interval = interval;\n    this.buckets = [];\n  }\n\n  get bucketCount() {\n    let c = 0;\n    for (let i = 0, n = this.buckets.length; i < n; ++i) {\n      c += this.buckets[i] || 0;\n    }\n    return c;\n  }\n\n  log(v) {\n    if (v === undefined || isNaN(v)) {\n      return;\n    }\n    const normalized = Math.floor(v / this.interval) * this.interval;\n    this.buckets[normalized] = this.buckets[normalized] || 0;\n    this.buckets[normalized]++;\n  }\n\n  toString() {\n    const cont = [];\n    this.buckets.forEach((i) => {\n      cont.push(`${i}: ${this.buckets[i]}`);\n    });\n    return `{${cont.join(', ')}}`;\n  }\n}\n\nmodule.exports.TimingBucket = TimingBucket;\n","/* eslint-disable global-require */\nlet parseURL;\nif (BUILD_ENV.TARGET_NODE) {\n  /* eslint-env node */\n  parseURL = require('url').parse;\n} else {\n  /* eslint-env browser */\n  const scope = typeof window !== 'undefined' ? window : this;\n  require('./browser-url-polyfill')(scope);\n  parseURL = function makeURL(...args) {\n    return new URL(...args);\n  };\n}\n\nmodule.exports.parseURL = parseURL;\n","function generateUUID() { // Public Domain/MIT\n  let d = new Date().getTime();\n  // if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n  //   d += performance.now(); //use high-precision timer if available\n  // }\n\n\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    const r = (d + Math.random() * 16) % 16 | 0;\n    d = Math.floor(d / 16);\n    return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n  });\n}\n\nmodule.exports.UUID = {\n  generateUUID,\n};\n","// Coverity scanned is configured to run against the generated monolithic\n// solclient.js file (debug) version. On the loadbuild server BUILD_ENV.VERSION is\n// substituted and never null (it is null in developer workspace) so\n// coverity will complain that the \" || '0.0.0-source' \" is DEADCODE\n// coverity[dead_error_line]\nconst VERSION = BUILD_ENV.VERSION || '0.0.0-source';\n// Parse the date if provided. Was seeing NaN formatted dates in source mode, so add fallback\nconst DATE = BUILD_ENV.DATE\n  ? new Date(Date.parse(BUILD_ENV.DATE))\n  : new Date();\nconst MODE = BUILD_ENV.MODE_NAME;\n\n// These property names are all for export, so make sure they're not mangled\nconst TARGET = {\n  'name':    BUILD_ENV.TARGET_NAME,\n  'node':    BUILD_ENV.TARGET_NODE,\n  'browser': BUILD_ENV.TARGET_BROWSER,\n};\n\nconst FORMATTED_DATE = (() => {\n  const pad = n => (n < 10 ? `0${n}` : n);\n  const d = DATE;\n  const YYYY = d.getFullYear();\n  const MM = pad(d.getMonth() + 1);\n  const DD = pad(d.getDate());\n  const hh = pad(d.getHours());\n  const mm = pad(d.getMinutes());\n  return `${YYYY}/${MM}/${DD} ${hh}:${mm}`;\n})();\nconst SUMMARY = ['SolclientJS', BUILD_ENV.VERSION, MODE, FORMATTED_DATE].join(', ');\n\n/**\n * Returns the API version. Use version, date and mode properties for build details.\n * Use the summary property or the .toString() method to return a summary.\n * @static\n * @type {Object}\n * @namespace\n * @memberof solace\n */\nconst Version = {\n  /**\n   * The API version, as an informational string. The format of this string is subject to change.\n   * @type {String}\n   */\n  'version':       VERSION,\n  /**\n   * The API build date.\n   * @type {Date}\n   */\n  'date':          DATE,\n  /**\n   * The API build date, as a formatted string.\n   * The format of this date is:\n   * `YYYY-MM-DD hh:mm`\n   * where\n   *  * `YYYY` is the 4-digit year,\n   *  * `MM` is the 2-digit month   (01-12),\n   *  * `DD` is the 2-digit day     (01-31),\n   *  * `hh` is the 2-digit hour    (00-23),\n   *  * `mm` is the 2-digit minute  (00-59)\n   *\n   * @type {String}\n   */\n  'formattedDate': FORMATTED_DATE,\n  /**\n   * Information about the build target. This object is informational; its type, structure and\n   * content are subject to change.\n   * @type {Object}\n   */\n  'target':        TARGET,\n  /**\n   * The build mode. This may be one of 'debug' or 'release'. Other build modes may be added\n   * in the future.\n   * @type {String}\n   */\n  'mode':          MODE,\n  /**\n   * If `true`, this is an unoptimized debug build.\n   * @type {Boolean}\n   */\n  'debug':         BUILD_ENV.MODE_DEBUG,\n  /**\n   * If `true`, this is an optimized release build. Note that there may be multiple release\n   * builds in a distribution, with varying degrees of optimization.\n   * @type {Boolean}\n   */\n  'release':       BUILD_ENV.MODE_RELEASE,\n  /**\n   * An informational string summarizing the API name, version and build date.\n   * @type {String}\n   */\n  'summary':       SUMMARY,\n\n  toString() {\n    return SUMMARY;\n  },\n};\nmodule.exports.Version = Version;\n","const { Check } = require('./lib/check');\nconst { Parameter } = require('./lib/parameter');\n\nmodule.exports.Check = Check;\nmodule.exports.Parameter = Parameter;\n","const EPSILON = 1e6;\n\n/**\n * @param {Array} arr The array to flatten\n * @returns {Array} A maximally flattened array. The original array is not modified.\n * @private\n */\nfunction flatten(arr) {\n  return arr.reduce((a, b) => a.concat(Array.isArray(b) ? flatten(b) : b), []);\n}\n\n/**\n * @private\n */\nconst BaseChecks = (() => {\n  const result = {\n    /**\n     * Checks whether a value is undefined or null.\n     *\n     * @param   {*} value The value to check.\n     *\n     * @returns {Boolean} True if the value is undefined or null.\n     *\n     * @private\n     */\n    nothing(value) {\n      return (value === undefined || value === null);\n    },\n\n    /**\n     * Checks whether a value is anything, i.e. not undefined or null.\n     *\n     * @param   {*} value The value to check.\n     *\n     * @returns {Boolean} True unless the value is undefined or null.\n     *\n     * @private\n     */\n    anything(value) {\n      return !BaseChecks.nothing(value);\n    },\n\n    /**\n     * Checks whether a value is undefined. Uses the conservative\n     * typeof check for compatibility with particularly ill-behaved\n     * libraries that redefine <code>undefined</code>.\n     *\n     * @param   {*} value The value to check.\n     *\n     * @returns {Boolean} True if the value is undefined.\n     *\n     * @private\n     */\n    undefined(value) {\n      return typeof value === 'undefined';\n    },\n\n    /**\n     * Checks whether a value is defined. This is true for any value with\n     * a type that is not 'undefined'.\n     *\n     * @param {any} value The value to check\n     * @returns {Boolean} True if the value is defined.\n     *\n     * @private\n     */\n    defined(value) {\n      return !BaseChecks.undefined(value);\n    },\n\n    /**\n     * Checks whether a value is an array.\n     *\n     * @param   {*} value The value to check.\n     *\n     * @returns {Boolean} True if the value is an array.\n     *\n     * @private\n     */\n    array(value) {\n      return BaseChecks.anything(value) && Array.isArray(value);\n    },\n\n    /**\n     * Checks whether a value is an object. If a value is an array, it is not an object.\n     * If a value is null, it is not an object.\n     *\n     * @param   {*} value The value to check.\n     *\n     * @returns {Boolean} True if the value is an object (and not an array).\n     *\n     * @private\n     */\n    object(value) {\n      return (!BaseChecks.array(value) &&\n              value !== null &&\n              (typeof value === 'object' || value instanceof Object));\n    },\n\n    /**\n     * Checks whether a value is an instance of the given type.\n     *\n     * @param   {*} val The value to check.\n     * @param   {Object} type The type to check.\n     *\n     * @returns {Boolean} True if type is in value's prototype chain.\n     *\n     * @private\n     */\n    instanceOf(val, type) {\n      return BaseChecks.object(val) && val instanceof type;\n    },\n\n    /**\n     * Checks whether a value's typeof is equal to the given type string.\n     *\n     * @param {*} val The value to check.\n     * @param {String} type The type string for comparison.\n     *\n     * @returns {Boolean} True if typeof(val) == type\n     *\n     * @private\n     */\n    type(val, type) {\n      return typeof val === type; /* dynamic */ // eslint-disable-line valid-typeof\n    },\n\n    /**\n     * Checks whether a value is an instance of any of the given types.\n     *\n     * @param   {*} val The value to check.\n     * @param   {Object} types The types to check.\n     *\n     * @returns {Boolean} True if any element of types is in val's prototype chain.\n     *\n     * @private\n     */\n    instanceOfAny(val, ...types) {\n      return (BaseChecks.array(types) &&\n              flatten(types).some(type => BaseChecks.instanceOf(val, type)));\n    },\n\n    /**\n     * Checks whether the given value is empty.\n     *\n     * Emptiness is determined using the following checks:\n     *\n     * <ol>\n     *  <li>If an object is nothing, it is empty.</li>\n     *  <li>If it is an object, and it has no keys of its own, it is empty.</li>\n     *  <li>If it has a length property, it is empty if length === 0.</li>\n     *  <li>If none of the above apply, the object is not empty.</li>\n     * </ol>\n     *\n     * @param   {*} val The value to check.\n     *\n     * @returns {Boolean} True if the value is empty.\n     *\n     * @private\n     */\n    empty(val) {\n      if (BaseChecks.nothing(val)) return true;\n      if (BaseChecks.object(val)) {\n        if (Object.keys(val).length === 0) {\n          return true;\n        }\n      }\n      if (val.length === 0) {\n        return true;\n      }\n      return false;\n    },\n\n    /**\n     * A user-defined check.\n     *\n     * @param   {*} val The value to check\n     * @param   {Function} fn The function(val) to use.\n     *\n     * @returns {Boolean} The result of the function, coerced to a boolean.\n     *\n     * @private\n     */\n    truthy(val, fn) {\n      return !!fn(val);\n    },\n\n    rangeGe(val, rangeMinInclusive) {\n      return val >= rangeMinInclusive;\n    },\n\n    rangeGt(val, rangeMin) {\n      return val > rangeMin;\n    },\n\n    rangeLe(val, rangeMaxInclusive) {\n      return val <= rangeMaxInclusive;\n    },\n\n    rangeLt(val, rangeMax) {\n      return val < rangeMax;\n    },\n\n    rangeCompare(val, operator, operand, ...args) {\n      switch (operator) {\n        case '=':\n        case '==':\n        case '===':\n          return val === operand;\n        case '~=':\n        case '=~':\n          {\n            const epsilon = args[0] || EPSILON;\n            return Math.abs(val - operand) < epsilon;\n          }\n        case '<':\n          return val < operand;\n        case '<=':\n          return val <= operand;\n        case '>':\n          return val > operand;\n        case '>=':\n          return val >= operand;\n        default:\n          throw new Error(`Illegal operator for rangeCompare: ${operator}`);\n      }\n    },\n\n    NaN(val) {\n      return Number.isNaN(val);\n    },\n\n    /**\n     * Checks whether val is included in the object. If obj is an array, val is included if\n     * val is an element of the array. Otherwise, if obj is an object, val is included if\n     * val is one of the keys of obj.\n     *\n     * @param   {*} val The value to test\n     * @param   {*} obj The object to test\n     *\n     * @returns {Boolean} True if the value is included in the object\n     */\n    included(val, obj) {\n      if (BaseChecks.nothing(obj)) {\n        return false;\n      }\n      if (obj.includes) {\n        return obj.includes(val);\n      }\n      if (Array.isArray(obj)) {\n        // Not exactly Array.prototype.includes, which uses SameValueZero (+0 == -0)\n        return obj.indexOf(val) >= 0;\n      }\n      if (BaseChecks.object(obj)) {\n        const keys = Object.keys(obj);\n        return BaseChecks.included(val, keys);\n      }\n      return false;\n    },\n\n    /**\n     * Checks whether val is equal to expected.\n     *\n     * @param {any} val The value to check.\n     * @param {any} expected The expected value.\n     * @returns {Boolean} True if the value was equal to the expected value.\n     */\n    equal(val, expected) {\n      return val === expected;\n    },\n\n    /**\n     * Checks whether the given value appears as an attribute value in the given attributes object,\n     * e.g. whether an enumeration contains the given value. If the attributes object is an array,\n     * the array membership check {@link #included} is used instead.\n     *\n     * @param   {*} val The value to check.\n     * @param   {Object} obj The object with attributes to check.\n     *\n     * @returns {Boolean} True if attrs has any attribute equal to val.\n     */\n    member(val, obj) {\n      return (BaseChecks.anything(obj) &&\n              (BaseChecks.array(obj)\n                ? BaseChecks.included(val, obj)\n                : Object.keys(obj).some(k => obj[k] === val))\n      );\n    },\n\n    boolean(v) {\n      return BaseChecks.type(v, 'boolean');\n    },\n\n    number(v) {\n      return BaseChecks.type(v, 'number');\n    },\n\n    string(v) {\n      return BaseChecks.type(v, 'string');\n    },\n\n    function(v) {\n      return BaseChecks.type(v, 'function');\n    },\n  };\n\n  /**\n   * Checks whether an object is none. This is the same check as <code>nothing</code>\n   * @see {@link nothing}\n   */\n  result.none = result.nothing;\n\n  /**\n   * Checks whether an object is something. This is the same check as <code>anything</code>\n   */\n  result.something = result.anything;\n\n  // Add check-loosening suffixes, (t | null), (t | undefined) and (t | null | undefined).\n  // Do the t check last, just in case it is not (null | undefined) safe.\n  Object.keys(result).forEach((key) => {\n    /**\n     * .orNull checks. These are equivalent to the similarly named check, but also pass if the value\n     * supplied was equal to null.\n     *\n     * @param {*} val The value to check.\n     * @param {*} args The arguments to forward to the base validator.\n     *\n     * @returns {Boolean} True if the value was null or passed the similarly named validator.\n     */\n    result[key].orNull = function orNull(val, ...args) {\n      return val === null || result[key](val, ...args);\n    };\n\n    /**\n     * .orUndefined checks. These are equivalent to the similarly named check, but also pass if the\n     * value supplied was equal to null.\n     *\n     * @param {*} val The value to check.\n     * @param {*} args The arguments to forward to the base validator.\n     *\n     * @returns {Boolean} True if the value was null or passed the similarly named validator.\n     */\n    result[key].orUndefined = function orUndefined(val, ...args) {\n      return val === undefined || result[key](val, ...args);\n    };\n\n    /**\n     * .orNothing checks. These are equivalent to the similarly named check, but also pass if the\n     * value supplied was null or undefined.\n     *\n     * @param {*} val The value to check.\n     * @param {*} args The arguments to forward to the base validator.\n     *\n     * @returns {Boolean} True if the value was null or passed the similarly named validator.\n     */\n    result[key].orNothing = function orNothing(val, ...args) {\n      return result.nothing(val) || result[key](val, ...args);\n    };\n  });\n\n  return result;\n})();\n\nmodule.exports.BaseChecks = BaseChecks;\n","const { BaseChecks } = require('./base-checks');\n\n/**\n *\n * Generates a then closure.\n *\n * @param {Boolean} doOp Whether the returned then function should call its argument.\n * @returns {Object} An object { then(fn, elseFn=undefined) }. If doOp was true, then(fn) will\n *                      call fn. If not, elseFn will be called if supplied.\n * @private\n */\nfunction thenGen(doOp) {\n  return {\n    then: doOp ? f => f() : (_, elseFn) => elseFn(),\n  };\n}\n\n/**\n *\n * none, anything, boolean, ... @returns {Boolean}\n * when(condition) @returns then(fn, elseFn) => if condition fn() else elseFn && elseFn()\n * unless(condition, else) @returns then(fn, elseFn) => if !condition fn() else elseFn && elseFn\n * whenNone, whenAnything, whenBoolean, ... @returns {function} then(fn, elseFn)\n * unlessNone, unlessAnything, unlessBoolean ... @returns {function} unless(fn, elseFn)\n * @private\n */\nconst Check = (() => {\n  const result = Object.assign({}, BaseChecks);\n  result.when = condition => thenGen(condition);\n  result.unless = condition => thenGen(!condition);\n  return result;\n})();\n\nmodule.exports.Check = Check;\n","const { Check } = require('./check');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\n\nconst NO_OBJ = {}; // anonymous object\n\nfunction objectValues(object) {\n  return Object.keys(object).map(k => object[k]);\n}\n\nfunction subcodeSummary(subcode, expected = null, got = NO_OBJ) {\n  const expectedStr = expected ? `; expected: ${expected}` : '';\n  const gotStr = got !== NO_OBJ ? `; got: ${got}` : '';\n  switch (subcode) {\n    case ErrorSubcode.PARAMETER_INVALID_TYPE:\n      return `Parameter type was invalid${expectedStr}${gotStr}`;\n    default:\n      return ErrorSubcode.nameOf(subcode).toLowerCase().replace(/_/, ' ') + expectedStr;\n  }\n}\n\nfunction validateError(name, subcode, message) {\n  throw new OperationError(`Parameter ${name} failed validation`, subcode, message);\n}\n\nfunction validate(name, subcode, message, check, value, ...validatorArgs) {\n  if (!check(value, ...validatorArgs)) {\n    return validateError(name, subcode, message);\n  }\n  return value;\n}\n\nconst typename = x => x && x.constructor && x.constructor.name || typeof x;\n\n/**\n * The Check object is a powerful validation API but it is partially built at runtime by composing\n * functions, and it requires significant boilerplate for parameter validation.\n *\n * The Parameter API expresses concrete validations using the Check API, returning values on success\n * and throwing the appropriate SDK exception on failure. It would be tempting to try to\n * automatically build a Parameter method for every Check method, but this would make Parameter\n * difficult to understand and use.\n *\n * @private\n */\nconst Parameter = {};\n\nParameter.isArray = function isArray(name, value, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, 'array', value)) {\n  return validate(name, subcode, message, Check.isArray, value);\n};\n\nParameter.isBoolean =\nfunction isBoolean(name, value, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, 'boolean', value)) {\n  return validate(name, subcode, message, Check.boolean, value);\n};\n\nParameter.isBooleanOrNothing =\nfunction isBooleanOrNothing(name, value, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, 'boolean or nothing', value)) {\n  return validate(name, subcode, message, Check.boolean.orNothing, value);\n};\n\nParameter.isEnumMember =\nfunction isEnumMember(name, value, memberOfEnum, subcode = ErrorSubcode.PARAMETER_OUT_OF_RANGE, message = subcodeSummary(subcode, `one of [${memberOfEnum.names.join(', ')}]`, value)) {\n  return validate(name, subcode, message, Check.member, value, memberOfEnum);\n};\n\nParameter.isEnumMemberOrNothing =\nfunction isEnumMemberOrNothing(name, value, memberOfEnum, subcode = ErrorSubcode.PARAMETER_OUT_OF_RANGE, message = subcodeSummary(subcode, `one of [${memberOfEnum.names.join(', ')}]`, value)) {\n  return validate(name, subcode, message, Check.member.orNothing, value, memberOfEnum);\n};\n\nParameter.isFunction =\nfunction isFunction(name, value, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, 'function', value)) {\n  return validate(name, subcode, message, Check.function, value);\n};\n\nParameter.isFunctionOrNothing =\nfunction isFunctionOrNothing(name, value, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, 'function or nothing', value)) {\n  return validate(name, subcode, message, Check.function.orNothing, value);\n};\n\nParameter.isInstanceOf =\nfunction isInstanceOf(name, value, instanceOf, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE,\n                      message = subcodeSummary(subcode, instanceOf.name, typename(value))) {\n  return validate(name, subcode, message, Check.instanceOf, value, instanceOf);\n};\n\nParameter.isInstanceOfOrNothing =\nfunction isInstanceOfOrNothing(name, value, instanceOf, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, `${instanceOf.name} or nothing`, typename(value))) {\n  return validate(name, subcode, message, Check.instanceOf.orNothing, value, instanceOf);\n};\n\nParameter.isInstanceOfOrNull =\nfunction isInstanceOfOrNull(name, value, instanceOf, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, `${instanceOf.name} or null`, typename(value))) {\n  return validate(name, subcode, message, Check.instanceOf.orNull, value, instanceOf);\n};\n\nParameter.isInstanceOfOrUndefined =\nfunction isInstanceOfOrUndefined(name, value, instanceOf, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, `${instanceOf.name} or undefined`, typename(value))) {\n  return validate(name, subcode, message, Check.instanceOf.orUndefined, value, instanceOf);\n};\n\nParameter.isMember =\nfunction isMember(name, value, memberOf, subcode = ErrorSubcode.PARAMETER_OUT_OF_RANGE, message = subcodeSummary(subcode, `one of ${memberOf.name}.[${objectValues(memberOf).join(', ')}]`, value)) {\n  return validate(name, subcode, message, Check.member, value, memberOf);\n};\n\nParameter.isNumber =\nfunction isNumber(name, value, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, 'number', value)) {\n  return validate(name, subcode, message, Check.number, value);\n};\n\nParameter.isNumberOrNothing =\nfunction isNumberOrNothing(name, value, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, 'number or nothing', value)) {\n  return validate(name, subcode, message, Check.number.orNothing, value);\n};\n\nParameter.isNumberOrNull =\nfunction isNumberOrNull(name, value, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, 'number or null', value)) {\n  return validate(name, subcode, message, Check.number.orNull, value);\n};\n\nParameter.isRangeCompare =\nfunction isRangeCompare(name, value, operator, operand, subcode = ErrorSubcode.PARAMETER_OUT_OF_RANGE, message = subcodeSummary(subcode, `${operator} ${operand}`, value)) {\n  return validate(name, subcode, message, Check.rangeCompare, value, operator, operand);\n};\n\nParameter.isRangeCompareOrNothing = function isRangeCompareOrNothing(name, value, operator, operand, subcode = ErrorSubcode.PARAMETER_OUT_OF_RANGE, message = subcodeSummary(subcode, `${operator} ${operand} or nothing`, value)) {\n  return validate(name, subcode, message, Check.rangeCompare.orNothing, value, operator, operand);\n};\n\nParameter.isStringOrNull =\nfunction isStringOrNull(name, value, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, 'string or null', value)) {\n  return validate(name, subcode, message, Check.string.orNull, value);\n};\n\n\nParameter.isString =\nfunction isString(name, value, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, 'string', value)) {\n  return validate(name, subcode, message, Check.string, value);\n};\n\nParameter.isStringOrNothing =\nfunction isStringOrNothing(name, value, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, 'string or nothing', value)) {\n  return validate(name, subcode, message, Check.string.orNothing, value);\n};\n\nParameter.isValue =\nfunction isValue(name, value, expected, subcode = ErrorSubcode.PARAMETER_OUT_OF_RANGE, message = subcodeSummary(subcode, `must be ${value}`)) {\n  return validate(name, subcode, message, Check.equal, value, expected);\n};\n\n\nmodule.exports.Parameter = Parameter;\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/**\n * Module exports.\n */\n\nmodule.exports = inspect;\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n * @license MIT ( Joyent)\n */\n/* legacy: obj, showHidden, depth, colors*/\n\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    _extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isNull(arg) {\n  return arg === null;\n}\n\nfunction hasOwn(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwn(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  try {\n    if (ctx.showHidden && Object.getOwnPropertyNames) {\n      keys = Object.getOwnPropertyNames(value);\n    }\n  } catch (e) {\n    // ignore\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (Array.isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = { value: void 0 };\n  try {\n    // ie6  navigator.toString\n    // throws Error: Object doesn't support this property or method\n    desc.value = value[key];\n  } catch (e) {\n    // ignore\n  }\n  try {\n    // ie10  Object.getOwnPropertyDescriptor(window.location, 'hash')\n    // throws TypeError: Object doesn't support this action\n    if (Object.getOwnPropertyDescriptor) {\n      desc = Object.getOwnPropertyDescriptor(value, key) || desc;\n    }\n  } catch (e) {\n    // ignore\n  }\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwn(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\nfunction _extend(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","// GENERATED FILE. DO NOT EDIT.\nvar Long = (function(exports) {\n  \"use strict\";\n  \n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  \n  /**\n   * @license\n   * Copyright 2009 The Closure Library Authors\n   * Copyright 2020 Daniel Wirtz / The long.js Authors.\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   *     http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   *\n   * SPDX-License-Identifier: Apache-2.0\n   */\n  // WebAssembly optimizations to do native i64 multiplication and divide\n  var wasm = null;\n  \n  try {\n    wasm = new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0, 1, 13, 2, 96, 0, 1, 127, 96, 4, 127, 127, 127, 127, 1, 127, 3, 7, 6, 0, 1, 1, 1, 1, 1, 6, 6, 1, 127, 1, 65, 0, 11, 7, 50, 6, 3, 109, 117, 108, 0, 1, 5, 100, 105, 118, 95, 115, 0, 2, 5, 100, 105, 118, 95, 117, 0, 3, 5, 114, 101, 109, 95, 115, 0, 4, 5, 114, 101, 109, 95, 117, 0, 5, 8, 103, 101, 116, 95, 104, 105, 103, 104, 0, 0, 10, 191, 1, 6, 4, 0, 35, 0, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 126, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 127, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 128, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 129, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 130, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11])), {}).exports;\n  } catch (e) {// no wasm support :(\n  }\n  /**\n   * Constructs a 64 bit two's-complement integer, given its low and high 32 bit values as *signed* integers.\n   *  See the from* functions below for more convenient ways of constructing Longs.\n   * @exports Long\n   * @class A Long class for representing a 64 bit two's-complement integer value.\n   * @param {number} low The low (signed) 32 bits of the long\n   * @param {number} high The high (signed) 32 bits of the long\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @constructor\n   */\n  \n  \n  function Long(low, high, unsigned) {\n    /**\n     * The low 32 bits as a signed value.\n     * @type {number}\n     */\n    this.low = low | 0;\n    /**\n     * The high 32 bits as a signed value.\n     * @type {number}\n     */\n  \n    this.high = high | 0;\n    /**\n     * Whether unsigned or not.\n     * @type {boolean}\n     */\n  \n    this.unsigned = !!unsigned;\n  } // The internal representation of a long is the two given signed, 32-bit values.\n  // We use 32-bit pieces because these are the size of integers on which\n  // Javascript performs bit-operations.  For operations like addition and\n  // multiplication, we split each number into 16 bit pieces, which can easily be\n  // multiplied within Javascript's floating-point representation without overflow\n  // or change in sign.\n  //\n  // In the algorithms below, we frequently reduce the negative case to the\n  // positive case by negating the input(s) and then post-processing the result.\n  // Note that we must ALWAYS check specially whether those values are MIN_VALUE\n  // (-2^63) because -MIN_VALUE == MIN_VALUE (since 2^63 cannot be represented as\n  // a positive number, it overflows back into a negative).  Not handling this\n  // case would often result in infinite recursion.\n  //\n  // Common constant values ZERO, ONE, NEG_ONE, etc. are defined below the from*\n  // methods on which they depend.\n  \n  /**\n   * An indicator used to reliably determine if an object is a Long or not.\n   * @type {boolean}\n   * @const\n   * @private\n   */\n  \n  \n  Long.prototype.__isLong__;\n  Object.defineProperty(Long.prototype, \"__isLong__\", {\n    value: true\n  });\n  /**\n   * @function\n   * @param {*} obj Object\n   * @returns {boolean}\n   * @inner\n   */\n  \n  function isLong(obj) {\n    return (obj && obj[\"__isLong__\"]) === true;\n  }\n  /**\n   * @function\n   * @param {*} value number\n   * @returns {number}\n   * @inner\n   */\n  \n  \n  function ctz32(value) {\n    var c = Math.clz32(value & -value);\n    return value ? 31 - c : c;\n  }\n  /**\n   * Tests if the specified object is a Long.\n   * @function\n   * @param {*} obj Object\n   * @returns {boolean}\n   */\n  \n  \n  Long.isLong = isLong;\n  /**\n   * A cache of the Long representations of small integer values.\n   * @type {!Object}\n   * @inner\n   */\n  \n  var INT_CACHE = {};\n  /**\n   * A cache of the Long representations of small unsigned integer values.\n   * @type {!Object}\n   * @inner\n   */\n  \n  var UINT_CACHE = {};\n  /**\n   * @param {number} value\n   * @param {boolean=} unsigned\n   * @returns {!Long}\n   * @inner\n   */\n  \n  function fromInt(value, unsigned) {\n    var obj, cachedObj, cache;\n  \n    if (unsigned) {\n      value >>>= 0;\n  \n      if (cache = 0 <= value && value < 256) {\n        cachedObj = UINT_CACHE[value];\n        if (cachedObj) return cachedObj;\n      }\n  \n      obj = fromBits(value, 0, true);\n      if (cache) UINT_CACHE[value] = obj;\n      return obj;\n    } else {\n      value |= 0;\n  \n      if (cache = -128 <= value && value < 128) {\n        cachedObj = INT_CACHE[value];\n        if (cachedObj) return cachedObj;\n      }\n  \n      obj = fromBits(value, value < 0 ? -1 : 0, false);\n      if (cache) INT_CACHE[value] = obj;\n      return obj;\n    }\n  }\n  /**\n   * Returns a Long representing the given 32 bit integer value.\n   * @function\n   * @param {number} value The 32 bit integer in question\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @returns {!Long} The corresponding Long value\n   */\n  \n  \n  Long.fromInt = fromInt;\n  /**\n   * @param {number} value\n   * @param {boolean=} unsigned\n   * @returns {!Long}\n   * @inner\n   */\n  \n  function fromNumber(value, unsigned) {\n    if (isNaN(value)) return unsigned ? UZERO : ZERO;\n  \n    if (unsigned) {\n      if (value < 0) return UZERO;\n      if (value >= TWO_PWR_64_DBL) return MAX_UNSIGNED_VALUE;\n    } else {\n      if (value <= -TWO_PWR_63_DBL) return MIN_VALUE;\n      if (value + 1 >= TWO_PWR_63_DBL) return MAX_VALUE;\n    }\n  \n    if (value < 0) return fromNumber(-value, unsigned).neg();\n    return fromBits(value % TWO_PWR_32_DBL | 0, value / TWO_PWR_32_DBL | 0, unsigned);\n  }\n  /**\n   * Returns a Long representing the given value, provided that it is a finite number. Otherwise, zero is returned.\n   * @function\n   * @param {number} value The number in question\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @returns {!Long} The corresponding Long value\n   */\n  \n  \n  Long.fromNumber = fromNumber;\n  /**\n   * @param {number} lowBits\n   * @param {number} highBits\n   * @param {boolean=} unsigned\n   * @returns {!Long}\n   * @inner\n   */\n  \n  function fromBits(lowBits, highBits, unsigned) {\n    return new Long(lowBits, highBits, unsigned);\n  }\n  /**\n   * Returns a Long representing the 64 bit integer that comes by concatenating the given low and high bits. Each is\n   *  assumed to use 32 bits.\n   * @function\n   * @param {number} lowBits The low 32 bits\n   * @param {number} highBits The high 32 bits\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @returns {!Long} The corresponding Long value\n   */\n  \n  \n  Long.fromBits = fromBits;\n  /**\n   * @function\n   * @param {number} base\n   * @param {number} exponent\n   * @returns {number}\n   * @inner\n   */\n  \n  var pow_dbl = Math.pow; // Used 4 times (4*8 to 15+4)\n  \n  /**\n   * @param {string} str\n   * @param {(boolean|number)=} unsigned\n   * @param {number=} radix\n   * @returns {!Long}\n   * @inner\n   */\n  \n  function fromString(str, unsigned, radix) {\n    if (str.length === 0) throw Error('empty string');\n  \n    if (typeof unsigned === 'number') {\n      // For goog.math.long compatibility\n      radix = unsigned;\n      unsigned = false;\n    } else {\n      unsigned = !!unsigned;\n    }\n  \n    if (str === \"NaN\" || str === \"Infinity\" || str === \"+Infinity\" || str === \"-Infinity\") return unsigned ? UZERO : ZERO;\n    radix = radix || 10;\n    if (radix < 2 || 36 < radix) throw RangeError('radix');\n    var p;\n    if ((p = str.indexOf('-')) > 0) throw Error('interior hyphen');else if (p === 0) {\n      return fromString(str.substring(1), unsigned, radix).neg();\n    } // Do several (8) digits each time through the loop, so as to\n    // minimize the calls to the very expensive emulated div.\n  \n    var radixToPower = fromNumber(pow_dbl(radix, 8));\n    var result = ZERO;\n  \n    for (var i = 0; i < str.length; i += 8) {\n      var size = Math.min(8, str.length - i),\n          value = parseInt(str.substring(i, i + size), radix);\n  \n      if (size < 8) {\n        var power = fromNumber(pow_dbl(radix, size));\n        result = result.mul(power).add(fromNumber(value));\n      } else {\n        result = result.mul(radixToPower);\n        result = result.add(fromNumber(value));\n      }\n    }\n  \n    result.unsigned = unsigned;\n    return result;\n  }\n  /**\n   * Returns a Long representation of the given string, written using the specified radix.\n   * @function\n   * @param {string} str The textual representation of the Long\n   * @param {(boolean|number)=} unsigned Whether unsigned or not, defaults to signed\n   * @param {number=} radix The radix in which the text is written (2-36), defaults to 10\n   * @returns {!Long} The corresponding Long value\n   */\n  \n  \n  Long.fromString = fromString;\n  /**\n   * @function\n   * @param {!Long|number|string|!{low: number, high: number, unsigned: boolean}} val\n   * @param {boolean=} unsigned\n   * @returns {!Long}\n   * @inner\n   */\n  \n  function fromValue(val, unsigned) {\n    if (typeof val === 'number') return fromNumber(val, unsigned);\n    if (typeof val === 'string') return fromString(val, unsigned); // Throws for non-objects, converts non-instanceof Long:\n  \n    return fromBits(val.low, val.high, typeof unsigned === 'boolean' ? unsigned : val.unsigned);\n  }\n  /**\n   * Converts the specified value to a Long using the appropriate from* function for its type.\n   * @function\n   * @param {!Long|number|string|!{low: number, high: number, unsigned: boolean}} val Value\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @returns {!Long}\n   */\n  \n  \n  Long.fromValue = fromValue; // NOTE: the compiler should inline these constant values below and then remove these variables, so there should be\n  // no runtime penalty for these.\n  \n  /**\n   * @type {number}\n   * @const\n   * @inner\n   */\n  \n  var TWO_PWR_16_DBL = 1 << 16;\n  /**\n   * @type {number}\n   * @const\n   * @inner\n   */\n  \n  var TWO_PWR_24_DBL = 1 << 24;\n  /**\n   * @type {number}\n   * @const\n   * @inner\n   */\n  \n  var TWO_PWR_32_DBL = TWO_PWR_16_DBL * TWO_PWR_16_DBL;\n  /**\n   * @type {number}\n   * @const\n   * @inner\n   */\n  \n  var TWO_PWR_64_DBL = TWO_PWR_32_DBL * TWO_PWR_32_DBL;\n  /**\n   * @type {number}\n   * @const\n   * @inner\n   */\n  \n  var TWO_PWR_63_DBL = TWO_PWR_64_DBL / 2;\n  /**\n   * @type {!Long}\n   * @const\n   * @inner\n   */\n  \n  var TWO_PWR_24 = fromInt(TWO_PWR_24_DBL);\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var ZERO = fromInt(0);\n  /**\n   * Signed zero.\n   * @type {!Long}\n   */\n  \n  Long.ZERO = ZERO;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var UZERO = fromInt(0, true);\n  /**\n   * Unsigned zero.\n   * @type {!Long}\n   */\n  \n  Long.UZERO = UZERO;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var ONE = fromInt(1);\n  /**\n   * Signed one.\n   * @type {!Long}\n   */\n  \n  Long.ONE = ONE;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var UONE = fromInt(1, true);\n  /**\n   * Unsigned one.\n   * @type {!Long}\n   */\n  \n  Long.UONE = UONE;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var NEG_ONE = fromInt(-1);\n  /**\n   * Signed negative one.\n   * @type {!Long}\n   */\n  \n  Long.NEG_ONE = NEG_ONE;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var MAX_VALUE = fromBits(0xFFFFFFFF | 0, 0x7FFFFFFF | 0, false);\n  /**\n   * Maximum signed value.\n   * @type {!Long}\n   */\n  \n  Long.MAX_VALUE = MAX_VALUE;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var MAX_UNSIGNED_VALUE = fromBits(0xFFFFFFFF | 0, 0xFFFFFFFF | 0, true);\n  /**\n   * Maximum unsigned value.\n   * @type {!Long}\n   */\n  \n  Long.MAX_UNSIGNED_VALUE = MAX_UNSIGNED_VALUE;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var MIN_VALUE = fromBits(0, 0x80000000 | 0, false);\n  /**\n   * Minimum signed value.\n   * @type {!Long}\n   */\n  \n  Long.MIN_VALUE = MIN_VALUE;\n  /**\n   * @alias Long.prototype\n   * @inner\n   */\n  \n  var LongPrototype = Long.prototype;\n  /**\n   * Converts the Long to a 32 bit integer, assuming it is a 32 bit integer.\n   * @this {!Long}\n   * @returns {number}\n   */\n  \n  LongPrototype.toInt = function toInt() {\n    return this.unsigned ? this.low >>> 0 : this.low;\n  };\n  /**\n   * Converts the Long to a the nearest floating-point representation of this value (double, 53 bit mantissa).\n   * @this {!Long}\n   * @returns {number}\n   */\n  \n  \n  LongPrototype.toNumber = function toNumber() {\n    if (this.unsigned) return (this.high >>> 0) * TWO_PWR_32_DBL + (this.low >>> 0);\n    return this.high * TWO_PWR_32_DBL + (this.low >>> 0);\n  };\n  /**\n   * Converts the Long to a string written in the specified radix.\n   * @this {!Long}\n   * @param {number=} radix Radix (2-36), defaults to 10\n   * @returns {string}\n   * @override\n   * @throws {RangeError} If `radix` is out of range\n   */\n  \n  \n  LongPrototype.toString = function toString(radix) {\n    radix = radix || 10;\n    if (radix < 2 || 36 < radix) throw RangeError('radix');\n    if (this.isZero()) return '0';\n  \n    if (this.isNegative()) {\n      // Unsigned Longs are never negative\n      if (this.eq(MIN_VALUE)) {\n        // We need to change the Long value before it can be negated, so we remove\n        // the bottom-most digit in this base and then recurse to do the rest.\n        var radixLong = fromNumber(radix),\n            div = this.div(radixLong),\n            rem1 = div.mul(radixLong).sub(this);\n        return div.toString(radix) + rem1.toInt().toString(radix);\n      } else return '-' + this.neg().toString(radix);\n    } // Do several (6) digits each time through the loop, so as to\n    // minimize the calls to the very expensive emulated div.\n  \n  \n    var radixToPower = fromNumber(pow_dbl(radix, 6), this.unsigned),\n        rem = this;\n    var result = '';\n  \n    while (true) {\n      var remDiv = rem.div(radixToPower),\n          intval = rem.sub(remDiv.mul(radixToPower)).toInt() >>> 0,\n          digits = intval.toString(radix);\n      rem = remDiv;\n      if (rem.isZero()) return digits + result;else {\n        while (digits.length < 6) digits = '0' + digits;\n  \n        result = '' + digits + result;\n      }\n    }\n  };\n  /**\n   * Gets the high 32 bits as a signed integer.\n   * @this {!Long}\n   * @returns {number} Signed high bits\n   */\n  \n  \n  LongPrototype.getHighBits = function getHighBits() {\n    return this.high;\n  };\n  /**\n   * Gets the high 32 bits as an unsigned integer.\n   * @this {!Long}\n   * @returns {number} Unsigned high bits\n   */\n  \n  \n  LongPrototype.getHighBitsUnsigned = function getHighBitsUnsigned() {\n    return this.high >>> 0;\n  };\n  /**\n   * Gets the low 32 bits as a signed integer.\n   * @this {!Long}\n   * @returns {number} Signed low bits\n   */\n  \n  \n  LongPrototype.getLowBits = function getLowBits() {\n    return this.low;\n  };\n  /**\n   * Gets the low 32 bits as an unsigned integer.\n   * @this {!Long}\n   * @returns {number} Unsigned low bits\n   */\n  \n  \n  LongPrototype.getLowBitsUnsigned = function getLowBitsUnsigned() {\n    return this.low >>> 0;\n  };\n  /**\n   * Gets the number of bits needed to represent the absolute value of this Long.\n   * @this {!Long}\n   * @returns {number}\n   */\n  \n  \n  LongPrototype.getNumBitsAbs = function getNumBitsAbs() {\n    if (this.isNegative()) // Unsigned Longs are never negative\n      return this.eq(MIN_VALUE) ? 64 : this.neg().getNumBitsAbs();\n    var val = this.high != 0 ? this.high : this.low;\n  \n    for (var bit = 31; bit > 0; bit--) if ((val & 1 << bit) != 0) break;\n  \n    return this.high != 0 ? bit + 33 : bit + 1;\n  };\n  /**\n   * Tests if this Long's value equals zero.\n   * @this {!Long}\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.isZero = function isZero() {\n    return this.high === 0 && this.low === 0;\n  };\n  /**\n   * Tests if this Long's value equals zero. This is an alias of {@link Long#isZero}.\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.eqz = LongPrototype.isZero;\n  /**\n   * Tests if this Long's value is negative.\n   * @this {!Long}\n   * @returns {boolean}\n   */\n  \n  LongPrototype.isNegative = function isNegative() {\n    return !this.unsigned && this.high < 0;\n  };\n  /**\n   * Tests if this Long's value is positive or zero.\n   * @this {!Long}\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.isPositive = function isPositive() {\n    return this.unsigned || this.high >= 0;\n  };\n  /**\n   * Tests if this Long's value is odd.\n   * @this {!Long}\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.isOdd = function isOdd() {\n    return (this.low & 1) === 1;\n  };\n  /**\n   * Tests if this Long's value is even.\n   * @this {!Long}\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.isEven = function isEven() {\n    return (this.low & 1) === 0;\n  };\n  /**\n   * Tests if this Long's value equals the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.equals = function equals(other) {\n    if (!isLong(other)) other = fromValue(other);\n    if (this.unsigned !== other.unsigned && this.high >>> 31 === 1 && other.high >>> 31 === 1) return false;\n    return this.high === other.high && this.low === other.low;\n  };\n  /**\n   * Tests if this Long's value equals the specified's. This is an alias of {@link Long#equals}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.eq = LongPrototype.equals;\n  /**\n   * Tests if this Long's value differs from the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.notEquals = function notEquals(other) {\n    return !this.eq(\n    /* validates */\n    other);\n  };\n  /**\n   * Tests if this Long's value differs from the specified's. This is an alias of {@link Long#notEquals}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.neq = LongPrototype.notEquals;\n  /**\n   * Tests if this Long's value differs from the specified's. This is an alias of {@link Long#notEquals}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.ne = LongPrototype.notEquals;\n  /**\n   * Tests if this Long's value is less than the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.lessThan = function lessThan(other) {\n    return this.comp(\n    /* validates */\n    other) < 0;\n  };\n  /**\n   * Tests if this Long's value is less than the specified's. This is an alias of {@link Long#lessThan}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.lt = LongPrototype.lessThan;\n  /**\n   * Tests if this Long's value is less than or equal the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.lessThanOrEqual = function lessThanOrEqual(other) {\n    return this.comp(\n    /* validates */\n    other) <= 0;\n  };\n  /**\n   * Tests if this Long's value is less than or equal the specified's. This is an alias of {@link Long#lessThanOrEqual}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.lte = LongPrototype.lessThanOrEqual;\n  /**\n   * Tests if this Long's value is less than or equal the specified's. This is an alias of {@link Long#lessThanOrEqual}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.le = LongPrototype.lessThanOrEqual;\n  /**\n   * Tests if this Long's value is greater than the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.greaterThan = function greaterThan(other) {\n    return this.comp(\n    /* validates */\n    other) > 0;\n  };\n  /**\n   * Tests if this Long's value is greater than the specified's. This is an alias of {@link Long#greaterThan}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.gt = LongPrototype.greaterThan;\n  /**\n   * Tests if this Long's value is greater than or equal the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.greaterThanOrEqual = function greaterThanOrEqual(other) {\n    return this.comp(\n    /* validates */\n    other) >= 0;\n  };\n  /**\n   * Tests if this Long's value is greater than or equal the specified's. This is an alias of {@link Long#greaterThanOrEqual}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.gte = LongPrototype.greaterThanOrEqual;\n  /**\n   * Tests if this Long's value is greater than or equal the specified's. This is an alias of {@link Long#greaterThanOrEqual}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.ge = LongPrototype.greaterThanOrEqual;\n  /**\n   * Compares this Long's value with the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {number} 0 if they are the same, 1 if the this is greater and -1\n   *  if the given one is greater\n   */\n  \n  LongPrototype.compare = function compare(other) {\n    if (!isLong(other)) other = fromValue(other);\n    if (this.eq(other)) return 0;\n    var thisNeg = this.isNegative(),\n        otherNeg = other.isNegative();\n    if (thisNeg && !otherNeg) return -1;\n    if (!thisNeg && otherNeg) return 1; // At this point the sign bits are the same\n  \n    if (!this.unsigned) return this.sub(other).isNegative() ? -1 : 1; // Both are positive if at least one is unsigned\n  \n    return other.high >>> 0 > this.high >>> 0 || other.high === this.high && other.low >>> 0 > this.low >>> 0 ? -1 : 1;\n  };\n  /**\n   * Compares this Long's value with the specified's. This is an alias of {@link Long#compare}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {number} 0 if they are the same, 1 if the this is greater and -1\n   *  if the given one is greater\n   */\n  \n  \n  LongPrototype.comp = LongPrototype.compare;\n  /**\n   * Negates this Long's value.\n   * @this {!Long}\n   * @returns {!Long} Negated Long\n   */\n  \n  LongPrototype.negate = function negate() {\n    if (!this.unsigned && this.eq(MIN_VALUE)) return MIN_VALUE;\n    return this.not().add(ONE);\n  };\n  /**\n   * Negates this Long's value. This is an alias of {@link Long#negate}.\n   * @function\n   * @returns {!Long} Negated Long\n   */\n  \n  \n  LongPrototype.neg = LongPrototype.negate;\n  /**\n   * Returns the sum of this and the specified Long.\n   * @this {!Long}\n   * @param {!Long|number|string} addend Addend\n   * @returns {!Long} Sum\n   */\n  \n  LongPrototype.add = function add(addend) {\n    if (!isLong(addend)) addend = fromValue(addend); // Divide each number into 4 chunks of 16 bits, and then sum the chunks.\n  \n    var a48 = this.high >>> 16;\n    var a32 = this.high & 0xFFFF;\n    var a16 = this.low >>> 16;\n    var a00 = this.low & 0xFFFF;\n    var b48 = addend.high >>> 16;\n    var b32 = addend.high & 0xFFFF;\n    var b16 = addend.low >>> 16;\n    var b00 = addend.low & 0xFFFF;\n    var c48 = 0,\n        c32 = 0,\n        c16 = 0,\n        c00 = 0;\n    c00 += a00 + b00;\n    c16 += c00 >>> 16;\n    c00 &= 0xFFFF;\n    c16 += a16 + b16;\n    c32 += c16 >>> 16;\n    c16 &= 0xFFFF;\n    c32 += a32 + b32;\n    c48 += c32 >>> 16;\n    c32 &= 0xFFFF;\n    c48 += a48 + b48;\n    c48 &= 0xFFFF;\n    return fromBits(c16 << 16 | c00, c48 << 16 | c32, this.unsigned);\n  };\n  /**\n   * Returns the difference of this and the specified Long.\n   * @this {!Long}\n   * @param {!Long|number|string} subtrahend Subtrahend\n   * @returns {!Long} Difference\n   */\n  \n  \n  LongPrototype.subtract = function subtract(subtrahend) {\n    if (!isLong(subtrahend)) subtrahend = fromValue(subtrahend);\n    return this.add(subtrahend.neg());\n  };\n  /**\n   * Returns the difference of this and the specified Long. This is an alias of {@link Long#subtract}.\n   * @function\n   * @param {!Long|number|string} subtrahend Subtrahend\n   * @returns {!Long} Difference\n   */\n  \n  \n  LongPrototype.sub = LongPrototype.subtract;\n  /**\n   * Returns the product of this and the specified Long.\n   * @this {!Long}\n   * @param {!Long|number|string} multiplier Multiplier\n   * @returns {!Long} Product\n   */\n  \n  LongPrototype.multiply = function multiply(multiplier) {\n    if (this.isZero()) return this;\n    if (!isLong(multiplier)) multiplier = fromValue(multiplier); // use wasm support if present\n  \n    if (wasm) {\n      var low = wasm[\"mul\"](this.low, this.high, multiplier.low, multiplier.high);\n      return fromBits(low, wasm[\"get_high\"](), this.unsigned);\n    }\n  \n    if (multiplier.isZero()) return this.unsigned ? UZERO : ZERO;\n    if (this.eq(MIN_VALUE)) return multiplier.isOdd() ? MIN_VALUE : ZERO;\n    if (multiplier.eq(MIN_VALUE)) return this.isOdd() ? MIN_VALUE : ZERO;\n  \n    if (this.isNegative()) {\n      if (multiplier.isNegative()) return this.neg().mul(multiplier.neg());else return this.neg().mul(multiplier).neg();\n    } else if (multiplier.isNegative()) return this.mul(multiplier.neg()).neg(); // If both longs are small, use float multiplication\n  \n  \n    if (this.lt(TWO_PWR_24) && multiplier.lt(TWO_PWR_24)) return fromNumber(this.toNumber() * multiplier.toNumber(), this.unsigned); // Divide each long into 4 chunks of 16 bits, and then add up 4x4 products.\n    // We can skip products that would overflow.\n  \n    var a48 = this.high >>> 16;\n    var a32 = this.high & 0xFFFF;\n    var a16 = this.low >>> 16;\n    var a00 = this.low & 0xFFFF;\n    var b48 = multiplier.high >>> 16;\n    var b32 = multiplier.high & 0xFFFF;\n    var b16 = multiplier.low >>> 16;\n    var b00 = multiplier.low & 0xFFFF;\n    var c48 = 0,\n        c32 = 0,\n        c16 = 0,\n        c00 = 0;\n    c00 += a00 * b00;\n    c16 += c00 >>> 16;\n    c00 &= 0xFFFF;\n    c16 += a16 * b00;\n    c32 += c16 >>> 16;\n    c16 &= 0xFFFF;\n    c16 += a00 * b16;\n    c32 += c16 >>> 16;\n    c16 &= 0xFFFF;\n    c32 += a32 * b00;\n    c48 += c32 >>> 16;\n    c32 &= 0xFFFF;\n    c32 += a16 * b16;\n    c48 += c32 >>> 16;\n    c32 &= 0xFFFF;\n    c32 += a00 * b32;\n    c48 += c32 >>> 16;\n    c32 &= 0xFFFF;\n    c48 += a48 * b00 + a32 * b16 + a16 * b32 + a00 * b48;\n    c48 &= 0xFFFF;\n    return fromBits(c16 << 16 | c00, c48 << 16 | c32, this.unsigned);\n  };\n  /**\n   * Returns the product of this and the specified Long. This is an alias of {@link Long#multiply}.\n   * @function\n   * @param {!Long|number|string} multiplier Multiplier\n   * @returns {!Long} Product\n   */\n  \n  \n  LongPrototype.mul = LongPrototype.multiply;\n  /**\n   * Returns this Long divided by the specified. The result is signed if this Long is signed or\n   *  unsigned if this Long is unsigned.\n   * @this {!Long}\n   * @param {!Long|number|string} divisor Divisor\n   * @returns {!Long} Quotient\n   */\n  \n  LongPrototype.divide = function divide(divisor) {\n    if (!isLong(divisor)) divisor = fromValue(divisor);\n    if (divisor.isZero()) throw Error('division by zero'); // use wasm support if present\n  \n    if (wasm) {\n      // guard against signed division overflow: the largest\n      // negative number / -1 would be 1 larger than the largest\n      // positive number, due to two's complement.\n      if (!this.unsigned && this.high === -0x80000000 && divisor.low === -1 && divisor.high === -1) {\n        // be consistent with non-wasm code path\n        return this;\n      }\n  \n      var low = (this.unsigned ? wasm[\"div_u\"] : wasm[\"div_s\"])(this.low, this.high, divisor.low, divisor.high);\n      return fromBits(low, wasm[\"get_high\"](), this.unsigned);\n    }\n  \n    if (this.isZero()) return this.unsigned ? UZERO : ZERO;\n    var approx, rem, res;\n  \n    if (!this.unsigned) {\n      // This section is only relevant for signed longs and is derived from the\n      // closure library as a whole.\n      if (this.eq(MIN_VALUE)) {\n        if (divisor.eq(ONE) || divisor.eq(NEG_ONE)) return MIN_VALUE; // recall that -MIN_VALUE == MIN_VALUE\n        else if (divisor.eq(MIN_VALUE)) return ONE;else {\n          // At this point, we have |other| >= 2, so |this/other| < |MIN_VALUE|.\n          var halfThis = this.shr(1);\n          approx = halfThis.div(divisor).shl(1);\n  \n          if (approx.eq(ZERO)) {\n            return divisor.isNegative() ? ONE : NEG_ONE;\n          } else {\n            rem = this.sub(divisor.mul(approx));\n            res = approx.add(rem.div(divisor));\n            return res;\n          }\n        }\n      } else if (divisor.eq(MIN_VALUE)) return this.unsigned ? UZERO : ZERO;\n  \n      if (this.isNegative()) {\n        if (divisor.isNegative()) return this.neg().div(divisor.neg());\n        return this.neg().div(divisor).neg();\n      } else if (divisor.isNegative()) return this.div(divisor.neg()).neg();\n  \n      res = ZERO;\n    } else {\n      // The algorithm below has not been made for unsigned longs. It's therefore\n      // required to take special care of the MSB prior to running it.\n      if (!divisor.unsigned) divisor = divisor.toUnsigned();\n      if (divisor.gt(this)) return UZERO;\n      if (divisor.gt(this.shru(1))) // 15 >>> 1 = 7 ; with divisor = 8 ; true\n        return UONE;\n      res = UZERO;\n    } // Repeat the following until the remainder is less than other:  find a\n    // floating-point that approximates remainder / other *from below*, add this\n    // into the result, and subtract it from the remainder.  It is critical that\n    // the approximate value is less than or equal to the real value so that the\n    // remainder never becomes negative.\n  \n  \n    rem = this;\n  \n    while (rem.gte(divisor)) {\n      // Approximate the result of division. This may be a little greater or\n      // smaller than the actual value.\n      approx = Math.max(1, Math.floor(rem.toNumber() / divisor.toNumber())); // We will tweak the approximate result by changing it in the 48-th digit or\n      // the smallest non-fractional digit, whichever is larger.\n  \n      var log2 = Math.ceil(Math.log(approx) / Math.LN2),\n          delta = log2 <= 48 ? 1 : pow_dbl(2, log2 - 48),\n          // Decrease the approximation until it is smaller than the remainder.  Note\n      // that if it is too large, the product overflows and is negative.\n      approxRes = fromNumber(approx),\n          approxRem = approxRes.mul(divisor);\n  \n      while (approxRem.isNegative() || approxRem.gt(rem)) {\n        approx -= delta;\n        approxRes = fromNumber(approx, this.unsigned);\n        approxRem = approxRes.mul(divisor);\n      } // We know the answer can't be zero... and actually, zero would cause\n      // infinite recursion since we would make no progress.\n  \n  \n      if (approxRes.isZero()) approxRes = ONE;\n      res = res.add(approxRes);\n      rem = rem.sub(approxRem);\n    }\n  \n    return res;\n  };\n  /**\n   * Returns this Long divided by the specified. This is an alias of {@link Long#divide}.\n   * @function\n   * @param {!Long|number|string} divisor Divisor\n   * @returns {!Long} Quotient\n   */\n  \n  \n  LongPrototype.div = LongPrototype.divide;\n  /**\n   * Returns this Long modulo the specified.\n   * @this {!Long}\n   * @param {!Long|number|string} divisor Divisor\n   * @returns {!Long} Remainder\n   */\n  \n  LongPrototype.modulo = function modulo(divisor) {\n    if (!isLong(divisor)) divisor = fromValue(divisor); // use wasm support if present\n  \n    if (wasm) {\n      var low = (this.unsigned ? wasm[\"rem_u\"] : wasm[\"rem_s\"])(this.low, this.high, divisor.low, divisor.high);\n      return fromBits(low, wasm[\"get_high\"](), this.unsigned);\n    }\n  \n    return this.sub(this.div(divisor).mul(divisor));\n  };\n  /**\n   * Returns this Long modulo the specified. This is an alias of {@link Long#modulo}.\n   * @function\n   * @param {!Long|number|string} divisor Divisor\n   * @returns {!Long} Remainder\n   */\n  \n  \n  LongPrototype.mod = LongPrototype.modulo;\n  /**\n   * Returns this Long modulo the specified. This is an alias of {@link Long#modulo}.\n   * @function\n   * @param {!Long|number|string} divisor Divisor\n   * @returns {!Long} Remainder\n   */\n  \n  LongPrototype.rem = LongPrototype.modulo;\n  /**\n   * Returns the bitwise NOT of this Long.\n   * @this {!Long}\n   * @returns {!Long}\n   */\n  \n  LongPrototype.not = function not() {\n    return fromBits(~this.low, ~this.high, this.unsigned);\n  };\n  /**\n   * Returns count leading zeros of this Long.\n   * @this {!Long}\n   * @returns {!number}\n   */\n  \n  \n  LongPrototype.countLeadingZeros = function countLeadingZeros() {\n    return this.high ? Math.clz32(this.high) : Math.clz32(this.low) + 32;\n  };\n  /**\n   * Returns count leading zeros. This is an alias of {@link Long#countLeadingZeros}.\n   * @function\n   * @param {!Long}\n   * @returns {!number}\n   */\n  \n  \n  LongPrototype.clz = LongPrototype.countLeadingZeros;\n  /**\n   * Returns count trailing zeros of this Long.\n   * @this {!Long}\n   * @returns {!number}\n   */\n  \n  LongPrototype.countTrailingZeros = function countTrailingZeros() {\n    return this.low ? ctz32(this.low) : ctz32(this.high) + 32;\n  };\n  /**\n   * Returns count trailing zeros. This is an alias of {@link Long#countTrailingZeros}.\n   * @function\n   * @param {!Long}\n   * @returns {!number}\n   */\n  \n  \n  LongPrototype.ctz = LongPrototype.countTrailingZeros;\n  /**\n   * Returns the bitwise AND of this Long and the specified.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other Long\n   * @returns {!Long}\n   */\n  \n  LongPrototype.and = function and(other) {\n    if (!isLong(other)) other = fromValue(other);\n    return fromBits(this.low & other.low, this.high & other.high, this.unsigned);\n  };\n  /**\n   * Returns the bitwise OR of this Long and the specified.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other Long\n   * @returns {!Long}\n   */\n  \n  \n  LongPrototype.or = function or(other) {\n    if (!isLong(other)) other = fromValue(other);\n    return fromBits(this.low | other.low, this.high | other.high, this.unsigned);\n  };\n  /**\n   * Returns the bitwise XOR of this Long and the given one.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other Long\n   * @returns {!Long}\n   */\n  \n  \n  LongPrototype.xor = function xor(other) {\n    if (!isLong(other)) other = fromValue(other);\n    return fromBits(this.low ^ other.low, this.high ^ other.high, this.unsigned);\n  };\n  /**\n   * Returns this Long with bits shifted to the left by the given amount.\n   * @this {!Long}\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  \n  LongPrototype.shiftLeft = function shiftLeft(numBits) {\n    if (isLong(numBits)) numBits = numBits.toInt();\n    if ((numBits &= 63) === 0) return this;else if (numBits < 32) return fromBits(this.low << numBits, this.high << numBits | this.low >>> 32 - numBits, this.unsigned);else return fromBits(0, this.low << numBits - 32, this.unsigned);\n  };\n  /**\n   * Returns this Long with bits shifted to the left by the given amount. This is an alias of {@link Long#shiftLeft}.\n   * @function\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  \n  LongPrototype.shl = LongPrototype.shiftLeft;\n  /**\n   * Returns this Long with bits arithmetically shifted to the right by the given amount.\n   * @this {!Long}\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  LongPrototype.shiftRight = function shiftRight(numBits) {\n    if (isLong(numBits)) numBits = numBits.toInt();\n    if ((numBits &= 63) === 0) return this;else if (numBits < 32) return fromBits(this.low >>> numBits | this.high << 32 - numBits, this.high >> numBits, this.unsigned);else return fromBits(this.high >> numBits - 32, this.high >= 0 ? 0 : -1, this.unsigned);\n  };\n  /**\n   * Returns this Long with bits arithmetically shifted to the right by the given amount. This is an alias of {@link Long#shiftRight}.\n   * @function\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  \n  LongPrototype.shr = LongPrototype.shiftRight;\n  /**\n   * Returns this Long with bits logically shifted to the right by the given amount.\n   * @this {!Long}\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  LongPrototype.shiftRightUnsigned = function shiftRightUnsigned(numBits) {\n    if (isLong(numBits)) numBits = numBits.toInt();\n    if ((numBits &= 63) === 0) return this;\n    if (numBits < 32) return fromBits(this.low >>> numBits | this.high << 32 - numBits, this.high >>> numBits, this.unsigned);\n    if (numBits === 32) return fromBits(this.high, 0, this.unsigned);\n    return fromBits(this.high >>> numBits - 32, 0, this.unsigned);\n  };\n  /**\n   * Returns this Long with bits logically shifted to the right by the given amount. This is an alias of {@link Long#shiftRightUnsigned}.\n   * @function\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  \n  LongPrototype.shru = LongPrototype.shiftRightUnsigned;\n  /**\n   * Returns this Long with bits logically shifted to the right by the given amount. This is an alias of {@link Long#shiftRightUnsigned}.\n   * @function\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  LongPrototype.shr_u = LongPrototype.shiftRightUnsigned;\n  /**\n   * Returns this Long with bits rotated to the left by the given amount.\n   * @this {!Long}\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Rotated Long\n   */\n  \n  LongPrototype.rotateLeft = function rotateLeft(numBits) {\n    var b;\n    if (isLong(numBits)) numBits = numBits.toInt();\n    if ((numBits &= 63) === 0) return this;\n    if (numBits === 32) return fromBits(this.high, this.low, this.unsigned);\n  \n    if (numBits < 32) {\n      b = 32 - numBits;\n      return fromBits(this.low << numBits | this.high >>> b, this.high << numBits | this.low >>> b, this.unsigned);\n    }\n  \n    numBits -= 32;\n    b = 32 - numBits;\n    return fromBits(this.high << numBits | this.low >>> b, this.low << numBits | this.high >>> b, this.unsigned);\n  };\n  /**\n   * Returns this Long with bits rotated to the left by the given amount. This is an alias of {@link Long#rotateLeft}.\n   * @function\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Rotated Long\n   */\n  \n  \n  LongPrototype.rotl = LongPrototype.rotateLeft;\n  /**\n   * Returns this Long with bits rotated to the right by the given amount.\n   * @this {!Long}\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Rotated Long\n   */\n  \n  LongPrototype.rotateRight = function rotateRight(numBits) {\n    var b;\n    if (isLong(numBits)) numBits = numBits.toInt();\n    if ((numBits &= 63) === 0) return this;\n    if (numBits === 32) return fromBits(this.high, this.low, this.unsigned);\n  \n    if (numBits < 32) {\n      b = 32 - numBits;\n      return fromBits(this.high << b | this.low >>> numBits, this.low << b | this.high >>> numBits, this.unsigned);\n    }\n  \n    numBits -= 32;\n    b = 32 - numBits;\n    return fromBits(this.low << b | this.high >>> numBits, this.high << b | this.low >>> numBits, this.unsigned);\n  };\n  /**\n   * Returns this Long with bits rotated to the right by the given amount. This is an alias of {@link Long#rotateRight}.\n   * @function\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Rotated Long\n   */\n  \n  \n  LongPrototype.rotr = LongPrototype.rotateRight;\n  /**\n   * Converts this Long to signed.\n   * @this {!Long}\n   * @returns {!Long} Signed long\n   */\n  \n  LongPrototype.toSigned = function toSigned() {\n    if (!this.unsigned) return this;\n    return fromBits(this.low, this.high, false);\n  };\n  /**\n   * Converts this Long to unsigned.\n   * @this {!Long}\n   * @returns {!Long} Unsigned long\n   */\n  \n  \n  LongPrototype.toUnsigned = function toUnsigned() {\n    if (this.unsigned) return this;\n    return fromBits(this.low, this.high, true);\n  };\n  /**\n   * Converts this Long to its byte representation.\n   * @param {boolean=} le Whether little or big endian, defaults to big endian\n   * @this {!Long}\n   * @returns {!Array.<number>} Byte representation\n   */\n  \n  \n  LongPrototype.toBytes = function toBytes(le) {\n    return le ? this.toBytesLE() : this.toBytesBE();\n  };\n  /**\n   * Converts this Long to its little endian byte representation.\n   * @this {!Long}\n   * @returns {!Array.<number>} Little endian byte representation\n   */\n  \n  \n  LongPrototype.toBytesLE = function toBytesLE() {\n    var hi = this.high,\n        lo = this.low;\n    return [lo & 0xff, lo >>> 8 & 0xff, lo >>> 16 & 0xff, lo >>> 24, hi & 0xff, hi >>> 8 & 0xff, hi >>> 16 & 0xff, hi >>> 24];\n  };\n  /**\n   * Converts this Long to its big endian byte representation.\n   * @this {!Long}\n   * @returns {!Array.<number>} Big endian byte representation\n   */\n  \n  \n  LongPrototype.toBytesBE = function toBytesBE() {\n    var hi = this.high,\n        lo = this.low;\n    return [hi >>> 24, hi >>> 16 & 0xff, hi >>> 8 & 0xff, hi & 0xff, lo >>> 24, lo >>> 16 & 0xff, lo >>> 8 & 0xff, lo & 0xff];\n  };\n  /**\n   * Creates a Long from its byte representation.\n   * @param {!Array.<number>} bytes Byte representation\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @param {boolean=} le Whether little or big endian, defaults to big endian\n   * @returns {Long} The corresponding Long value\n   */\n  \n  \n  Long.fromBytes = function fromBytes(bytes, unsigned, le) {\n    return le ? Long.fromBytesLE(bytes, unsigned) : Long.fromBytesBE(bytes, unsigned);\n  };\n  /**\n   * Creates a Long from its little endian byte representation.\n   * @param {!Array.<number>} bytes Little endian byte representation\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @returns {Long} The corresponding Long value\n   */\n  \n  \n  Long.fromBytesLE = function fromBytesLE(bytes, unsigned) {\n    return new Long(bytes[0] | bytes[1] << 8 | bytes[2] << 16 | bytes[3] << 24, bytes[4] | bytes[5] << 8 | bytes[6] << 16 | bytes[7] << 24, unsigned);\n  };\n  /**\n   * Creates a Long from its big endian byte representation.\n   * @param {!Array.<number>} bytes Big endian byte representation\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @returns {Long} The corresponding Long value\n   */\n  \n  \n  Long.fromBytesBE = function fromBytesBE(bytes, unsigned) {\n    return new Long(bytes[4] << 24 | bytes[5] << 16 | bytes[6] << 8 | bytes[7], bytes[0] << 24 | bytes[1] << 16 | bytes[2] << 8 | bytes[3], unsigned);\n  };\n  \n  var _default = Long;\n  exports.default = _default;\n  return \"default\" in exports ? exports.default : exports;\n})({});\nif (typeof define === 'function' && define.amd) define([], function() { return Long; });\nelse if (typeof module === 'object' && typeof exports==='object') module.exports = Long;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","// startup\n// Load entry module and return exports\n// This entry module used 'module' so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./index.js\");\n"],"names":["root","factory","exports","module","define","amd","this","Base64","Bits","Convert","Hex","Long","KEY_STR","ENC_LUT","DecodeError","Error","LegacyEncoder","base64_encode","input","let","output","i","chr1","charCodeAt","chr2","chr3","enc1","enc2","enc3","enc4","isNaN","charAt","length","base64_decode","String","fromCharCode","isNode","window","hasBuffer","Buffer","hasBlob","Blob","BufferEncoder","str","from","toString","WindowEncoder","b","a","encode","decode","get","val","shift","numBits","set","dataIn","curMask","shiftedVal","data","ErrorSubcode","OperationError","BufferImpl","TWO_ZEROES_STR","THREE_ZEROES_STR","FOUR_ZEROES_STR","BYTEARRAY_CONVERT_CHUNK","UNSIGNED_LSHIFT_24","ARRAY_BUFFER_CONVERT_CHUNK","uint8ArrayToString","format","undefined","dataLength","byteLength","uint8DataArray","Uint8Array","result","toLowerCase","padStart","stringToUint8Array","arrayBuf","ArrayBuffer","uint8Array","hexStringToUint8Array","arrayBufferToString","ab","len","u8","apply","k","r","subarray","stringToArrayBuffer","buffer","int8ToStr","int8","int16ToStr","int16","int24ToStr","int24","int32ToStr","int32","int64ToStr","int64","high","low","byteArrayToStr","byteArray","slice","strToByteArray","strToHexArray","toHex","c","Array","prototype","map","call","split","strToInt8","strToInt16","strToInt24","strToInt32","strToUInt32","strToUInt64","fromBits","substr","ucs2ToUtf8","ucs2","unescape","encodeURIComponent","utf8ToUcs2","utf8","decodeURIComponent","escape","anythingToBuffer","value","isBuffer","byteOffset","PARAMETER_OUT_OF_RANGE","numToHex","n","s","formatHexString","obj","isArray","join","_","Debug","Destination","ESKit","Factory","FSM","Log","Message","MessageTracing","Publisher","SDT","Session","SMF","SolcacheSession","TestEnv","Transport","Util","Validate","FactoryLib","SolclientFactory","SolclientFactoryProfiles","SolclientFactoryProperties","DestinationType","Topic","NotImplementedError","RequestError","RequestEventCode","makeIterator","ConsoleLogImpl","LogImpl","LogLevel","MessageCacheStatus","MessageDeliveryModeType","MessageDumpFlag","MessageOutcome","MessageType","MessageUserCosType","ReplicationGroupMessageId","MessageConsumer","MessageConsumerAcknowledgeMode","MessageConsumerEventName","MessageConsumerProperties","QueueBrowser","QueueBrowserEventName","QueueBrowserProperties","ReplayStartLocation","ReplayStartLocationBeginning","MessagePublisherAcknowledgeMode","MessagePublisherProperties","Baggage","TraceContext","TraceContextSetter","AbstractQueueDescriptor","QueueAccessType","QueueDescriptor","QueueDiscardBehavior","QueuePermissions","QueueProperties","QueueType","SDTField","SDTFieldType","SDTMapContainer","SDTStreamContainer","SDTUnsupportedValueError","SDTValueErrorSubcode","AuthenticationScheme","CapabilityType","MessageRxCBInfo","MutableSessionProperty","SessionEvent","SessionEventCBInfo","SessionEventCode","SessionProperties","SessionState","SslDowngrade","CacheCBInfo","CacheLiveDataAction","CacheRequestResult","CacheReturnCode","CacheReturnSubcode","CacheSession","CacheSessionProperties","StatType","TransportError","TransportProtocol","Version","_internal","solace","Object","assign","PRINTABLE_LUT","tmp","SPACER","UNPRINTABLE","formatDumpBytes","showDecode","leftPadding","StringBuffer","StringUtils","isEmpty","padLeft","padRight","ascii","line","lineBytes","asciiOffset","dataLen","ccode","append","clear","parseSMFStream","Decode","decodeCompoundMessage","Codec","LOG_WARN","LOG_ERROR","pos","incomingMsg","smf","smfHeader","smf_protocol","messageLength","DestinationFromNetwork","DestinationUtil","Parameter","Queue","createTopicDestination","createFactory","isString","topicName","createFromName","createTopic","createDurableQueueDestination","queueName","createFromLocalName","QUEUE_PREFIX","QUEUE_PREFIX_LEN","TEMPORARY_QUEUE_PREFIX","createDestinationFromName","networkTopicName","networkTopicBytes","spec","name","bytes","encodeBytes","startsWith","offset","type","QUEUE","TEMPORARY_QUEUE","createDestinationFromBytes","decodeBytes","Enum","TOPIC","new","_setCanonical","SolclientFactoryLib","SubscriptionInfo","UUID","ProfileBinding","toSafeChars","stripNullTerminate","DESTINATION_PREFIX_FROM_TYPE","createTemporaryName","vrid","id","generateUUID","describe","createPrefix","createOperationError","errorStr","INVALID_TOPIC_SYNTAX","legacyValidate","exceptionCreator","bind","error","nameLength","bytesLength","isWildcarded","topicUtf8Encode","prefix","networkName","validateAndEncode","constError","subscriptionInfo","keys","some","prefixType","errorConst","subInfo","subInfoConst","parseFromName","constructor","_name","_type","_bytes","_offset","isValidated","_isValidated","_isWildcarded","_subscriptionInfo","getName","getType","getBytes","getOffset","validate","_error","getSubscriptionInfo","util_inspect","equals","other","valueOf","DestinationUtilLib","assert","super","encoding","subscriptionParseNoExport","NOEXPORT_PREFIX","NOEXPORT_PREFIX_LEN","index","isNoExport","subscriptionParseShare","SHARE_PREFIX","SHARE_PREFIX_LEN","LEVEL_DELIMETER","LEVEL_DELIMETER_LEN","groupIndex","shareGroup","isShare","indexOf","substring","dispatchTopicIndex","subscriptionStringParse","layers","parseLayers","constOffset","constResult","SUBSCRIPTION_LAYER_PARSER_FROM_TYPE","_layers","parse","_isShare","_isNoExport","_dispatchTopicIndex","_shareGroup","parser","apiEnv","envObject","g","BUILD_ENV","TEST","target","ErrorResponseSubcodeMapper","SolaceError","makeMap","SC","ROOT_MAPPING","CLIENT_NAME_INVALID","MESSAGE_TOO_LARGE","INACTIVITY_TIMEOUT","SUBSCRIPTION_TOO_MANY","NOLOCAL_DISCARD","OUT_OF_RESOURCES","SUBSCRIPTION_ALREADY_PRESENT","SUBSCRIPTION_ATTRIBUTES_CONFLICT","SUBSCRIPTION_NOT_FOUND","SUBSCRIPTION_INVALID","UNKNOWN_TRANSPORT_SESSION_ID","XML_PARSE_ERROR","LOGIN_FAILURE","BASIC_AUTHENTICATION_IS_SHUTDOWN","CLIENT_CERTIFICATE_AUTHENTICATION_IS_SHUTDOWN","CLIENT_NAME_ALREADY_IN_USE","CLIENT_USERNAME_IS_SHUTDOWN","DYNAMIC_CLIENTS_NOT_ALLOWED","INVALID_VIRTUAL_ADDRESS","CLIENT_ACL_DENIED","MESSAGE_VPN_NOT_ALLOWED","PUBLISH_ACL_DENIED","REPLICATION_IS_STANDBY","SELECTOR_DOES_NOT_MATCH","SUBSCRIPTION_ACL_DENIED","SUBSCRIPTION_DOES_NOT_MATCH","SHARED_SUBSCRIPTIONS_ENDPOINT_NOT_ALLOWED","SHARED_SUBSCRIPTIONS_NOT_ALLOWED","LOW_PRIORITY_MSG_CONGESTION","MESSAGE_VPN_UNAVAILABLE","GM_UNAVAILABLE","SPOOL_OVER_QUOTA","CLIENT_DELETE_IN_PROGRESS","TOO_MANY_CLIENTS","MAX_MESSAGE_USAGE_EXCEEDED","GM_NOT_READY","AD_MAPPING","ALREADY_BOUND","ENDPOINT_ALREADY_EXISTS","ENDPOINT_PROPERTY_MISMATCH","INVALID_DTE_NAME","INVALID_SELECTOR","INVALID_TOPIC_NAME_FOR_TOPIC_ENDPOINT","INVALID_QUEUE_OR_TOPIC_ENDPOINT_DURABILITY","QUEUE_NOT_FOUND","QUOTA_OUT_OF_RANGE","UNKNOWN_FLOW_NAME","UNSUBSCRIBE_NOT_ALLOWED_CLIENTS_BOUND","PERMISSION_NOT_ALLOWED","CLIENT_INITIATED_REPLAY_NON_EXCLUSIVE_NOT_ALLOWED","CLIENT_INITIATED_REPLAY_INACTIVE_FLOW_NOT_ALLOWED","CLIENT_INITIATED_REPLAY_BROWSER_FLOW_NOT_ALLOWED","REPLAY_TEMPORARY_NOT_SUPPORTED","REPLAY_ANONYMOUS_QUEUE_NOT_SUPPORTED","REPLAY_ANONYMOUS_QUEUE_WITHOUT_SUBSCRIPTIONS_NOT_SUPPORTED","UNKNOWN_START_LOCATION_TYPE","MISMATCHED_ENDPOINT_ERROR_ID","REPLAY_START_MESSAGE_NOT_AVAILABLE","PARTITIONED_QUEUE_BROWSING_NOT_SUPPORTED","PARTITIONED_QUEUE_SELECTORS_NOT_SUPPORTED","TOPIC_ENDPOINT_SHUTDOWN","MAX_CLIENTS_FOR_TE","MAX_CLIENTS_FOR_QUEUE","NO_MORE_NON_DURABLE_QUEUE_OR_TOPIC_ENDPOINT","NO_SUBSCRIPTION_MATCH","QUEUE_SHUTDOWN","UNKNOWN_TOPIC_ENDPOINT_NAME","UNKNOWN_QUEUE_NAME","REPLAY_DISABLED","REPLAY_CANCELLED","REPLAY_MESSAGE_UNAVAILABLE","REPLAY_STARTED","REPLAY_MESSAGE_REJECTED","REPLAY_LOG_MODIFIED","OUT_OF_REPLAY_RESOURCES","TOPIC_OR_SELECTOR_MODIFIED_ON_DURABLE_TOPIC_ENDPOINT","REPLAY_FAILED","REPLAY_START_TIME_NOT_AVAILABLE","SYNC_REPLICATION_INELIGIBLE","getSubcodeMappingInner","respErrorCode","respStr","codeMap","searchKey","foundKey","find","mapKey","getSubcodeMapping","UNKNOWN_ERROR","getErrorSubcode","getADErrorSubcode","NO_ERROR","SESSION_NOT_CONNECTED","INVALID_SESSION_OPERATION","INVALID_OPERATION","TIMEOUT","PARAMETER_CONFLICT","PARAMETER_INVALID_TYPE","INTERNAL_ERROR","INSUFFICIENT_SPACE","PROTOCOL_ERROR","COMMUNICATION_ERROR","KEEP_ALIVE_FAILURE","TOPIC_MISSING","SUBSCRIPTION_ERROR_OTHER","NO_LOCAL_NOT_SUPPORTED","DATA_ERROR_OTHER","CREATE_XHR_FAILED","CONNECTION_ERROR","DATA_DECODE_ERROR","AD_MESSAGING_NOT_SUPPORTED","CREATE_WEBSOCKET_FAILED","UNEXPECTED_UNBIND","MESSAGE_DELIVERY_MODE_MISMATCH","MESSAGE_ALREADY_ACKNOWLEDGED","CALLBACK_ERROR","FAILED_LOADING_TRUSTSTORE","FAILED_LOADING_CERTIFICATE_AND_KEY","UNRESOLVED_HOSTS","REPLAY_NOT_SUPPORTED","COMPRESSED_TLS_NOT_SUPPORTED","SHARED_SUBSCRIPTIONS_NOT_SUPPORTED","MESSAGE_ID_NOT_COMPARABLE","message","subcode","reason","SUBCODE_FROM_EC","REQUEST_ABORTED","REQUEST_TIMEOUT","eventCode","correlationKey","_eventCode","_correlationKey","_requestEventCode","superObj","requestEventCode","infoStr","captureStackTrace","stack","ArrayOperations","BidiMap","Iterator","Lazy","Mixin","Resolver","SetOperations","mixin","resolve","defaultComparator","astr","bstr","insertOrdered","array","element","comparator","inplaceInsertOrdered","min","max","splice","pairs","forward","Map","reverse","forEach","setValues","p","key","enumName","instance","matches","filter","enumValues","Set","values","defineProperties","_canonical","enumerable","writable","configurable","final","descriptor","getOwnPropertyDescriptor","defineProperty","enumValue","noneValue","unknownValue","nameOf","strings","arr","start","end","_arr","_index","_end","deref","incr","DEFAULT_PROPERTY_OPTIONS","setPropertyValue","options","lazyProperty","evalFn","lazyProperties","lazyValue","keyValuePairs","add","targetProto","addProto","getOwnPropertyNames","traversePath","commonSource","keySource","pathArr","reduce","source","compoundKey","trim","rawPath","path","concat","isSuperset","subset","every","elem","has","inplaceUnion","setA","setB","union","inplaceIntersection","delete","intersection","inplaceDifference","difference","EventEmitter","Timer","NodeEventEmitter","ArrayUtils","flatten","includes","NODE_DEFAULT_EVENTS","BLACKLIST_DIRECT","buildFilter","emits","emitSet","el","emitArray","DISABLED_ACTIONS","ignore","fail","direct","unsafe","formatEventName","bareEmit","emit","_installDirectFilter","_installErrorHandlers","_installEmitVerifier","_listenerVerificationFilter","_emits","_defaultEmitDirect","args","emitDirect","_directEventName","on","eventName","listener","_verifyListenerEvent","ret","_setEmitDirect","addListener","once","prependListener","prependOnceListener","removeAllListeners","removeListener","listenerCount","directListenerCount","setOnFirstDirectListener","_onFirstDirectListener","firstDirect","onListener","event","throwInternal","err","emitBase","_internalError","ex","formatErrorEvent","info","formattedName","innerEx","disableEmitter","cancel","interval","onInterval","timerRef","setInterval","clearInterval","timeout","onExpire","setTimeout","clearTimeout","FactoryProfile","binding","guaranteedMessagingEnabled","cometEnabled","byteArrayAsString","Version7Profile","legacyInstance","Version10Profile","v10Instance","Version105Profile","forwardInstance","_legacy","_v10","_forward","_default","version7","version10","version10_5","APIProperties","Check","getDefaultLogLevel","INFO","logLevel","logger","_profile","profile","number","_logLevel","_logger","factoryState","initializeCount","initializers","addInitializer","func","push","init","factoryProps","props","isInstanceOf","initializer","reset","_getInitializeCount","Flow","FlowOperation","PrivateFlowEventName","CONNECT","DISCONNECT","START","STOP","DISPOSE","GET_STATS","RESET_STATS","GET_PROPERTIES","GET_DESTINATION","LogFormatter","Stats","ALWAYS_OPS","flowProperties","sessionInterfaceFactory","emitterOptions","emitterOptionsFull","sessionInterface","self","sessionIdHex","flowIdDec","log","wrap","_disposing","_disposed","_userDisconnected","_properties","_sessionInterface","_stats","_privateEventEmitter","_emit","_on","_once","_removeListener","clearStats","_operationCheck","resetStats","connect","userDisconnected","dispose","terminate","getDisposedEvent","_fsm","_midDispatch","terminateWithRunningFSM","terminateFsm","disconnect","_disconnectSession","getProperties","clone","getStat","statType","handleUncorrelatedControlMessage","incStat","processFSMEvent","processEvent","disposed","flowId","_session","operation","v","_isDisconnected","BIND_WAITING","FsmEvent","State","StateMachine","StateLib","FsmObject","EntryPoint","entryPointName","innerState","impl","outerState","state","parentContext","getParent","initial","transitionTo","getDestState","ExitPoint","exitPointName","extraStringInfo","getExtraStringInfo","StateContext","logPadding","getStateMachine","ancestorList","initialReaction","action","ReactionResult","caller","destState","getFinalState","getAncestorList","onInitial","external","processReactionResult","e","curContext","destStateIter","lowestCommonAncestor","onExit","onEntry","destInitial","reactionResult","destAncestorList","setLogPadding","padding","isRunning","eventQueue","finalState","handleUncaughtException","ev","exc","process","processingEvents","evt","_onEventCompletion","getCurrentState","currentState","handleEvent","curState","setPostEventAction","postEventAction","getActiveState","activeStates","isStateActive","unhandledEventReaction","handleUnhandledEvent","uncaughtExceptionReaction","extensions","reactions","entryPoints","exitPoints","extension","repeat","reaction","entryPoint","exitPoint","getEntryPointDestState","getExitPointDestState","entry","appEntryFunc","exit","appExitFunc","externalTransitionTo","transitionToEntryPoint","transitionToExitPoint","eventUnhandled","internalTransition","GlobalBinding","isEnumMember","isFunction","getImpl","getLogLevel","setImpl","setLogLevel","forwarder","buildLogForwarder","trace","TRACE","debug","DEBUG","warn","WARN","ERROR","fatal","addGlobalFuncs","toUpperCase","formatter","_formatter","genericFunction","targetSelf","newLevel","Binding","STUB","generateLogHeader","levelStr","date","Date","levelStrPadding","YY","getFullYear","MM","getMonth","DD","getDate","hh","getHours","mm","getMinutes","ss","getSeconds","ms","getMilliseconds","consoleIn","_trace","_debug","_info","_warn","_fatal","console","Function","level","LogBinding","FATAL","ConsumerFlows","ConsumerFSMEvent","ConsumerFSMEventNames","MessageConsumerEvent","ApplicationAckState","UNACKED","ACKED_NOT_SENT","ACKED_SENT","ApplicationAck","settlementOutcome","exists","ACCEPTED","ApplicationAckRingBuffer","size","_size","_insertIndex","_buffer","fill","ack","insert","beforeEvictCallback","insertIndex","inserting","evictingIndex","evicting","front","firstIndex","rawIndex","lastIndex","readIndex","callback","updateAckState","updateIndex","existing","_allFlows","_reconnectingFlows","_flowsById","flow","flowUp","flowDisposed","flowById","flowReconnecting","flowReconnected","flowDown","UP","RECONNECTED","DISPOSED","RECONNECTING","DOWN","DOWN_ERROR","getFlowById","disposeAll","SESSION_UP","SESSION_UP_NO_AD","SESSION_DOWN","SESSION_DISCONNECT","FLOW_FAILED","FLOW_UP","FLOW_ACTIVE_IND","FLOW_CLOSE","FLOW_OPEN","FLOW_UNBOUND","ACK","ACK_TIMEOUT","BIND_TIMEOUT","CREATE_TIMEOUT","UNBIND_TIMEOUT","CAN_SEND","TRANSPORT_ERROR","VIRTUALROUTER_NAME_CHANGED","RECONNECT_INTERVAL_TIMEOUT","BIND_RESPONSE","CREATE_FAILED","CREATE_SUCCESS","details","SMFLib","ConsumerStateNames","MessageDispatcher","RgmidFactory","TransportAcks","TransportAckResult","RING_BUFFER_SIZE","ZERO_APP_ACK","UZERO","ConsumerFSM","consumer","properties","fsm","LOG_INFO","autoAck","acknowledgeMode","AUTO","_consumer","_acknowledgeTimeoutInMsecs","acknowledgeTimeoutInMsecs","_acknowledgeThreshold","acknowledgeThreshold","_localPreferredWindowSize","windowSize","_localMaxWindowSize","_hasAutoAckSupport","_messageDispatch","emitter","_resetRemoteConnectionState","_resetLocalConnectionState","_replayStartLocation","replayStartLocation","_errorCausingReconnect","emitEventActionType","startDispatchActionType","stopDispatchActionType","postEventActions","preprocessPostEventActions","startIndex","actionLocations","cancelAction","firstActionName","cancellingActionName","firstLocation","ACTIVE","INACTIVE","processPostEventActions","preprocessedActions","requestStartDispatchFSM","addPostEventAction","newEvent","addEventToEmit","activeIndicationEnabled","requestStartDispatch","requestStopDispatch","requestStopDispatchFSM","_addEventToEmit","_requestStartDispatch","_requestStopDispatch","emitBindFailed","CONNECT_FAILED_ERROR","emitRebindFailed","verifyEndpointSubscription","destination","isCapable","SHARED_SUBSCRIPTIONS","verifyNackSettlementOutcomesSupport","requiredSettlementOutcomes","settlementOutcomes","isNackRequired","FAILED","REJECTED","AD_APP_ACK_FAILED","outcomeNotSupportedError","checkCapabilitiesChoicePoint","MESSAGE_REPLAY","topicEndpointSubscription","Unbound","createIfMissing","queueDescriptor","durable","CreateSent","BindSent","checkCapabilitiesChoicePointOnRebind","externalTransition","Reconnecting","RBindSent","handleAccidentalBind","msg","correlationTag","getCorrelationTag","AdProtocolMessage","getCloseMessageConsumer","sendControl","enqueueRequest","connectTimeoutInMsecs","transitionToUnbound","_dispose","context","UNBOUND","emitDisabledEvent","GM_DISABLED","AwaitSessionUp","GUARANTEED_MESSAGE_CONSUME","AwaitFlowOpen","_connectAttempts","connectAttempts","UNBOUND_AWAIT_SESSION_UP","emitBindWaiting","UNBOUND_AWAIT_FLOWOPEN","BindSentExtensions","sendBindRequest","transportAcks","_transportAcks","_endpointEnsure","endpoint","_endpoint","subscription","_subscription","getOpenMessageConsumer","queueProperties","noLocal","lastAcked","lastReceived","browser","endpointErrorId","partitionGroupId","handleBindTimeout","handleBindResponse","cancelBindRequestTimer","bindRequestTimer","handleExpectedBind","accessTypeOrDefault","x","EXCLUSIVE","partitionGroupIdValue","getPartitionGroupId","_clearPartitionGroupId","attrs","lastMsgIdAcked","getLastMsgIdAcked","getFlowId","accessType","getAccessType","topicEndpointBytes","getTopicEndpointBytes","grantedPermissions","getGrantedPermissions","allOthersPermissions","getAllOthersPermissions","respectsTTL","getRespectsTTL","activeFlow","getActiveFlow","wantFlowChangeNotify","getWantFlowChangeNotify","discardBehavior","getQueueDiscardBehavior","deliveryCountSent","getEndpointDeliveryCountSent","endpointId","getEndpointId","maxUnackedMessages","getMaxUnackedMessages","getEndpointErrorId","spoolerUniqueId","getSpoolerUniqueId","quota","getQuota","maxMsgSize","getMaxMsgSize","maxRedelivery","getMaxRedelivery","queueDiscardBehavior","permissions","BR_REPLAY_ERRORID","consumerProperties","quotaMB","maxMessageSize","maxMessageRedelivery","NONE","_active","_remoteWindowSize","eq","msgType","SMFAdProtocolMessageType","BIND","PROTOTOCOL_ERROR","header","responseCode","pm_respcode","RX_DISCARD_SMF_UNKNOWN_ELEMENT","description","pm_respstr","errorSubcode","respEvent","BIND_SENT","newTimeout","UnbindSent","FlowUp","reconnectAttempts","RAwaitSessionUp","RECONNECTING_AWAIT_SESSION_UP","RECONNECTING_BIND_SENT","RAwaitTimer","RECONNECTING_AWAIT_TIMER","handleReconnectIntervalTimeout","cancelReconnectIntervalTimer","reconnectIntervalTimer","reconnectIntervalInMsecs","flowUpFSM","XferInactive","Xfer","transitionToUnboundFromUp","FLOW_UP_XFER","_sendAcks","FLOW_UP_XFER_INACTIVE","UNBIND_SENT","sendUnbindRequest","_endpointClear","handleUnbindTimeout","response","handleUnbindResponse","getCurrentStateName","UNBIND","CREATE_SENT","sendCreateRequest","getCreate","handleCreateTimeout","handleCreateResponse","CREATE","acceptMessage","messageID","getGuaranteedMessageId","idstr","_fsmDispatch","RX_DISCARD_NO_MATCHING_CONSUMER","setDeliveryCount","messageSuid","_getSpoolerUniqueId","INVALID_SUID","_setSpoolerUniqueId","consumerSuidStr","msgSuidStr","ackResult","tryReceive","getGuaranteedPreviousMessageId","transportAckRequired","acksPending","maxPendingAcks","OK","DUPLICATE","RX_DISCARD_DUPLICATE","_applicationAcks","_oldUnacked","dupAckRanges","_sendAck","_setTransportAckTimer","OUT_OF_ORDER","RX_DISCARD_OUT_OF_ORDER","applicationAckRequired","applicationAck","messageId","isAutoAcked","applicationSettle","messageOutcome","RX_SETTLE_FAILED","RX_SETTLE_REJECTED","RX_SETTLE_ACCEPTED","RX_ACKED","oldAckRanges","getDestination","_destination","isDisconnected","UNBOUND_AWAITING_FLOWOPEN","requestStartDispatchUser","_userDispatch","applyStartDispatch","unbindAck","getUnbindAck","_flowId","requestStopDispatchUser","stop","_clearTransportAckTimer","_transportAckTimer","_unacked","createDestinationFromDescriptor","createTemporaryDestination","applicationAcks","transportAck","getAck","_addAckToRanges","acksPendingState","currentRange","ackRanges","allMessageOutcomes","currentRangeLength","rangeOutcome","totalRangeLen","MAX_CLIENT_ACK_RANGES","bareRanges","hasAnyBareRanges","range","forceTransportAck","failedBareRanges","rejectedBareRanges","setAcked","ackRange","Math","Number","POSITIVE_INFINITY","maxWindowSize","UNBOUND_AWAIT_ANY","CLIENT","MESSAGE","SUBSCRIPTION_OK","SUBSCRIPTION_ERROR","messageConsumerEventName","_messageConsumerEventName","_infoStr","_responseCode","_errorSubcode","_reason","QueueDescriptorValidator","QueuePropertiesValidator","APIPropertiesValidators","validateInstance","valBoolean","valInstance","valIsMember","valNumber","valRange","valTopicStringOrEmpty","valTopicEndpointSubscription","typeDesc","TOPIC_ENDPOINT","isDurable","MessageConsumerPropertiesValidator","rawProperties","hasOwnProperty","something","MAX_VALUE","QueueLib","DEFAULTS","transportAcknowledgeTimeoutInMsecs","transportAcknowledgeThresholdPercentage","_browser","_queueDescriptor","_queueProperties","_bindTimeoutInMsecs","_topicEndpointSubscription","_acknowledgeMode","_requiredSettlementOutcomes","_transportAcknowledgeTimeoutInMsecs","_transportAcknowledgeThresholdPercentage","_activeIndicationEnabled","newValue","_noLocal","_windowSize","_reconnectAttempts","_reconnectIntervalInMsecs","_createIfMissing","localCounter","getConsumerLocalName","applyProperties","superFormatter","_makeFSM","_onFlowActive","_onFlowDisconnected","_onFlowUp","getCapability","handleDataMessage","setMessageConsumer","FLOWCHANGEUPDATE","active","onVRNChanged","_accessType","_queueDiscardBehavior","_respectsTTL","_permissions","isActive","_disposeFSM","addSubscription","topic","requestTimeout","success","subCode","respCode","respText","updateQueueSubscription","removeSubscription","queue","dispatch","_dispatchOne","_dispatchOneAutoAck","_dispatchOneBare","_onFirstMessageListener","_availableListener","_flush","caught","isAcknowledged","_autoAcknowledge","messageConsumer","_messageConsumer","_setupEventListers","_onConsumerUp","_onConsumerConnectFailed","_onConsumerDown","_onConsumerDownError","_onConsumerMessage","_onConsumerDisposed","_onConsumerGMDisabled","removeMessageFromQueue","_guaranteedMsgId","_acked","base","fromNumber","fromValue","_acksPending","ZERO","prevMessageID","_lastReceived","lt","gte","_lastAcked","MessagePublisher","MessagePublisherEventName","MessagePublisherPropertiesValidator","PublisherFSMEvent","PublisherFSMEventNames","_lastSent","_next","longToString","MessageIds","setLastSent","lastSent","next","PER_MESSAGE","WINDOWED","ACKNOWLEDGED_MESSAGE","FLOW_NAME_CHANGED","GUARANTEED_MESSAGING_DOWN","REJECTED_MESSAGE","DISCONNECT_FAILED_ERROR","TRANSPORT_FULL","TransportCapabilities","defaultEnablePublisher","globallyEnabled","webSocketAvailable","web","webSocket","getDefaults","enabled","connectRetryCount","_enabled","defined","_connectRetryCount","_connectTimeoutInMsecs","PublisherFSM","_bindWaiting","_onBindWaiting","_onBindFailed","_onDown","_onUp","publisher","_flowName","_publisherId","handleAck","handleNack","ctrlMessage","nack","CLIENTACK","CLIENTNACK","CLOSEPUBFLOW","prepareAdMessageAndSend","dataMsg","isBindWaiting","publisherId","RESEND_COMPLETE","smfmessage","getEventText","_eventText","SolclientSession","PublisherStateNames","TransportReturnCode","ConnectReason","INIT","RESUME","FAILOVER","_publisher","_stateEvents","_guaranteedEnabled","_sendWindow","_resetConnectedInfo","_notifiedWindowClosed","_transportFlowControlled","PublisherUnbound","emitDownAndBindWaiting","PublisherOpenFlowSent","OPENFLOWSENT","emitOpenFlowFailedError","handleOpenFlowResponse","adpMsg","smfRespHeader","OPENPUBFLOW","returnCode","mappedSubcode","lastMsgIDAcked","getWindow","flowName","getFlowName","getPublisherId","_messageIds","_unackedList","_connectReason","messages","count","oldId","_renumber","setFlowId","setPublisherId","payloadSizeLimit","MAX_GUARANTEED_MSG_SIZE","getValue","_memoized_payload","_handleAck","_firstUnackedToSend","handleOpenFlowTimeout","handleUnknownFlowName","sendOpenFlow","openPubFlowMsg","getOpenMessagePublisher","rxMsgObj","PublisherCloseFlowSent","PublisherUp","pEvent","CLOSEFLOWSENT","handleCloseFlowResponse","handleCloseFlowTimeout","sendCloseFlow","closePubFlowMsg","getCloseMessagePublisher","_handleAckEvent","emitFlowUp","PublisherRetransmitting","PublisherDataXfer","_scheduleStateEvents","DATA_XFER","_maybeEmitCanSend","PublisherFlowControlled","FLOW_CONTROLLED","RETRANSMITTING","retransmit","_resendFromUnacked","TX_WINDOW_CLOSED","unackedList","_payload_is_memoized","_memoized_csumm","dupMsg","payloadSize","Encode","adaptMessageToSmf_payloadMemoize","_cloneNumbers","msgId","sendToTransport","NO_SPACE","setRedelivered","_startAckTimer","pop","TX_ACKS_RXED","openFlow","messageIds","reportAcked","reportNacked","numAcked","lastAckedMessage","_resetAckTimer","_clearAckTimer","list","resendIndex","m","sendData","failover","_ackTimer","_emitStateEvents","pair","_handleAckTimeout","TX_ACK_TIMEOUT","current","setGuaranteedPreviousMessageId","setGuaranteedMessageId","fromMsg","toMsg","_setPostEventAction","desc","_postEventAction","MessageTracingSupport","isStringOrNothing","getBaggage","_baggage","setBaggage","_setBaggage","isNumber","isBoolean","_traceId","_spanId","_isSampled","_traceState","_version","_clonedContextSetter","_setSpanId","_setTraceId","_setSampled","_setTraceState","_setVersion","setVersion","setTraceId","setSpanId","setSampled","setTraceState","traceContextValue","traceContextBuffer","traceContextBytes","bytesRead","traceContextSetter","firstByte","byte1DataView","DataView","byte1","getUint8","version","isSampled","traceId16Bytes","traceId","TRACE_ID_BYTES_LENGTH","spanId8Bytes","spanId","SPAN_ID_BYTES_LENGTH","traceStateLengthBytes","traceStateLengthDataView","traceStateLength","getUint16","traceStateBytes","traceState","toClone","newContextSetter","getSpanId","getTraceId","getIsSampled","getTraceState","getVersion","getTruncatedTraceState","_standardTraceStateTruncation","MAX_TRACE_STATE_LENGTH","getEncodedTraceContext","contentBuffer","offsetPos","contentBufferDataView","setUint8","traceId16byte","spanId8byte","setUint16","truncatedTraceState","Uint16Array","maxTraceStateLength","ignoredMembers","traceStateBuilderArray","traceStateBuilderArrayLength","listMembers","listMember","currentMemberLength","newExpectedLength","currentMember","getTraceContextSetter","_traceContextSetter","getTransportContext","_transportContext","_setTransportContext","contextSetter","getCreationContext","_creationContext","_setCreationContext","MessageDumpStandardProvider","MessageDumpUtil","createMessage","createReplicationGroupMessageId","fromString","LIVE","CACHED","SUSPECT","DIRECT","PERSISTENT","NON_PERSISTENT","MSGDUMP_BRIEF","MSGDUMP_FULL","DebugLib","MessageDumpUtilLib","fpDestination","dest","fpSenderId","getSenderId","fpAppmsgType","getApplicationMessageType","fpAppMsgId","getApplicationMessageId","fpSequenceNumber","sequenceNum","getSequenceNumber","fpTopicSequenceNumber","topicSeqNo","getTopicSequenceNumber","isLong","fpCorrelationId","getCorrelationId","fpHttpContentType","fpHttpContentEncoding","fpSendTimestamp","timestamp","getSenderTimestamp","mdu","formatDate","fpRcvTimestamp","getReceiverTimestamp","fpClassOfService","cos","getUserCos","fpDeliveryMode","mode","getDeliveryMode","fpGuaranteedMsgId","fpReplicationGroupMessageId","rgmid","getReplicationGroupMessageId","fpTimeToLive","timeToLive","getTimeToLive","d","getTime","fpExpiration","getGMExpiration","fpMessageDMQEligible","isDMQEligible","fpMessageRedelivered","isRedelivered","fpMessageDeliveryCount","getDeliveryCount","fpDiscardIndication","isDiscardIndication","fpAckImmediately","isAcknowledgeImmediately","fpElidingEligible","isElidingEligible","fpReplyMessage","isReplyMessage","fpReplyTo","replyTo","getReplyTo","fpDeliverToOne","isDeliverToOne","fpCacheMessage","getCacheStatus","fpCacheRequestId","cacheRequestId","getCacheRequestId","fpUserPropertyMap","flags","propMap","getUserPropertyMap","getKeys","detailValue","printMap","fpCorrelationTag","strValue","getCorrelationKey","fpUserData","notEmpty","getUserData","fpSdtStream","sdtFieldValue","getSdtContainer","STREAM","countItems","printStream","fpSdtMap","MAP","fpBinaryAttachment","_binaryAttachment","att","fpXmlContent","xml","getXmlContent","fpXmlMetadata","xmlMetadata","getXmlMetadata","fpTracingCreationContext","isPresent","fpTracingTransportContext","fpTracingBaggage","MessageDumpStandardProviderLib","MessageDumpState","providers","getOutOfRangeValue","rawData","sdtField","getSubcode","VALUE_OUTSIDE_SUPPORTED_RANGE","getSourceData","sdtMap","indent","nothing","lines","strIndent","sort","getField","BYTEARRAY","sdtStream","rewind","hasNext","getNext","DESTINATION","timeStamp","dump","separator","colPadding","sb","theSeparator","needSeparator","theColPadding","dumpProviders","provider","BINARY","TEXT","COS1","COS2","COS3","SDTCodec","isInstanceOfOrNothing","isNumberOrNothing","MESSAGE_CLONE_OPTIONS","circular","includeNonEnumerable","initMessage","_deliveryMode","_userCos","_cacheStatus","_spoolerUniqueId","_priority","_deliveryCount","clearMessage","fields","f","clearExtendedVarLenParameters","_messageType","setApplicationMessageId","_applicationMessageId","setApplicationMessageType","_applicationMessageType","getBinaryAttachment","setBinaryAttachment","_setBinaryAttachment","_cacheRequestId","_setCacheRequestID","cacheRequestID","_correlationId","setCorrelationId","setCorrelationKey","_deliverToOne","setDeliverToOne","_setDeliverToOne","setDeliveryMode","_setDeliveryMode","setDestination","_setDestination","_discardIndication","setDiscardIndication","_setDiscardIndication","_elidingEligible","setElidingEligible","_setElidingEligible","getPublisherMessageId","_publisherMsgId","setPublisherMessageId","_timeToLive","setTimeToLive","MAX_MESSAGE_TTL_MS","_expiration","setGMExpiration","_dmqEligible","setDMQEligible","_setDMQEligible","_guaranteedPrevMsgId","getMessageConsumer","_setSpoolerMessageId","_spoolerMessageId","smid","suid","msgid","_topicSequenceNumber","setTopicSequenceNumber","deliveryCount","settle","messageSettlementOutcome","canAck","hasAutoAckSupport","doesConsumerSupportOutcome","_validateBeforeAcknowledge","acknowledge","_ackImmediately","setAcknowledgeImmediately","_setAcknowledgeImmediately","_setCacheStatus","cacheStatus","_replyMessage","_redelivered","setAsReplyMessage","_receiverTimestamp","_replyTo","setReplyTo","_senderId","setSenderId","_senderTimestamp","setSenderTimestamp","_sequenceNumberError","_sequenceNumber","setSequenceNumber","_autoSequenceNumber","getPriority","setUserCos","_setUserCos","setPriority","_setPriority","_userData","setUserData","_setUserData","_xmlContent","getXmlContentDecoded","setXmlContent","setValue","_setXmlContentInternal","setXmlMetadata","_setXmlMetadata","_xmlMetadata","_binaryMetaChunk","meta","_smfHeader","_autoSenderTimestamp","_userPropertyMap","setUserPropertyMap","setSdtContainer","container","structuredContainer","_structuredContainer","sdtType","STRING","binaryAttachment","binaryAttachmentLength","parseSingleElement","setTransportContext","validFlags","clearExtendedVarLenParams","SOLCLIENT_USER_PROP_QUEUE_PARTITION_KEY","ReplayStartType","RMID_VERSION_1_PREFIX","RMID_LEN","validRmidHexRegex","isValue","effectiveMessageId","_replayStartValue","RGMID","_suid","_messageId","compare","otherReplicationGroupMessageId","oId","gt","idBuffer","toBytesBE","hexString","sep","rgmidStr","rmidBufs","rmidHex","test","rmidBuffer","buflen","readUInt32BE","TYPE_DESCRIPTION","DESINATION_TYPE_TO_DESCRIPTOR_TYPE","maybeAdaptFromDestination","targetType","queueSpec","_durable","NONEXCLUSIVE","valTopicString","NOTIFY_SENDER_ON","NOTIFY_SENDER_OFF","READ_ONLY","CONSUME","MODIFY_TOPIC","DELETE","_quotaMB","_maxMessageSize","_discardBehavior","_maxMessageRedelivery","ReplayStartLocationDate","createReplayStartLocationBeginning","createReplayStartLocationDate","dateTime","BEGINNING","DATE","SDTDestType","EncodeSingleElement","IEEE754LIB","ParseSingleElement","StringToBuffer","encodeSingleElement","stringToBuffer","SDTDataTypes","EncodeHeader","encodeHeader","tag","valueLen","byte0","strSdtLen","Stream","EncodeInteger","int48ToStr","vIn","byteI","floor","EncodeSingleElementLib","UtilLib","EncodeMap","encodeMap","sdtmap","buf","sdtfield","strKeyField","strKeyName","nullTerminate","encodeSingleElementToBuf","DestinationLib","EncodeStream","encodeStream","C_2_48","pow","strencode","fieldVal","BOOL","Boolean","UINT8","UnsignedInteger","INT8","Integer","UINT16","INT16","UINT32","INT32","UINT64","INT64","WCHAR","Char","ByteArray","FLOATTYPE","Float","toIEEE754Single","DOUBLETYPE","toIEEE754Double","NULLTYPE","Null","UNKNOWN","hdr","sdtstream","toIEEE754","ebits","fbits","bias","Infinity","abs","ln","LN2","bits","parseInt","fromIEEE754","j","NaN","strToByteArr","byteArrToStr","fromIEEE754Double","fromIEEE754Single","ParseDestination","parseDestination","dataBuf","destType","readUInt8","destBytes","create","ParseInteger","autoDecodeVarLengthNumber","ParseFieldHeader","parseFieldHeader","onebyte","elemType","lenBytes","elemLen","elemValLen","ParseFloat","parseFloatField","readFloatBE","readDoubleBE","createField","readUIntBE","parseIntegerField","isSigned","readInt8","readInt16BE","readUInt16BE","readInt32BE","longValue","getNumBitsAbs","toNumber","field","setError","ParseSingleElementLib","ParseMap","parseMapAt","datalen","mapObj","keyFieldHeader","keyString","valueFieldHeader","valueField","addField","ParseStream","parseStreamAt","fieldHeader","SMFMessage","SMF_MESSAGE","streamObj","validateSdtField","_value","getValueNoThrow","_map","deleteField","typeOrField","SDTFieldLib","_stream","_writable","_readPt","sourceData","inspect","SDTMapContainerLib","SDTStreamContainerLib","ValidateLib","baseTypes","failInvalidParameter","valueType","instanceOf","ClientCapabilityType","SessionEventName","createSession","sessionProperties","messageCallbackInfo","eventCallbackInfo","BASIC","CLIENT_CERTIFICATE","AUTHENTICATION_SCHEME_BASIC","AUTHENTICATION_SCHEME_CLIENT_CERTIFICATE","OAUTH2","PEER_SOFTWARE_VERSION","PEER_SOFTWARE_DATE","PEER_PLATFORM","PEER_PORT_SPEED","PEER_PORT_TYPE","MAX_DIRECT_MSG_SIZE","PEER_ROUTER_NAME","MESSAGE_ELIDING","NO_LOCAL","TEMPORARY_ENDPOINT","GUARANTEED_MESSAGE_PUBLISH","GUARANTEED_MESSAGE_BROWSE","ENDPOINT_MGMT","SELECTOR","ACTIVE_CONSUMER_INDICATION","COMPRESSION","CUT_THROUGH","ENDPOINT_DISCARD_BEHAVIOR","ENDPOINT_MESSAGE_TTL","JNDI","PER_TOPIC_SEQUENCE_NUMBERING","QUEUE_SUBSCRIPTIONS","SUBSCRIPTION_MANAGER","TRANSACTED_SESSION","COMPRESSED_SSL","VAR_LEN_EXT_PARAM","UNBIND_ACK","BR_ERRORID","PQ","CorrelatedRequest","timer","respRecvdCallback","DefaultCapabilities","createDefaultCapabilities","defaultCapabilities","assumedMaxAdSize","Process","C_2_32","leftPad","generateRandomId","rand","random","toFixed","GlobalContext","sessionCounter","idCounter","RandId","NextSessionCounter","NextId","GenerateClientName","product","platform","GenerateUserIdentification","GenerateClientDescription","parseURL","hostListDNSFilter","urls","cb","host","url","address","resolved","parseURLs","rawURLs","rawURL","HostInfo","waitTime","HostList","connectRetries","reconnectRetries","connectRetriesPerHost","reconnectRetryWaitInMsecs","hosts","href","connectTryCount","reconnectTryCount","connectTryCountPerHost","_mutableState","resolveHosts","succeeded","code","syscall","hostname","wasConnected","disconnected","hostPointer","hostTries","listTries","exhausted","lastHostInfo","getNextHost","hostTriesMax","listTriesMax","isNewList","isNewHost","didJustFinishList","hostInfo","currentHostToString","hostNumber","messageRxCBFunction","userObject","CLIENT_NAME","CLIENT_DESCRIPTION","OutstandingDataRequest","correlationId","replyReceivedCBFunction","reqFailedCBFunction","P2PUtil","getP2PInboxTopic","getP2PTopicSubscription","sessionEventCBFunction","UP_NOTICE","REJECTED_MESSAGE_ERROR","PROPERTY_UPDATE_OK","PROPERTY_UPDATE_ERROR","CAN_ACCEPT_DATA","DISCONNECTED","RECONNECTING_NOTICE","RECONNECTED_NOTICE","REPUBLISHING_UNACKED_MESSAGES","UNSUBSCRIBE_TE_TOPIC_OK","UNSUBSCRIBE_TE_TOPIC_ERROR","GUARANTEED_MESSAGE_PUBLISHER_DOWN","CONNECT_TIMEOUT","CONNECT_WAIT_TIMEOUT","DOWNGRADE_TIMEOUT","TRANSPORT_UP","TRANSPORT_DESTROYED","TRANSPORT_CAN_ACCEPT_DATA","TRANSPORT_PARSE_ERROR","TRANSPORT_PROTOCOL_SMP","TRANSPORT_PROTOCOL_CLIENTCTRL","EXCEPTION","SUBSCRIBE_TIMEOUT","CREATE_SUBSCRIBER","SEND_ERROR","FLOWS_DISCONNECTED","TRANSPORT_FLUSHED","DNS_RESOLUTION_COMPLETE","TRANSPORT_CHANGE_DONE","buildType","Superclass","superclassArgs","sessionEventCode","_sessionEventCode","SUPERCLASS_FOR_SESSION_EVENT","SUPERCLASS_ARGS","sec","rc","ck","TYPE_CACHE","build","superclassArgsBuilder","SessionFSMEvent","eventText","eventReason","smfMsg","sessionId","guaranteedFlowObject","ConsumerLib","PublisherLib","TransportLib","SessionRequestType","SessionStateName","StatsByMode","SubscriptionUpdateTimeoutMessages","STAT_TX_BYMODE_BYTES","STAT_TX_BYMODE_MSGS","STAT_RX_BYMODE_BYTES","STAT_RX_BYMODE_MSGS","STAT_TX_BYMODE_REDELIVERED","STAT_TX_BYMODE_BYTES_REDELIVERED","SessionFSM","session","stats","logFormatter","_sessionProperties","_sessionStatistics","_hosts","_consumers","_flowInterfaceFactory","send","enqueueOutstandingCorrelatedReq","_userBackpressured","clearCurrentError","SessionDisconnected","sEvent","disposeInternal","SessionConnecting","CONNECTING","handleTransportDestroyed","clearConnectTimer","_currentHost","connectWaitTimeInMsecs","_connectWaitTimer","WaitingForInterConnectTimeout","WaitingForTransport","setConnectTimer","_connectFailEvent","_connectSuccessEvent","DestroyingTransport","_reconnectRetries","_currentError","emitSessionEvent","setCurrentError","WaitingForDNS","sessionEvent","errEvent","SessionTransportUp","WAITING_FOR_DNS","DESTROYING_TRANSPORT","destroyTransportSession","WAITING_FOR_INTERCONNECT_TIMEOUT","WAITING_FOR_TRANSPORT","errorMessage","initTransport","WaitingForTransportUp","WAITING_FOR_TRANSPORT_UP","_justEntered","_transport","sendClientCtrlLogin","WaitingForLogin","WAITING_FOR_LOGIN","setClientCtrlTimer","clientCtrlMsg","getResponse","checkNoLocal","checkCompressedSsl","updateReadonlySessionProps","WaitForTransportChange","rawSubcode","responseString","requestDowngrade","clearClientCtrlTimer","WAITING_FOR_TRANSPORT_CHANGE","newTransport","updateTransportCompression","ReapplyingSubscriptions","REAPPLYING_SUBSCRIPTIONS","copySubscriptionCacheKeys","reapplySubscriptions","WaitForSubConfirm","WaitForCanAcceptData","clearSubscriptionCacheKeys","WAITING_FOR_SUBCONFIRM","subscriptionStr","encodedUtf8Subscription","DestroyTransport","canConnectPublisher","_defaultPublisher","WaitingForMessagePublisher","WAITING_FOR_CAN_ACCEPT_DATA","WAITING_FOR_PUBFLOW","sendPublisherSessionUpEvent","canConnectConsumer","flows","sendConsumerSessionUpEvent","reconnectingFlows","FullyConnected","SessionDisconnecting","cleanupSession","handleSubscriptionUpdateError","clearKeepAlive","FULLY_CONNECTED","scheduleKeepAlive","DISCONNECTING","DisconnectingFlows","DISCONNECTING_FLOWS","gatherPendingFlows","isGathering","adaptedListenForDestroy","installfn","downEvents","known","pending","onFlowDown","checkPendingFlows","proceed","FlushingTransport","FLUSHING_TRANSPORT","flushTransport","flushTransportSession","onTransportFlushed","addToSubscriptionCache","_subscriptionCache","_subscriptionCacheCount","cancelOutstandingCorrelatedReq","_correlatedReqs","req","_clientCtrlTimer","_connectTimer","_keepAliveTimer","resetKeepAliveCounter","noLocalSupported","caps","getRouterCapabilities","_compressedTLS","checkSessionDestinationCapability","_subscriptionCacheKeys","p2pTopic","p2pInboxBase","createMessagePublisher","publisherProperties","isAD","createMessageConsumer","createQueueBrowser","destroy","_smfClient","operations","_kaStats","removeFromSubscriptionCache","operationKey","sendEvent","reqTimeoutCb","reqTimeout","respRecvCallback","readTimeoutInMsecs","outstandingReq","errorInFsm","errorEventText","flush","nextCorrelationTag","TX_TOTAL_DATA_MSGS","TX_DIRECT_MSGS","TX_PERSISTENT_MSGS","TX_NONPERSISTENT_MSGS","TX_TOTAL_DATA_BYTES","TX_DIRECT_BYTES","TX_PERSISTENT_BYTES","TX_NONPERSISTENT_BYTES","getTransportInfo","getInfoStr","handleADCtrlMessage","pm_corrtag","updateRxStats","cancelledRequest","RX_REPLY_MSG_DISCARD","handleADTrMessage","pm_ad_flowid","handleApiSubscriptionTimeout","timeoutMsg","handleClientCtrlMessage","SMFClientCtrlMessageType","LOGIN","SMFClient","SMF_CLIENTCTRL_LOGIN_FAKE_CORRELATIONTAG","handleClientCtrlResponse","handleClientCtrlTimeout","handleConnectTimeout","handleUpdatePropertyTimeout","handleRejectedTrMessage","topicNameRaw","pm_tr_topicname_bytes","replace","handleSMFMessage","discardMessage","SMFProtocol","TRMSG","smf_adf","ADCTRL","CLIENTCTRL","SMP","handleSMPMessage","KEEPALIVE","KEEPALIVEV2","handleUnknownProtocolMessage","handleSMFParseError","transportError","request","confirm","handleSubscriptionTimeout","handleTransportEvent","transportEvent","getTransportEventCode","TransportSessionEventCode","getSessionId","DESTROYED_NOTICE","GuaranteedFlowControlledRelief","PARSE_FAILURE","TSESSION","messageType","lastMsgWritten","lastBytesWritten","rxData","rxError","TransportFactory","createTransport","injectTransportInterceptor","_transportInterceptor","interceptor","setInterceptor","keepAliveTimeout","_keepAliveCounter","keepAliveIntervalsLimit","clientStats","getClientStats","prestatMsgWritten","msgWritten","prestatBytesWritten","bytesWritten","kaMsg","KeepAliveMessage","prepareAndSendMessage","deliveryMode","adLocallyDisabled","_gmSendDisallowed","requestConfirmation","topicDestination","sendSubscribe","sub","keepAliveIntervalInMsecs","statTarget","forceAllowEnqueue","content","encodeCompoundMessage","updateTxStats","compressionLevel","match","_plaintextTLS","sslConnectionDowngradeTo","PLAINTEXT","ClientCtrlMessage","getLogin","smpMsg","SMPMessage","getSubscriptionMessage","sendUpdateProperty","mutableSessionProperty","getUpdate","transportDowngradeTimeoutInMsecs","subscriptionUpdate","subject","requestType","default","isSMP","REMOVE_DTE_SUBSCRIPTION","ADD_SUBSCRIPTION","ADD_P2PINBOX","generateMessage","getDTEUnsubscribeMessage","REMOVE_SUBSCRIPTION","queueSubscriptionUpdate","getQueueSubscriptionMessage","origReq","smfMessage","pm_deliverymode","msgStatKey","bytesStatKey","msgLength","RX_TOTAL_DATA_MSGS","RX_TOTAL_DATA_BYTES","smf_di","RX_DISCARD_MSG_INDICATION","RX_CONTROL_MSGS","RX_CONTROL_BYTES","TX_REQUEST_SENT","TX_CONTROL_MSGS","TX_CONTROL_BYTES","clientCtrlRespMsg","_setVpnNameInUse","getVpnNameInUseValue","oldVirtualRouterName","virtualRouterName","newVirtualRouterName","getVridInUseValue","_setVirtualRouterName","handleVirtualRouterNameChange","_setP2pInboxBase","getP2PTopicValue","_setP2pInboxInUse","updateCapabilities","gmCap","_getCapability","oldName","newName","severTls","startCompression","SessionOperation","CTRL","SEND","QUERY_OPERATION","valArrayIsMember","valLength","valNotEmpty","valString","valStringOrArray","ALLOWED_PROTOCOLS","valClientName","validateClientName","enumInstance","allowNull","valUrlList","valArray","included","protocol","isHttpTransport","transportProtocol","HTTP_BINARY_STREAMING","HTTP_BINARY","HTTP_BASE64","validatePropsSupportedByTransport","nonHttpPropsSet","propNames","matchUrl","regex","all","arrayLength","currententry","string","useSsl","SessionPropertiesValidator","webTransportProtocolList","useClientCert","authenticationScheme","equal","empty","idToken","accessToken","nonHTTPTransportPropsSet","recommendedMin","defaultConnectTimeoutInMsecs","connectTimeout","transportCount","makeDefaults","_vpnNameInUse","_virtualRouterName","_p2pInboxInUse","_p2pInboxBase","_userIdentification","_tpProtocolInUse","_tpContentType","_publisherProperties","SessionPropertiesBrowser","_tpProtocol","_tpDowngradeTimeout","_transportProtocolList","_bufferedAmountQueryInterval","_setTransportProtocolInUse","_setWebTransportProtocolInUse","_lendsInspect","bufferedAmountQueryIntervalInMsecs","transportContentType","transportProtocolInUse","SessionPropertiesBase","_authScheme","_accessToken","_idToken","_issuerIdentifier","_url","_password","_userName","_clientName","_appDesc","_vpnName","_connectTimeout","minTimeout","margin","connectDowngradeDefault","_connectRetries","_connectRetriesPerHost","_reconnectRetryWaitInMsecs","_genSendTimestamps","_genReceiveTimestamps","_includeSenderId","_genSequenceNumber","_kaInterval","_kaIntervalsLimit","_setUserIdentification","_subLocalPriority","_subNetworkPriority","_ignoreDupSubError","_ignoreSubNotFoundError","_reapplySubcriptions","_readTimeout","_sendBufferMaxSize","_assumedMaxAdSize","_maxWebPayload","issuerIdentifier","password","userName","clientName","applicationDescription","vpnName","vpnNameInUse","generateSendTimestamps","generateReceiveTimestamps","includeSenderId","generateSequenceNumber","p2pInboxInUse","userIdentification","subscriberLocalPriority","subscriberNetworkPriority","ignoreDuplicateSubscriptionError","sendBufferMaxSize","maxWebPayload","REMOVE_P2PINBOX","SESSION_ERROR","TRANSPORT_FAIL","CONNECTED","MessageLib","CACHE_REQUEST_PREFIX","transportProtocolDefaultList","WS_BINARY","xhrBinary","streaming","isValidADTransport","SOLCLIENT_REQUEST_PREFIX","messageCallback","eventCallback","_sessionFSM","_messageCallbackInfo","wrapMessageCallback","_eventCallbackInfo","wrapEventCallback","selectedProtocol","defaultList","sliceIndex","validForAD","_adDisabledReason","transportProtocols","invalid","_sessionStats","_outstandingDataReqs","_capabilities","_seqNum","allowOperation","statesCanAck","stateName","subscribe","isBooleanOrNothing","isRangeCompareOrNothing","handleSubscriptionUpdateResponse","handleQueueSubscriptionUpdateResponse","unsubscribe","unsubscribeDurableTopicEndpoint","createFromSpec","handleDTEUnsubscribeResponse","updateProperty","responseCallback","respMsg","oldP2pTopicName","oldP2pTopic","newP2pTopicName","newP2pTopic","afterAddCallback","resp","smpResp","afterRemoveCallback","ignoreSubscriptionNotFoundError","updateAuthenticationOnReconnect","authenticationProperties","allowedProperties","newProps","getSessionProperties","_failOnExtendedVariableLengthProperties","validateAndSendMessage","sendRequest","requestFailedCBFunction","isFunctionOrNothing","replyToTopic","enqueueOutstandingDataReq","sendReply","messageToReplyTo","replyMessage","sessionState","getSessionState","getTransportProtocol","capabilityType","sessionStateName","getFSMState","WAITING_FOR_SESSION_UP","WAITING_FOR_P2PINBOX_REG","createCacheSession","browserProperties","destinationType","factoryMethod","vrn","localName","operationEnum","allow","anything","NEW","routerCapabilities","sendDest","senderTimestamp","noSenderTimestamp","hasAutoSenderTimestamp","now","sequenceNumber","noSequenceNumber","hasAutoSequenceNumber","senderId","noSenderId","reqFailedCb","replyRecvdCb","none","TX_REQUEST_TIMEOUT","requestEvent","cancelOutstandingDataReq","dataReq","dataMessageIn","dataMessage","RX_REPLY_MSG_RECVED","requestConfirm","adCtrlMessage","getEventCBInfo","setEventCBInfo","eventCBInfo","getMessageCBInfo","setMessageCBInfo","messageCBInfo","rfu","buildErrorEvent","object","CodecLib","BinaryMetaBlock","SMFAdProtocolParam","SMFClientCtrlParam","SMFParameterType","SMFExtendedParameterType","SMFSMPMessageType","SMFSMPMessageTypeFlags","SMFTransportSessionMessageType","SMFParameter","setBits","parseAdpAt","adpVersion","twobyte","paramUH","paramType","paramLen","paramValueLen","smfParam","addParameter","encAdp0Param","uh","paramtype","encAdp8Param","encAdp16Param","encAdp32Param","encAdp64Param","RSValueLenMap","encAdpReplayParam","valType","valObj","encAdp64AckPairParam","outcome","paramLength","encAdpUTF8NTParam","byte2","encAdp","paramspace","paramarray","getParameterArray","param","WINDOW","EP_DURABLE","ACCESSTYPE","FLOWTYPE","EP_RESPECTS_TTL","TRANSACTION_CTRL_MESSAGE_TYPE","TRANSACTED_SESSION_STATE","ACTIVE_FLOW_INDICATION","WANT_FLOW_CHANGE_NOTIFY","MAX_REDELIVERY","getUh","EP_BEHAVIOUR","PARTITION_GROUP_ID","FLOWID","TRANSPORT_WINDOW","EP_ALLOTHER_PERMISSION","EP_QUOTA","EP_MAX_MSGSIZE","GRANTED_PERMISSION","TRANSACTED_SESSION_ID","PUBLISHER_ID","LASTMSGIDSENT","LASTMSGIDACKED","LASTMSGIDRECEIVED","TRANSACTION_ID","ENDPOINT_ERROR_ID","REPLAY_START_LOCATION","replayParamVal","APPLICATION_ACK","ranges","settlementRanges","QUEUENAME","DTENAME","TOPICNAME","FLOWNAME","TRANSACTED_SESSION_NAME","TRANSACTION_FLOW_DESCRIPTOR_PUB_NOTIFY","TRANSACTION_FLOW_DESCRIPTOR_PUB_ACK","TRANSACTION_FLOW_DESCRIPTOR_SUB_ACK","NOLOCAL","APPLICATION_PUB_ACK","paramdata","threebytes","padBytes","twobytes","ContentSummaryType","ParamParse","ParseSMF","parseCCAt","payloadLen","ccMsg","paramUh","smfP","encCC","paramSpace","paramArray","currentParam","currentParamOneByte","paramData","ContentSummaryElement","position","XML_META","XML_PAYLOAD","BINARY_ATTACHMENT","CID_LIST","BINARY_METADATA","SolclientDestinationLib","SolclientMessageLib","SolclientSDTLib","PriorityUserCosMap","parseSMFAt","parseSMPAt","parseTsSmfMsgAt","userCosForPriority","BIN_STRUCTYPES","adaptBinaryMetaToMessage","binaryMeta","messageIn","messageSdt","payload","preambleByte0","preambleByte1","h","headerMap","ci","mi","mt","rt","si","sn","ts","bag","ctx","_baggageObj","fromTraceContext","adaptSmfToMessage","stream","smf_dto","smf_elidingEligible","smf_deadMessageQueueEligible","smf_priority","pm_msg_priority","pm_userdata","pm_ad_redelflag","pm_ad_flowredelflag","pm_ad_msgid","pm_ad_prevmsgid","pm_ad_publisherid","pm_ad_publishermsgid","pm_ad_topicSequenceNumber","pm_ad_redeliveryCount","pm_ad_spooler_unique_id","pm_ad_replication_mate_ack_message_id","pm_ad_local_spooler_message_id","pm_ad_ttl","pm_ts_transport_context","payloadOffset","headerLength","cs","pm_content_summary","payloadLength","currentChunk","chunkBegin","chunkEnd","fromEncodedSmf","binaryMetadataChunk","payloadPosition","SMFHeader","base64Encode","encContentSummary","encDeliveryMode","encLightSMFParam","encodeSMFParam","encodeSMFExtendedParam","FORCED_LENGTH_MODE","encSmp","priorityForUserCos","addContentElementToArrays","csumm","payloadArray","dataChunk","cstype","cse","addToMapIfPresent","adaptMessageToBinaryMeta","sdtPreamble","sdtStreamContainer","adaptMessageToSmf_nonPayload","smfHeaderIn","pm_ad_publishermsgId","pm_ad_ackimm","pm_queue_len","pm_queue_offset","userData","encodedSdtPayload","binaryMetaSMF","asEncodedSmf","MAX_24BITS","adaptMessageToSmf_payloadFinalize","payloadBytes","adaptMessageToSmf","bitRange","maskValues","DI_BIT","ELIDING_ELIGIBLE_BIT","DTO_BIT","ADF_BIT","DMQE_BIT","VERSION_BITS","UH_BITS","PROTOCOL_BITS","PRIORITY_BITS","TTL_BITS","QT_OFFSET_BYTES","QT_LEN_BYTES","encodeSMF","w1","smf_version","smf_uh","smf_ttl","params","TR_TOPICNAME","LIGHT_QUEUE_NAME_OFFSET","pm_topic_len","LIGHT_TOPIC_NAME_OFFSET","pm_topic_offset","LIGHT_CORRELATION","LIGHT_ACK_IMMEDIATELY","MESSAGEPRIORITY","USERDATA","pm_username","USERNAME","pm_password","PASSWORD","RESPONSE","DELIVERY_MODE","ASSURED_MESSAGE_ID","ASSURED_PREVMESSAGE_ID","ASSURED_FLOWID","ASSURED_REDELIVERED_FLAG","AD_TIMETOLIVE","pm_ad_publisherMsgId","PUBLISHER_MSGID","MESSAGE_CONTENT_SUMMARY","extendedStreamContents","extendedUH","pm_oauth2_access_token","OAUTH2_ACCESS_TOKEN","pm_oidc_id_token","OIDC_ID_TOKEN","pm_oauth2_issuer_identifier","OAUTH2_ISSUER_IDENTIFIER","TS_TRANSPORT_CONTEXT","SIX","EXTENDED_TYPE_STREAM","encodedParams","hdrlen","msglen","setMessageSizes","setPayloadSize","encodedHeader","SMFUH","delModeEnumBidiMap","lutDelModeToEnum","lutEnumToDelMode","uhTypeMap","paramTypeBits","paramTypeCount","lenMap","idx","lightMap","lenBits","lenCount","ContentSummaryDecodeMap","FIVE","parseTopicQueueOffsets","parseResponseParam","parseDeliveryMode","delmode","lookup","lut","parseContentSummary","elements","cumulativeSize","elementType","elementDeclaredLength","elementSize","cst","currentElement","contentSummaryArr","messageElementDescriptions","currentContentSummary","currentSizeStr","forcedLengthMode","lengthModeMap","0","1","2","4","8","lengthMode","lengthString","base64Decode","isSMFHeaderAvailable","remaining","isSMFHeaderValid","isSMFAvailable","totalLen","parseSMFExtendedStream","streamLen","pUH","3","AD_REDELIVERY_COUNT","AD_SPOOLER_UNIQUE_ID","AD_ACK_MESSAGE_ID","AD_REPL_MATE_ACK_MSGID","readHeaderOnly","word1","headerLen","word3","paramByte1","prmUh","paramIsLightweight","lwpType","lwpLen","lwpValueLen","parsedQueueOffsets","parsedTopicOffsets","pStart","pType","pLen","pValueLen","pm_ad_publisher_id","parsedResponse","SUB_ID_LIST","GENERIC_ATTACHMENT","AD_TOPICSEQUENCE_NUMBER","contentSummary","AD_FLOWREDELIVERED_FLAG","extSuccess","ADDSUBSCRIPTION","REMSUBSCRIPTION","ADDQUEUESUBSCRIPTION","REMQUEUESUBSCRIPTION","msgFlags","smpFlags","queueLength","encodedUtf8QueueName","subsLength","TransportSMFMessage","remains","parseTsSmfHdrAt","smfheader","transportSMFMessage","tsHdrLen","tsHeaderLength","CREATE_RESP","rtrTagLen","routerTag","tsHeaderPreLength","tsDestroyHeaderPreSid","tsCreateHeader","tsDataTokenPreSid","tsDataStreamTokenPreSid","genTsCreateHeader","genTsDestroyHeader","sid","genTsDataTokenMsg","genTsDataStreamTokenMsg","paddingBytes","genTsDataMsgHeaderParts","BaseMessage","bUInt8","bUInt16BE","bUInt32BE","bUInt64BE","EndpointTypeToParam","QueueDescriptorTypeToParam","QUEUE_PERMISSIONS_TO_BITS","ACCESS_TYPE_INT_TO_ENUM","ACCESS_TYPE_ENUM_TO_BITS","DISCARD_ENUM_TO_VALUE","addQueueProperties","skipAccessType","IGNORE","discardBehaviorValue","_readParameter","decoder","bufMethod","getParameter","getBuffer","getBegin","masked","ENDPOINT_ID","GRANTED_PERMISSIONS","getLastMsgIdReceived","MAX_DELIVERED_UNACKED_MESSAGES_PER_FLOW","SPOOLER_UNIQUE_ID","REJECT","endpointTypeParam","lastMsgIdSent","adMsg","topicSubscription","wantFlowChangeUpdate","lastMsgIdReceived","hasNackSupport","endpointBytes","endpointType","rsValue","replayStartTimeMs","replayStartTimeNs","multiply","UNSUBSCRIBE","lastMessageIdAcked","applicationAckRanges","allOutcomes","_parameters","bufSmf","chunkCount","fourbyte","SMFClientCtrlAuthType","BOOLEAN_CAPS_BITS","CLIENT_CAPS_VALUES","p2pParam","P2PTOPIC","vpnParam","MSGVPNNAME","vridParam","VRIDNAME","getUserIdValue","userIdParam","USERID","capParam","ROUTER_CAPABILITIES","prmParseCapabilitiesValue","SOFTWAREVERSION","SOFTWAREDATE","PLATFORM","PHYSICALROUTERNAME","dto","local","network","strDtoPriority","strCapabilities","capsIn","CT","boolCapCount","capsByte","bitIndex","msbIndex","capsKey","sanityLoop","capLen","sprop","compressedTLS","plaintextTLS","clientCapsToStr","clientCapList","highestCap","capBits","cap","cc","isClientCert","DELIVERTOONEPRIORITY","prmGetDtoPriorityValue","CLIENTDESC","AUTHENTICATION_SCHEME","CLIENTNAME","formattedDate","SSL_DOWNGRADE","clientCaps","CLIENT_CAPABILITIES","keepaliveVal","KEEP_ALIVE_INTERVAL","UPDATE","appdesc","strName","encodeResult","ttl","smf_msgLen","smf_tqd","unknownProtoFlag","begin","_uh","_begin","getEnd","SMF_SMP_FLAG_TOPIC","_encodedQueueName","_encodedClientName","isFlag","flagMask","setFlag","smp","SMF_SMP_FLAG_RESPREQUIRED","SMF_SMP_FLAG_PERSIST","TRANSACTIONCTRL","XACTRL","TRANSPORT_PRIORITY","LINGER_OPTION","NUM_MESSAGES_SPOOLED","PUBLISHER_FLAGS","APP_MSG_ID_TYPE","QUEUE_ENDPOINT_HASH","PAYLOAD","ACK_SEQUENCE_NUMBER","ACK_RECONCILE_REQUEST","START_OF_ACK_RECONCILE","TIMESTAMP","BRIDGE_MSG_VPN_NAME","BRIDGE_ROUTER_NAME","BRIDGE_VERSION","CONNECTION_TYPE","ROUTER_CAPABILITIES_EXTENDED","REQUIRES_RELEASE_7","PADDING","PARTITION_KEY_HASH","CSPF","CSMP","PUBMSG","XMLLINK","WSE","SEMP","SUBCTRL","PUBCTRL","SMRP","SMF_IN_SMF","SMF_IN_RV","ADCTRL_PASSTHROUGH","FLAG_FILTER","FLAG_PERSIST","SMF_SMP_FLAG_DELIVERALWAYS","ADDSUBSCRIPTIONFORCLIENTNAME","REMSUBSCRIPTIONFORCLIENTNAME","DESTROY","DESTROY_RESP","DATA","DATA_TOKEN","DATA_STREAM_TOKEN","CacheContext","CacheRequest","cacheCBFunction","getCallback","getUserObject","cacheRequestCorrelationId","CacheGetResultCode","INVALID","matchTopic","sessionID","isSuspect","hasMore","hasTimestamps","messageStream","clusterNameStream","CacheGetResult","readFromStream","FULFILL","FLOW_THRU","_returnCode","_subcode","_topic","getReturnCode","getReturnSubcode","getTopic","getError","CacheRequestType","BULK_MSG","REGISTER_REQUEST","REGISTER_RESPONSE","HEARTBEAT_REQUEST","HEARTBEAT_RESPONSE","EVENT_NOTIFY","EVENT_ACK","ACTION_REQUEST","ACTION_RESPONSE","GET_REQUEST","GET_RESPONSE","GET_NEXT_REQUEST","GET_NEXT_RESPONSE","SET_REQUEST","SET_RESPONSE","GET_MSG_REQUEST","GET_MSG_RESPONSE","GET_NEXT_MSG_REQUEST","GET_NEXT_MSG_RESPONSE","UNREGISTER_IND","BULK_SET_REQUEST","BULK_SET_RESPONSE","PURGE_MSG_SEQUENCE_REQUEST","PURGE_MSG_SEQUENCE_RESPONSE","GET_MSG_SEQUENCE_REQUEST","GET_NEXT_MSG_SEQUENCE_REQUEST","GET_TOPIC_INFO_REQUEST","GET_TOPIC_INFO_RESPONSE","READY_MARKER","GET_TOPIC_INFO_REQUEST_RANGE","SYNC_READY_MARKER","VACUUM_REQUEST","VACUUM_RESPONSE","cacheSession","cacheMessageType","requestID","cbInfo","liveDataAction","cacheName","subscriptionWaiting","replyReceived","dataReceived","correlationID","childRequests","parentRequest","queuedLiveData","liveDataFulfilled","timeoutHandle","getRootRequest","addChild","childIn","child","removeChild","childIndex","collapse","clearRequestTimeout","getRequestID","getCBInfo","getLiveDataAction","startRequestTimeout","cacheSessionTimeoutCB","timeoutMsec","VERSION","DEFAULT_REPLY_SIZE_LIMIT","REPLY_SIZE_LIMIT","FAIL","INCOMPLETE","REQUEST_COMPLETE","LIVE_DATA_FULFILL","ERROR_RESPONSE","INVALID_SESSION","REQUEST_ALREADY_IN_PROGRESS","NO_DATA","SUSPECT_DATA","CACHE_SESSION_DISPOSED","maxAgeSec","maxMessages","includeOtherClusters","cachePrefix","getCacheName","setCacheName","getMaxMessageAgeSec","setMaxMessageAgeSec","getMaxMessages","setMaxMessages","getTimeoutMsec","setTimeoutMsec","CacheSessionSubscribeInfo","SessionLib","noOp","privateInterface","_validateProps","_outstandingRequests","_outstandingIDs","_nextMessageCallbackInfo","_nextSessionEventCallbackInfo","_sessionIF","_connectToSession","_handleMessage","_createCompoundEventCB","nextDelegate","rfuObject","_handleSessionEvent","passEvent","_processSessionEvent","cbUserObject","_sendToNextDelegate","_checkSubscriptionStatus","_getOutstandingRequest","_handleSubscriptionSuccess","_handleSubscriptionError","requestIn","_startCacheRequest","_terminateRequest","_checkRequestCompletion","parent","_unregisterRequest","_sendSeeOther","cacheGetResult","clusterName","childRequest","_registerRequest","_handleCacheRequestTimeout","_sendGetNext","nextRequest","_relevantLiveData","streamField","_incStat","CACHE_REQUEST_FULFILL_DISCARD_RESPONSE","_decodeMessageStream","RX_CACHE_MSG","exception","checkCID","_performLiveDataAction","_fulfillRequest","_trackCompletionStats","_notifyCallback","toTerminate","sendCacheRequest","arguments","_notifyCallbackError","matchingRequestKeys","conflictKeys","conflictRequest","waitingForSubscribeInfo","_subscriptionWaiting","_handleCacheRequestFailed","suppressClusters","round","CACHE_REQUEST_SENT","CACHE_REQUEST_OK_RESPONSE","CACHE_REQUEST_LIVE_DATA_FULFILL","CACHE_REQUEST_INCOMPLETE_RESPONSE","CACHE_REQUEST_FAIL_RESPONSE","innerMessage","cacheRequest","TX_PERSISTENT_REDELIVERED","TX_NONPERSISTENT_REDELIVERED","TX_PERSISTENT_BYTES_REDELIVERED","TX_NONPERSISTENT_BYTES_REDELIVERED","RX_DIRECT_MSGS","RX_PERSISTENT_MSGS","RX_NONPERSISTENT_MSGS","RX_DIRECT_BYTES","RX_PERSISTENT_BYTES","RX_NONPERSISTENT_BYTES","TX_WINDOW_CLOSE","_parent","_statsMap","TransportSessionStates","BaseSMFClient","rxSmfCB","rxMessageErrorCB","_rxSmfCB","_rxMessageErrorCB","_correlationCounter","SMF_MAX_CORRELATION","concatFrom","allocUnsafe","buf0","copy","readUInt32BEFrag","bufList","listOffsetParam","byteIndexParam","listOffset","byteIndex","BufferQueue","maxSize","_queue","_maxSize","peekView","oIndex","put","adaptData","advance","done","chunk","SMF_LOST_FRAMING_THRESHOLD","logPeekBuffer","bufPair","BufferSMFClient","_incomingBuffer","rxDataString","_rxDataCB","rxDataArrayBuffer","rxDataBuffer","putSuccess","messageLen","msgBuffer","_sessionId","navigator","appVersion","TransportBase","eventCB","client","transportProps","_ssl","_client","_eventCB","_props","immediate","forceFailure","beginDowngrade","_interceptor","removed","installed","urlParts","validSchemes","useSSL","WebTransportCapabilities","TransportClientStats","TcpRawTransport","CompressedTransport","TlsOnlyTransport","TcpTlsTransport","WebTransport","getId","compressingLayer","plaintextTransport","setClientStats","setUnderlyingTransport","tlsLayer","uncompressedTransport","rehome","encryptedTransport","compress","tlsShutdown","precallback","WebTransportsLib","lutTransportProtocols","protocols","StateBase64","StateBinary","StateStreamingAndBinary","StateWebSocketBinary","TransportProtocolHandler","transport","downgradeTransport","TransportConstructor","switchState","onEnter","completeDowngrade","canCompleteDowngrade","getNextState","newState","INVALID_STATE_FOR_OPERATION","DOWNGRADE_FAILED","DOWNGRADE_SUCCEEDED","TransportSessionEvent","tsEventCode","_transportEventCode","_sid","getResponseCode","transportEventCode","TransportSessionState","WAITING_FOR_CREATE","WAITING_FOR_DESTROY","CONNECTION_FAILED","TSHState","tpProtocol","exitCallback","nextState","_transportProtocol","_exitCallback","_nextState","_unsupportedRuntimeMessage","userAgent","setNextState","getUseSsl","validateLegal","HTTPLib","HTTPConnection","HTTPTransportSession","sendXhrBinary","sendXhrText","TimingBucket","XHRFactory","SOL_CONNECTION_DEBUG","prependOrigin","location","origin","getTs","WaitedToken","HadToken","ReturnedToken","bucketCount","base64Enc","streamProgressEvents","rxDataCb","connectionErrorCb","contentType","connectionClose","Options","_streamProgressBytes","_xhr","_rxDataCb","_connErrorCb","_reqActive","_REQCOUNTER","_REQBASE","_handleAbortedReq","browserSupportsXhrBinary","recStat","LastGotToken","LastSendMsg","waitedTok","hadToken","LastGotData","LastReturnToken","returnedToken","attempt","maxRetry","abort","open","onreadystatechange","xhrStateChange","setRequestHeader","sentdata","readyState","RS_LOADING","LOADING","RS_DONE","DONE","status","responseType","responseText","decodedData","statusText","responseTextLen","sentdataLen","responseTextDump","nextMaxRetry","isUsingBase64","xhr","check","onprogress","WebTransportSessionBase","PacketReadState","READING_HEADER","STREAMING","MSIE_TRANSPORT_PADDING","adaptURL","baseUrl","_haveToken","_confMaxWebPayload","_maxPayloadBytes","_destroyTimer","_destroyTimeout","_createUrl","_routerUrl","_rxChannelClient","_httpSendConn","_httpReceiveConn","_smfDataTokenTSHeader","_routerTag","_useBinaryTransport","_useStreamingTransport","_streamingTransportPadding","_packetReadState","agent","_contentType","connectTimerExpiry","destroyCleanup","updateMaxWebPayload","trLessEncapSMF","_state","connectInternal","_connError","_createConn","handleCreateConnFailure","createMsg","createConnectTimeout","connError","cancelConnectTimeout","destroyTimerExpiry","handleRxDataToken","handleSendFailure","destroyMsg","_queuedData","enqueueData","remainder","allowEnqueue","enqueueFailNoSpace","transportPacketLen","_smfDataTSHeaderParts","_clientstats","_queuedDataSize","initPreformattedHeaders","_flushCallback","sendQueuedData","getQueuedDataToSend","_canSendNeeded","tsRc","smfresponse","useBase64","useStreaming","handleRxStreaming","handleSmfMessage","handleSmfParseError","handleRxData","handleDestroyResponse","cancelDestroyTimeout","innerResponse","tsmsg","TotalPayloadToRead","smfErrResponse","responseErrStr","handleRxError","errorInfo","asyncSendEvent","finalize","sendXhrBinaryMSIE10","overrideMimeType","sendXhrBinaryXHR2","connClose","allowFail","XMLHttpRequest","exitCb","WebSocketTransportSession","browserSupportsBinaryWebSockets","browserSupportsStreamingResponse","WebTransportEvent","DOWNGRADE","WebTransportState","WebTransportFSM","transportIn","WebTransportDown","wEvent","WebTransportConnecting","destroyInternal","_destroyMsg","WebTransportDestroying","getConnError","_eventReason","notifyEvent","_transportEvent","attemptDowngrade","WebTransportUp","WebTransportDowngrading","DOWNGRADING","notifyDowngradeFailed","_downgradeMsg","DESTROYING","tsEvent","MAX_BUFFERED_AMOUNT_QUERY_INTERVAL_MS","bytesAllowed","getBufferedAmount","_bufferedAmountQueryIntervalInMsecs","_bufferedAmountQueryIntervalDelayMultiplier","elemLength","_transportHandler","_webTransportFsm","handleDestroyed","_transportSession","_lastDowngradeSucceeded","errorMsg","_socket","_sender","WebSocketCloseCodes","1000","1001","1002","1003","1004","1005","1006","1007","1008","1009","1010","1011","1012","1013","1014","1015","globalContext","MyWebSocket","WebSocket","_bufferedAmountQueryTimer","onOpen","onClose","originalSocket","msgBuf","wasClean","onDrain","maybeEmitCanSend","maybeEmitFlush","onBufferedAmountPoll","scheduleQuery","onError","WAITING_FOR_CONNECT","onMessage","binaryType","onopen","onmessage","onclose","onerror","force","bufferAllow","maxPayloadBytes","close","cancelQuery","bufferedAmount","validator","validatorArgs","typeInstance","typeInstanceDesc","boolean","allowUndefined","allowEmpty","allowDuplicate","ele","valArrayOfString","typedesc","cloneObj","CLONE_CIRCULAR","CLONE_DEPTH","acc","scope","hasWorkingUrl","forceJURL","u","URL","pathname","relative","relativePathDotMapping","_scheme","_schemeData","_username","_host","_port","_path","_query","_fragment","_isInvalid","_isRelative","isRelativeScheme","scheme","IDNAToASCII","percentEscape","unicode","percentEscapeQuery","EOF","ALPHA","ALPHANUMERIC","stateOverride","errors","cursor","seenAt","seenBracket","loop","nextC","nextNextC","cp","tempC","temp","PolyfillURL","authority","port","search","hash","OriginalURL","createObjectURL","revokeObjectURL","_instanceof","nativeMap","nativeSet","nativePromise","Promise","depth","allParents","allChildren","useBuffer","_clone","proto","reject","then","__isArray","__isRegExp","RegExp","__getRegExpFlags","__isDate","getPrototypeOf","keyChild","valueChild","entryChild","getOwnPropertySymbols","symbols","symbol","allPropertyNames","propertyName","clonePrototype","emptyCloneFunc","__objToStr","regExpOptions","global","ignoreCase","multiline","WINDOWS_VERSION_MAP","DEFAULT","BROWSER_PROCESS","getBrowserAgentInfo","navObj","agentStr","browsers","agentInfo","os","arch","agentHas","strs","firstValue","vals","rule","exec","versionStrs","versionTests","parenParts","versionPart","versionMatch","versionTest","safeEncode","browserAgentInfo","arg","PAD_LEFT","PAD_RIGHT","LUT_PRINTABLE","padLeftRight","minLen","padSide","padChar","leastSpaces","spaces","capitalizeWord","isEmptyFun","capitalize","lastChar","hexdump","printable","spacer","linelen","sLength","heredoc","literals","substitutions","subst","buckets","normalized","cont","MODE","TARGET","FORMATTED_DATE","pad","YYYY","SUMMARY","EPSILON","BaseChecks","instanceOfAny","types","truthy","fn","rangeGe","rangeMinInclusive","rangeGt","rangeMin","rangeLe","rangeMaxInclusive","rangeLt","rangeMax","rangeCompare","operator","operand","epsilon","expected","member","function","orNull","orUndefined","orNothing","thenGen","doOp","elseFn","when","condition","unless","NO_OBJ","objectValues","subcodeSummary","got","expectedStr","gotStr","validateError","typename","memberOfEnum","names","isEnumMemberOrNothing","isInstanceOfOrNull","isInstanceOfOrUndefined","isMember","memberOf","isNumberOrNull","isRangeCompare","isStringOrNull","toByteArray","fromByteArray","revLookup","Arr","getLens","b64","validLen","placeHoldersLen","lens","_byteLength","curByte","tripletToBase64","num","encodeChunk","uint8","extraBytes","parts","maxChunkLength","len2","opts","seen","stylize","stylizeNoColor","colors","showHidden","_extend","isUndefined","customInspect","stylizeWithColor","formatValue","styles","styleType","style","isNull","hasOwn","prop","isRegExp","re","isObject","objectToString","isError","isDate","o","arrayToHash","formatArray","recurseTimes","visibleKeys","l","formatProperty","formatError","primitive","formatPrimitive","braces","toUTCString","reduceToSingleString","JSON","stringify","simple","prev","cur","numLinesEst","base64","ieee754","customInspectSymbol","Symbol","SlowBuffer","INSPECT_MAX_BYTES","K_MAX_LENGTH","kMaxLength","TYPED_ARRAY_SUPPORT","typedArraySupport","foo","setPrototypeOf","createBuffer","RangeError","encodingOrOffset","TypeError","poolSize","isView","fromArrayView","isInstance","fromArrayBuffer","SharedArrayBuffer","fromObject","toPrimitive","assertSize","alloc","checked","allocUnsafeSlow","isEncoding","actual","write","fromArrayLike","arrayView","numberIsNaN","_isBuffer","y","mustMatch","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","swap16","swap32","swap64","toLocaleString","thisStart","thisEnd","thisCopy","targetCopy","bidirectionalIndexOf","dir","arrayIndexOf","lastIndexOf","indexSize","arrLength","read","foundIndex","found","hexWrite","strLen","parsed","utf8Write","blitBuffer","asciiWrite","asciiToBytes","base64Write","ucs2Write","utf16leToBytes","isFinite","toJSON","res","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","MAX_ARGUMENTS_LENGTH","codePoints","out","hexSliceLookupTable","newBuf","checkOffset","ext","readUintLE","readUIntLE","noAssert","mul","readUintBE","readUint8","readUint16LE","readUInt16LE","readUint16BE","readUint32LE","readUInt32LE","readUint32BE","readBigUInt64LE","defineBigIntMethod","validateNumber","first","last","boundsError","lo","hi","BigInt","readBigUInt64BE","readIntLE","readIntBE","readInt16LE","readInt32LE","readBigInt64LE","readBigInt64BE","readFloatLE","readDoubleLE","checkInt","writeUintLE","writeUIntLE","maxBytes","writeUintBE","writeUIntBE","writeUint8","writeUInt8","writeUint16LE","writeUInt16LE","writeUint16BE","writeUInt16BE","writeUint32LE","writeUInt32LE","writeUint32BE","writeUInt32BE","wrtBigUInt64LE","checkIntBI","wrtBigUInt64BE","writeBigUInt64LE","writeBigUInt64BE","writeIntLE","limit","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeBigInt64LE","writeBigInt64BE","checkIEEE754","writeFloat","littleEndian","writeFloatLE","writeFloatBE","writeDouble","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","E","sym","getMessage","Base","received","isInteger","addNumericalSeparator","checkBounds","ERR_OUT_OF_RANGE","ERR_INVALID_ARG_TYPE","ERR_BUFFER_OUT_OF_BOUNDS","INVALID_BASE64_RE","base64clean","units","leadSurrogate","src","dst","alphabet","table","i16","BufferBigIntNotDefined","R","Reflect","ReflectApply","receiver","ReflectOwnKeys","ownKeys","ProcessEmitWarning","warning","NumberIsNaN","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","setMaxListeners","_getMaxListeners","that","getMaxListeners","doError","events","er","handler","listeners","arrayClone","_addListener","prepend","newListener","unshift","warned","w","onceWrapper","fired","wrapFn","_onceWrap","wrapped","originalListener","spliceOne","off","_listeners","unwrap","evlistener","unwrapListeners","rawListeners","eventNames","errorListener","resolver","eventTargetAgnosticAddListener","addErrorHandlerIfEventEmitter","addEventListener","wrapListener","removeEventListener","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","wasm","WebAssembly","Instance","Module","unsigned","__isLong__","ctz32","clz32","INT_CACHE","UINT_CACHE","fromInt","cachedObj","cache","TWO_PWR_64_DBL","MAX_UNSIGNED_VALUE","TWO_PWR_63_DBL","MIN_VALUE","neg","TWO_PWR_32_DBL","lowBits","highBits","pow_dbl","radix","radixToPower","power","TWO_PWR_16_DBL","TWO_PWR_24_DBL","TWO_PWR_24","ONE","UONE","NEG_ONE","LongPrototype","toInt","isZero","isNegative","radixLong","div","rem1","rem","remDiv","intval","digits","getHighBits","getHighBitsUnsigned","getLowBits","getLowBitsUnsigned","bit","eqz","isPositive","isOdd","isEven","notEquals","neq","ne","lessThan","comp","lessThanOrEqual","lte","le","greaterThan","greaterThanOrEqual","ge","thisNeg","otherNeg","negate","not","addend","a48","a32","a16","a00","b48","b32","b16","b00","c48","c32","c16","c00","subtract","subtrahend","multiplier","divide","divisor","approx","halfThis","shr","shl","toUnsigned","shru","log2","ceil","delta","approxRes","approxRem","modulo","mod","countLeadingZeros","clz","countTrailingZeros","ctz","and","or","xor","shiftLeft","shiftRight","shiftRightUnsigned","shr_u","rotateLeft","rotl","rotateRight","rotr","toSigned","toBytes","toBytesLE","fromBytes","fromBytesLE","fromBytesBE","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","globalThis","__webpack_exports__"],"sourceRoot":""}